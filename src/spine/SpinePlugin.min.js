(()=>{var t={792:t=>{"use strict";var e=Object.prototype.hasOwnProperty,i="~";function s(){}function r(t,e,i){this.fn=t,this.context=e,this.once=i||!1}function n(t,e,s,n,a){if("function"!=typeof s)throw new TypeError("The listener must be a function");var o=new r(s,n||t,a),h=i?i+e:e;return t._events[h]?t._events[h].fn?t._events[h]=[t._events[h],o]:t._events[h].push(o):(t._events[h]=o,t._eventsCount++),t}function a(t,e){0==--t._eventsCount?t._events=new s:delete t._events[e]}function o(){this._events=new s,this._eventsCount=0}Object.create&&(s.prototype=Object.create(null),(new s).__proto__||(i=!1)),o.prototype.eventNames=function(){var t,s,r=[];if(0===this._eventsCount)return r;for(s in t=this._events)e.call(t,s)&&r.push(i?s.slice(1):s);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(t)):r},o.prototype.listeners=function(t){var e=i?i+t:t,s=this._events[e];if(!s)return[];if(s.fn)return[s.fn];for(var r=0,n=s.length,a=new Array(n);r<n;r++)a[r]=s[r].fn;return a},o.prototype.listenerCount=function(t){var e=i?i+t:t,s=this._events[e];return s?s.fn?1:s.length:0},o.prototype.emit=function(t,e,s,r,n,a){var o=i?i+t:t;if(!this._events[o])return!1;var h,l,c=this._events[o],u=arguments.length;if(c.fn){switch(c.once&&this.removeListener(t,c.fn,void 0,!0),u){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,e),!0;case 3:return c.fn.call(c.context,e,s),!0;case 4:return c.fn.call(c.context,e,s,r),!0;case 5:return c.fn.call(c.context,e,s,r,n),!0;case 6:return c.fn.call(c.context,e,s,r,n,a),!0}for(l=1,h=new Array(u-1);l<u;l++)h[l-1]=arguments[l];c.fn.apply(c.context,h)}else{var d,f=c.length;for(l=0;l<f;l++)switch(c[l].once&&this.removeListener(t,c[l].fn,void 0,!0),u){case 1:c[l].fn.call(c[l].context);break;case 2:c[l].fn.call(c[l].context,e);break;case 3:c[l].fn.call(c[l].context,e,s);break;case 4:c[l].fn.call(c[l].context,e,s,r);break;default:if(!h)for(d=1,h=new Array(u-1);d<u;d++)h[d-1]=arguments[d];c[l].fn.apply(c[l].context,h)}}return!0},o.prototype.on=function(t,e,i){return n(this,t,e,i,!1)},o.prototype.once=function(t,e,i){return n(this,t,e,i,!0)},o.prototype.removeListener=function(t,e,s,r){var n=i?i+t:t;if(!this._events[n])return this;if(!e)return a(this,n),this;var o=this._events[n];if(o.fn)o.fn!==e||r&&!o.once||s&&o.context!==s||a(this,n);else{for(var h=0,l=[],c=o.length;h<c;h++)(o[h].fn!==e||r&&!o[h].once||s&&o[h].context!==s)&&l.push(o[h]);l.length?this._events[n]=1===l.length?l[0]:l:a(this,n)}return this},o.prototype.removeAllListeners=function(t){var e;return t?(e=i?i+t:t,this._events[e]&&a(this,e)):(this._events=new s,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=i,o.EventEmitter=o,t.exports=o},3437:t=>{(function(){"use strict";var e=(()=>{var t=Object.defineProperty,e=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,r=(e,i,s)=>(((e,i,s)=>{i in e?t(e,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[i]=s})(e,"symbol"!=typeof i?i+"":i,s),s),n={};((e,i)=>{for(var s in i)t(e,s,{get:i[s],enumerable:!0})})(n,{AlphaTimeline:()=>pt,Animation:()=>C,AnimationState:()=>Yt,AnimationStateAdapter:()=>Lt,AnimationStateData:()=>Ut,AssetManager:()=>Ai,AssetManagerBase:()=>ue,AtlasAttachmentLoader:()=>ae,Attachment:()=>A,AttachmentTimeline:()=>xt,BinaryInput:()=>Pe,BlendMode:()=>Ye,Bone:()=>le,BoneData:()=>oe,BoundingBoxAttachment:()=>Wt,CURRENT:()=>_t,CanvasTexture:()=>bi,ClippingAttachment:()=>qt,Color:()=>l,ConstraintData:()=>ce,CurveTimeline:()=>$,CurveTimeline1:()=>tt,CurveTimeline2:()=>et,DebugUtils:()=>x,DeformTimeline:()=>wt,Downloader:()=>de,DrawOrderTimeline:()=>At,Event:()=>fe,EventData:()=>pe,EventQueue:()=>Xt,EventTimeline:()=>yt,EventType:()=>Pt,FIRST:()=>Bt,FakeTexture:()=>Kt,HOLD_FIRST:()=>Vt,HOLD_MIX:()=>zt,HOLD_SUBSEQUENT:()=>Ot,IkConstraint:()=>me,IkConstraintData:()=>ge,IkConstraintTimeline:()=>St,IntSet:()=>a,Interpolation:()=>d,MathUtils:()=>u,MeshAttachment:()=>ee,MixBlend:()=>R,MixDirection:()=>Y,PathAttachment:()=>ie,PathConstraint:()=>Ae,PathConstraintData:()=>xe,PathConstraintMixTimeline:()=>kt,PathConstraintPositionTimeline:()=>It,PathConstraintSpacingTimeline:()=>Tt,PointAttachment:()=>se,Pool:()=>w,PositionMode:()=>we,Pow:()=>f,PowOut:()=>p,RGB2Timeline:()=>gt,RGBA2Timeline:()=>mt,RGBATimeline:()=>dt,RGBTimeline:()=>ft,RegionAttachment:()=>ne,RotateMode:()=>ye,RotateTimeline:()=>it,SETUP:()=>Nt,SUBSEQUENT:()=>Dt,ScaleTimeline:()=>at,ScaleXTimeline:()=>ot,ScaleYTimeline:()=>ht,SequenceTimeline:()=>Ct,ShearTimeline:()=>lt,ShearXTimeline:()=>ct,ShearYTimeline:()=>ut,Skeleton:()=>Te,SkeletonBinary:()=>Xe,SkeletonBounds:()=>ui,SkeletonClipping:()=>fi,SkeletonData:()=>ke,SkeletonJson:()=>pi,SkeletonRenderer:()=>Ii,Skin:()=>Ce,SkinEntry:()=>Ee,Slot:()=>Se,SlotData:()=>Re,SpacingMode:()=>ve,StringSet:()=>o,Texture:()=>Gt,TextureAtlas:()=>Jt,TextureAtlasPage:()=>$t,TextureAtlasRegion:()=>te,TextureFilter:()=>Ht,TextureRegion:()=>Zt,TextureWrap:()=>jt,TimeKeeper:()=>y,Timeline:()=>Q,TrackEntry:()=>Ft,TransformConstraint:()=>Me,TransformConstraintData:()=>Fe,TransformConstraintTimeline:()=>Mt,TransformMode:()=>he,TranslateTimeline:()=>st,TranslateXTimeline:()=>rt,TranslateYTimeline:()=>nt,Triangulator:()=>di,Utils:()=>g,Vector2:()=>v,VertexAttachment:()=>M,WindowedMean:()=>b});var a=class{array=new Array;add(t){let e=this.contains(t);return this.array[0|t]=0|t,!e}contains(t){return null!=this.array[0|t]}remove(t){this.array[0|t]=void 0}clear(){this.array.length=0}},o=class{entries={};size=0;add(t){let e=this.entries[t];return this.entries[t]=!0,!e&&(this.size++,!0)}addAll(t){let e=this.size;for(var i=0,s=t.length;i<s;i++)this.add(t[i]);return e!=this.size}contains(t){return this.entries[t]}clear(){this.entries={},this.size=0}},h=class{constructor(t=0,e=0,i=0,s=0){this.r=t,this.g=e,this.b=i,this.a=s}set(t,e,i,s){return this.r=t,this.g=e,this.b=i,this.a=s,this.clamp()}setFromColor(t){return this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a,this}setFromString(t){return t="#"==t.charAt(0)?t.substr(1):t,this.r=parseInt(t.substr(0,2),16)/255,this.g=parseInt(t.substr(2,2),16)/255,this.b=parseInt(t.substr(4,2),16)/255,this.a=8!=t.length?1:parseInt(t.substr(6,2),16)/255,this}add(t,e,i,s){return this.r+=t,this.g+=e,this.b+=i,this.a+=s,this.clamp()}clamp(){return this.r<0?this.r=0:this.r>1&&(this.r=1),this.g<0?this.g=0:this.g>1&&(this.g=1),this.b<0?this.b=0:this.b>1&&(this.b=1),this.a<0?this.a=0:this.a>1&&(this.a=1),this}static rgba8888ToColor(t,e){t.r=((4278190080&e)>>>24)/255,t.g=((16711680&e)>>>16)/255,t.b=((65280&e)>>>8)/255,t.a=(255&e)/255}static rgb888ToColor(t,e){t.r=((16711680&e)>>>16)/255,t.g=((65280&e)>>>8)/255,t.b=(255&e)/255}static fromString(t){return(new h).setFromString(t)}},l=h;r(l,"WHITE",new h(1,1,1,1)),r(l,"RED",new h(1,0,0,1)),r(l,"GREEN",new h(0,1,0,1)),r(l,"BLUE",new h(0,0,1,1)),r(l,"MAGENTA",new h(1,0,1,1));var c=class{static clamp(t,e,i){return t<e?e:t>i?i:t}static cosDeg(t){return Math.cos(t*c.degRad)}static sinDeg(t){return Math.sin(t*c.degRad)}static signum(t){return t>0?1:t<0?-1:0}static toInt(t){return t>0?Math.floor(t):Math.ceil(t)}static cbrt(t){let e=Math.pow(Math.abs(t),1/3);return t<0?-e:e}static randomTriangular(t,e){return c.randomTriangularWith(t,e,.5*(t+e))}static randomTriangularWith(t,e,i){let s=Math.random(),r=e-t;return s<=(i-t)/r?t+Math.sqrt(s*r*(i-t)):e-Math.sqrt((1-s)*r*(e-i))}static isPowerOfTwo(t){return t&&!(t&t-1)}},u=c;r(u,"PI",3.1415927),r(u,"PI2",2*c.PI),r(u,"radiansToDegrees",180/c.PI),r(u,"radDeg",c.radiansToDegrees),r(u,"degreesToRadians",c.PI/180),r(u,"degRad",c.degreesToRadians);var d=class{apply(t,e,i){return t+(e-t)*this.applyInternal(i)}},f=class extends d{power=2;constructor(t){super(),this.power=t}applyInternal(t){return t<=.5?Math.pow(2*t,this.power)/2:Math.pow(2*(t-1),this.power)/(this.power%2==0?-2:2)+1}},p=class extends f{constructor(t){super(t)}applyInternal(t){return Math.pow(t-1,this.power)*(this.power%2==0?-1:1)+1}},m=class{static arrayCopy(t,e,i,s,r){for(let n=e,a=s;n<e+r;n++,a++)i[a]=t[n]}static arrayFill(t,e,i,s){for(let r=e;r<i;r++)t[r]=s}static setArraySize(t,e,i=0){let s=t.length;if(s==e)return t;if(t.length=e,s<e)for(let r=s;r<e;r++)t[r]=i;return t}static ensureArrayCapacity(t,e,i=0){return t.length>=e?t:m.setArraySize(t,e,i)}static newArray(t,e){let i=new Array(t);for(let s=0;s<t;s++)i[s]=e;return i}static newFloatArray(t){if(m.SUPPORTS_TYPED_ARRAYS)return new Float32Array(t);{let e=new Array(t);for(let t=0;t<e.length;t++)e[t]=0;return e}}static newShortArray(t){if(m.SUPPORTS_TYPED_ARRAYS)return new Int16Array(t);{let e=new Array(t);for(let t=0;t<e.length;t++)e[t]=0;return e}}static toFloatArray(t){return m.SUPPORTS_TYPED_ARRAYS?new Float32Array(t):t}static toSinglePrecision(t){return m.SUPPORTS_TYPED_ARRAYS?Math.fround(t):t}static webkit602BugfixHelper(t,e){}static contains(t,e,i=!0){for(var s=0;s<t.length;s++)if(t[s]==e)return!0;return!1}static enumValue(t,e){return t[e[0].toUpperCase()+e.slice(1)]}},g=m;r(g,"SUPPORTS_TYPED_ARRAYS","undefined"!=typeof Float32Array);var x=class{static logBones(t){for(let e=0;e<t.bones.length;e++){let i=t.bones[e];console.log(i.data.name+", "+i.a+", "+i.b+", "+i.c+", "+i.d+", "+i.worldX+", "+i.worldY)}}},w=class{items=new Array;instantiator;constructor(t){this.instantiator=t}obtain(){return this.items.length>0?this.items.pop():this.instantiator()}free(t){t.reset&&t.reset(),this.items.push(t)}freeAll(t){for(let e=0;e<t.length;e++)this.free(t[e])}clear(){this.items.length=0}},v=class{constructor(t=0,e=0){this.x=t,this.y=e}set(t,e){return this.x=t,this.y=e,this}length(){let t=this.x,e=this.y;return Math.sqrt(t*t+e*e)}normalize(){let t=this.length();return 0!=t&&(this.x/=t,this.y/=t),this}},y=class{maxDelta=.064;framesPerSecond=0;delta=0;totalTime=0;lastTime=Date.now()/1e3;frameCount=0;frameTime=0;update(){let t=Date.now()/1e3;this.delta=t-this.lastTime,this.frameTime+=this.delta,this.totalTime+=this.delta,this.delta>this.maxDelta&&(this.delta=this.maxDelta),this.lastTime=t,this.frameCount++,this.frameTime>1&&(this.framesPerSecond=this.frameCount/this.frameTime,this.frameTime=0,this.frameCount=0)}},b=class{values;addedValues=0;lastValue=0;mean=0;dirty=!0;constructor(t=32){this.values=new Array(t)}hasEnoughData(){return this.addedValues>=this.values.length}addValue(t){this.addedValues<this.values.length&&this.addedValues++,this.values[this.lastValue++]=t,this.lastValue>this.values.length-1&&(this.lastValue=0),this.dirty=!0}getMean(){if(this.hasEnoughData()){if(this.dirty){let t=0;for(let e=0;e<this.values.length;e++)t+=this.values[e];this.mean=t/this.values.length,this.dirty=!1}return this.mean}return 0}},A=class{name;constructor(t){if(!t)throw new Error("name cannot be null.");this.name=t}},S=class extends A{id=S.nextID++;bones=null;vertices=[];worldVerticesLength=0;timelineAttachment=this;constructor(t){super(t)}computeWorldVertices(t,e,i,s,r,n){i=r+(i>>1)*n;let a=t.bone.skeleton,o=t.deform,h=this.vertices,l=this.bones;if(!l){o.length>0&&(h=o);let a=t.bone,l=a.worldX,c=a.worldY,u=a.a,d=a.b,f=a.c,p=a.d;for(let t=e,a=r;a<i;t+=2,a+=n){let e=h[t],i=h[t+1];s[a]=e*u+i*d+l,s[a+1]=e*f+i*p+c}return}let c=0,u=0;for(let t=0;t<e;t+=2){let t=l[c];c+=t+1,u+=t}let d=a.bones;if(0==o.length)for(let t=r,e=3*u;t<i;t+=n){let i=0,r=0,n=l[c++];for(n+=c;c<n;c++,e+=3){let t=d[l[c]],s=h[e],n=h[e+1],a=h[e+2];i+=(s*t.a+n*t.b+t.worldX)*a,r+=(s*t.c+n*t.d+t.worldY)*a}s[t]=i,s[t+1]=r}else{let t=o;for(let e=r,a=3*u,o=u<<1;e<i;e+=n){let i=0,r=0,n=l[c++];for(n+=c;c<n;c++,a+=3,o+=2){let e=d[l[c]],s=h[a]+t[o],n=h[a+1]+t[o+1],u=h[a+2];i+=(s*e.a+n*e.b+e.worldX)*u,r+=(s*e.c+n*e.d+e.worldY)*u}s[e]=i,s[e+1]=r}}}copyTo(t){this.bones?(t.bones=new Array(this.bones.length),g.arrayCopy(this.bones,0,t.bones,0,this.bones.length)):t.bones=null,this.vertices&&(t.vertices=g.newFloatArray(this.vertices.length),g.arrayCopy(this.vertices,0,t.vertices,0,this.vertices.length)),t.worldVerticesLength=this.worldVerticesLength,t.timelineAttachment=this.timelineAttachment}},M=S;r(M,"nextID",0);var I=class{id=I.nextID();regions;start=0;digits=0;setupIndex=0;constructor(t){this.regions=new Array(t)}copy(){let t=new I(this.regions.length);return g.arrayCopy(this.regions,0,t.regions,0,this.regions.length),t.start=this.start,t.digits=this.digits,t.setupIndex=this.setupIndex,t}apply(t,e){let i=t.sequenceIndex;-1==i&&(i=this.setupIndex),i>=this.regions.length&&(i=this.regions.length-1);let s=this.regions[i];e.region!=s&&(e.region=s,e.updateRegion())}getPath(t,e){let i=t,s=(this.start+e).toString();for(let t=this.digits-s.length;t>0;t--)i+="0";return i+=s,i}static nextID(){return I._nextID++}},T=I;r(T,"_nextID",0);var k=(t=>(t[t.hold=0]="hold",t[t.once=1]="once",t[t.loop=2]="loop",t[t.pingpong=3]="pingpong",t[t.onceReverse=4]="onceReverse",t[t.loopReverse=5]="loopReverse",t[t.pingpongReverse=6]="pingpongReverse",t))(k||{}),E=[0,1,2,3,4,5,6],C=class{name;timelines=[];timelineIds=new o;duration;constructor(t,e,i){if(!t)throw new Error("name cannot be null.");this.name=t,this.setTimelines(e),this.duration=i}setTimelines(t){if(!t)throw new Error("timelines cannot be null.");this.timelines=t,this.timelineIds.clear();for(var e=0;e<t.length;e++)this.timelineIds.addAll(t[e].getPropertyIds())}hasTimeline(t){for(let e=0;e<t.length;e++)if(this.timelineIds.contains(t[e]))return!0;return!1}apply(t,e,i,s,r,n,a,o){if(!t)throw new Error("skeleton cannot be null.");s&&0!=this.duration&&(i%=this.duration,e>0&&(e%=this.duration));let h=this.timelines;for(let s=0,l=h.length;s<l;s++)h[s].apply(t,e,i,r,n,a,o)}},R=(t=>(t[t.setup=0]="setup",t[t.first=1]="first",t[t.replace=2]="replace",t[t.add=3]="add",t))(R||{}),Y=(t=>(t[t.mixIn=0]="mixIn",t[t.mixOut=1]="mixOut",t))(Y||{}),F=0,X=1,P=2,L=3,D=4,B=5,O=6,V=7,z=8,N=9,_=10,U=11,W=12,q=13,G=14,H=15,j=16,Z=17,K=18,J=19,Q=class{propertyIds;frames;constructor(t,e){this.propertyIds=e,this.frames=g.newFloatArray(t*this.getFrameEntries())}getPropertyIds(){return this.propertyIds}getFrameEntries(){return 1}getFrameCount(){return this.frames.length/this.getFrameEntries()}getDuration(){return this.frames[this.frames.length-this.getFrameEntries()]}static search1(t,e){let i=t.length;for(let s=1;s<i;s++)if(t[s]>e)return s-1;return i-1}static search(t,e,i){let s=t.length;for(let r=i;r<s;r+=i)if(t[r]>e)return r-i;return s-i}},$=class extends Q{curves;constructor(t,e,i){super(t,i),this.curves=g.newFloatArray(t+18*e),this.curves[t-1]=1}setLinear(t){this.curves[t]=0}setStepped(t){this.curves[t]=1}shrink(t){let e=this.getFrameCount()+18*t;if(this.curves.length>e){let t=g.newFloatArray(e);g.arrayCopy(this.curves,0,t,0,e),this.curves=t}}setBezier(t,e,i,s,r,n,a,o,h,l,c){let u=this.curves,d=this.getFrameCount()+18*t;0==i&&(u[e]=2+d);let f=.03*(s-2*n+o),p=.03*(r-2*a+h),m=.006*(3*(n-o)-s+l),g=.006*(3*(a-h)-r+c),x=2*f+m,w=2*p+g,v=.3*(n-s)+f+.16666667*m,y=.3*(a-r)+p+.16666667*g,b=s+v,A=r+y;for(let t=d+18;d<t;d+=2)u[d]=b,u[d+1]=A,v+=x,y+=w,x+=m,w+=g,b+=v,A+=y}getBezierValue(t,e,i,s){let r=this.curves;if(r[s]>t){let n=this.frames[e],a=this.frames[e+i];return a+(t-n)/(r[s]-n)*(r[s+1]-a)}let n=s+18;for(s+=2;s<n;s+=2)if(r[s]>=t){let e=r[s-2],i=r[s-1];return i+(t-e)/(r[s]-e)*(r[s+1]-i)}e+=this.getFrameEntries();let a=r[n-2],o=r[n-1];return o+(t-a)/(this.frames[e]-a)*(this.frames[e+i]-o)}},tt=class extends ${constructor(t,e,i){super(t,e,[i])}getFrameEntries(){return 2}setFrame(t,e,i){t<<=1,this.frames[t]=e,this.frames[t+1]=i}getCurveValue(t){let e=this.frames,i=e.length-2;for(let s=2;s<=i;s+=2)if(e[s]>t){i=s-2;break}let s=this.curves[i>>1];switch(s){case 0:let s=e[i],r=e[i+1];return r+(t-s)/(e[i+2]-s)*(e[i+2+1]-r);case 1:return e[i+1]}return this.getBezierValue(t,i,1,s-2)}},et=class extends ${constructor(t,e,i,s){super(t,e,[i,s])}getFrameEntries(){return 3}setFrame(t,e,i,s){t*=3,this.frames[t]=e,this.frames[t+1]=i,this.frames[t+2]=s}},it=class extends tt{boneIndex=0;constructor(t,e,i){super(t,e,F+"|"+i),this.boneIndex=i}apply(t,e,i,s,r,n,a){let o=t.bones[this.boneIndex];if(!o.active)return;if(i<this.frames[0]){switch(n){case 0:return void(o.rotation=o.data.rotation);case 1:o.rotation+=(o.data.rotation-o.rotation)*r}return}let h=this.getCurveValue(i);switch(n){case 0:o.rotation=o.data.rotation+h*r;break;case 1:case 2:h+=o.data.rotation-o.rotation;case 3:o.rotation+=h*r}}},st=class extends et{boneIndex=0;constructor(t,e,i){super(t,e,X+"|"+i,P+"|"+i),this.boneIndex=i}apply(t,e,i,s,r,n,a){let o=t.bones[this.boneIndex];if(!o.active)return;let h=this.frames;if(i<h[0]){switch(n){case 0:return o.x=o.data.x,void(o.y=o.data.y);case 1:o.x+=(o.data.x-o.x)*r,o.y+=(o.data.y-o.y)*r}return}let l=0,c=0,u=Q.search(h,i,3),d=this.curves[u/3];switch(d){case 0:let t=h[u];l=h[u+1],c=h[u+2];let e=(i-t)/(h[u+3]-t);l+=(h[u+3+1]-l)*e,c+=(h[u+3+2]-c)*e;break;case 1:l=h[u+1],c=h[u+2];break;default:l=this.getBezierValue(i,u,1,d-2),c=this.getBezierValue(i,u,2,d+18-2)}switch(n){case 0:o.x=o.data.x+l*r,o.y=o.data.y+c*r;break;case 1:case 2:o.x+=(o.data.x+l-o.x)*r,o.y+=(o.data.y+c-o.y)*r;break;case 3:o.x+=l*r,o.y+=c*r}}},rt=class extends tt{boneIndex=0;constructor(t,e,i){super(t,e,X+"|"+i),this.boneIndex=i}apply(t,e,i,s,r,n,a){let o=t.bones[this.boneIndex];if(!o.active)return;if(i<this.frames[0]){switch(n){case 0:return void(o.x=o.data.x);case 1:o.x+=(o.data.x-o.x)*r}return}let h=this.getCurveValue(i);switch(n){case 0:o.x=o.data.x+h*r;break;case 1:case 2:o.x+=(o.data.x+h-o.x)*r;break;case 3:o.x+=h*r}}},nt=class extends tt{boneIndex=0;constructor(t,e,i){super(t,e,P+"|"+i),this.boneIndex=i}apply(t,e,i,s,r,n,a){let o=t.bones[this.boneIndex];if(!o.active)return;if(i<this.frames[0]){switch(n){case 0:return void(o.y=o.data.y);case 1:o.y+=(o.data.y-o.y)*r}return}let h=this.getCurveValue(i);switch(n){case 0:o.y=o.data.y+h*r;break;case 1:case 2:o.y+=(o.data.y+h-o.y)*r;break;case 3:o.y+=h*r}}},at=class extends et{boneIndex=0;constructor(t,e,i){super(t,e,L+"|"+i,D+"|"+i),this.boneIndex=i}apply(t,e,i,s,r,n,a){let o=t.bones[this.boneIndex];if(!o.active)return;let h,l,c=this.frames;if(i<c[0]){switch(n){case 0:return o.scaleX=o.data.scaleX,void(o.scaleY=o.data.scaleY);case 1:o.scaleX+=(o.data.scaleX-o.scaleX)*r,o.scaleY+=(o.data.scaleY-o.scaleY)*r}return}let d=Q.search(c,i,3),f=this.curves[d/3];switch(f){case 0:let t=c[d];h=c[d+1],l=c[d+2];let e=(i-t)/(c[d+3]-t);h+=(c[d+3+1]-h)*e,l+=(c[d+3+2]-l)*e;break;case 1:h=c[d+1],l=c[d+2];break;default:h=this.getBezierValue(i,d,1,f-2),l=this.getBezierValue(i,d,2,f+18-2)}if(h*=o.data.scaleX,l*=o.data.scaleY,1==r)3==n?(o.scaleX+=h-o.data.scaleX,o.scaleY+=l-o.data.scaleY):(o.scaleX=h,o.scaleY=l);else{let t=0,e=0;if(1==a)switch(n){case 0:t=o.data.scaleX,e=o.data.scaleY,o.scaleX=t+(Math.abs(h)*u.signum(t)-t)*r,o.scaleY=e+(Math.abs(l)*u.signum(e)-e)*r;break;case 1:case 2:t=o.scaleX,e=o.scaleY,o.scaleX=t+(Math.abs(h)*u.signum(t)-t)*r,o.scaleY=e+(Math.abs(l)*u.signum(e)-e)*r;break;case 3:o.scaleX+=(h-o.data.scaleX)*r,o.scaleY+=(l-o.data.scaleY)*r}else switch(n){case 0:t=Math.abs(o.data.scaleX)*u.signum(h),e=Math.abs(o.data.scaleY)*u.signum(l),o.scaleX=t+(h-t)*r,o.scaleY=e+(l-e)*r;break;case 1:case 2:t=Math.abs(o.scaleX)*u.signum(h),e=Math.abs(o.scaleY)*u.signum(l),o.scaleX=t+(h-t)*r,o.scaleY=e+(l-e)*r;break;case 3:o.scaleX+=(h-o.data.scaleX)*r,o.scaleY+=(l-o.data.scaleY)*r}}}},ot=class extends tt{boneIndex=0;constructor(t,e,i){super(t,e,L+"|"+i),this.boneIndex=i}apply(t,e,i,s,r,n,a){let o=t.bones[this.boneIndex];if(!o.active)return;if(i<this.frames[0]){switch(n){case 0:return void(o.scaleX=o.data.scaleX);case 1:o.scaleX+=(o.data.scaleX-o.scaleX)*r}return}let h=this.getCurveValue(i)*o.data.scaleX;if(1==r)3==n?o.scaleX+=h-o.data.scaleX:o.scaleX=h;else{let t=0;if(1==a)switch(n){case 0:t=o.data.scaleX,o.scaleX=t+(Math.abs(h)*u.signum(t)-t)*r;break;case 1:case 2:t=o.scaleX,o.scaleX=t+(Math.abs(h)*u.signum(t)-t)*r;break;case 3:o.scaleX+=(h-o.data.scaleX)*r}else switch(n){case 0:t=Math.abs(o.data.scaleX)*u.signum(h),o.scaleX=t+(h-t)*r;break;case 1:case 2:t=Math.abs(o.scaleX)*u.signum(h),o.scaleX=t+(h-t)*r;break;case 3:o.scaleX+=(h-o.data.scaleX)*r}}}},ht=class extends tt{boneIndex=0;constructor(t,e,i){super(t,e,D+"|"+i),this.boneIndex=i}apply(t,e,i,s,r,n,a){let o=t.bones[this.boneIndex];if(!o.active)return;if(i<this.frames[0]){switch(n){case 0:return void(o.scaleY=o.data.scaleY);case 1:o.scaleY+=(o.data.scaleY-o.scaleY)*r}return}let h=this.getCurveValue(i)*o.data.scaleY;if(1==r)3==n?o.scaleY+=h-o.data.scaleY:o.scaleY=h;else{let t=0;if(1==a)switch(n){case 0:t=o.data.scaleY,o.scaleY=t+(Math.abs(h)*u.signum(t)-t)*r;break;case 1:case 2:t=o.scaleY,o.scaleY=t+(Math.abs(h)*u.signum(t)-t)*r;break;case 3:o.scaleY+=(h-o.data.scaleY)*r}else switch(n){case 0:t=Math.abs(o.data.scaleY)*u.signum(h),o.scaleY=t+(h-t)*r;break;case 1:case 2:t=Math.abs(o.scaleY)*u.signum(h),o.scaleY=t+(h-t)*r;break;case 3:o.scaleY+=(h-o.data.scaleY)*r}}}},lt=class extends et{boneIndex=0;constructor(t,e,i){super(t,e,B+"|"+i,O+"|"+i),this.boneIndex=i}apply(t,e,i,s,r,n,a){let o=t.bones[this.boneIndex];if(!o.active)return;let h=this.frames;if(i<h[0]){switch(n){case 0:return o.shearX=o.data.shearX,void(o.shearY=o.data.shearY);case 1:o.shearX+=(o.data.shearX-o.shearX)*r,o.shearY+=(o.data.shearY-o.shearY)*r}return}let l=0,c=0,u=Q.search(h,i,3),d=this.curves[u/3];switch(d){case 0:let t=h[u];l=h[u+1],c=h[u+2];let e=(i-t)/(h[u+3]-t);l+=(h[u+3+1]-l)*e,c+=(h[u+3+2]-c)*e;break;case 1:l=h[u+1],c=h[u+2];break;default:l=this.getBezierValue(i,u,1,d-2),c=this.getBezierValue(i,u,2,d+18-2)}switch(n){case 0:o.shearX=o.data.shearX+l*r,o.shearY=o.data.shearY+c*r;break;case 1:case 2:o.shearX+=(o.data.shearX+l-o.shearX)*r,o.shearY+=(o.data.shearY+c-o.shearY)*r;break;case 3:o.shearX+=l*r,o.shearY+=c*r}}},ct=class extends tt{boneIndex=0;constructor(t,e,i){super(t,e,B+"|"+i),this.boneIndex=i}apply(t,e,i,s,r,n,a){let o=t.bones[this.boneIndex];if(!o.active)return;if(i<this.frames[0]){switch(n){case 0:return void(o.shearX=o.data.shearX);case 1:o.shearX+=(o.data.shearX-o.shearX)*r}return}let h=this.getCurveValue(i);switch(n){case 0:o.shearX=o.data.shearX+h*r;break;case 1:case 2:o.shearX+=(o.data.shearX+h-o.shearX)*r;break;case 3:o.shearX+=h*r}}},ut=class extends tt{boneIndex=0;constructor(t,e,i){super(t,e,O+"|"+i),this.boneIndex=i}apply(t,e,i,s,r,n,a){let o=t.bones[this.boneIndex];if(!o.active)return;if(i<this.frames[0]){switch(n){case 0:return void(o.shearY=o.data.shearY);case 1:o.shearY+=(o.data.shearY-o.shearY)*r}return}let h=this.getCurveValue(i);switch(n){case 0:o.shearY=o.data.shearY+h*r;break;case 1:case 2:o.shearY+=(o.data.shearY+h-o.shearY)*r;break;case 3:o.shearY+=h*r}}},dt=class extends ${slotIndex=0;constructor(t,e,i){super(t,e,[V+"|"+i,z+"|"+i]),this.slotIndex=i}getFrameEntries(){return 5}setFrame(t,e,i,s,r,n){t*=5,this.frames[t]=e,this.frames[t+1]=i,this.frames[t+2]=s,this.frames[t+3]=r,this.frames[t+4]=n}apply(t,e,i,s,r,n,a){let o=t.slots[this.slotIndex];if(!o.bone.active)return;let h=this.frames,l=o.color;if(i<h[0]){let t=o.data.color;switch(n){case 0:return void l.setFromColor(t);case 1:l.add((t.r-l.r)*r,(t.g-l.g)*r,(t.b-l.b)*r,(t.a-l.a)*r)}return}let c=0,u=0,d=0,f=0,p=Q.search(h,i,5),m=this.curves[p/5];switch(m){case 0:let t=h[p];c=h[p+1],u=h[p+2],d=h[p+3],f=h[p+4];let e=(i-t)/(h[p+5]-t);c+=(h[p+5+1]-c)*e,u+=(h[p+5+2]-u)*e,d+=(h[p+5+3]-d)*e,f+=(h[p+5+4]-f)*e;break;case 1:c=h[p+1],u=h[p+2],d=h[p+3],f=h[p+4];break;default:c=this.getBezierValue(i,p,1,m-2),u=this.getBezierValue(i,p,2,m+18-2),d=this.getBezierValue(i,p,3,m+36-2),f=this.getBezierValue(i,p,4,m+54-2)}1==r?l.set(c,u,d,f):(0==n&&l.setFromColor(o.data.color),l.add((c-l.r)*r,(u-l.g)*r,(d-l.b)*r,(f-l.a)*r))}},ft=class extends ${slotIndex=0;constructor(t,e,i){super(t,e,[V+"|"+i]),this.slotIndex=i}getFrameEntries(){return 4}setFrame(t,e,i,s,r){t<<=2,this.frames[t]=e,this.frames[t+1]=i,this.frames[t+2]=s,this.frames[t+3]=r}apply(t,e,i,s,r,n,a){let o=t.slots[this.slotIndex];if(!o.bone.active)return;let h=this.frames,l=o.color;if(i<h[0]){let t=o.data.color;switch(n){case 0:return l.r=t.r,l.g=t.g,void(l.b=t.b);case 1:l.r+=(t.r-l.r)*r,l.g+=(t.g-l.g)*r,l.b+=(t.b-l.b)*r}return}let c=0,u=0,d=0,f=Q.search(h,i,4),p=this.curves[f>>2];switch(p){case 0:let t=h[f];c=h[f+1],u=h[f+2],d=h[f+3];let e=(i-t)/(h[f+4]-t);c+=(h[f+4+1]-c)*e,u+=(h[f+4+2]-u)*e,d+=(h[f+4+3]-d)*e;break;case 1:c=h[f+1],u=h[f+2],d=h[f+3];break;default:c=this.getBezierValue(i,f,1,p-2),u=this.getBezierValue(i,f,2,p+18-2),d=this.getBezierValue(i,f,3,p+36-2)}if(1==r)l.r=c,l.g=u,l.b=d;else{if(0==n){let t=o.data.color;l.r=t.r,l.g=t.g,l.b=t.b}l.r+=(c-l.r)*r,l.g+=(u-l.g)*r,l.b+=(d-l.b)*r}}},pt=class extends tt{slotIndex=0;constructor(t,e,i){super(t,e,z+"|"+i),this.slotIndex=i}apply(t,e,i,s,r,n,a){let o=t.slots[this.slotIndex];if(!o.bone.active)return;let h=o.color;if(i<this.frames[0]){let t=o.data.color;switch(n){case 0:return void(h.a=t.a);case 1:h.a+=(t.a-h.a)*r}return}let l=this.getCurveValue(i);1==r?h.a=l:(0==n&&(h.a=o.data.color.a),h.a+=(l-h.a)*r)}},mt=class extends ${slotIndex=0;constructor(t,e,i){super(t,e,[V+"|"+i,z+"|"+i,N+"|"+i]),this.slotIndex=i}getFrameEntries(){return 8}setFrame(t,e,i,s,r,n,a,o,h){t<<=3,this.frames[t]=e,this.frames[t+1]=i,this.frames[t+2]=s,this.frames[t+3]=r,this.frames[t+4]=n,this.frames[t+5]=a,this.frames[t+6]=o,this.frames[t+7]=h}apply(t,e,i,s,r,n,a){let o=t.slots[this.slotIndex];if(!o.bone.active)return;let h=this.frames,l=o.color,c=o.darkColor;if(i<h[0]){let t=o.data.color,e=o.data.darkColor;switch(n){case 0:return l.setFromColor(t),c.r=e.r,c.g=e.g,void(c.b=e.b);case 1:l.add((t.r-l.r)*r,(t.g-l.g)*r,(t.b-l.b)*r,(t.a-l.a)*r),c.r+=(e.r-c.r)*r,c.g+=(e.g-c.g)*r,c.b+=(e.b-c.b)*r}return}let u=0,d=0,f=0,p=0,m=0,g=0,x=0,w=Q.search(h,i,8),v=this.curves[w>>3];switch(v){case 0:let t=h[w];u=h[w+1],d=h[w+2],f=h[w+3],p=h[w+4],m=h[w+5],g=h[w+6],x=h[w+7];let e=(i-t)/(h[w+8]-t);u+=(h[w+8+1]-u)*e,d+=(h[w+8+2]-d)*e,f+=(h[w+8+3]-f)*e,p+=(h[w+8+4]-p)*e,m+=(h[w+8+5]-m)*e,g+=(h[w+8+6]-g)*e,x+=(h[w+8+7]-x)*e;break;case 1:u=h[w+1],d=h[w+2],f=h[w+3],p=h[w+4],m=h[w+5],g=h[w+6],x=h[w+7];break;default:u=this.getBezierValue(i,w,1,v-2),d=this.getBezierValue(i,w,2,v+18-2),f=this.getBezierValue(i,w,3,v+36-2),p=this.getBezierValue(i,w,4,v+54-2),m=this.getBezierValue(i,w,5,v+72-2),g=this.getBezierValue(i,w,6,v+90-2),x=this.getBezierValue(i,w,7,v+108-2)}if(1==r)l.set(u,d,f,p),c.r=m,c.g=g,c.b=x;else{if(0==n){l.setFromColor(o.data.color);let t=o.data.darkColor;c.r=t.r,c.g=t.g,c.b=t.b}l.add((u-l.r)*r,(d-l.g)*r,(f-l.b)*r,(p-l.a)*r),c.r+=(m-c.r)*r,c.g+=(g-c.g)*r,c.b+=(x-c.b)*r}}},gt=class extends ${slotIndex=0;constructor(t,e,i){super(t,e,[V+"|"+i,N+"|"+i]),this.slotIndex=i}getFrameEntries(){return 7}setFrame(t,e,i,s,r,n,a,o){t*=7,this.frames[t]=e,this.frames[t+1]=i,this.frames[t+2]=s,this.frames[t+3]=r,this.frames[t+4]=n,this.frames[t+5]=a,this.frames[t+6]=o}apply(t,e,i,s,r,n,a){let o=t.slots[this.slotIndex];if(!o.bone.active)return;let h=this.frames,l=o.color,c=o.darkColor;if(i<h[0]){let t=o.data.color,e=o.data.darkColor;switch(n){case 0:return l.r=t.r,l.g=t.g,l.b=t.b,c.r=e.r,c.g=e.g,void(c.b=e.b);case 1:l.r+=(t.r-l.r)*r,l.g+=(t.g-l.g)*r,l.b+=(t.b-l.b)*r,c.r+=(e.r-c.r)*r,c.g+=(e.g-c.g)*r,c.b+=(e.b-c.b)*r}return}let u=0,d=0,f=0,p=0,m=0,g=0,x=Q.search(h,i,7),w=this.curves[x/7];switch(w){case 0:let t=h[x];u=h[x+1],d=h[x+2],f=h[x+3],p=h[x+4],m=h[x+5],g=h[x+6];let e=(i-t)/(h[x+7]-t);u+=(h[x+7+1]-u)*e,d+=(h[x+7+2]-d)*e,f+=(h[x+7+3]-f)*e,p+=(h[x+7+4]-p)*e,m+=(h[x+7+5]-m)*e,g+=(h[x+7+6]-g)*e;break;case 1:u=h[x+1],d=h[x+2],f=h[x+3],p=h[x+4],m=h[x+5],g=h[x+6];break;default:u=this.getBezierValue(i,x,1,w-2),d=this.getBezierValue(i,x,2,w+18-2),f=this.getBezierValue(i,x,3,w+36-2),p=this.getBezierValue(i,x,4,w+54-2),m=this.getBezierValue(i,x,5,w+72-2),g=this.getBezierValue(i,x,6,w+90-2)}if(1==r)l.r=u,l.g=d,l.b=f,c.r=p,c.g=m,c.b=g;else{if(0==n){let t=o.data.color,e=o.data.darkColor;l.r=t.r,l.g=t.g,l.b=t.b,c.r=e.r,c.g=e.g,c.b=e.b}l.r+=(u-l.r)*r,l.g+=(d-l.g)*r,l.b+=(f-l.b)*r,c.r+=(p-c.r)*r,c.g+=(m-c.g)*r,c.b+=(g-c.b)*r}}},xt=class extends Q{slotIndex=0;attachmentNames;constructor(t,e){super(t,[_+"|"+e]),this.slotIndex=e,this.attachmentNames=new Array(t)}getFrameCount(){return this.frames.length}setFrame(t,e,i){this.frames[t]=e,this.attachmentNames[t]=i}apply(t,e,i,s,r,n,a){let o=t.slots[this.slotIndex];o.bone.active&&(1!=a?i<this.frames[0]?0!=n&&1!=n||this.setAttachment(t,o,o.data.attachmentName):this.setAttachment(t,o,this.attachmentNames[Q.search1(this.frames,i)]):0==n&&this.setAttachment(t,o,o.data.attachmentName))}setAttachment(t,e,i){e.setAttachment(i?t.getAttachment(this.slotIndex,i):null)}},wt=class extends ${slotIndex=0;attachment;vertices;constructor(t,e,i,s){super(t,e,[U+"|"+i+"|"+s.id]),this.slotIndex=i,this.attachment=s,this.vertices=new Array(t)}getFrameCount(){return this.frames.length}setFrame(t,e,i){this.frames[t]=e,this.vertices[t]=i}setBezier(t,e,i,s,r,n,a,o,h,l,c){let u=this.curves,d=this.getFrameCount()+18*t;0==i&&(u[e]=2+d);let f=.03*(s-2*n+o),p=.03*h-.06*a,m=.006*(3*(n-o)-s+l),g=.018*(a-h+.33333333),x=2*f+m,w=2*p+g,v=.3*(n-s)+f+.16666667*m,y=.3*a+p+.16666667*g,b=s+v,A=y;for(let t=d+18;d<t;d+=2)u[d]=b,u[d+1]=A,v+=x,y+=w,x+=m,w+=g,b+=v,A+=y}getCurvePercent(t,e){let i=this.curves,s=i[e];switch(s){case 0:let i=this.frames[e];return(t-i)/(this.frames[e+this.getFrameEntries()]-i);case 1:return 0}if(s-=2,i[s]>t){let r=this.frames[e];return i[s+1]*(t-r)/(i[s]-r)}let r=s+18;for(s+=2;s<r;s+=2)if(i[s]>=t){let e=i[s-2],r=i[s-1];return r+(t-e)/(i[s]-e)*(i[s+1]-r)}let n=i[r-2],a=i[r-1];return a+(1-a)*(t-n)/(this.frames[e+this.getFrameEntries()]-n)}apply(t,e,i,s,r,n,a){let o=t.slots[this.slotIndex];if(!o.bone.active)return;let h=o.getAttachment();if(!h)return;if(!(h instanceof M)||h.timelineAttachment!=this.attachment)return;let l=o.deform;0==l.length&&(n=0);let c=this.vertices,u=c[0].length,d=this.frames;if(i<d[0]){switch(n){case 0:return void(l.length=0);case 1:if(1==r)return void(l.length=0);l.length=u;let t=h;if(t.bones){r=1-r;for(f=0;f<u;f++)l[f]*=r}else{let e=t.vertices;for(var f=0;f<u;f++)l[f]+=(e[f]-l[f])*r}}return}if(l.length=u,i>=d[d.length-1]){let t=c[d.length-1];if(1==r)if(3==n){let e=h;if(e.bones)for(let e=0;e<u;e++)l[e]+=t[e];else{let i=e.vertices;for(let e=0;e<u;e++)l[e]+=t[e]-i[e]}}else g.arrayCopy(t,0,l,0,u);else switch(n){case 0:{let e=h;if(e.bones)for(let e=0;e<u;e++)l[e]=t[e]*r;else{let i=e.vertices;for(let e=0;e<u;e++){let s=i[e];l[e]=s+(t[e]-s)*r}}break}case 1:case 2:for(let e=0;e<u;e++)l[e]+=(t[e]-l[e])*r;break;case 3:let e=h;if(e.bones)for(let e=0;e<u;e++)l[e]+=t[e]*r;else{let i=e.vertices;for(let e=0;e<u;e++)l[e]+=(t[e]-i[e])*r}}return}let p=Q.search1(d,i),m=this.getCurvePercent(i,p),x=c[p],w=c[p+1];if(1==r)if(3==n){let t=h;if(t.bones)for(let t=0;t<u;t++){let e=x[t];l[t]+=e+(w[t]-e)*m}else{let e=t.vertices;for(let t=0;t<u;t++){let i=x[t];l[t]+=i+(w[t]-i)*m-e[t]}}}else for(let t=0;t<u;t++){let e=x[t];l[t]=e+(w[t]-e)*m}else switch(n){case 0:{let t=h;if(t.bones)for(let t=0;t<u;t++){let e=x[t];l[t]=(e+(w[t]-e)*m)*r}else{let e=t.vertices;for(let t=0;t<u;t++){let i=x[t],s=e[t];l[t]=s+(i+(w[t]-i)*m-s)*r}}break}case 1:case 2:for(let t=0;t<u;t++){let e=x[t];l[t]+=(e+(w[t]-e)*m-l[t])*r}break;case 3:let t=h;if(t.bones)for(let t=0;t<u;t++){let e=x[t];l[t]+=(e+(w[t]-e)*m)*r}else{let e=t.vertices;for(let t=0;t<u;t++){let i=x[t];l[t]+=(i+(w[t]-i)*m-e[t])*r}}}}},vt=class extends Q{events;constructor(t){super(t,vt.propertyIds),this.events=new Array(t)}getFrameCount(){return this.frames.length}setFrame(t,e){this.frames[t]=e.time,this.events[t]=e}apply(t,e,i,s,r,n,a){if(!s)return;let o=this.frames,h=this.frames.length;if(e>i)this.apply(t,e,Number.MAX_VALUE,s,r,n,a),e=-1;else if(e>=o[h-1])return;if(i<o[0])return;let l=0;if(e<o[0])l=0;else{l=Q.search1(o,e)+1;let t=o[l];for(;l>0&&o[l-1]==t;)l--}for(;l<h&&i>=o[l];l++)s.push(this.events[l])}},yt=vt;r(yt,"propertyIds",[""+W]);var bt=class extends Q{drawOrders;constructor(t){super(t,bt.propertyIds),this.drawOrders=new Array(t)}getFrameCount(){return this.frames.length}setFrame(t,e,i){this.frames[t]=e,this.drawOrders[t]=i}apply(t,e,i,s,r,n,a){if(1==a)return void(0==n&&g.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length));if(i<this.frames[0])return void(0!=n&&1!=n||g.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length));let o=Q.search1(this.frames,i),h=this.drawOrders[o];if(h){let e=t.drawOrder,i=t.slots;for(let t=0,s=h.length;t<s;t++)e[t]=i[h[t]]}else g.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length)}},At=bt;r(At,"propertyIds",[""+q]);var St=class extends ${ikConstraintIndex=0;constructor(t,e,i){super(t,e,[G+"|"+i]),this.ikConstraintIndex=i}getFrameEntries(){return 6}setFrame(t,e,i,s,r,n,a){t*=6,this.frames[t]=e,this.frames[t+1]=i,this.frames[t+2]=s,this.frames[t+3]=r,this.frames[t+4]=n?1:0,this.frames[t+5]=a?1:0}apply(t,e,i,s,r,n,a){let o=t.ikConstraints[this.ikConstraintIndex];if(!o.active)return;let h=this.frames;if(i<h[0]){switch(n){case 0:return o.mix=o.data.mix,o.softness=o.data.softness,o.bendDirection=o.data.bendDirection,o.compress=o.data.compress,void(o.stretch=o.data.stretch);case 1:o.mix+=(o.data.mix-o.mix)*r,o.softness+=(o.data.softness-o.softness)*r,o.bendDirection=o.data.bendDirection,o.compress=o.data.compress,o.stretch=o.data.stretch}return}let l=0,c=0,u=Q.search(h,i,6),d=this.curves[u/6];switch(d){case 0:let t=h[u];l=h[u+1],c=h[u+2];let e=(i-t)/(h[u+6]-t);l+=(h[u+6+1]-l)*e,c+=(h[u+6+2]-c)*e;break;case 1:l=h[u+1],c=h[u+2];break;default:l=this.getBezierValue(i,u,1,d-2),c=this.getBezierValue(i,u,2,d+18-2)}0==n?(o.mix=o.data.mix+(l-o.data.mix)*r,o.softness=o.data.softness+(c-o.data.softness)*r,1==a?(o.bendDirection=o.data.bendDirection,o.compress=o.data.compress,o.stretch=o.data.stretch):(o.bendDirection=h[u+3],o.compress=0!=h[u+4],o.stretch=0!=h[u+5])):(o.mix+=(l-o.mix)*r,o.softness+=(c-o.softness)*r,0==a&&(o.bendDirection=h[u+3],o.compress=0!=h[u+4],o.stretch=0!=h[u+5]))}},Mt=class extends ${transformConstraintIndex=0;constructor(t,e,i){super(t,e,[H+"|"+i]),this.transformConstraintIndex=i}getFrameEntries(){return 7}setFrame(t,e,i,s,r,n,a,o){let h=this.frames;h[t*=7]=e,h[t+1]=i,h[t+2]=s,h[t+3]=r,h[t+4]=n,h[t+5]=a,h[t+6]=o}apply(t,e,i,s,r,n,a){let o=t.transformConstraints[this.transformConstraintIndex];if(!o.active)return;let h,l,c,u,d,f,p=this.frames;if(i<p[0]){let t=o.data;switch(n){case 0:return o.mixRotate=t.mixRotate,o.mixX=t.mixX,o.mixY=t.mixY,o.mixScaleX=t.mixScaleX,o.mixScaleY=t.mixScaleY,void(o.mixShearY=t.mixShearY);case 1:o.mixRotate+=(t.mixRotate-o.mixRotate)*r,o.mixX+=(t.mixX-o.mixX)*r,o.mixY+=(t.mixY-o.mixY)*r,o.mixScaleX+=(t.mixScaleX-o.mixScaleX)*r,o.mixScaleY+=(t.mixScaleY-o.mixScaleY)*r,o.mixShearY+=(t.mixShearY-o.mixShearY)*r}return}let m=Q.search(p,i,7),g=this.curves[m/7];switch(g){case 0:let t=p[m];h=p[m+1],l=p[m+2],c=p[m+3],u=p[m+4],d=p[m+5],f=p[m+6];let e=(i-t)/(p[m+7]-t);h+=(p[m+7+1]-h)*e,l+=(p[m+7+2]-l)*e,c+=(p[m+7+3]-c)*e,u+=(p[m+7+4]-u)*e,d+=(p[m+7+5]-d)*e,f+=(p[m+7+6]-f)*e;break;case 1:h=p[m+1],l=p[m+2],c=p[m+3],u=p[m+4],d=p[m+5],f=p[m+6];break;default:h=this.getBezierValue(i,m,1,g-2),l=this.getBezierValue(i,m,2,g+18-2),c=this.getBezierValue(i,m,3,g+36-2),u=this.getBezierValue(i,m,4,g+54-2),d=this.getBezierValue(i,m,5,g+72-2),f=this.getBezierValue(i,m,6,g+90-2)}if(0==n){let t=o.data;o.mixRotate=t.mixRotate+(h-t.mixRotate)*r,o.mixX=t.mixX+(l-t.mixX)*r,o.mixY=t.mixY+(c-t.mixY)*r,o.mixScaleX=t.mixScaleX+(u-t.mixScaleX)*r,o.mixScaleY=t.mixScaleY+(d-t.mixScaleY)*r,o.mixShearY=t.mixShearY+(f-t.mixShearY)*r}else o.mixRotate+=(h-o.mixRotate)*r,o.mixX+=(l-o.mixX)*r,o.mixY+=(c-o.mixY)*r,o.mixScaleX+=(u-o.mixScaleX)*r,o.mixScaleY+=(d-o.mixScaleY)*r,o.mixShearY+=(f-o.mixShearY)*r}},It=class extends tt{pathConstraintIndex=0;constructor(t,e,i){super(t,e,j+"|"+i),this.pathConstraintIndex=i}apply(t,e,i,s,r,n,a){let o=t.pathConstraints[this.pathConstraintIndex];if(!o.active)return;if(i<this.frames[0]){switch(n){case 0:return void(o.position=o.data.position);case 1:o.position+=(o.data.position-o.position)*r}return}let h=this.getCurveValue(i);0==n?o.position=o.data.position+(h-o.data.position)*r:o.position+=(h-o.position)*r}},Tt=class extends tt{pathConstraintIndex=0;constructor(t,e,i){super(t,e,Z+"|"+i),this.pathConstraintIndex=i}apply(t,e,i,s,r,n,a){let o=t.pathConstraints[this.pathConstraintIndex];if(!o.active)return;if(i<this.frames[0]){switch(n){case 0:return void(o.spacing=o.data.spacing);case 1:o.spacing+=(o.data.spacing-o.spacing)*r}return}let h=this.getCurveValue(i);0==n?o.spacing=o.data.spacing+(h-o.data.spacing)*r:o.spacing+=(h-o.spacing)*r}},kt=class extends ${pathConstraintIndex=0;constructor(t,e,i){super(t,e,[K+"|"+i]),this.pathConstraintIndex=i}getFrameEntries(){return 4}setFrame(t,e,i,s,r){let n=this.frames;n[t<<=2]=e,n[t+1]=i,n[t+2]=s,n[t+3]=r}apply(t,e,i,s,r,n,a){let o=t.pathConstraints[this.pathConstraintIndex];if(!o.active)return;let h,l,c,u=this.frames;if(i<u[0]){switch(n){case 0:return o.mixRotate=o.data.mixRotate,o.mixX=o.data.mixX,void(o.mixY=o.data.mixY);case 1:o.mixRotate+=(o.data.mixRotate-o.mixRotate)*r,o.mixX+=(o.data.mixX-o.mixX)*r,o.mixY+=(o.data.mixY-o.mixY)*r}return}let d=Q.search(u,i,4),f=this.curves[d>>2];switch(f){case 0:let t=u[d];h=u[d+1],l=u[d+2],c=u[d+3];let e=(i-t)/(u[d+4]-t);h+=(u[d+4+1]-h)*e,l+=(u[d+4+2]-l)*e,c+=(u[d+4+3]-c)*e;break;case 1:h=u[d+1],l=u[d+2],c=u[d+3];break;default:h=this.getBezierValue(i,d,1,f-2),l=this.getBezierValue(i,d,2,f+18-2),c=this.getBezierValue(i,d,3,f+36-2)}if(0==n){let t=o.data;o.mixRotate=t.mixRotate+(h-t.mixRotate)*r,o.mixX=t.mixX+(l-t.mixX)*r,o.mixY=t.mixY+(c-t.mixY)*r}else o.mixRotate+=(h-o.mixRotate)*r,o.mixX+=(l-o.mixX)*r,o.mixY+=(c-o.mixY)*r}},Et=class extends Q{slotIndex;attachment;constructor(t,e,i){super(t,[J+"|"+e+"|"+i.sequence.id]),this.slotIndex=e,this.attachment=i}getFrameEntries(){return Et.ENTRIES}getSlotIndex(){return this.slotIndex}getAttachment(){return this.attachment}setFrame(t,e,i,s,r){let n=this.frames;n[t*=Et.ENTRIES]=e,n[t+Et.MODE]=i|s<<4,n[t+Et.DELAY]=r}apply(t,e,i,s,r,n,a){let o=t.slots[this.slotIndex];if(!o.bone.active)return;let h=o.attachment,l=this.attachment;if(!(h==l||h instanceof M&&h.timelineAttachment==l))return;let c=this.frames;if(i<c[0])return void(0!=n&&1!=n||(o.sequenceIndex=-1));let u=Q.search(c,i,Et.ENTRIES),d=c[u],f=c[u+Et.MODE],p=c[u+Et.DELAY];if(!this.attachment.sequence)return;let m=f>>4,g=this.attachment.sequence.regions.length,x=E[15&f];if(0!=x)switch(m+=(i-d)/p+1e-5|0,x){case 1:m=Math.min(g-1,m);break;case 2:m%=g;break;case 3:{let t=(g<<1)-2;m=0==t?0:m%t,m>=g&&(m=t-m);break}case 4:m=Math.max(g-1-m,0);break;case 5:m=g-1-m%g;break;case 6:{let t=(g<<1)-2;m=0==t?0:(m+g-1)%t,m>=g&&(m=t-m)}}o.sequenceIndex=m}},Ct=Et;r(Ct,"ENTRIES",3),r(Ct,"MODE",1),r(Ct,"DELAY",2);var Rt=class{static emptyAnimation(){return Rt._emptyAnimation}data;tracks=new Array;timeScale=1;unkeyedState=0;events=new Array;listeners=new Array;queue=new Xt(this);propertyIDs=new o;animationsChanged=!1;trackEntryPool=new w((()=>new Ft));constructor(t){this.data=t}update(t){t*=this.timeScale;let e=this.tracks;for(let i=0,s=e.length;i<s;i++){let s=e[i];if(!s)continue;s.animationLast=s.nextAnimationLast,s.trackLast=s.nextTrackLast;let r=t*s.timeScale;if(s.delay>0){if(s.delay-=r,s.delay>0)continue;r=-s.delay,s.delay=0}let n=s.next;if(n){let e=s.trackLast-n.delay;if(e>=0){for(n.delay=0,n.trackTime+=0==s.timeScale?0:(e/s.timeScale+t)*n.timeScale,s.trackTime+=r,this.setCurrent(i,n,!0);n.mixingFrom;)n.mixTime+=t,n=n.mixingFrom;continue}}else if(s.trackLast>=s.trackEnd&&!s.mixingFrom){e[i]=null,this.queue.end(s),this.clearNext(s);continue}if(s.mixingFrom&&this.updateMixingFrom(s,t)){let t=s.mixingFrom;for(s.mixingFrom=null,t&&(t.mixingTo=null);t;)this.queue.end(t),t=t.mixingFrom}s.trackTime+=r}this.queue.drain()}updateMixingFrom(t,e){let i=t.mixingFrom;if(!i)return!0;let s=this.updateMixingFrom(i,e);return i.animationLast=i.nextAnimationLast,i.trackLast=i.nextTrackLast,t.mixTime>0&&t.mixTime>=t.mixDuration?(0!=i.totalAlpha&&0!=t.mixDuration||(t.mixingFrom=i.mixingFrom,i.mixingFrom&&(i.mixingFrom.mixingTo=t),t.interruptAlpha=i.interruptAlpha,this.queue.end(i)),s):(i.trackTime+=e*i.timeScale,t.mixTime+=e,!1)}apply(t){if(!t)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();let e=this.events,i=this.tracks,s=!1;for(let n=0,a=i.length;n<a;n++){let a=i[n];if(!a||a.delay>0)continue;s=!0;let o=0==n?1:a.mixBlend,h=a.alpha;a.mixingFrom?h*=this.applyMixingFrom(a,t,o):a.trackTime>=a.trackEnd&&!a.next&&(h=0);let l=a.animationLast,c=a.getAnimationTime(),u=c,d=e;a.reverse&&(u=a.animation.duration-u,d=null);let f=a.animation.timelines,p=f.length;if(0==n&&1==h||3==o)for(let e=0;e<p;e++){g.webkit602BugfixHelper(h,o);var r=f[e];r instanceof xt?this.applyAttachmentTimeline(r,t,u,o,!0):r.apply(t,l,u,d,h,o,0)}else{let e=a.timelineMode,i=a.shortestRotation,s=!i&&a.timelinesRotation.length!=p<<1;s&&(a.timelinesRotation.length=p<<1);for(let r=0;r<p;r++){let n=f[r],c=e[r]==Dt?o:0;!i&&n instanceof it?this.applyRotateTimeline(n,t,u,h,c,a.timelinesRotation,r<<1,s):n instanceof xt?this.applyAttachmentTimeline(n,t,u,o,!0):(g.webkit602BugfixHelper(h,o),n.apply(t,l,u,d,h,c,0))}}this.queueEvents(a,c),e.length=0,a.nextAnimationLast=c,a.nextTrackLast=a.trackTime}for(var n=this.unkeyedState+Nt,a=t.slots,o=0,h=t.slots.length;o<h;o++){var l=a[o];if(l.attachmentState==n){var c=l.data.attachmentName;l.setAttachment(c?t.getAttachment(l.data.index,c):null)}}return this.unkeyedState+=2,this.queue.drain(),s}applyMixingFrom(t,e,i){let s=t.mixingFrom;s.mixingFrom&&this.applyMixingFrom(s,e,i);let r=0;0==t.mixDuration?(r=1,1==i&&(i=0)):(r=t.mixTime/t.mixDuration,r>1&&(r=1),1!=i&&(i=s.mixBlend));let n=r<s.attachmentThreshold,a=r<s.drawOrderThreshold,o=s.animation.timelines,h=o.length,l=s.alpha*t.interruptAlpha,c=l*(1-r),u=s.animationLast,d=s.getAnimationTime(),f=d,p=null;if(s.reverse?f=s.animation.duration-f:r<s.eventThreshold&&(p=this.events),3==i)for(let t=0;t<h;t++)o[t].apply(e,u,f,p,c,i,1);else{let t=s.timelineMode,r=s.timelineHoldMix,d=s.shortestRotation,m=!d&&s.timelinesRotation.length!=h<<1;m&&(s.timelinesRotation.length=h<<1),s.totalAlpha=0;for(let x=0;x<h;x++){let h,w=o[x],v=1,y=0;switch(t[x]){case Dt:if(!a&&w instanceof At)continue;h=i,y=c;break;case Bt:h=0,y=c;break;case Ot:h=i,y=l;break;case Vt:h=0,y=l;break;default:h=0;let t=r[x];y=l*Math.max(0,1-t.mixTime/t.mixDuration)}s.totalAlpha+=y,!d&&w instanceof it?this.applyRotateTimeline(w,e,f,y,h,s.timelinesRotation,x<<1,m):w instanceof xt?this.applyAttachmentTimeline(w,e,f,h,n):(g.webkit602BugfixHelper(y,i),a&&w instanceof At&&0==h&&(v=0),w.apply(e,u,f,p,y,h,v))}}return t.mixDuration>0&&this.queueEvents(s,d),this.events.length=0,s.nextAnimationLast=d,s.nextTrackLast=s.trackTime,r}applyAttachmentTimeline(t,e,i,s,r){var n=e.slots[t.slotIndex];n.bone.active&&(i<t.frames[0]?0!=s&&1!=s||this.setAttachment(e,n,n.data.attachmentName,r):this.setAttachment(e,n,t.attachmentNames[Q.search1(t.frames,i)],r),n.attachmentState<=this.unkeyedState&&(n.attachmentState=this.unkeyedState+Nt))}setAttachment(t,e,i,s){e.setAttachment(i?t.getAttachment(e.data.index,i):null),s&&(e.attachmentState=this.unkeyedState+_t)}applyRotateTimeline(t,e,i,s,r,n,a,o){if(o&&(n[a]=0),1==s)return void t.apply(e,0,i,null,1,r,0);let h=e.bones[t.boneIndex];if(!h.active)return;let l=0,c=0;if(i<t.frames[0])switch(r){case 0:h.rotation=h.data.rotation;default:return;case 1:l=h.rotation,c=h.data.rotation}else l=0==r?h.data.rotation:h.rotation,c=h.data.rotation+t.getCurveValue(i);let d=0,f=c-l;if(f-=360*(16384-(16384.499999999996-f/360|0)),0==f)d=n[a];else{let t=0,e=0;o?(t=0,e=f):(t=n[a],e=n[a+1]);let i=f>0,s=t>=0;u.signum(e)!=u.signum(f)&&Math.abs(e)<=90&&(Math.abs(t)>180&&(t+=360*u.signum(t)),s=i),d=f+t-t%360,s!=i&&(d+=360*u.signum(t)),n[a]=d}n[a+1]=f,h.rotation=l+d*s}queueEvents(t,e){let i=t.animationStart,s=t.animationEnd,r=s-i,n=t.trackLast%r,a=this.events,o=0,h=a.length;for(;o<h;o++){let e=a[o];if(e.time<n)break;e.time>s||this.queue.event(t,e)}let l=!1;for(l=t.loop?0==r||n>t.trackTime%r:e>=s&&t.animationLast<s,l&&this.queue.complete(t);o<h;o++){let e=a[o];e.time<i||this.queue.event(t,e)}}clearTracks(){let t=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(let t=0,e=this.tracks.length;t<e;t++)this.clearTrack(t);this.tracks.length=0,this.queue.drainDisabled=t,this.queue.drain()}clearTrack(t){if(t>=this.tracks.length)return;let e=this.tracks[t];if(!e)return;this.queue.end(e),this.clearNext(e);let i=e;for(;;){let t=i.mixingFrom;if(!t)break;this.queue.end(t),i.mixingFrom=null,i.mixingTo=null,i=t}this.tracks[e.trackIndex]=null,this.queue.drain()}setCurrent(t,e,i){let s=this.expandToIndex(t);this.tracks[t]=e,e.previous=null,s&&(i&&this.queue.interrupt(s),e.mixingFrom=s,s.mixingTo=e,e.mixTime=0,s.mixingFrom&&s.mixDuration>0&&(e.interruptAlpha*=Math.min(1,s.mixTime/s.mixDuration)),s.timelinesRotation.length=0),this.queue.start(e)}setAnimation(t,e,i=!1){let s=this.data.skeletonData.findAnimation(e);if(!s)throw new Error("Animation not found: "+e);return this.setAnimationWith(t,s,i)}setAnimationWith(t,e,i=!1){if(!e)throw new Error("animation cannot be null.");let s=!0,r=this.expandToIndex(t);r&&(-1==r.nextTrackLast?(this.tracks[t]=r.mixingFrom,this.queue.interrupt(r),this.queue.end(r),this.clearNext(r),r=r.mixingFrom,s=!1):this.clearNext(r));let n=this.trackEntry(t,e,i,r);return this.setCurrent(t,n,s),this.queue.drain(),n}addAnimation(t,e,i=!1,s=0){let r=this.data.skeletonData.findAnimation(e);if(!r)throw new Error("Animation not found: "+e);return this.addAnimationWith(t,r,i,s)}addAnimationWith(t,e,i=!1,s=0){if(!e)throw new Error("animation cannot be null.");let r=this.expandToIndex(t);if(r)for(;r.next;)r=r.next;let n=this.trackEntry(t,e,i,r);return r?(r.next=n,n.previous=r,s<=0&&(s+=r.getTrackComplete()-n.mixDuration)):(this.setCurrent(t,n,!0),this.queue.drain()),n.delay=s,n}setEmptyAnimation(t,e=0){let i=this.setAnimationWith(t,Rt.emptyAnimation(),!1);return i.mixDuration=e,i.trackEnd=e,i}addEmptyAnimation(t,e=0,i=0){let s=this.addAnimationWith(t,Rt.emptyAnimation(),!1,i);return i<=0&&(s.delay+=s.mixDuration-e),s.mixDuration=e,s.trackEnd=e,s}setEmptyAnimations(t=0){let e=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(let e=0,i=this.tracks.length;e<i;e++){let i=this.tracks[e];i&&this.setEmptyAnimation(i.trackIndex,t)}this.queue.drainDisabled=e,this.queue.drain()}expandToIndex(t){return t<this.tracks.length?this.tracks[t]:(g.ensureArrayCapacity(this.tracks,t+1,null),this.tracks.length=t+1,null)}trackEntry(t,e,i,s){let r=this.trackEntryPool.obtain();return r.reset(),r.trackIndex=t,r.animation=e,r.loop=i,r.holdPrevious=!1,r.reverse=!1,r.shortestRotation=!1,r.eventThreshold=0,r.attachmentThreshold=0,r.drawOrderThreshold=0,r.animationStart=0,r.animationEnd=e.duration,r.animationLast=-1,r.nextAnimationLast=-1,r.delay=0,r.trackTime=0,r.trackLast=-1,r.nextTrackLast=-1,r.trackEnd=Number.MAX_VALUE,r.timeScale=1,r.alpha=1,r.mixTime=0,r.mixDuration=s?this.data.getMix(s.animation,e):0,r.interruptAlpha=1,r.totalAlpha=0,r.mixBlend=2,r}clearNext(t){let e=t.next;for(;e;)this.queue.dispose(e),e=e.next;t.next=null}_animationsChanged(){this.animationsChanged=!1,this.propertyIDs.clear();let t=this.tracks;for(let e=0,i=t.length;e<i;e++){let i=t[e];if(i){for(;i.mixingFrom;)i=i.mixingFrom;do{i.mixingTo&&3==i.mixBlend||this.computeHold(i),i=i.mixingTo}while(i)}}}computeHold(t){let e=t.mixingTo,i=t.animation.timelines,s=t.animation.timelines.length,r=t.timelineMode;r.length=s;let n=t.timelineHoldMix;n.length=0;let a=this.propertyIDs;if(e&&e.holdPrevious)for(let t=0;t<s;t++)r[t]=a.addAll(i[t].getPropertyIds())?Vt:Ot;else t:for(let o=0;o<s;o++){let s=i[o],h=s.getPropertyIds();if(a.addAll(h))if(!e||s instanceof xt||s instanceof At||s instanceof yt||!e.animation.hasTimeline(h))r[o]=Bt;else{for(let i=e.mixingTo;i;i=i.mixingTo)if(!i.animation.hasTimeline(h)){if(t.mixDuration>0){r[o]=zt,n[o]=i;continue t}break}r[o]=Vt}else r[o]=Dt}}getCurrent(t){return t>=this.tracks.length?null:this.tracks[t]}addListener(t){if(!t)throw new Error("listener cannot be null.");this.listeners.push(t)}removeListener(t){let e=this.listeners.indexOf(t);e>=0&&this.listeners.splice(e,1)}clearListeners(){this.listeners.length=0}clearListenerNotifications(){this.queue.clear()}},Yt=Rt;r(Yt,"_emptyAnimation",new C("<empty>",[],0));var Ft=class{animation=null;previous=null;next=null;mixingFrom=null;mixingTo=null;listener=null;trackIndex=0;loop=!1;holdPrevious=!1;reverse=!1;shortestRotation=!1;eventThreshold=0;attachmentThreshold=0;drawOrderThreshold=0;animationStart=0;animationEnd=0;animationLast=0;nextAnimationLast=0;delay=0;trackTime=0;trackLast=0;nextTrackLast=0;trackEnd=0;timeScale=0;alpha=0;mixTime=0;mixDuration=0;interruptAlpha=0;totalAlpha=0;mixBlend=2;timelineMode=new Array;timelineHoldMix=new Array;timelinesRotation=new Array;reset(){this.next=null,this.previous=null,this.mixingFrom=null,this.mixingTo=null,this.animation=null,this.listener=null,this.timelineMode.length=0,this.timelineHoldMix.length=0,this.timelinesRotation.length=0}getAnimationTime(){if(this.loop){let t=this.animationEnd-this.animationStart;return 0==t?this.animationStart:this.trackTime%t+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)}setAnimationLast(t){this.animationLast=t,this.nextAnimationLast=t}isComplete(){return this.trackTime>=this.animationEnd-this.animationStart}resetRotationDirections(){this.timelinesRotation.length=0}getTrackComplete(){let t=this.animationEnd-this.animationStart;if(0!=t){if(this.loop)return t*(1+(this.trackTime/t|0));if(this.trackTime<t)return t}return this.trackTime}},Xt=class{objects=[];drainDisabled=!1;animState;constructor(t){this.animState=t}start(t){this.objects.push(Pt.start),this.objects.push(t),this.animState.animationsChanged=!0}interrupt(t){this.objects.push(Pt.interrupt),this.objects.push(t)}end(t){this.objects.push(Pt.end),this.objects.push(t),this.animState.animationsChanged=!0}dispose(t){this.objects.push(Pt.dispose),this.objects.push(t)}complete(t){this.objects.push(Pt.complete),this.objects.push(t)}event(t,e){this.objects.push(Pt.event),this.objects.push(t),this.objects.push(e)}drain(){if(this.drainDisabled)return;this.drainDisabled=!0;let t=this.objects,e=this.animState.listeners;for(let i=0;i<t.length;i+=2){let s=t[i],r=t[i+1];switch(s){case Pt.start:r.listener&&r.listener.start&&r.listener.start(r);for(let t=0;t<e.length;t++){let i=e[t];i.start&&i.start(r)}break;case Pt.interrupt:r.listener&&r.listener.interrupt&&r.listener.interrupt(r);for(let t=0;t<e.length;t++){let i=e[t];i.interrupt&&i.interrupt(r)}break;case Pt.end:r.listener&&r.listener.end&&r.listener.end(r);for(let t=0;t<e.length;t++){let i=e[t];i.end&&i.end(r)}case Pt.dispose:r.listener&&r.listener.dispose&&r.listener.dispose(r);for(let t=0;t<e.length;t++){let i=e[t];i.dispose&&i.dispose(r)}this.animState.trackEntryPool.free(r);break;case Pt.complete:r.listener&&r.listener.complete&&r.listener.complete(r);for(let t=0;t<e.length;t++){let i=e[t];i.complete&&i.complete(r)}break;case Pt.event:let s=t[2+i++];r.listener&&r.listener.event&&r.listener.event(r,s);for(let t=0;t<e.length;t++){let i=e[t];i.event&&i.event(r,s)}}}this.clear(),this.drainDisabled=!1}clear(){this.objects.length=0}},Pt=(t=>(t[t.start=0]="start",t[t.interrupt=1]="interrupt",t[t.end=2]="end",t[t.dispose=3]="dispose",t[t.complete=4]="complete",t[t.event=5]="event",t))(Pt||{}),Lt=class{start(t){}interrupt(t){}end(t){}dispose(t){}complete(t){}event(t,e){}},Dt=0,Bt=1,Ot=2,Vt=3,zt=4,Nt=1,_t=2,Ut=class{skeletonData;animationToMixTime={};defaultMix=0;constructor(t){if(!t)throw new Error("skeletonData cannot be null.");this.skeletonData=t}setMix(t,e,i){let s=this.skeletonData.findAnimation(t);if(!s)throw new Error("Animation not found: "+t);let r=this.skeletonData.findAnimation(e);if(!r)throw new Error("Animation not found: "+e);this.setMixWith(s,r,i)}setMixWith(t,e,i){if(!t)throw new Error("from cannot be null.");if(!e)throw new Error("to cannot be null.");let s=t.name+"."+e.name;this.animationToMixTime[s]=i}getMix(t,e){let i=t.name+"."+e.name,s=this.animationToMixTime[i];return void 0===s?this.defaultMix:s}},Wt=class extends M{color=new l(1,1,1,1);constructor(t){super(t)}copy(){let t=new Wt(this.name);return this.copyTo(t),t.color.setFromColor(this.color),t}},qt=class extends M{endSlot=null;color=new l(.2275,.2275,.8078,1);constructor(t){super(t)}copy(){let t=new qt(this.name);return this.copyTo(t),t.endSlot=this.endSlot,t.color.setFromColor(this.color),t}},Gt=class{_image;constructor(t){this._image=t}getImage(){return this._image}},Ht=(t=>(t[t.Nearest=9728]="Nearest",t[t.Linear=9729]="Linear",t[t.MipMap=9987]="MipMap",t[t.MipMapNearestNearest=9984]="MipMapNearestNearest",t[t.MipMapLinearNearest=9985]="MipMapLinearNearest",t[t.MipMapNearestLinear=9986]="MipMapNearestLinear",t[t.MipMapLinearLinear=9987]="MipMapLinearLinear",t))(Ht||{}),jt=(t=>(t[t.MirroredRepeat=33648]="MirroredRepeat",t[t.ClampToEdge=33071]="ClampToEdge",t[t.Repeat=10497]="Repeat",t))(jt||{}),Zt=class{texture;u=0;v=0;u2=0;v2=0;width=0;height=0;degrees=0;offsetX=0;offsetY=0;originalWidth=0;originalHeight=0},Kt=class extends Gt{setFilters(t,e){}setWraps(t,e){}dispose(){}},Jt=class{pages=new Array;regions=new Array;constructor(t){let e=new Qt(t),i=new Array(4),s={size:t=>{t.width=parseInt(i[1]),t.height=parseInt(i[2])},format:()=>{},filter:t=>{t.minFilter=g.enumValue(Ht,i[1]),t.magFilter=g.enumValue(Ht,i[2])},repeat:t=>{-1!=i[1].indexOf("x")&&(t.uWrap=10497),-1!=i[1].indexOf("y")&&(t.vWrap=10497)},pma:t=>{t.pma="true"==i[1]}};var r={xy:t=>{t.x=parseInt(i[1]),t.y=parseInt(i[2])},size:t=>{t.width=parseInt(i[1]),t.height=parseInt(i[2])},bounds:t=>{t.x=parseInt(i[1]),t.y=parseInt(i[2]),t.width=parseInt(i[3]),t.height=parseInt(i[4])},offset:t=>{t.offsetX=parseInt(i[1]),t.offsetY=parseInt(i[2])},orig:t=>{t.originalWidth=parseInt(i[1]),t.originalHeight=parseInt(i[2])},offsets:t=>{t.offsetX=parseInt(i[1]),t.offsetY=parseInt(i[2]),t.originalWidth=parseInt(i[3]),t.originalHeight=parseInt(i[4])},rotate:t=>{let e=i[1];"true"==e?t.degrees=90:"false"!=e&&(t.degrees=parseInt(e))},index:t=>{t.index=parseInt(i[1])}};let n=e.readLine();for(;n&&0==n.trim().length;)n=e.readLine();for(;n&&0!=n.trim().length&&0!=e.readEntry(i,n);)n=e.readLine();let a=null,o=null,h=null;for(;null!==n;)if(0==n.trim().length)a=null,n=e.readLine();else if(a){let t=new te(a,n);for(;;){let s=e.readEntry(i,n=e.readLine());if(0==s)break;let a=r[i[0]];if(a)a(t);else{o||(o=[]),h||(h=[]),o.push(i[0]);let t=[];for(let e=0;e<s;e++)t.push(parseInt(i[e+1]));h.push(t)}}0==t.originalWidth&&0==t.originalHeight&&(t.originalWidth=t.width,t.originalHeight=t.height),o&&o.length>0&&h&&h.length>0&&(t.names=o,t.values=h,o=null,h=null),t.u=t.x/a.width,t.v=t.y/a.height,90==t.degrees?(t.u2=(t.x+t.height)/a.width,t.v2=(t.y+t.width)/a.height):(t.u2=(t.x+t.width)/a.width,t.v2=(t.y+t.height)/a.height),this.regions.push(t)}else{for(a=new $t(n.trim());0!=e.readEntry(i,n=e.readLine());){let t=s[i[0]];t&&t(a)}this.pages.push(a)}}findRegion(t){for(let e=0;e<this.regions.length;e++)if(this.regions[e].name==t)return this.regions[e];return null}setTextures(t,e=""){for(let i of this.pages)i.setTexture(t.get(e+i.name))}dispose(){for(let t=0;t<this.pages.length;t++)this.pages[t].texture?.dispose()}},Qt=class{lines;index=0;constructor(t){this.lines=t.split(/\r\n|\r|\n/)}readLine(){return this.index>=this.lines.length?null:this.lines[this.index++]}readEntry(t,e){if(!e)return 0;if(0==(e=e.trim()).length)return 0;let i=e.indexOf(":");if(-1==i)return 0;t[0]=e.substr(0,i).trim();for(let s=1,r=i+1;;s++){let i=e.indexOf(",",r);if(-1==i)return t[s]=e.substr(r).trim(),s;if(t[s]=e.substr(r,i-r).trim(),r=i+1,4==s)return 4}}},$t=class{name;minFilter=9728;magFilter=9728;uWrap=33071;vWrap=33071;texture=null;width=0;height=0;pma=!1;regions=new Array;constructor(t){this.name=t}setTexture(t){this.texture=t,t.setFilters(this.minFilter,this.magFilter),t.setWraps(this.uWrap,this.vWrap);for(let e of this.regions)e.texture=t}},te=class extends Zt{page;name;x=0;y=0;offsetX=0;offsetY=0;originalWidth=0;originalHeight=0;index=0;degrees=0;names=null;values=null;constructor(t,e){super(),this.page=t,this.name=e,t.regions.push(this)}},ee=class extends M{region=null;path;regionUVs=[];uvs=[];triangles=[];color=new l(1,1,1,1);width=0;height=0;hullLength=0;edges=[];parentMesh=null;sequence=null;tempColor=new l(0,0,0,0);constructor(t,e){super(t),this.path=e}updateRegion(){if(!this.region)throw new Error("Region not set.");let t=this.regionUVs;this.uvs&&this.uvs.length==t.length||(this.uvs=g.newFloatArray(t.length));let e=this.uvs,i=this.uvs.length,s=this.region.u,r=this.region.v,n=0,a=0;if(this.region instanceof te){let o=this.region,h=o.page.texture.getImage(),l=h.width,c=h.height;switch(o.degrees){case 90:s-=(o.originalHeight-o.offsetY-o.height)/l,r-=(o.originalWidth-o.offsetX-o.width)/c,n=o.originalHeight/l,a=o.originalWidth/c;for(let o=0;o<i;o+=2)e[o]=s+t[o+1]*n,e[o+1]=r+(1-t[o])*a;return;case 180:s-=(o.originalWidth-o.offsetX-o.width)/l,r-=o.offsetY/c,n=o.originalWidth/l,a=o.originalHeight/c;for(let o=0;o<i;o+=2)e[o]=s+(1-t[o])*n,e[o+1]=r+(1-t[o+1])*a;return;case 270:s-=o.offsetY/l,r-=o.offsetX/c,n=o.originalHeight/l,a=o.originalWidth/c;for(let o=0;o<i;o+=2)e[o]=s+(1-t[o+1])*n,e[o+1]=r+t[o]*a;return}s-=o.offsetX/l,r-=(o.originalHeight-o.offsetY-o.height)/c,n=o.originalWidth/l,a=o.originalHeight/c}else this.region?(n=this.region.u2-s,a=this.region.v2-r):(s=r=0,n=a=1);for(let o=0;o<i;o+=2)e[o]=s+t[o]*n,e[o+1]=r+t[o+1]*a}getParentMesh(){return this.parentMesh}setParentMesh(t){this.parentMesh=t,t&&(this.bones=t.bones,this.vertices=t.vertices,this.worldVerticesLength=t.worldVerticesLength,this.regionUVs=t.regionUVs,this.triangles=t.triangles,this.hullLength=t.hullLength,this.worldVerticesLength=t.worldVerticesLength)}copy(){if(this.parentMesh)return this.newLinkedMesh();let t=new ee(this.name,this.path);return t.region=this.region,t.color.setFromColor(this.color),this.copyTo(t),t.regionUVs=new Array(this.regionUVs.length),g.arrayCopy(this.regionUVs,0,t.regionUVs,0,this.regionUVs.length),t.uvs=new Array(this.uvs.length),g.arrayCopy(this.uvs,0,t.uvs,0,this.uvs.length),t.triangles=new Array(this.triangles.length),g.arrayCopy(this.triangles,0,t.triangles,0,this.triangles.length),t.hullLength=this.hullLength,t.sequence=null!=this.sequence?this.sequence.copy():null,this.edges&&(t.edges=new Array(this.edges.length),g.arrayCopy(this.edges,0,t.edges,0,this.edges.length)),t.width=this.width,t.height=this.height,t}computeWorldVertices(t,e,i,s,r,n){null!=this.sequence&&this.sequence.apply(t,this),super.computeWorldVertices(t,e,i,s,r,n)}newLinkedMesh(){let t=new ee(this.name,this.path);return t.region=this.region,t.color.setFromColor(this.color),t.timelineAttachment=this.timelineAttachment,t.setParentMesh(this.parentMesh?this.parentMesh:this),null!=t.region&&t.updateRegion(),t}},ie=class extends M{lengths=[];closed=!1;constantSpeed=!1;color=new l(1,1,1,1);constructor(t){super(t)}copy(){let t=new ie(this.name);return this.copyTo(t),t.lengths=new Array(this.lengths.length),g.arrayCopy(this.lengths,0,t.lengths,0,this.lengths.length),t.closed=closed,t.constantSpeed=this.constantSpeed,t.color.setFromColor(this.color),t}},se=class extends M{x=0;y=0;rotation=0;color=new l(.38,.94,0,1);constructor(t){super(t)}computeWorldPosition(t,e){return e.x=this.x*t.a+this.y*t.b+t.worldX,e.y=this.x*t.c+this.y*t.d+t.worldY,e}computeWorldRotation(t){let e=u.cosDeg(this.rotation),i=u.sinDeg(this.rotation),s=e*t.a+i*t.b,r=e*t.c+i*t.d;return Math.atan2(r,s)*u.radDeg}copy(){let t=new se(this.name);return t.x=this.x,t.y=this.y,t.rotation=this.rotation,t.color.setFromColor(this.color),t}},re=class extends A{x=0;y=0;scaleX=1;scaleY=1;rotation=0;width=0;height=0;color=new l(1,1,1,1);path;region=null;sequence=null;offset=g.newFloatArray(8);uvs=g.newFloatArray(8);tempColor=new l(1,1,1,1);constructor(t,e){super(t),this.path=e}updateRegion(){if(!this.region)throw new Error("Region not set.");let t=this.region,e=this.uvs;if(null==t)return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e[4]=1,e[5]=1,e[6]=1,void(e[7]=0);let i=this.width/this.region.originalWidth*this.scaleX,s=this.height/this.region.originalHeight*this.scaleY,r=-this.width/2*this.scaleX+this.region.offsetX*i,n=-this.height/2*this.scaleY+this.region.offsetY*s,a=r+this.region.width*i,o=n+this.region.height*s,h=this.rotation*Math.PI/180,l=Math.cos(h),c=Math.sin(h),u=this.x,d=this.y,f=r*l+u,p=r*c,m=n*l+d,g=n*c,x=a*l+u,w=a*c,v=o*l+d,y=o*c,b=this.offset;b[0]=f-g,b[1]=m+p,b[2]=f-y,b[3]=v+p,b[4]=x-y,b[5]=v+w,b[6]=x-g,b[7]=m+w,90==t.degrees?(e[0]=t.u2,e[1]=t.v2,e[2]=t.u,e[3]=t.v2,e[4]=t.u,e[5]=t.v,e[6]=t.u2,e[7]=t.v):(e[0]=t.u,e[1]=t.v2,e[2]=t.u,e[3]=t.v,e[4]=t.u2,e[5]=t.v,e[6]=t.u2,e[7]=t.v2)}computeWorldVertices(t,e,i,s){null!=this.sequence&&this.sequence.apply(t,this);let r=t.bone,n=this.offset,a=r.worldX,o=r.worldY,h=r.a,l=r.b,c=r.c,u=r.d,d=0,f=0;d=n[0],f=n[1],e[i]=d*h+f*l+a,e[i+1]=d*c+f*u+o,i+=s,d=n[2],f=n[3],e[i]=d*h+f*l+a,e[i+1]=d*c+f*u+o,i+=s,d=n[4],f=n[5],e[i]=d*h+f*l+a,e[i+1]=d*c+f*u+o,i+=s,d=n[6],f=n[7],e[i]=d*h+f*l+a,e[i+1]=d*c+f*u+o}copy(){let t=new re(this.name,this.path);return t.region=this.region,t.x=this.x,t.y=this.y,t.scaleX=this.scaleX,t.scaleY=this.scaleY,t.rotation=this.rotation,t.width=this.width,t.height=this.height,g.arrayCopy(this.uvs,0,t.uvs,0,8),g.arrayCopy(this.offset,0,t.offset,0,8),t.color.setFromColor(this.color),t.sequence=null!=this.sequence?this.sequence.copy():null,t}},ne=re;r(ne,"X1",0),r(ne,"Y1",1),r(ne,"C1R",2),r(ne,"C1G",3),r(ne,"C1B",4),r(ne,"C1A",5),r(ne,"U1",6),r(ne,"V1",7),r(ne,"X2",8),r(ne,"Y2",9),r(ne,"C2R",10),r(ne,"C2G",11),r(ne,"C2B",12),r(ne,"C2A",13),r(ne,"U2",14),r(ne,"V2",15),r(ne,"X3",16),r(ne,"Y3",17),r(ne,"C3R",18),r(ne,"C3G",19),r(ne,"C3B",20),r(ne,"C3A",21),r(ne,"U3",22),r(ne,"V3",23),r(ne,"X4",24),r(ne,"Y4",25),r(ne,"C4R",26),r(ne,"C4G",27),r(ne,"C4B",28),r(ne,"C4A",29),r(ne,"U4",30),r(ne,"V4",31);var ae=class{atlas;constructor(t){this.atlas=t}loadSequence(t,e,i){let s=i.regions;for(let r=0,n=s.length;r<n;r++){let n=i.getPath(e,r),a=this.atlas.findRegion(n);if(null==a)throw new Error("Region not found in atlas: "+n+" (sequence: "+t+")");s[r]=a}}newRegionAttachment(t,e,i,s){let r=new ne(e,i);if(null!=s)this.loadSequence(e,i,s);else{let t=this.atlas.findRegion(i);if(!t)throw new Error("Region not found in atlas: "+i+" (region attachment: "+e+")");r.region=t}return r}newMeshAttachment(t,e,i,s){let r=new ee(e,i);if(null!=s)this.loadSequence(e,i,s);else{let t=this.atlas.findRegion(i);if(!t)throw new Error("Region not found in atlas: "+i+" (mesh attachment: "+e+")");r.region=t}return r}newBoundingBoxAttachment(t,e){return new Wt(e)}newPathAttachment(t,e){return new ie(e)}newPointAttachment(t,e){return new se(e)}newClippingAttachment(t,e){return new qt(e)}},oe=class{index=0;name;parent=null;length=0;x=0;y=0;rotation=0;scaleX=1;scaleY=1;shearX=0;shearY=0;transformMode=he.Normal;skinRequired=!1;color=new l;constructor(t,e,i){if(t<0)throw new Error("index must be >= 0.");if(!e)throw new Error("name cannot be null.");this.index=t,this.name=e,this.parent=i}},he=(t=>(t[t.Normal=0]="Normal",t[t.OnlyTranslation=1]="OnlyTranslation",t[t.NoRotationOrReflection=2]="NoRotationOrReflection",t[t.NoScale=3]="NoScale",t[t.NoScaleOrReflection=4]="NoScaleOrReflection",t))(he||{}),le=class{data;skeleton;parent=null;children=new Array;x=0;y=0;rotation=0;scaleX=0;scaleY=0;shearX=0;shearY=0;ax=0;ay=0;arotation=0;ascaleX=0;ascaleY=0;ashearX=0;ashearY=0;a=0;b=0;c=0;d=0;worldY=0;worldX=0;sorted=!1;active=!1;constructor(t,e,i){if(!t)throw new Error("data cannot be null.");if(!e)throw new Error("skeleton cannot be null.");this.data=t,this.skeleton=e,this.parent=i,this.setToSetupPose()}isActive(){return this.active}update(){this.updateWorldTransformWith(this.ax,this.ay,this.arotation,this.ascaleX,this.ascaleY,this.ashearX,this.ashearY)}updateWorldTransform(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)}updateWorldTransformWith(t,e,i,s,r,n,a){this.ax=t,this.ay=e,this.arotation=i,this.ascaleX=s,this.ascaleY=r,this.ashearX=n,this.ashearY=a;let o=this.parent;if(!o){let o=this.skeleton,h=i+90+a,l=o.scaleX,c=o.scaleY;return this.a=u.cosDeg(i+n)*s*l,this.b=u.cosDeg(h)*r*l,this.c=u.sinDeg(i+n)*s*c,this.d=u.sinDeg(h)*r*c,this.worldX=t*l+o.x,void(this.worldY=e*c+o.y)}let h=o.a,l=o.b,c=o.c,d=o.d;switch(this.worldX=h*t+l*e+o.worldX,this.worldY=c*t+d*e+o.worldY,this.data.transformMode){case 0:{let t=i+90+a,e=u.cosDeg(i+n)*s,o=u.cosDeg(t)*r,f=u.sinDeg(i+n)*s,p=u.sinDeg(t)*r;return this.a=h*e+l*f,this.b=h*o+l*p,this.c=c*e+d*f,void(this.d=c*o+d*p)}case 1:{let t=i+90+a;this.a=u.cosDeg(i+n)*s,this.b=u.cosDeg(t)*r,this.c=u.sinDeg(i+n)*s,this.d=u.sinDeg(t)*r;break}case 2:{let t=h*h+c*c,e=0;t>1e-4?(t=Math.abs(h*d-l*c)/t,h/=this.skeleton.scaleX,c/=this.skeleton.scaleY,l=c*t,d=h*t,e=Math.atan2(c,h)*u.radDeg):(h=0,c=0,e=90-Math.atan2(d,l)*u.radDeg);let o=i+n-e,f=i+a-e+90,p=u.cosDeg(o)*s,m=u.cosDeg(f)*r,g=u.sinDeg(o)*s,x=u.sinDeg(f)*r;this.a=h*p-l*g,this.b=h*m-l*x,this.c=c*p+d*g,this.d=c*m+d*x;break}case 3:case 4:{let t=u.cosDeg(i),e=u.sinDeg(i),o=(h*t+l*e)/this.skeleton.scaleX,f=(c*t+d*e)/this.skeleton.scaleY,p=Math.sqrt(o*o+f*f);p>1e-5&&(p=1/p),o*=p,f*=p,p=Math.sqrt(o*o+f*f),3==this.data.transformMode&&h*d-l*c<0!=(this.skeleton.scaleX<0!=this.skeleton.scaleY<0)&&(p=-p);let m=Math.PI/2+Math.atan2(f,o),g=Math.cos(m)*p,x=Math.sin(m)*p,w=u.cosDeg(n)*s,v=u.cosDeg(90+a)*r,y=u.sinDeg(n)*s,b=u.sinDeg(90+a)*r;this.a=o*w+g*y,this.b=o*v+g*b,this.c=f*w+x*y,this.d=f*v+x*b;break}}this.a*=this.skeleton.scaleX,this.b*=this.skeleton.scaleX,this.c*=this.skeleton.scaleY,this.d*=this.skeleton.scaleY}setToSetupPose(){let t=this.data;this.x=t.x,this.y=t.y,this.rotation=t.rotation,this.scaleX=t.scaleX,this.scaleY=t.scaleY,this.shearX=t.shearX,this.shearY=t.shearY}getWorldRotationX(){return Math.atan2(this.c,this.a)*u.radDeg}getWorldRotationY(){return Math.atan2(this.d,this.b)*u.radDeg}getWorldScaleX(){return Math.sqrt(this.a*this.a+this.c*this.c)}getWorldScaleY(){return Math.sqrt(this.b*this.b+this.d*this.d)}updateAppliedTransform(){let t=this.parent;if(!t)return this.ax=this.worldX-this.skeleton.x,this.ay=this.worldY-this.skeleton.y,this.arotation=Math.atan2(this.c,this.a)*u.radDeg,this.ascaleX=Math.sqrt(this.a*this.a+this.c*this.c),this.ascaleY=Math.sqrt(this.b*this.b+this.d*this.d),this.ashearX=0,void(this.ashearY=Math.atan2(this.a*this.b+this.c*this.d,this.a*this.d-this.b*this.c)*u.radDeg);let e=t.a,i=t.b,s=t.c,r=t.d,n=1/(e*r-i*s),a=this.worldX-t.worldX,o=this.worldY-t.worldY;this.ax=a*r*n-o*i*n,this.ay=o*e*n-a*s*n;let h=n*r,l=n*e,c=n*i,d=n*s,f=h*this.a-c*this.c,p=h*this.b-c*this.d,m=l*this.c-d*this.a,g=l*this.d-d*this.b;if(this.ashearX=0,this.ascaleX=Math.sqrt(f*f+m*m),this.ascaleX>1e-4){let t=f*g-p*m;this.ascaleY=t/this.ascaleX,this.ashearY=Math.atan2(f*p+m*g,t)*u.radDeg,this.arotation=Math.atan2(m,f)*u.radDeg}else this.ascaleX=0,this.ascaleY=Math.sqrt(p*p+g*g),this.ashearY=0,this.arotation=90-Math.atan2(g,p)*u.radDeg}worldToLocal(t){let e=1/(this.a*this.d-this.b*this.c),i=t.x-this.worldX,s=t.y-this.worldY;return t.x=i*this.d*e-s*this.b*e,t.y=s*this.a*e-i*this.c*e,t}localToWorld(t){let e=t.x,i=t.y;return t.x=e*this.a+i*this.b+this.worldX,t.y=e*this.c+i*this.d+this.worldY,t}worldToLocalRotation(t){let e=u.sinDeg(t),i=u.cosDeg(t);return Math.atan2(this.a*e-this.c*i,this.d*i-this.b*e)*u.radDeg+this.rotation-this.shearX}localToWorldRotation(t){t-=this.rotation-this.shearX;let e=u.sinDeg(t),i=u.cosDeg(t);return Math.atan2(i*this.c+e*this.d,i*this.a+e*this.b)*u.radDeg}rotateWorld(t){let e=this.a,i=this.b,s=this.c,r=this.d,n=u.cosDeg(t),a=u.sinDeg(t);this.a=n*e-a*s,this.b=n*i-a*r,this.c=a*e+n*s,this.d=a*i+n*r}},ce=class{constructor(t,e,i){this.name=t,this.order=e,this.skinRequired=i}},ue=class{pathPrefix="";textureLoader;downloader;assets={};errors={};toLoad=0;loaded=0;constructor(t,e="",i=new de){this.textureLoader=t,this.pathPrefix=e,this.downloader=i}start(t){return this.toLoad++,this.pathPrefix+t}success(t,e,i){this.toLoad--,this.loaded++,this.assets[e]=i,t&&t(e,i)}error(t,e,i){this.toLoad--,this.loaded++,this.errors[e]=i,t&&t(e,i)}loadAll(){return new Promise(((t,e)=>{let i=()=>{this.isLoadingComplete()?this.hasErrors()?e(this.errors):t(this):requestAnimationFrame(i)};requestAnimationFrame(i)}))}setRawDataURI(t,e){this.downloader.rawDataUris[this.pathPrefix+t]=e}loadBinary(t,e=()=>{},i=()=>{}){t=this.start(t),this.downloader.downloadBinary(t,(i=>{this.success(e,t,i)}),((e,s)=>{this.error(i,t,`Couldn't load binary ${t}: status ${e}, ${s}`)}))}loadText(t,e=()=>{},i=()=>{}){t=this.start(t),this.downloader.downloadText(t,(i=>{this.success(e,t,i)}),((e,s)=>{this.error(i,t,`Couldn't load text ${t}: status ${e}, ${s}`)}))}loadJson(t,e=()=>{},i=()=>{}){t=this.start(t),this.downloader.downloadJson(t,(i=>{this.success(e,t,i)}),((e,s)=>{this.error(i,t,`Couldn't load JSON ${t}: status ${e}, ${s}`)}))}loadTexture(t,e=()=>{},i=()=>{}){if(t=this.start(t),!!("undefined"==typeof window||"undefined"==typeof navigator||!window.document))fetch(t,{mode:"cors"}).then((e=>e.ok?e.blob():(this.error(i,t,`Couldn't load image: ${t}`),null))).then((t=>t?createImageBitmap(t,{premultiplyAlpha:"none",colorSpaceConversion:"none"}):null)).then((i=>{i&&this.success(e,t,this.textureLoader(i))}));else{let s=new Image;s.crossOrigin="anonymous",s.onload=()=>{this.success(e,t,this.textureLoader(s))},s.onerror=()=>{this.error(i,t,`Couldn't load image: ${t}`)},this.downloader.rawDataUris[t]&&(t=this.downloader.rawDataUris[t]),s.src=t}}loadTextureAtlas(t,e=()=>{},i=()=>{},s){let r=t.lastIndexOf("/"),n=r>=0?t.substring(0,r+1):"";t=this.start(t),this.downloader.downloadText(t,(r=>{try{let a=new Jt(r),o=a.pages.length,h=!1;for(let r of a.pages)this.loadTexture(s?s[r.name]:n+r.name,((i,s)=>{h||(r.setTexture(s),0==--o&&this.success(e,t,a))}),((e,s)=>{h||this.error(i,t,`Couldn't load texture atlas ${t} page image: ${e}`),h=!0}))}catch(e){this.error(i,t,`Couldn't parse texture atlas ${t}: ${e.message}`)}}),((e,s)=>{this.error(i,t,`Couldn't load texture atlas ${t}: status ${e}, ${s}`)}))}get(t){return this.assets[this.pathPrefix+t]}require(t){t=this.pathPrefix+t;let e=this.assets[t];if(e)return e;let i=this.errors[t];throw Error("Asset not found: "+t+(i?"\n"+i:""))}remove(t){t=this.pathPrefix+t;let e=this.assets[t];return e.dispose&&e.dispose(),delete this.assets[t],e}removeAll(){for(let t in this.assets){let e=this.assets[t];e.dispose&&e.dispose()}this.assets={}}isLoadingComplete(){return 0==this.toLoad}getToLoad(){return this.toLoad}getLoaded(){return this.loaded}dispose(){this.removeAll()}hasErrors(){return Object.keys(this.errors).length>0}getErrors(){return this.errors}},de=class{callbacks={};rawDataUris={};dataUriToString(t){if(!t.startsWith("data:"))throw new Error("Not a data URI.");let e=t.indexOf("base64,");return-1!=e?(e+=7,atob(t.substr(e))):t.substr(t.indexOf(",")+1)}base64ToUint8Array(t){for(var e=window.atob(t),i=e.length,s=new Uint8Array(i),r=0;r<i;r++)s[r]=e.charCodeAt(r);return s}dataUriToUint8Array(t){if(!t.startsWith("data:"))throw new Error("Not a data URI.");let e=t.indexOf("base64,");if(-1==e)throw new Error("Not a binary data URI.");return e+=7,this.base64ToUint8Array(t.substr(e))}downloadText(t,e,i){if(this.start(t,e,i))return;if(this.rawDataUris[t]){try{let e=this.rawDataUris[t];this.finish(t,200,this.dataUriToString(e))}catch(e){this.finish(t,400,JSON.stringify(e))}return}let s=new XMLHttpRequest;s.overrideMimeType("text/html"),s.open("GET",t,!0);let r=()=>{this.finish(t,s.status,s.responseText)};s.onload=r,s.onerror=r,s.send()}downloadJson(t,e,i){this.downloadText(t,(t=>{e(JSON.parse(t))}),i)}downloadBinary(t,e,i){if(this.start(t,e,i))return;if(this.rawDataUris[t]){try{let e=this.rawDataUris[t];this.finish(t,200,this.dataUriToUint8Array(e))}catch(e){this.finish(t,400,JSON.stringify(e))}return}let s=new XMLHttpRequest;s.open("GET",t,!0),s.responseType="arraybuffer";let r=()=>{this.finish(t,s.status,s.response)};s.onload=()=>{200==s.status||0==s.status?this.finish(t,200,new Uint8Array(s.response)):r()},s.onerror=r,s.send()}start(t,e,i){let s=this.callbacks[t];try{if(s)return!0;this.callbacks[t]=s=[]}finally{s.push(e,i)}}finish(t,e,i){let s=this.callbacks[t];delete this.callbacks[t];let r=200==e||0==e?[i]:[e,i];for(let t=r.length-1,e=s.length;t<e;t+=2)s[t].apply(null,r)}},fe=class{data;intValue=0;floatValue=0;stringValue=null;time=0;volume=0;balance=0;constructor(t,e){if(!e)throw new Error("data cannot be null.");this.time=t,this.data=e}},pe=class{name;intValue=0;floatValue=0;stringValue=null;audioPath=null;volume=0;balance=0;constructor(t){this.name=t}},me=class{data;bones;target;bendDirection=0;compress=!1;stretch=!1;mix=1;softness=0;active=!1;constructor(t,e){if(!t)throw new Error("data cannot be null.");if(!e)throw new Error("skeleton cannot be null.");this.data=t,this.mix=t.mix,this.softness=t.softness,this.bendDirection=t.bendDirection,this.compress=t.compress,this.stretch=t.stretch,this.bones=new Array;for(let i=0;i<t.bones.length;i++){let s=e.findBone(t.bones[i].name);if(!s)throw new Error(`Couldn't find bone ${t.bones[i].name}`);this.bones.push(s)}let i=e.findBone(t.target.name);if(!i)throw new Error(`Couldn't find bone ${t.target.name}`);this.target=i}isActive(){return this.active}update(){if(0==this.mix)return;let t=this.target,e=this.bones;switch(e.length){case 1:this.apply1(e[0],t.worldX,t.worldY,this.compress,this.stretch,this.data.uniform,this.mix);break;case 2:this.apply2(e[0],e[1],t.worldX,t.worldY,this.bendDirection,this.stretch,this.data.uniform,this.softness,this.mix)}}apply1(t,e,i,s,r,n,a){let o=t.parent;if(!o)throw new Error("IK bone must have parent.");let h=o.a,l=o.b,c=o.c,d=o.d,f=-t.ashearX-t.arotation,p=0,m=0;switch(t.data.transformMode){case 1:p=(e-t.worldX)*u.signum(t.skeleton.scaleX),m=(i-t.worldY)*u.signum(t.skeleton.scaleY);break;case 2:let s=Math.abs(h*d-l*c)/Math.max(1e-4,h*h+c*c),r=h/t.skeleton.scaleX,n=c/t.skeleton.scaleY;l=-n*s*t.skeleton.scaleX,d=r*s*t.skeleton.scaleY,f+=Math.atan2(n,r)*u.radDeg;default:let a=e-o.worldX,g=i-o.worldY,x=h*d-l*c;Math.abs(x)<=1e-4?(p=0,m=0):(p=(a*d-g*l)/x-t.ax,m=(g*h-a*c)/x-t.ay)}f+=Math.atan2(m,p)*u.radDeg,t.ascaleX<0&&(f+=180),f>180?f-=360:f<-180&&(f+=360);let g=t.ascaleX,x=t.ascaleY;if(s||r){switch(t.data.transformMode){case 3:case 4:p=e-t.worldX,m=i-t.worldY}let o=t.data.length*g,h=Math.sqrt(p*p+m*m);if(s&&h<o||r&&h>o&&o>1e-4){let t=(h/o-1)*a+1;g*=t,n&&(x*=t)}}t.updateWorldTransformWith(t.ax,t.ay,t.arotation+f*a,g,x,t.ashearX,t.ashearY)}apply2(t,e,i,s,r,n,a,o,h){let l=t.ax,c=t.ay,d=t.ascaleX,f=t.ascaleY,p=d,m=f,g=e.ascaleX,x=0,w=0,v=0;d<0?(d=-d,x=180,v=-1):(x=0,v=1),f<0&&(f=-f,v=-v),g<0?(g=-g,w=180):w=0;let y=e.ax,b=0,A=0,S=0,M=t.a,I=t.b,T=t.c,k=t.d,E=Math.abs(d-f)<=1e-4;!E||n?(b=0,A=M*y+t.worldX,S=T*y+t.worldY):(b=e.ay,A=M*y+I*b+t.worldX,S=T*y+k*b+t.worldY);let C=t.parent;if(!C)throw new Error("IK parent must itself have a parent.");M=C.a,I=C.b,T=C.c,k=C.d;let R=M*k-I*T,Y=A-C.worldX,F=S-C.worldY;R=Math.abs(R)<=1e-4?0:1/R;let X,P,L=(Y*k-F*I)*R-l,D=(F*M-Y*T)*R-c,B=Math.sqrt(L*L+D*D),O=e.data.length*g;if(B<1e-4)return this.apply1(t,i,s,!1,n,!1,h),void e.updateWorldTransformWith(y,b,0,e.ascaleX,e.ascaleY,e.ashearX,e.ashearY);Y=i-C.worldX,F=s-C.worldY;let V=(Y*k-F*I)*R-l,z=(F*M-Y*T)*R-c,N=V*V+z*z;if(0!=o){o*=d*(g+1)*.5;let t=Math.sqrt(N),e=t-B-O*d+o;if(e>0){let i=Math.min(1,e/(2*o))-1;i=(e-o*(1-i*i))/t,V-=i*V,z-=i*z,N=V*V+z*z}}t:if(E){O*=d;let t=(N-B*B-O*O)/(2*B*O);t<-1?(t=-1,P=Math.PI*r):t>1?(t=1,P=0,n&&(M=(Math.sqrt(N)/(B+O)-1)*h+1,p*=M,a&&(m*=M))):P=Math.acos(t)*r,M=B+O*t,I=O*Math.sin(P),X=Math.atan2(z*M-V*I,V*M+z*I)}else{M=d*O,I=f*O;let t=M*M,e=I*I,i=Math.atan2(z,V);T=e*B*B+t*N-t*e;let s=-2*e*B,n=e-t;if(k=s*s-4*n*T,k>=0){let t=Math.sqrt(k);s<0&&(t=-t),t=.5*-(s+t);let e=t/n,a=T/t,o=Math.abs(e)<Math.abs(a)?e:a;if(o*o<=N){F=Math.sqrt(N-o*o)*r,X=i-Math.atan2(F,o),P=Math.atan2(F/f,(o-B)/d);break t}}let a=u.PI,o=B-M,h=o*o,l=0,c=0,p=B+M,m=p*p,g=0;T=-M*B/(t-e),T>=-1&&T<=1&&(T=Math.acos(T),Y=M*Math.cos(T)+B,F=I*Math.sin(T),k=Y*Y+F*F,k<h&&(a=T,h=k,o=Y,l=F),k>m&&(c=T,m=k,p=Y,g=F)),N<=.5*(h+m)?(X=i-Math.atan2(l*r,o),P=a*r):(X=i-Math.atan2(g*r,p),P=c*r)}let _=Math.atan2(b,y)*v,U=t.arotation;X=(X-_)*u.radDeg+x-U,X>180?X-=360:X<-180&&(X+=360),t.updateWorldTransformWith(l,c,U+X*h,p,m,0,0),U=e.arotation,P=((P+_)*u.radDeg-e.ashearX)*v+w-U,P>180?P-=360:P<-180&&(P+=360),e.updateWorldTransformWith(y,b,U+P*h,e.ascaleX,e.ascaleY,e.ashearX,e.ashearY)}},ge=class extends ce{bones=new Array;_target=null;set target(t){this._target=t}get target(){if(this._target)return this._target;throw new Error("BoneData not set.")}bendDirection=1;compress=!1;stretch=!1;uniform=!1;mix=1;softness=0;constructor(t){super(t,0,!1)}},xe=class extends ce{bones=new Array;_target=null;set target(t){this._target=t}get target(){if(this._target)return this._target;throw new Error("SlotData not set.")}positionMode=we.Fixed;spacingMode=ve.Fixed;rotateMode=ye.Chain;offsetRotation=0;position=0;spacing=0;mixRotate=0;mixX=0;mixY=0;constructor(t){super(t,0,!1)}},we=(t=>(t[t.Fixed=0]="Fixed",t[t.Percent=1]="Percent",t))(we||{}),ve=(t=>(t[t.Length=0]="Length",t[t.Fixed=1]="Fixed",t[t.Percent=2]="Percent",t[t.Proportional=3]="Proportional",t))(ve||{}),ye=(t=>(t[t.Tangent=0]="Tangent",t[t.Chain=1]="Chain",t[t.ChainScale=2]="ChainScale",t))(ye||{}),be=class{data;bones;target;position=0;spacing=0;mixRotate=0;mixX=0;mixY=0;spaces=new Array;positions=new Array;world=new Array;curves=new Array;lengths=new Array;segments=new Array;active=!1;constructor(t,e){if(!t)throw new Error("data cannot be null.");if(!e)throw new Error("skeleton cannot be null.");this.data=t,this.bones=new Array;for(let i=0,s=t.bones.length;i<s;i++){let s=e.findBone(t.bones[i].name);if(!s)throw new Error(`Couldn't find bone ${t.bones[i].name}.`);this.bones.push(s)}let i=e.findSlot(t.target.name);if(!i)throw new Error(`Couldn't find target bone ${t.target.name}`);this.target=i,this.position=t.position,this.spacing=t.spacing,this.mixRotate=t.mixRotate,this.mixX=t.mixX,this.mixY=t.mixY}isActive(){return this.active}update(){let t=this.target.getAttachment();if(!(t instanceof ie))return;let e=this.mixRotate,i=this.mixX,s=this.mixY;if(0==e&&0==i&&0==s)return;let r=this.data,n=0==r.rotateMode,a=2==r.rotateMode,o=this.bones,h=o.length,l=n?h:h+1,c=g.setArraySize(this.spaces,l),d=a?this.lengths=g.setArraySize(this.lengths,h):[],f=this.spacing;switch(r.spacingMode){case 2:if(a)for(let t=0,e=l-1;t<e;t++){let e=o[t],i=e.data.length;if(i<be.epsilon)d[t]=0;else{let s=i*e.a,r=i*e.c;d[t]=Math.sqrt(s*s+r*r)}}g.arrayFill(c,1,l,f);break;case 3:let t=0;for(let e=0,i=l-1;e<i;){let i=o[e],s=i.data.length;if(s<be.epsilon)a&&(d[e]=0),c[++e]=f;else{let r=s*i.a,n=s*i.c,o=Math.sqrt(r*r+n*n);a&&(d[e]=o),c[++e]=o,t+=o}}if(t>0){t=l/t*f;for(let e=1;e<l;e++)c[e]*=t}break;default:let e=0==r.spacingMode;for(let t=0,i=l-1;t<i;){let i=o[t],s=i.data.length;if(s<be.epsilon)a&&(d[t]=0),c[++t]=f;else{let r=s*i.a,n=s*i.c,o=Math.sqrt(r*r+n*n);a&&(d[t]=o),c[++t]=(e?s+f:f)*o/s}}}let p=this.computeWorldPositions(t,l,n),m=p[0],x=p[1],w=r.offsetRotation,v=!1;if(0==w)v=1==r.rotateMode;else{v=!1;let t=this.target.bone;w*=t.a*t.d-t.b*t.c>0?u.degRad:-u.degRad}for(let t=0,r=3;t<h;t++,r+=3){let h=o[t];h.worldX+=(m-h.worldX)*i,h.worldY+=(x-h.worldY)*s;let l=p[r],f=p[r+1],g=l-m,y=f-x;if(a){let i=d[t];if(0!=i){let t=(Math.sqrt(g*g+y*y)/i-1)*e+1;h.a*=t,h.c*=t}}if(m=l,x=f,e>0){let i=h.a,s=h.b,a=h.c,o=h.d,l=0,d=0,f=0;if(l=n?p[r-1]:0==c[t+1]?p[r+2]:Math.atan2(y,g),l-=Math.atan2(a,i),v){d=Math.cos(l),f=Math.sin(l);let t=h.data.length;m+=(t*(d*i-f*a)-g)*e,x+=(t*(f*i+d*a)-y)*e}else l+=w;l>u.PI?l-=u.PI2:l<-u.PI&&(l+=u.PI2),l*=e,d=Math.cos(l),f=Math.sin(l),h.a=d*i-f*a,h.b=d*s-f*o,h.c=f*i+d*a,h.d=f*s+d*o}h.updateAppliedTransform()}}computeWorldPositions(t,e,i){let s=this.target,r=this.position,n=this.spaces,a=g.setArraySize(this.positions,3*e+2),o=this.world,h=t.closed,l=t.worldVerticesLength,c=l/6,u=be.NONE;if(!t.constantSpeed){let d=t.lengths;c-=h?1:2;let f,p=d[c];switch(1==this.data.positionMode&&(r*=p),this.data.spacingMode){case 2:f=p;break;case 3:f=p/e;break;default:f=1}o=g.setArraySize(this.world,8);for(let m=0,g=0,x=0;m<e;m++,g+=3){let e=n[m]*f;r+=e;let w=r;if(h)w%=p,w<0&&(w+=p),x=0;else{if(w<0){u!=be.BEFORE&&(u=be.BEFORE,t.computeWorldVertices(s,2,4,o,0,2)),this.addBeforePosition(w,o,0,a,g);continue}if(w>p){u!=be.AFTER&&(u=be.AFTER,t.computeWorldVertices(s,l-6,4,o,0,2)),this.addAfterPosition(w-p,o,0,a,g);continue}}for(;;x++){let t=d[x];if(!(w>t)){if(0==x)w/=t;else{let e=d[x-1];w=(w-e)/(t-e)}break}}x!=u&&(u=x,h&&x==c?(t.computeWorldVertices(s,l-4,4,o,0,2),t.computeWorldVertices(s,0,4,o,4,2)):t.computeWorldVertices(s,6*x+2,8,o,0,2)),this.addCurvePosition(w,o[0],o[1],o[2],o[3],o[4],o[5],o[6],o[7],a,g,i||m>0&&0==e)}return a}h?(l+=2,o=g.setArraySize(this.world,l),t.computeWorldVertices(s,2,l-4,o,0,2),t.computeWorldVertices(s,0,2,o,l-4,2),o[l-2]=o[0],o[l-1]=o[1]):(c--,l-=4,o=g.setArraySize(this.world,l),t.computeWorldVertices(s,2,l,o,0,2));let d,f=g.setArraySize(this.curves,c),p=0,m=o[0],x=o[1],w=0,v=0,y=0,b=0,A=0,S=0,M=0,I=0,T=0,k=0,E=0,C=0,R=0,Y=0;for(let t=0,e=2;t<c;t++,e+=6)w=o[e],v=o[e+1],y=o[e+2],b=o[e+3],A=o[e+4],S=o[e+5],M=.1875*(m-2*w+y),I=.1875*(x-2*v+b),T=.09375*(3*(w-y)-m+A),k=.09375*(3*(v-b)-x+S),E=2*M+T,C=2*I+k,R=.75*(w-m)+M+.16666667*T,Y=.75*(v-x)+I+.16666667*k,p+=Math.sqrt(R*R+Y*Y),R+=E,Y+=C,E+=T,C+=k,p+=Math.sqrt(R*R+Y*Y),R+=E,Y+=C,p+=Math.sqrt(R*R+Y*Y),R+=E+T,Y+=C+k,p+=Math.sqrt(R*R+Y*Y),f[t]=p,m=A,x=S;switch(1==this.data.positionMode&&(r*=p),this.data.spacingMode){case 2:d=p;break;case 3:d=p/e;break;default:d=1}let F=this.segments,X=0;for(let t=0,s=0,c=0,g=0;t<e;t++,s+=3){let e=n[t]*d;r+=e;let P=r;if(h)P%=p,P<0&&(P+=p),c=0;else{if(P<0){this.addBeforePosition(P,o,0,a,s);continue}if(P>p){this.addAfterPosition(P-p,o,l-4,a,s);continue}}for(;;c++){let t=f[c];if(!(P>t)){if(0==c)P/=t;else{let e=f[c-1];P=(P-e)/(t-e)}break}}if(c!=u){u=c;let t=6*c;for(m=o[t],x=o[t+1],w=o[t+2],v=o[t+3],y=o[t+4],b=o[t+5],A=o[t+6],S=o[t+7],M=.03*(m-2*w+y),I=.03*(x-2*v+b),T=.006*(3*(w-y)-m+A),k=.006*(3*(v-b)-x+S),E=2*M+T,C=2*I+k,R=.3*(w-m)+M+.16666667*T,Y=.3*(v-x)+I+.16666667*k,X=Math.sqrt(R*R+Y*Y),F[0]=X,t=1;t<8;t++)R+=E,Y+=C,E+=T,C+=k,X+=Math.sqrt(R*R+Y*Y),F[t]=X;R+=E,Y+=C,X+=Math.sqrt(R*R+Y*Y),F[8]=X,R+=E+T,Y+=C+k,X+=Math.sqrt(R*R+Y*Y),F[9]=X,g=0}for(P*=X;;g++){let t=F[g];if(!(P>t)){if(0==g)P/=t;else{let e=F[g-1];P=g+(P-e)/(t-e)}break}}this.addCurvePosition(.1*P,m,x,w,v,y,b,A,S,a,s,i||t>0&&0==e)}return a}addBeforePosition(t,e,i,s,r){let n=e[i],a=e[i+1],o=e[i+2]-n,h=e[i+3]-a,l=Math.atan2(h,o);s[r]=n+t*Math.cos(l),s[r+1]=a+t*Math.sin(l),s[r+2]=l}addAfterPosition(t,e,i,s,r){let n=e[i+2],a=e[i+3],o=n-e[i],h=a-e[i+1],l=Math.atan2(h,o);s[r]=n+t*Math.cos(l),s[r+1]=a+t*Math.sin(l),s[r+2]=l}addCurvePosition(t,e,i,s,r,n,a,o,h,l,c,u){if(0==t||isNaN(t))return l[c]=e,l[c+1]=i,void(l[c+2]=Math.atan2(r-i,s-e));let d=t*t,f=d*t,p=1-t,m=p*p,g=m*p,x=p*t,w=3*x,v=p*w,y=w*t,b=e*g+s*v+n*y+o*f,A=i*g+r*v+a*y+h*f;l[c]=b,l[c+1]=A,u&&(l[c+2]=t<.001?Math.atan2(r-i,s-e):Math.atan2(A-(i*m+r*x*2+a*d),b-(e*m+s*x*2+n*d)))}},Ae=be;r(Ae,"NONE",-1),r(Ae,"BEFORE",-2),r(Ae,"AFTER",-3),r(Ae,"epsilon",1e-5);var Se=class{data;bone;color;darkColor=null;attachment=null;attachmentState=0;sequenceIndex=-1;deform=new Array;constructor(t,e){if(!t)throw new Error("data cannot be null.");if(!e)throw new Error("bone cannot be null.");this.data=t,this.bone=e,this.color=new l,this.darkColor=t.darkColor?new l:null,this.setToSetupPose()}getSkeleton(){return this.bone.skeleton}getAttachment(){return this.attachment}setAttachment(t){this.attachment!=t&&(t instanceof M&&this.attachment instanceof M&&t.timelineAttachment==this.attachment.timelineAttachment||(this.deform.length=0),this.attachment=t,this.sequenceIndex=-1)}setToSetupPose(){this.color.setFromColor(this.data.color),this.darkColor&&this.darkColor.setFromColor(this.data.darkColor),this.data.attachmentName?(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName))):this.attachment=null}},Me=class{data;bones;target;mixRotate=0;mixX=0;mixY=0;mixScaleX=0;mixScaleY=0;mixShearY=0;temp=new v;active=!1;constructor(t,e){if(!t)throw new Error("data cannot be null.");if(!e)throw new Error("skeleton cannot be null.");this.data=t,this.mixRotate=t.mixRotate,this.mixX=t.mixX,this.mixY=t.mixY,this.mixScaleX=t.mixScaleX,this.mixScaleY=t.mixScaleY,this.mixShearY=t.mixShearY,this.bones=new Array;for(let i=0;i<t.bones.length;i++){let s=e.findBone(t.bones[i].name);if(!s)throw new Error(`Couldn't find bone ${t.bones[i].name}.`);this.bones.push(s)}let i=e.findBone(t.target.name);if(!i)throw new Error(`Couldn't find target bone ${t.target.name}.`);this.target=i}isActive(){return this.active}update(){0==this.mixRotate&&0==this.mixX&&0==this.mixY&&0==this.mixScaleX&&0==this.mixScaleY&&0==this.mixShearY||(this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld())}applyAbsoluteWorld(){let t=this.mixRotate,e=this.mixX,i=this.mixY,s=this.mixScaleX,r=this.mixScaleY,n=this.mixShearY,a=0!=e||0!=i,o=this.target,h=o.a,l=o.b,c=o.c,d=o.d,f=h*d-l*c>0?u.degRad:-u.degRad,p=this.data.offsetRotation*f,m=this.data.offsetShearY*f,g=this.bones;for(let f=0,x=g.length;f<x;f++){let x=g[f];if(0!=t){let e=x.a,i=x.b,s=x.c,r=x.d,n=Math.atan2(c,h)-Math.atan2(s,e)+p;n>u.PI?n-=u.PI2:n<-u.PI&&(n+=u.PI2),n*=t;let a=Math.cos(n),o=Math.sin(n);x.a=a*e-o*s,x.b=a*i-o*r,x.c=o*e+a*s,x.d=o*i+a*r}if(a){let t=this.temp;o.localToWorld(t.set(this.data.offsetX,this.data.offsetY)),x.worldX+=(t.x-x.worldX)*e,x.worldY+=(t.y-x.worldY)*i}if(0!=s){let t=Math.sqrt(x.a*x.a+x.c*x.c);0!=t&&(t=(t+(Math.sqrt(h*h+c*c)-t+this.data.offsetScaleX)*s)/t),x.a*=t,x.c*=t}if(0!=r){let t=Math.sqrt(x.b*x.b+x.d*x.d);0!=t&&(t=(t+(Math.sqrt(l*l+d*d)-t+this.data.offsetScaleY)*r)/t),x.b*=t,x.d*=t}if(n>0){let t=x.b,e=x.d,i=Math.atan2(e,t),s=Math.atan2(d,l)-Math.atan2(c,h)-(i-Math.atan2(x.c,x.a));s>u.PI?s-=u.PI2:s<-u.PI&&(s+=u.PI2),s=i+(s+m)*n;let r=Math.sqrt(t*t+e*e);x.b=Math.cos(s)*r,x.d=Math.sin(s)*r}x.updateAppliedTransform()}}applyRelativeWorld(){let t=this.mixRotate,e=this.mixX,i=this.mixY,s=this.mixScaleX,r=this.mixScaleY,n=this.mixShearY,a=0!=e||0!=i,o=this.target,h=o.a,l=o.b,c=o.c,d=o.d,f=h*d-l*c>0?u.degRad:-u.degRad,p=this.data.offsetRotation*f,m=this.data.offsetShearY*f,g=this.bones;for(let f=0,x=g.length;f<x;f++){let x=g[f];if(0!=t){let e=x.a,i=x.b,s=x.c,r=x.d,n=Math.atan2(c,h)+p;n>u.PI?n-=u.PI2:n<-u.PI&&(n+=u.PI2),n*=t;let a=Math.cos(n),o=Math.sin(n);x.a=a*e-o*s,x.b=a*i-o*r,x.c=o*e+a*s,x.d=o*i+a*r}if(a){let t=this.temp;o.localToWorld(t.set(this.data.offsetX,this.data.offsetY)),x.worldX+=t.x*e,x.worldY+=t.y*i}if(0!=s){let t=(Math.sqrt(h*h+c*c)-1+this.data.offsetScaleX)*s+1;x.a*=t,x.c*=t}if(0!=r){let t=(Math.sqrt(l*l+d*d)-1+this.data.offsetScaleY)*r+1;x.b*=t,x.d*=t}if(n>0){let t=Math.atan2(d,l)-Math.atan2(c,h);t>u.PI?t-=u.PI2:t<-u.PI&&(t+=u.PI2);let e=x.b,i=x.d;t=Math.atan2(i,e)+(t-u.PI/2+m)*n;let s=Math.sqrt(e*e+i*i);x.b=Math.cos(t)*s,x.d=Math.sin(t)*s}x.updateAppliedTransform()}}applyAbsoluteLocal(){let t=this.mixRotate,e=this.mixX,i=this.mixY,s=this.mixScaleX,r=this.mixScaleY,n=this.mixShearY,a=this.target,o=this.bones;for(let h=0,l=o.length;h<l;h++){let l=o[h],c=l.arotation;if(0!=t){let e=a.arotation-c+this.data.offsetRotation;e-=360*(16384-(16384.499999999996-e/360|0)),c+=e*t}let u=l.ax,d=l.ay;u+=(a.ax-u+this.data.offsetX)*e,d+=(a.ay-d+this.data.offsetY)*i;let f=l.ascaleX,p=l.ascaleY;0!=s&&0!=f&&(f=(f+(a.ascaleX-f+this.data.offsetScaleX)*s)/f),0!=r&&0!=p&&(p=(p+(a.ascaleY-p+this.data.offsetScaleY)*r)/p);let m=l.ashearY;if(0!=n){let t=a.ashearY-m+this.data.offsetShearY;t-=360*(16384-(16384.499999999996-t/360|0)),m+=t*n}l.updateWorldTransformWith(u,d,c,f,p,l.ashearX,m)}}applyRelativeLocal(){let t=this.mixRotate,e=this.mixX,i=this.mixY,s=this.mixScaleX,r=this.mixScaleY,n=this.mixShearY,a=this.target,o=this.bones;for(let h=0,l=o.length;h<l;h++){let l=o[h],c=l.arotation+(a.arotation+this.data.offsetRotation)*t,u=l.ax+(a.ax+this.data.offsetX)*e,d=l.ay+(a.ay+this.data.offsetY)*i,f=l.ascaleX*((a.ascaleX-1+this.data.offsetScaleX)*s+1),p=l.ascaleY*((a.ascaleY-1+this.data.offsetScaleY)*r+1),m=l.ashearY+(a.ashearY+this.data.offsetShearY)*n;l.updateWorldTransformWith(u,d,c,f,p,l.ashearX,m)}}},Ie=class{data;bones;slots;drawOrder;ikConstraints;transformConstraints;pathConstraints;_updateCache=new Array;skin=null;color;scaleX=1;_scaleY=1;get scaleY(){return Ie.yDown?-this._scaleY:this._scaleY}set scaleY(t){this._scaleY=t}x=0;y=0;constructor(t){if(!t)throw new Error("data cannot be null.");this.data=t,this.bones=new Array;for(let e=0;e<t.bones.length;e++){let i,s=t.bones[e];if(s.parent){let t=this.bones[s.parent.index];i=new le(s,this,t),t.children.push(i)}else i=new le(s,this,null);this.bones.push(i)}this.slots=new Array,this.drawOrder=new Array;for(let e=0;e<t.slots.length;e++){let i=t.slots[e],s=this.bones[i.boneData.index],r=new Se(i,s);this.slots.push(r),this.drawOrder.push(r)}this.ikConstraints=new Array;for(let e=0;e<t.ikConstraints.length;e++){let i=t.ikConstraints[e];this.ikConstraints.push(new me(i,this))}this.transformConstraints=new Array;for(let e=0;e<t.transformConstraints.length;e++){let i=t.transformConstraints[e];this.transformConstraints.push(new Me(i,this))}this.pathConstraints=new Array;for(let e=0;e<t.pathConstraints.length;e++){let i=t.pathConstraints[e];this.pathConstraints.push(new Ae(i,this))}this.color=new l(1,1,1,1),this.updateCache()}updateCache(){this._updateCache.length=0;let t=this.bones;for(let e=0,i=t.length;e<i;e++){let i=t[e];i.sorted=i.data.skinRequired,i.active=!i.sorted}if(this.skin){let t=this.skin.bones;for(let e=0,i=this.skin.bones.length;e<i;e++){let i=this.bones[t[e].index];do{i.sorted=!1,i.active=!0,i=i.parent}while(i)}}let e=this.ikConstraints,i=this.transformConstraints,s=this.pathConstraints,r=e.length,n=i.length,a=s.length,o=r+n+a;t:for(let t=0;t<o;t++){for(let i=0;i<r;i++){let s=e[i];if(s.data.order==t){this.sortIkConstraint(s);continue t}}for(let e=0;e<n;e++){let s=i[e];if(s.data.order==t){this.sortTransformConstraint(s);continue t}}for(let e=0;e<a;e++){let i=s[e];if(i.data.order==t){this.sortPathConstraint(i);continue t}}}for(let e=0,i=t.length;e<i;e++)this.sortBone(t[e])}sortIkConstraint(t){if(t.active=t.target.isActive()&&(!t.data.skinRequired||this.skin&&g.contains(this.skin.constraints,t.data,!0)),!t.active)return;let e=t.target;this.sortBone(e);let i=t.bones,s=i[0];if(this.sortBone(s),1==i.length)this._updateCache.push(t),this.sortReset(s.children);else{let e=i[i.length-1];this.sortBone(e),this._updateCache.push(t),this.sortReset(s.children),e.sorted=!0}}sortPathConstraint(t){if(t.active=t.target.bone.isActive()&&(!t.data.skinRequired||this.skin&&g.contains(this.skin.constraints,t.data,!0)),!t.active)return;let e=t.target,i=e.data.index,s=e.bone;this.skin&&this.sortPathConstraintAttachment(this.skin,i,s),this.data.defaultSkin&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,i,s);for(let t=0,e=this.data.skins.length;t<e;t++)this.sortPathConstraintAttachment(this.data.skins[t],i,s);let r=e.getAttachment();r instanceof ie&&this.sortPathConstraintAttachmentWith(r,s);let n=t.bones,a=n.length;for(let t=0;t<a;t++)this.sortBone(n[t]);this._updateCache.push(t);for(let t=0;t<a;t++)this.sortReset(n[t].children);for(let t=0;t<a;t++)n[t].sorted=!0}sortTransformConstraint(t){if(t.active=t.target.isActive()&&(!t.data.skinRequired||this.skin&&g.contains(this.skin.constraints,t.data,!0)),!t.active)return;this.sortBone(t.target);let e=t.bones,i=e.length;if(t.data.local)for(let t=0;t<i;t++){let i=e[t];this.sortBone(i.parent),this.sortBone(i)}else for(let t=0;t<i;t++)this.sortBone(e[t]);this._updateCache.push(t);for(let t=0;t<i;t++)this.sortReset(e[t].children);for(let t=0;t<i;t++)e[t].sorted=!0}sortPathConstraintAttachment(t,e,i){let s=t.attachments[e];if(s)for(let t in s)this.sortPathConstraintAttachmentWith(s[t],i)}sortPathConstraintAttachmentWith(t,e){if(!(t instanceof ie))return;let i=t.bones;if(i){let t=this.bones;for(let e=0,s=i.length;e<s;){let s=i[e++];for(s+=e;e<s;)this.sortBone(t[i[e++]])}}else this.sortBone(e)}sortBone(t){if(!t)return;if(t.sorted)return;let e=t.parent;e&&this.sortBone(e),t.sorted=!0,this._updateCache.push(t)}sortReset(t){for(let e=0,i=t.length;e<i;e++){let i=t[e];i.active&&(i.sorted&&this.sortReset(i.children),i.sorted=!1)}}updateWorldTransform(){let t=this.bones;for(let e=0,i=t.length;e<i;e++){let i=t[e];i.ax=i.x,i.ay=i.y,i.arotation=i.rotation,i.ascaleX=i.scaleX,i.ascaleY=i.scaleY,i.ashearX=i.shearX,i.ashearY=i.shearY}let e=this._updateCache;for(let t=0,i=e.length;t<i;t++)e[t].update()}updateWorldTransformWith(t){let e=this.getRootBone();if(!e)throw new Error("Root bone must not be null.");let i=t.a,s=t.b,r=t.c,n=t.d;e.worldX=i*this.x+s*this.y+t.worldX,e.worldY=r*this.x+n*this.y+t.worldY;let a=e.rotation+90+e.shearY,o=u.cosDeg(e.rotation+e.shearX)*e.scaleX,h=u.cosDeg(a)*e.scaleY,l=u.sinDeg(e.rotation+e.shearX)*e.scaleX,c=u.sinDeg(a)*e.scaleY;e.a=(i*o+s*l)*this.scaleX,e.b=(i*h+s*c)*this.scaleX,e.c=(r*o+n*l)*this.scaleY,e.d=(r*h+n*c)*this.scaleY;let d=this._updateCache;for(let t=0,i=d.length;t<i;t++){let i=d[t];i!=e&&i.update()}}setToSetupPose(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()}setBonesToSetupPose(){let t=this.bones;for(let e=0,i=t.length;e<i;e++)t[e].setToSetupPose();let e=this.ikConstraints;for(let t=0,i=e.length;t<i;t++){let i=e[t];i.mix=i.data.mix,i.softness=i.data.softness,i.bendDirection=i.data.bendDirection,i.compress=i.data.compress,i.stretch=i.data.stretch}let i=this.transformConstraints;for(let t=0,e=i.length;t<e;t++){let e=i[t],s=e.data;e.mixRotate=s.mixRotate,e.mixX=s.mixX,e.mixY=s.mixY,e.mixScaleX=s.mixScaleX,e.mixScaleY=s.mixScaleY,e.mixShearY=s.mixShearY}let s=this.pathConstraints;for(let t=0,e=s.length;t<e;t++){let e=s[t],i=e.data;e.position=i.position,e.spacing=i.spacing,e.mixRotate=i.mixRotate,e.mixX=i.mixX,e.mixY=i.mixY}}setSlotsToSetupPose(){let t=this.slots;g.arrayCopy(t,0,this.drawOrder,0,t.length);for(let e=0,i=t.length;e<i;e++)t[e].setToSetupPose()}getRootBone(){return 0==this.bones.length?null:this.bones[0]}findBone(t){if(!t)throw new Error("boneName cannot be null.");let e=this.bones;for(let i=0,s=e.length;i<s;i++){let s=e[i];if(s.data.name==t)return s}return null}findSlot(t){if(!t)throw new Error("slotName cannot be null.");let e=this.slots;for(let i=0,s=e.length;i<s;i++){let s=e[i];if(s.data.name==t)return s}return null}setSkinByName(t){let e=this.data.findSkin(t);if(!e)throw new Error("Skin not found: "+t);this.setSkin(e)}setSkin(t){if(t!=this.skin){if(t)if(this.skin)t.attachAll(this,this.skin);else{let e=this.slots;for(let i=0,s=e.length;i<s;i++){let s=e[i],r=s.data.attachmentName;if(r){let e=t.getAttachment(i,r);e&&s.setAttachment(e)}}}this.skin=t,this.updateCache()}}getAttachmentByName(t,e){let i=this.data.findSlot(t);if(!i)throw new Error(`Can't find slot with name ${t}`);return this.getAttachment(i.index,e)}getAttachment(t,e){if(!e)throw new Error("attachmentName cannot be null.");if(this.skin){let i=this.skin.getAttachment(t,e);if(i)return i}return this.data.defaultSkin?this.data.defaultSkin.getAttachment(t,e):null}setAttachment(t,e){if(!t)throw new Error("slotName cannot be null.");let i=this.slots;for(let s=0,r=i.length;s<r;s++){let r=i[s];if(r.data.name==t){let i=null;if(e&&(i=this.getAttachment(s,e),!i))throw new Error("Attachment not found: "+e+", for slot: "+t);return void r.setAttachment(i)}}throw new Error("Slot not found: "+t)}findIkConstraint(t){if(!t)throw new Error("constraintName cannot be null.");let e=this.ikConstraints;for(let i=0,s=e.length;i<s;i++){let s=e[i];if(s.data.name==t)return s}return null}findTransformConstraint(t){if(!t)throw new Error("constraintName cannot be null.");let e=this.transformConstraints;for(let i=0,s=e.length;i<s;i++){let s=e[i];if(s.data.name==t)return s}return null}findPathConstraint(t){if(!t)throw new Error("constraintName cannot be null.");let e=this.pathConstraints;for(let i=0,s=e.length;i<s;i++){let s=e[i];if(s.data.name==t)return s}return null}getBoundsRect(){let t=new v,e=new v;return this.getBounds(t,e),{x:t.x,y:t.y,width:e.x,height:e.y}}getBounds(t,e,i=new Array(2)){if(!t)throw new Error("offset cannot be null.");if(!e)throw new Error("size cannot be null.");let s=this.drawOrder,r=Number.POSITIVE_INFINITY,n=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY,o=Number.NEGATIVE_INFINITY;for(let t=0,e=s.length;t<e;t++){let e=s[t];if(!e.bone.active)continue;let h=0,l=null,c=e.getAttachment();if(c instanceof ne)h=8,l=g.setArraySize(i,h,0),c.computeWorldVertices(e,l,0,2);else if(c instanceof ee){let t=c;h=t.worldVerticesLength,l=g.setArraySize(i,h,0),t.computeWorldVertices(e,0,h,l,0,2)}if(l)for(let t=0,e=l.length;t<e;t+=2){let e=l[t],i=l[t+1];r=Math.min(r,e),n=Math.min(n,i),a=Math.max(a,e),o=Math.max(o,i)}}t.set(r,n),e.set(a-r,o-n)}},Te=Ie;r(Te,"yDown",!1);var ke=class{name=null;bones=new Array;slots=new Array;skins=new Array;defaultSkin=null;events=new Array;animations=new Array;ikConstraints=new Array;transformConstraints=new Array;pathConstraints=new Array;x=0;y=0;width=0;height=0;version=null;hash=null;fps=0;imagesPath=null;audioPath=null;findBone(t){if(!t)throw new Error("boneName cannot be null.");let e=this.bones;for(let i=0,s=e.length;i<s;i++){let s=e[i];if(s.name==t)return s}return null}findSlot(t){if(!t)throw new Error("slotName cannot be null.");let e=this.slots;for(let i=0,s=e.length;i<s;i++){let s=e[i];if(s.name==t)return s}return null}findSkin(t){if(!t)throw new Error("skinName cannot be null.");let e=this.skins;for(let i=0,s=e.length;i<s;i++){let s=e[i];if(s.name==t)return s}return null}findEvent(t){if(!t)throw new Error("eventDataName cannot be null.");let e=this.events;for(let i=0,s=e.length;i<s;i++){let s=e[i];if(s.name==t)return s}return null}findAnimation(t){if(!t)throw new Error("animationName cannot be null.");let e=this.animations;for(let i=0,s=e.length;i<s;i++){let s=e[i];if(s.name==t)return s}return null}findIkConstraint(t){if(!t)throw new Error("constraintName cannot be null.");let e=this.ikConstraints;for(let i=0,s=e.length;i<s;i++){let s=e[i];if(s.name==t)return s}return null}findTransformConstraint(t){if(!t)throw new Error("constraintName cannot be null.");let e=this.transformConstraints;for(let i=0,s=e.length;i<s;i++){let s=e[i];if(s.name==t)return s}return null}findPathConstraint(t){if(!t)throw new Error("constraintName cannot be null.");let e=this.pathConstraints;for(let i=0,s=e.length;i<s;i++){let s=e[i];if(s.name==t)return s}return null}},Ee=class{constructor(t=0,e,i){this.slotIndex=t,this.name=e,this.attachment=i}},Ce=class{name;attachments=new Array;bones=Array();constraints=new Array;constructor(t){if(!t)throw new Error("name cannot be null.");this.name=t}setAttachment(t,e,i){if(!i)throw new Error("attachment cannot be null.");let s=this.attachments;t>=s.length&&(s.length=t+1),s[t]||(s[t]={}),s[t][e]=i}addSkin(t){for(let e=0;e<t.bones.length;e++){let i=t.bones[e],s=!1;for(let t=0;t<this.bones.length;t++)if(this.bones[t]==i){s=!0;break}s||this.bones.push(i)}for(let e=0;e<t.constraints.length;e++){let i=t.constraints[e],s=!1;for(let t=0;t<this.constraints.length;t++)if(this.constraints[t]==i){s=!0;break}s||this.constraints.push(i)}let e=t.getAttachments();for(let t=0;t<e.length;t++){var i=e[t];this.setAttachment(i.slotIndex,i.name,i.attachment)}}copySkin(t){for(let e=0;e<t.bones.length;e++){let i=t.bones[e],s=!1;for(let t=0;t<this.bones.length;t++)if(this.bones[t]==i){s=!0;break}s||this.bones.push(i)}for(let e=0;e<t.constraints.length;e++){let i=t.constraints[e],s=!1;for(let t=0;t<this.constraints.length;t++)if(this.constraints[t]==i){s=!0;break}s||this.constraints.push(i)}let e=t.getAttachments();for(let t=0;t<e.length;t++){var i=e[t];i.attachment&&(i.attachment instanceof ee?(i.attachment=i.attachment.newLinkedMesh(),this.setAttachment(i.slotIndex,i.name,i.attachment)):(i.attachment=i.attachment.copy(),this.setAttachment(i.slotIndex,i.name,i.attachment)))}}getAttachment(t,e){let i=this.attachments[t];return i?i[e]:null}removeAttachment(t,e){let i=this.attachments[t];i&&delete i[e]}getAttachments(){let t=new Array;for(var e=0;e<this.attachments.length;e++){let i=this.attachments[e];if(i)for(let s in i){let r=i[s];r&&t.push(new Ee(e,s,r))}}return t}getAttachmentsForSlot(t,e){let i=this.attachments[t];if(i)for(let s in i){let r=i[s];r&&e.push(new Ee(t,s,r))}}clear(){this.attachments.length=0,this.bones.length=0,this.constraints.length=0}attachAll(t,e){let i=0;for(let s=0;s<t.slots.length;s++){let r=t.slots[s],n=r.getAttachment();if(n&&i<e.attachments.length){let t=e.attachments[i];for(let e in t){if(n==t[e]){let t=this.getAttachment(i,e);t&&r.setAttachment(t);break}}}i++}}},Re=class{index=0;name;boneData;color=new l(1,1,1,1);darkColor=null;attachmentName=null;blendMode=Ye.Normal;constructor(t,e,i){if(t<0)throw new Error("index must be >= 0.");if(!e)throw new Error("name cannot be null.");if(!i)throw new Error("boneData cannot be null.");this.index=t,this.name=e,this.boneData=i}},Ye=(t=>(t[t.Normal=0]="Normal",t[t.Additive=1]="Additive",t[t.Multiply=2]="Multiply",t[t.Screen=3]="Screen",t))(Ye||{}),Fe=class extends ce{bones=new Array;_target=null;set target(t){this._target=t}get target(){if(this._target)return this._target;throw new Error("BoneData not set.")}mixRotate=0;mixX=0;mixY=0;mixScaleX=0;mixScaleY=0;mixShearY=0;offsetRotation=0;offsetX=0;offsetY=0;offsetScaleX=0;offsetScaleY=0;offsetShearY=0;relative=!1;local=!1;constructor(t){super(t,0,!1)}},Xe=class{scale=1;attachmentLoader;linkedMeshes=new Array;constructor(t){this.attachmentLoader=t}readSkeletonData(t){let e=this.scale,i=new ke;i.name="";let s=new Pe(t),r=s.readInt32(),n=s.readInt32();i.hash=0==n&&0==r?null:n.toString(16)+r.toString(16),i.version=s.readString(),i.x=s.readFloat(),i.y=s.readFloat(),i.width=s.readFloat(),i.height=s.readFloat();let a=s.readBoolean();a&&(i.fps=s.readFloat(),i.imagesPath=s.readString(),i.audioPath=s.readString());let o=0;o=s.readInt(!0);for(let t=0;t<o;t++){let t=s.readString();if(!t)throw new Error("String in string table must not be null.");s.strings.push(t)}o=s.readInt(!0);for(let t=0;t<o;t++){let r=s.readString();if(!r)throw new Error("Bone name must not be null.");let n=0==t?null:i.bones[s.readInt(!0)],o=new oe(t,r,n);o.rotation=s.readFloat(),o.x=s.readFloat()*e,o.y=s.readFloat()*e,o.scaleX=s.readFloat(),o.scaleY=s.readFloat(),o.shearX=s.readFloat(),o.shearY=s.readFloat(),o.length=s.readFloat()*e,o.transformMode=s.readInt(!0),o.skinRequired=s.readBoolean(),a&&l.rgba8888ToColor(o.color,s.readInt32()),i.bones.push(o)}o=s.readInt(!0);for(let t=0;t<o;t++){let e=s.readString();if(!e)throw new Error("Slot name must not be null.");let r=i.bones[s.readInt(!0)],n=new Re(t,e,r);l.rgba8888ToColor(n.color,s.readInt32());let a=s.readInt32();-1!=a&&l.rgb888ToColor(n.darkColor=new l,a),n.attachmentName=s.readStringRef(),n.blendMode=s.readInt(!0),i.slots.push(n)}o=s.readInt(!0);for(let t,r=0;r<o;r++){let r=s.readString();if(!r)throw new Error("IK constraint data name must not be null.");let n=new ge(r);n.order=s.readInt(!0),n.skinRequired=s.readBoolean(),t=s.readInt(!0);for(let e=0;e<t;e++)n.bones.push(i.bones[s.readInt(!0)]);n.target=i.bones[s.readInt(!0)],n.mix=s.readFloat(),n.softness=s.readFloat()*e,n.bendDirection=s.readByte(),n.compress=s.readBoolean(),n.stretch=s.readBoolean(),n.uniform=s.readBoolean(),i.ikConstraints.push(n)}o=s.readInt(!0);for(let t,r=0;r<o;r++){let r=s.readString();if(!r)throw new Error("Transform constraint data name must not be null.");let n=new Fe(r);n.order=s.readInt(!0),n.skinRequired=s.readBoolean(),t=s.readInt(!0);for(let e=0;e<t;e++)n.bones.push(i.bones[s.readInt(!0)]);n.target=i.bones[s.readInt(!0)],n.local=s.readBoolean(),n.relative=s.readBoolean(),n.offsetRotation=s.readFloat(),n.offsetX=s.readFloat()*e,n.offsetY=s.readFloat()*e,n.offsetScaleX=s.readFloat(),n.offsetScaleY=s.readFloat(),n.offsetShearY=s.readFloat(),n.mixRotate=s.readFloat(),n.mixX=s.readFloat(),n.mixY=s.readFloat(),n.mixScaleX=s.readFloat(),n.mixScaleY=s.readFloat(),n.mixShearY=s.readFloat(),i.transformConstraints.push(n)}o=s.readInt(!0);for(let t,r=0;r<o;r++){let r=s.readString();if(!r)throw new Error("Path constraint data name must not be null.");let n=new xe(r);n.order=s.readInt(!0),n.skinRequired=s.readBoolean(),t=s.readInt(!0);for(let e=0;e<t;e++)n.bones.push(i.bones[s.readInt(!0)]);n.target=i.slots[s.readInt(!0)],n.positionMode=s.readInt(!0),n.spacingMode=s.readInt(!0),n.rotateMode=s.readInt(!0),n.offsetRotation=s.readFloat(),n.position=s.readFloat(),0==n.positionMode&&(n.position*=e),n.spacing=s.readFloat(),0!=n.spacingMode&&1!=n.spacingMode||(n.spacing*=e),n.mixRotate=s.readFloat(),n.mixX=s.readFloat(),n.mixY=s.readFloat(),i.pathConstraints.push(n)}let h=this.readSkin(s,i,!0,a);h&&(i.defaultSkin=h,i.skins.push(h));{let t=i.skins.length;for(g.setArraySize(i.skins,o=t+s.readInt(!0));t<o;t++){let e=this.readSkin(s,i,!1,a);if(!e)throw new Error("readSkin() should not have returned null.");i.skins[t]=e}}o=this.linkedMeshes.length;for(let t=0;t<o;t++){let e=this.linkedMeshes[t],s=e.skin?i.findSkin(e.skin):i.defaultSkin;if(!s)throw new Error("Not skin found for linked mesh.");if(!e.parent)throw new Error("Linked mesh parent must not be null");let r=s.getAttachment(e.slotIndex,e.parent);if(!r)throw new Error(`Parent mesh not found: ${e.parent}`);e.mesh.timelineAttachment=e.inheritTimeline?r:e.mesh,e.mesh.setParentMesh(r),null!=e.mesh.region&&e.mesh.updateRegion()}this.linkedMeshes.length=0,o=s.readInt(!0);for(let t=0;t<o;t++){let t=s.readStringRef();if(!t)throw new Error;let e=new pe(t);e.intValue=s.readInt(!1),e.floatValue=s.readFloat(),e.stringValue=s.readString(),e.audioPath=s.readString(),e.audioPath&&(e.volume=s.readFloat(),e.balance=s.readFloat()),i.events.push(e)}o=s.readInt(!0);for(let t=0;t<o;t++){let t=s.readString();if(!t)throw new Error("Animatio name must not be null.");i.animations.push(this.readAnimation(s,t,i))}return i}readSkin(t,e,i,s){let r=null,n=0;if(i){if(n=t.readInt(!0),0==n)return null;r=new Ce("default")}else{let i=t.readStringRef();if(!i)throw new Error("Skin name must not be null.");r=new Ce(i),r.bones.length=t.readInt(!0);for(let i=0,s=r.bones.length;i<s;i++)r.bones[i]=e.bones[t.readInt(!0)];for(let i=0,s=t.readInt(!0);i<s;i++)r.constraints.push(e.ikConstraints[t.readInt(!0)]);for(let i=0,s=t.readInt(!0);i<s;i++)r.constraints.push(e.transformConstraints[t.readInt(!0)]);for(let i=0,s=t.readInt(!0);i<s;i++)r.constraints.push(e.pathConstraints[t.readInt(!0)]);n=t.readInt(!0)}for(let i=0;i<n;i++){let i=t.readInt(!0);for(let n=0,a=t.readInt(!0);n<a;n++){let n=t.readStringRef();if(!n)throw new Error("Attachment name must not be null");let a=this.readAttachment(t,e,r,i,n,s);a&&r.setAttachment(i,n,a)}}return r}readAttachment(t,e,i,s,r,n){let a=this.scale,o=t.readStringRef();switch(o||(o=r),t.readByte()){case Be.Region:{let e=t.readStringRef(),s=t.readFloat(),r=t.readFloat(),n=t.readFloat(),h=t.readFloat(),c=t.readFloat(),u=t.readFloat(),d=t.readFloat(),f=t.readInt32(),p=this.readSequence(t);e||(e=o);let m=this.attachmentLoader.newRegionAttachment(i,o,e,p);return m?(m.path=e,m.x=r*a,m.y=n*a,m.scaleX=h,m.scaleY=c,m.rotation=s,m.width=u*a,m.height=d*a,l.rgba8888ToColor(m.color,f),m.sequence=p,null==p&&m.updateRegion(),m):null}case Be.BoundingBox:{let e=t.readInt(!0),s=this.readVertices(t,e),r=n?t.readInt32():0,a=this.attachmentLoader.newBoundingBoxAttachment(i,o);return a?(a.worldVerticesLength=e<<1,a.vertices=s.vertices,a.bones=s.bones,n&&l.rgba8888ToColor(a.color,r),a):null}case Be.Mesh:{let e=t.readStringRef(),s=t.readInt32(),r=t.readInt(!0),h=this.readFloatArray(t,r<<1,1),c=this.readShortArray(t),u=this.readVertices(t,r),d=t.readInt(!0),f=this.readSequence(t),p=[],m=0,g=0;n&&(p=this.readShortArray(t),m=t.readFloat(),g=t.readFloat()),e||(e=o);let x=this.attachmentLoader.newMeshAttachment(i,o,e,f);return x?(x.path=e,l.rgba8888ToColor(x.color,s),x.bones=u.bones,x.vertices=u.vertices,x.worldVerticesLength=r<<1,x.triangles=c,x.regionUVs=h,null==f&&x.updateRegion(),x.hullLength=d<<1,x.sequence=f,n&&(x.edges=p,x.width=m*a,x.height=g*a),x):null}case Be.LinkedMesh:{let e=t.readStringRef(),r=t.readInt32(),h=t.readStringRef(),c=t.readStringRef(),u=t.readBoolean(),d=this.readSequence(t),f=0,p=0;n&&(f=t.readFloat(),p=t.readFloat()),e||(e=o);let m=this.attachmentLoader.newMeshAttachment(i,o,e,d);return m?(m.path=e,l.rgba8888ToColor(m.color,r),m.sequence=d,n&&(m.width=f*a,m.height=p*a),this.linkedMeshes.push(new Le(m,h,s,c,u)),m):null}case Be.Path:{let e=t.readBoolean(),s=t.readBoolean(),r=t.readInt(!0),h=this.readVertices(t,r),c=g.newArray(r/3,0);for(let e=0,i=c.length;e<i;e++)c[e]=t.readFloat()*a;let u=n?t.readInt32():0,d=this.attachmentLoader.newPathAttachment(i,o);return d?(d.closed=e,d.constantSpeed=s,d.worldVerticesLength=r<<1,d.vertices=h.vertices,d.bones=h.bones,d.lengths=c,n&&l.rgba8888ToColor(d.color,u),d):null}case Be.Point:{let e=t.readFloat(),s=t.readFloat(),r=t.readFloat(),h=n?t.readInt32():0,c=this.attachmentLoader.newPointAttachment(i,o);return c?(c.x=s*a,c.y=r*a,c.rotation=e,n&&l.rgba8888ToColor(c.color,h),c):null}case Be.Clipping:{let s=t.readInt(!0),r=t.readInt(!0),a=this.readVertices(t,r),h=n?t.readInt32():0,c=this.attachmentLoader.newClippingAttachment(i,o);return c?(c.endSlot=e.slots[s],c.worldVerticesLength=r<<1,c.vertices=a.vertices,c.bones=a.bones,n&&l.rgba8888ToColor(c.color,h),c):null}}return null}readSequence(t){if(!t.readBoolean())return null;let e=new T(t.readInt(!0));return e.start=t.readInt(!0),e.digits=t.readInt(!0),e.setupIndex=t.readInt(!0),e}readVertices(t,e){let i=this.scale,s=e<<1,r=new De;if(!t.readBoolean())return r.vertices=this.readFloatArray(t,s,i),r;let n=new Array,a=new Array;for(let s=0;s<e;s++){let e=t.readInt(!0);a.push(e);for(let s=0;s<e;s++)a.push(t.readInt(!0)),n.push(t.readFloat()*i),n.push(t.readFloat()*i),n.push(t.readFloat())}return r.vertices=g.toFloatArray(n),r.bones=a,r}readFloatArray(t,e,i){let s=new Array(e);if(1==i)for(let i=0;i<e;i++)s[i]=t.readFloat();else for(let r=0;r<e;r++)s[r]=t.readFloat()*i;return s}readShortArray(t){let e=t.readInt(!0),i=new Array(e);for(let s=0;s<e;s++)i[s]=t.readShort();return i}readAnimation(t,e,i){t.readInt(!0);let s=new Array,r=this.scale;new l,new l;for(let e=0,i=t.readInt(!0);e<i;e++){let e=t.readInt(!0);for(let i=0,r=t.readInt(!0);i<r;i++){let i=t.readByte(),r=t.readInt(!0),n=r-1;switch(i){case Qe:{let i=new xt(r,e);for(let e=0;e<r;e++)i.setFrame(e,t.readFloat(),t.readStringRef());s.push(i);break}case $e:{let i=t.readInt(!0),a=new dt(r,i,e),o=t.readFloat(),h=t.readUnsignedByte()/255,l=t.readUnsignedByte()/255,c=t.readUnsignedByte()/255,u=t.readUnsignedByte()/255;for(let e=0,i=0;a.setFrame(e,o,h,l,c,u),e!=n;e++){let s=t.readFloat(),r=t.readUnsignedByte()/255,n=t.readUnsignedByte()/255,d=t.readUnsignedByte()/255,f=t.readUnsignedByte()/255;switch(t.readByte()){case li:a.setStepped(e);break;case ci:ze(t,a,i++,e,0,o,s,h,r,1),ze(t,a,i++,e,1,o,s,l,n,1),ze(t,a,i++,e,2,o,s,c,d,1),ze(t,a,i++,e,3,o,s,u,f,1)}o=s,h=r,l=n,c=d,u=f}s.push(a);break}case ti:{let i=t.readInt(!0),a=new ft(r,i,e),o=t.readFloat(),h=t.readUnsignedByte()/255,l=t.readUnsignedByte()/255,c=t.readUnsignedByte()/255;for(let e=0,i=0;a.setFrame(e,o,h,l,c),e!=n;e++){let s=t.readFloat(),r=t.readUnsignedByte()/255,n=t.readUnsignedByte()/255,u=t.readUnsignedByte()/255;switch(t.readByte()){case li:a.setStepped(e);break;case ci:ze(t,a,i++,e,0,o,s,h,r,1),ze(t,a,i++,e,1,o,s,l,n,1),ze(t,a,i++,e,2,o,s,c,u,1)}o=s,h=r,l=n,c=u}s.push(a);break}case ei:{let i=t.readInt(!0),a=new mt(r,i,e),o=t.readFloat(),h=t.readUnsignedByte()/255,l=t.readUnsignedByte()/255,c=t.readUnsignedByte()/255,u=t.readUnsignedByte()/255,d=t.readUnsignedByte()/255,f=t.readUnsignedByte()/255,p=t.readUnsignedByte()/255;for(let e=0,i=0;a.setFrame(e,o,h,l,c,u,d,f,p),e!=n;e++){let s=t.readFloat(),r=t.readUnsignedByte()/255,n=t.readUnsignedByte()/255,m=t.readUnsignedByte()/255,g=t.readUnsignedByte()/255,x=t.readUnsignedByte()/255,w=t.readUnsignedByte()/255,v=t.readUnsignedByte()/255;switch(t.readByte()){case li:a.setStepped(e);break;case ci:ze(t,a,i++,e,0,o,s,h,r,1),ze(t,a,i++,e,1,o,s,l,n,1),ze(t,a,i++,e,2,o,s,c,m,1),ze(t,a,i++,e,3,o,s,u,g,1),ze(t,a,i++,e,4,o,s,d,x,1),ze(t,a,i++,e,5,o,s,f,w,1),ze(t,a,i++,e,6,o,s,p,v,1)}o=s,h=r,l=n,c=m,u=g,d=x,f=w,p=v}s.push(a);break}case ii:{let i=t.readInt(!0),a=new gt(r,i,e),o=t.readFloat(),h=t.readUnsignedByte()/255,l=t.readUnsignedByte()/255,c=t.readUnsignedByte()/255,u=t.readUnsignedByte()/255,d=t.readUnsignedByte()/255,f=t.readUnsignedByte()/255;for(let e=0,i=0;a.setFrame(e,o,h,l,c,u,d,f),e!=n;e++){let s=t.readFloat(),r=t.readUnsignedByte()/255,n=t.readUnsignedByte()/255,p=t.readUnsignedByte()/255,m=t.readUnsignedByte()/255,g=t.readUnsignedByte()/255,x=t.readUnsignedByte()/255;switch(t.readByte()){case li:a.setStepped(e);break;case ci:ze(t,a,i++,e,0,o,s,h,r,1),ze(t,a,i++,e,1,o,s,l,n,1),ze(t,a,i++,e,2,o,s,c,p,1),ze(t,a,i++,e,3,o,s,u,m,1),ze(t,a,i++,e,4,o,s,d,g,1),ze(t,a,i++,e,5,o,s,f,x,1)}o=s,h=r,l=n,c=p,u=m,d=g,f=x}s.push(a);break}case si:{let i=new pt(r,t.readInt(!0),e),a=t.readFloat(),o=t.readUnsignedByte()/255;for(let e=0,s=0;i.setFrame(e,a,o),e!=n;e++){let r=t.readFloat(),n=t.readUnsignedByte()/255;switch(t.readByte()){case li:i.setStepped(e);break;case ci:ze(t,i,s++,e,0,a,r,o,n,1)}a=r,o=n}s.push(i)}}}}for(let e=0,i=t.readInt(!0);e<i;e++){let e=t.readInt(!0);for(let i=0,n=t.readInt(!0);i<n;i++){let i=t.readByte(),n=t.readInt(!0),a=t.readInt(!0);switch(i){case _e:s.push(Oe(t,new it(n,a,e),1));break;case Ue:s.push(Ve(t,new st(n,a,e),r));break;case We:s.push(Oe(t,new rt(n,a,e),r));break;case qe:s.push(Oe(t,new nt(n,a,e),r));break;case Ge:s.push(Ve(t,new at(n,a,e),1));break;case He:s.push(Oe(t,new ot(n,a,e),1));break;case je:s.push(Oe(t,new ht(n,a,e),1));break;case Ze:s.push(Ve(t,new lt(n,a,e),1));break;case Ke:s.push(Oe(t,new ct(n,a,e),1));break;case Je:s.push(Oe(t,new ut(n,a,e),1))}}}for(let e=0,i=t.readInt(!0);e<i;e++){let e=t.readInt(!0),i=t.readInt(!0),n=i-1,a=new St(i,t.readInt(!0),e),o=t.readFloat(),h=t.readFloat(),l=t.readFloat()*r;for(let e=0,i=0;a.setFrame(e,o,h,l,t.readByte(),t.readBoolean(),t.readBoolean()),e!=n;e++){let s=t.readFloat(),n=t.readFloat(),c=t.readFloat()*r;switch(t.readByte()){case li:a.setStepped(e);break;case ci:ze(t,a,i++,e,0,o,s,h,n,1),ze(t,a,i++,e,1,o,s,l,c,r)}o=s,h=n,l=c}s.push(a)}for(let e=0,i=t.readInt(!0);e<i;e++){let e=t.readInt(!0),i=t.readInt(!0),r=i-1,n=new Mt(i,t.readInt(!0),e),a=t.readFloat(),o=t.readFloat(),h=t.readFloat(),l=t.readFloat(),c=t.readFloat(),u=t.readFloat(),d=t.readFloat();for(let e=0,i=0;n.setFrame(e,a,o,h,l,c,u,d),e!=r;e++){let s=t.readFloat(),r=t.readFloat(),f=t.readFloat(),p=t.readFloat(),m=t.readFloat(),g=t.readFloat(),x=t.readFloat();switch(t.readByte()){case li:n.setStepped(e);break;case ci:ze(t,n,i++,e,0,a,s,o,r,1),ze(t,n,i++,e,1,a,s,h,f,1),ze(t,n,i++,e,2,a,s,l,p,1),ze(t,n,i++,e,3,a,s,c,m,1),ze(t,n,i++,e,4,a,s,u,g,1),ze(t,n,i++,e,5,a,s,d,x,1)}a=s,o=r,h=f,l=p,c=m,u=g,d=x}s.push(n)}for(let e=0,n=t.readInt(!0);e<n;e++){let e=t.readInt(!0),n=i.pathConstraints[e];for(let i=0,a=t.readInt(!0);i<a;i++)switch(t.readByte()){case ai:s.push(Oe(t,new It(t.readInt(!0),t.readInt(!0),e),0==n.positionMode?r:1));break;case oi:s.push(Oe(t,new Tt(t.readInt(!0),t.readInt(!0),e),0==n.spacingMode||1==n.spacingMode?r:1));break;case hi:let i=new kt(t.readInt(!0),t.readInt(!0),e),a=t.readFloat(),o=t.readFloat(),h=t.readFloat(),l=t.readFloat();for(let e=0,s=0,r=i.getFrameCount()-1;i.setFrame(e,a,o,h,l),e!=r;e++){let r=t.readFloat(),n=t.readFloat(),c=t.readFloat(),u=t.readFloat();switch(t.readByte()){case li:i.setStepped(e);break;case ci:ze(t,i,s++,e,0,a,r,o,n,1),ze(t,i,s++,e,1,a,r,h,c,1),ze(t,i,s++,e,2,a,r,l,u,1)}a=r,o=n,h=c,l=u}s.push(i)}}for(let e=0,n=t.readInt(!0);e<n;e++){let e=i.skins[t.readInt(!0)];for(let i=0,n=t.readInt(!0);i<n;i++){let i=t.readInt(!0);for(let n=0,a=t.readInt(!0);n<a;n++){let n=t.readStringRef();if(!n)throw new Error("attachmentName must not be null.");let a=e.getAttachment(i,n),o=t.readByte(),h=t.readInt(!0),l=h-1;switch(o){case ri:{let e=a,n=e.bones,o=e.vertices,c=n?o.length/3*2:o.length,u=t.readInt(!0),d=new wt(h,u,i,e),f=t.readFloat();for(let e=0,i=0;;e++){let s,a=t.readInt(!0);if(0==a)s=n?g.newFloatArray(c):o;else{s=g.newFloatArray(c);let e=t.readInt(!0);if(a+=e,1==r)for(let i=e;i<a;i++)s[i]=t.readFloat();else for(let i=e;i<a;i++)s[i]=t.readFloat()*r;if(!n)for(let t=0,e=s.length;t<e;t++)s[t]+=o[t]}if(d.setFrame(e,f,s),e==l)break;let h=t.readFloat();switch(t.readByte()){case li:d.setStepped(e);break;case ci:ze(t,d,i++,e,0,f,h,0,1,1)}f=h}s.push(d);break}case ni:{let e=new Ct(h,i,a);for(let i=0;i<h;i++){let s=t.readFloat(),r=t.readInt32();e.setFrame(i,s,E[15&r],r>>4,t.readFloat())}s.push(e);break}}}}}let n=t.readInt(!0);if(n>0){let e=new At(n),r=i.slots.length;for(let i=0;i<n;i++){let s=t.readFloat(),n=t.readInt(!0),a=g.newArray(r,0);for(let t=r-1;t>=0;t--)a[t]=-1;let o=g.newArray(r-n,0),h=0,l=0;for(let e=0;e<n;e++){let e=t.readInt(!0);for(;h!=e;)o[l++]=h++;a[h+t.readInt(!0)]=h++}for(;h<r;)o[l++]=h++;for(let t=r-1;t>=0;t--)-1==a[t]&&(a[t]=o[--l]);e.setFrame(i,s,a)}s.push(e)}let a=t.readInt(!0);if(a>0){let e=new yt(a);for(let s=0;s<a;s++){let r=t.readFloat(),n=i.events[t.readInt(!0)],a=new fe(r,n);a.intValue=t.readInt(!1),a.floatValue=t.readFloat(),a.stringValue=t.readBoolean()?t.readString():n.stringValue,a.data.audioPath&&(a.volume=t.readFloat(),a.balance=t.readFloat()),e.setFrame(s,a)}s.push(e)}let o=0;for(let t=0,e=s.length;t<e;t++)o=Math.max(o,s[t].getDuration());return new C(e,s,o)}},Pe=class{constructor(t,e=new Array,i=0,s=new DataView(t.buffer)){this.strings=e,this.index=i,this.buffer=s}readByte(){return this.buffer.getInt8(this.index++)}readUnsignedByte(){return this.buffer.getUint8(this.index++)}readShort(){let t=this.buffer.getInt16(this.index);return this.index+=2,t}readInt32(){let t=this.buffer.getInt32(this.index);return this.index+=4,t}readInt(t){let e=this.readByte(),i=127&e;return 128&e&&(e=this.readByte(),i|=(127&e)<<7,128&e&&(e=this.readByte(),i|=(127&e)<<14,128&e&&(e=this.readByte(),i|=(127&e)<<21,128&e&&(e=this.readByte(),i|=(127&e)<<28)))),t?i:i>>>1^-(1&i)}readStringRef(){let t=this.readInt(!0);return 0==t?null:this.strings[t-1]}readString(){let t=this.readInt(!0);switch(t){case 0:return null;case 1:return""}t--;let e="";for(let i=0;i<t;){let t=this.readUnsignedByte();switch(t>>4){case 12:case 13:e+=String.fromCharCode((31&t)<<6|63&this.readByte()),i+=2;break;case 14:e+=String.fromCharCode((15&t)<<12|(63&this.readByte())<<6|63&this.readByte()),i+=3;break;default:e+=String.fromCharCode(t),i++}}return e}readFloat(){let t=this.buffer.getFloat32(this.index);return this.index+=4,t}readBoolean(){return 0!=this.readByte()}},Le=class{parent;skin;slotIndex;mesh;inheritTimeline;constructor(t,e,i,s,r){this.mesh=t,this.skin=e,this.slotIndex=i,this.parent=s,this.inheritTimeline=r}},De=class{constructor(t=null,e=null){this.bones=t,this.vertices=e}},Be=(t=>(t[t.Region=0]="Region",t[t.BoundingBox=1]="BoundingBox",t[t.Mesh=2]="Mesh",t[t.LinkedMesh=3]="LinkedMesh",t[t.Path=4]="Path",t[t.Point=5]="Point",t[t.Clipping=6]="Clipping",t))(Be||{});function Oe(t,e,i){let s=t.readFloat(),r=t.readFloat()*i;for(let n=0,a=0,o=e.getFrameCount()-1;e.setFrame(n,s,r),n!=o;n++){let o=t.readFloat(),h=t.readFloat()*i;switch(t.readByte()){case li:e.setStepped(n);break;case ci:ze(t,e,a++,n,0,s,o,r,h,i)}s=o,r=h}return e}function Ve(t,e,i){let s=t.readFloat(),r=t.readFloat()*i,n=t.readFloat()*i;for(let a=0,o=0,h=e.getFrameCount()-1;e.setFrame(a,s,r,n),a!=h;a++){let h=t.readFloat(),l=t.readFloat()*i,c=t.readFloat()*i;switch(t.readByte()){case li:e.setStepped(a);break;case ci:ze(t,e,o++,a,0,s,h,r,l,i),ze(t,e,o++,a,1,s,h,n,c,i)}s=h,r=l,n=c}return e}function ze(t,e,i,s,r,n,a,o,h,l){e.setBezier(i,s,r,n,o,t.readFloat(),t.readFloat()*l,t.readFloat(),t.readFloat()*l,a,h)}var Ne,_e=0,Ue=1,We=2,qe=3,Ge=4,He=5,je=6,Ze=7,Ke=8,Je=9,Qe=0,$e=1,ti=2,ei=3,ii=4,si=5,ri=0,ni=1,ai=0,oi=1,hi=2,li=1,ci=2,ui=class{minX=0;minY=0;maxX=0;maxY=0;boundingBoxes=new Array;polygons=new Array;polygonPool=new w((()=>g.newFloatArray(16)));update(t,e){if(!t)throw new Error("skeleton cannot be null.");let i=this.boundingBoxes,s=this.polygons,r=this.polygonPool,n=t.slots,a=n.length;i.length=0,r.freeAll(s),s.length=0;for(let t=0;t<a;t++){let e=n[t];if(!e.bone.active)continue;let a=e.getAttachment();if(a instanceof Wt){let t=a;i.push(t);let n=r.obtain();n.length!=t.worldVerticesLength&&(n=g.newFloatArray(t.worldVerticesLength)),s.push(n),t.computeWorldVertices(e,0,t.worldVerticesLength,n,0,2)}}e?this.aabbCompute():(this.minX=Number.POSITIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY)}aabbCompute(){let t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY,s=Number.NEGATIVE_INFINITY,r=this.polygons;for(let n=0,a=r.length;n<a;n++){let a=r[n],o=a;for(let r=0,n=a.length;r<n;r+=2){let n=o[r],a=o[r+1];t=Math.min(t,n),e=Math.min(e,a),i=Math.max(i,n),s=Math.max(s,a)}}this.minX=t,this.minY=e,this.maxX=i,this.maxY=s}aabbContainsPoint(t,e){return t>=this.minX&&t<=this.maxX&&e>=this.minY&&e<=this.maxY}aabbIntersectsSegment(t,e,i,s){let r=this.minX,n=this.minY,a=this.maxX,o=this.maxY;if(t<=r&&i<=r||e<=n&&s<=n||t>=a&&i>=a||e>=o&&s>=o)return!1;let h=(s-e)/(i-t),l=h*(r-t)+e;if(l>n&&l<o)return!0;if(l=h*(a-t)+e,l>n&&l<o)return!0;let c=(n-e)/h+t;return c>r&&c<a||(c=(o-e)/h+t,c>r&&c<a)}aabbIntersectsSkeleton(t){return this.minX<t.maxX&&this.maxX>t.minX&&this.minY<t.maxY&&this.maxY>t.minY}containsPoint(t,e){let i=this.polygons;for(let s=0,r=i.length;s<r;s++)if(this.containsPointPolygon(i[s],t,e))return this.boundingBoxes[s];return null}containsPointPolygon(t,e,i){let s=t,r=t.length,n=r-2,a=!1;for(let t=0;t<r;t+=2){let r=s[t+1],o=s[n+1];if(r<i&&o>=i||o<i&&r>=i){let h=s[t];h+(i-r)/(o-r)*(s[n]-h)<e&&(a=!a)}n=t}return a}intersectsSegment(t,e,i,s){let r=this.polygons;for(let n=0,a=r.length;n<a;n++)if(this.intersectsSegmentPolygon(r[n],t,e,i,s))return this.boundingBoxes[n];return null}intersectsSegmentPolygon(t,e,i,s,r){let n=t,a=t.length,o=e-s,h=i-r,l=e*r-i*s,c=n[a-2],u=n[a-1];for(let t=0;t<a;t+=2){let a=n[t],d=n[t+1],f=c*d-u*a,p=c-a,m=u-d,g=o*m-h*p,x=(l*p-o*f)/g;if((x>=c&&x<=a||x>=a&&x<=c)&&(x>=e&&x<=s||x>=s&&x<=e)){let t=(l*m-h*f)/g;if((t>=u&&t<=d||t>=d&&t<=u)&&(t>=i&&t<=r||t>=r&&t<=i))return!0}c=a,u=d}return!1}getPolygon(t){if(!t)throw new Error("boundingBox cannot be null.");let e=this.boundingBoxes.indexOf(t);return-1==e?null:this.polygons[e]}getWidth(){return this.maxX-this.minX}getHeight(){return this.maxY-this.minY}},di=class{convexPolygons=new Array;convexPolygonsIndices=new Array;indicesArray=new Array;isConcaveArray=new Array;triangles=new Array;polygonPool=new w((()=>new Array));polygonIndicesPool=new w((()=>new Array));triangulate(t){let e=t,i=t.length>>1,s=this.indicesArray;s.length=0;for(let t=0;t<i;t++)s[t]=t;let r=this.isConcaveArray;r.length=0;for(let t=0,n=i;t<n;++t)r[t]=di.isConcave(t,i,e,s);let n=this.triangles;for(n.length=0;i>3;){let t=i-1,a=0,o=1;for(;;){t:if(!r[a]){let n=s[t]<<1,h=s[a]<<1,l=s[o]<<1,c=e[n],u=e[n+1],d=e[h],f=e[h+1],p=e[l],m=e[l+1];for(let n=(o+1)%i;n!=t;n=(n+1)%i){if(!r[n])continue;let t=s[n]<<1,i=e[t],a=e[t+1];if(di.positiveArea(p,m,c,u,i,a)&&di.positiveArea(c,u,d,f,i,a)&&di.positiveArea(d,f,p,m,i,a))break t}break}if(0==o){do{if(!r[a])break;a--}while(a>0);break}t=a,a=o,o=(o+1)%i}n.push(s[(i+a-1)%i]),n.push(s[a]),n.push(s[(a+1)%i]),s.splice(a,1),r.splice(a,1),i--;let h=(i+a-1)%i,l=a==i?0:a;r[h]=di.isConcave(h,i,e,s),r[l]=di.isConcave(l,i,e,s)}return 3==i&&(n.push(s[2]),n.push(s[0]),n.push(s[1])),n}decompose(t,e){let i=t,s=this.convexPolygons;this.polygonPool.freeAll(s),s.length=0;let r=this.convexPolygonsIndices;this.polygonIndicesPool.freeAll(r),r.length=0;let n=this.polygonIndicesPool.obtain();n.length=0;let a=this.polygonPool.obtain();a.length=0;let o=-1,h=0;for(let t=0,l=e.length;t<l;t+=3){let l=e[t]<<1,c=e[t+1]<<1,u=e[t+2]<<1,d=i[l],f=i[l+1],p=i[c],m=i[c+1],g=i[u],x=i[u+1],w=!1;if(o==l){let t=a.length-4,e=di.winding(a[t],a[t+1],a[t+2],a[t+3],g,x),i=di.winding(g,x,a[0],a[1],a[2],a[3]);e==h&&i==h&&(a.push(g),a.push(x),n.push(u),w=!0)}w||(a.length>0?(s.push(a),r.push(n)):(this.polygonPool.free(a),this.polygonIndicesPool.free(n)),a=this.polygonPool.obtain(),a.length=0,a.push(d),a.push(f),a.push(p),a.push(m),a.push(g),a.push(x),n=this.polygonIndicesPool.obtain(),n.length=0,n.push(l),n.push(c),n.push(u),h=di.winding(d,f,p,m,g,x),o=l)}a.length>0&&(s.push(a),r.push(n));for(let t=0,e=s.length;t<e;t++){if(n=r[t],0==n.length)continue;let i=n[0],o=n[n.length-1];a=s[t];let h=a.length-4,l=a[h],c=a[h+1],u=a[h+2],d=a[h+3],f=a[0],p=a[1],m=a[2],g=a[3],x=di.winding(l,c,u,d,f,p);for(let h=0;h<e;h++){if(h==t)continue;let e=r[h];if(3!=e.length)continue;let w=e[0],v=e[1],y=e[2],b=s[h],A=b[b.length-2],S=b[b.length-1];if(w!=i||v!=o)continue;let M=di.winding(l,c,u,d,A,S),I=di.winding(A,S,f,p,m,g);M==x&&I==x&&(b.length=0,e.length=0,a.push(A),a.push(S),n.push(y),l=u,c=d,u=A,d=S,h=0)}}for(let t=s.length-1;t>=0;t--)a=s[t],0==a.length&&(s.splice(t,1),this.polygonPool.free(a),n=r[t],r.splice(t,1),this.polygonIndicesPool.free(n));return s}static isConcave(t,e,i,s){let r=s[(e+t-1)%e]<<1,n=s[t]<<1,a=s[(t+1)%e]<<1;return!this.positiveArea(i[r],i[r+1],i[n],i[n+1],i[a],i[a+1])}static positiveArea(t,e,i,s,r,n){return t*(n-s)+i*(e-n)+r*(s-e)>=0}static winding(t,e,i,s,r,n){let a=i-t,o=s-e;return r*o-n*a+a*e-t*o>=0?1:-1}},fi=class{triangulator=new di;clippingPolygon=new Array;clipOutput=new Array;clippedVertices=new Array;clippedTriangles=new Array;scratch=new Array;clipAttachment=null;clippingPolygons=null;clipStart(t,e){if(this.clipAttachment)return 0;this.clipAttachment=e;let i=e.worldVerticesLength,s=g.setArraySize(this.clippingPolygon,i);e.computeWorldVertices(t,0,i,s,0,2);let r=this.clippingPolygon;fi.makeClockwise(r);let n=this.clippingPolygons=this.triangulator.decompose(r,this.triangulator.triangulate(r));for(let t=0,e=n.length;t<e;t++){let e=n[t];fi.makeClockwise(e),e.push(e[0]),e.push(e[1])}return n.length}clipEndWithSlot(t){this.clipAttachment&&this.clipAttachment.endSlot==t.data&&this.clipEnd()}clipEnd(){this.clipAttachment&&(this.clipAttachment=null,this.clippingPolygons=null,this.clippedVertices.length=0,this.clippedTriangles.length=0,this.clippingPolygon.length=0)}isClipping(){return null!=this.clipAttachment}clipTriangles(t,e,i,s,r,n,a,o){let h=this.clipOutput,l=this.clippedVertices,c=this.clippedTriangles,u=this.clippingPolygons,d=u.length,f=o?12:8,p=0;l.length=0,c.length=0;t:for(let e=0;e<s;e+=3){let s=i[e]<<1,m=t[s],x=t[s+1],w=r[s],v=r[s+1];s=i[e+1]<<1;let y=t[s],b=t[s+1],A=r[s],S=r[s+1];s=i[e+2]<<1;let M=t[s],I=t[s+1],T=r[s],k=r[s+1];for(let t=0;t<d;t++){let e=l.length;if(!this.clip(m,x,y,b,M,I,u[t],h)){let t=g.setArraySize(l,e+3*f);t[e]=m,t[e+1]=x,t[e+2]=n.r,t[e+3]=n.g,t[e+4]=n.b,t[e+5]=n.a,o?(t[e+6]=w,t[e+7]=v,t[e+8]=a.r,t[e+9]=a.g,t[e+10]=a.b,t[e+11]=a.a,t[e+12]=y,t[e+13]=b,t[e+14]=n.r,t[e+15]=n.g,t[e+16]=n.b,t[e+17]=n.a,t[e+18]=A,t[e+19]=S,t[e+20]=a.r,t[e+21]=a.g,t[e+22]=a.b,t[e+23]=a.a,t[e+24]=M,t[e+25]=I,t[e+26]=n.r,t[e+27]=n.g,t[e+28]=n.b,t[e+29]=n.a,t[e+30]=T,t[e+31]=k,t[e+32]=a.r,t[e+33]=a.g,t[e+34]=a.b,t[e+35]=a.a):(t[e+6]=w,t[e+7]=v,t[e+8]=y,t[e+9]=b,t[e+10]=n.r,t[e+11]=n.g,t[e+12]=n.b,t[e+13]=n.a,t[e+14]=A,t[e+15]=S,t[e+16]=M,t[e+17]=I,t[e+18]=n.r,t[e+19]=n.g,t[e+20]=n.b,t[e+21]=n.a,t[e+22]=T,t[e+23]=k),e=c.length;let i=g.setArraySize(c,e+3);i[e]=p,i[e+1]=p+1,i[e+2]=p+2,p+=3;continue t}{let t=h.length;if(0==t)continue;let i=b-I,s=M-y,r=m-M,u=I-x,d=1/(i*r+s*(x-I)),E=t>>1,C=this.clipOutput,R=g.setArraySize(l,e+E*f);for(let h=0;h<t;h+=2){let t=C[h],l=C[h+1];R[e]=t,R[e+1]=l,R[e+2]=n.r,R[e+3]=n.g,R[e+4]=n.b,R[e+5]=n.a;let c=t-M,p=l-I,m=(i*c+s*p)*d,g=(u*c+r*p)*d,x=1-m-g;R[e+6]=w*m+A*g+T*x,R[e+7]=v*m+S*g+k*x,o&&(R[e+8]=a.r,R[e+9]=a.g,R[e+10]=a.b,R[e+11]=a.a),e+=f}e=c.length;let Y=g.setArraySize(c,e+3*(E-2));E--;for(let t=1;t<E;t++)Y[e]=p,Y[e+1]=p+t,Y[e+2]=p+t+1,e+=3;p+=E+1}}}}clip(t,e,i,s,r,n,a,o){let h,l=o,c=!1;a.length%4>=2?(h=o,o=this.scratch):h=this.scratch,h.length=0,h.push(t),h.push(e),h.push(i),h.push(s),h.push(r),h.push(n),h.push(t),h.push(e),o.length=0;let u=a,d=a.length-4;for(let t=0;;t+=2){let e=u[t],i=u[t+1],s=u[t+2],r=u[t+3],n=e-s,a=i-r,f=h,p=h.length-2,m=o.length;for(let t=0;t<p;t+=2){let h=f[t],l=f[t+1],u=f[t+2],d=f[t+3],p=n*(d-r)-a*(u-s)>0;if(n*(l-r)-a*(h-s)>0){if(p){o.push(u),o.push(d);continue}let t=d-l,n=u-h,a=t*(s-e)-n*(r-i);if(Math.abs(a)>1e-6){let c=(n*(i-l)-t*(e-h))/a;o.push(e+(s-e)*c),o.push(i+(r-i)*c)}else o.push(e),o.push(i)}else if(p){let t=d-l,n=u-h,a=t*(s-e)-n*(r-i);if(Math.abs(a)>1e-6){let c=(n*(i-l)-t*(e-h))/a;o.push(e+(s-e)*c),o.push(i+(r-i)*c)}else o.push(e),o.push(i);o.push(u),o.push(d)}c=!0}if(m==o.length)return l.length=0,!0;if(o.push(o[0]),o.push(o[1]),t==d)break;let g=o;(o=h).length=0,h=g}if(l!=o){l.length=0;for(let t=0,e=o.length-2;t<e;t++)l[t]=o[t]}else l.length=l.length-2;return c}static makeClockwise(t){let e=t,i=t.length,s=e[i-2]*e[1]-e[0]*e[i-1],r=0,n=0,a=0,o=0;for(let t=0,h=i-3;t<h;t+=2)r=e[t],n=e[t+1],a=e[t+2],o=e[t+3],s+=r*o-a*n;if(!(s<0))for(let t=0,s=i-2,r=i>>1;t<r;t+=2){let i=e[t],r=e[t+1],n=s-t;e[t]=e[n],e[t+1]=e[n+1],e[n]=i,e[n+1]=r}}},pi=class{attachmentLoader;scale=1;linkedMeshes=new Array;constructor(t){this.attachmentLoader=t}readSkeletonData(t){let e=this.scale,i=new ke,s="string"==typeof t?JSON.parse(t):t,r=s.skeleton;if(r&&(i.hash=r.hash,i.version=r.spine,i.x=r.x,i.y=r.y,i.width=r.width,i.height=r.height,i.fps=r.fps,i.imagesPath=r.images),s.bones)for(let t=0;t<s.bones.length;t++){let r=s.bones[t],n=null,a=vi(r,"parent",null);a&&(n=i.findBone(a));let o=new oe(i.bones.length,r.name,n);o.length=vi(r,"length",0)*e,o.x=vi(r,"x",0)*e,o.y=vi(r,"y",0)*e,o.rotation=vi(r,"rotation",0),o.scaleX=vi(r,"scaleX",1),o.scaleY=vi(r,"scaleY",1),o.shearX=vi(r,"shearX",0),o.shearY=vi(r,"shearY",0),o.transformMode=g.enumValue(he,vi(r,"transform","Normal")),o.skinRequired=vi(r,"skin",!1);let h=vi(r,"color",null);h&&o.color.setFromString(h),i.bones.push(o)}if(s.slots)for(let t=0;t<s.slots.length;t++){let e=s.slots[t],r=i.findBone(e.bone);if(!r)throw new Error(`Couldn't find bone ${e.bone} for slot ${e.name}`);let n=new Re(i.slots.length,e.name,r),a=vi(e,"color",null);a&&n.color.setFromString(a);let o=vi(e,"dark",null);o&&(n.darkColor=l.fromString(o)),n.attachmentName=vi(e,"attachment",null),n.blendMode=g.enumValue(Ye,vi(e,"blend","normal")),i.slots.push(n)}if(s.ik)for(let t=0;t<s.ik.length;t++){let r=s.ik[t],n=new ge(r.name);n.order=vi(r,"order",0),n.skinRequired=vi(r,"skin",!1);for(let t=0;t<r.bones.length;t++){let e=i.findBone(r.bones[t]);if(!e)throw new Error(`Couldn't find bone ${r.bones[t]} for IK constraint ${r.name}.`);n.bones.push(e)}let a=i.findBone(r.target);if(!a)throw new Error(`Couldn't find target bone ${r.target} for IK constraint ${r.name}.`);n.target=a,n.mix=vi(r,"mix",1),n.softness=vi(r,"softness",0)*e,n.bendDirection=vi(r,"bendPositive",!0)?1:-1,n.compress=vi(r,"compress",!1),n.stretch=vi(r,"stretch",!1),n.uniform=vi(r,"uniform",!1),i.ikConstraints.push(n)}if(s.transform)for(let t=0;t<s.transform.length;t++){let r=s.transform[t],n=new Fe(r.name);n.order=vi(r,"order",0),n.skinRequired=vi(r,"skin",!1);for(let t=0;t<r.bones.length;t++){let e=r.bones[t],s=i.findBone(e);if(!s)throw new Error(`Couldn't find bone ${e} for transform constraint ${r.name}.`);n.bones.push(s)}let a=r.target,o=i.findBone(a);if(!o)throw new Error(`Couldn't find target bone ${a} for transform constraint ${r.name}.`);n.target=o,n.local=vi(r,"local",!1),n.relative=vi(r,"relative",!1),n.offsetRotation=vi(r,"rotation",0),n.offsetX=vi(r,"x",0)*e,n.offsetY=vi(r,"y",0)*e,n.offsetScaleX=vi(r,"scaleX",0),n.offsetScaleY=vi(r,"scaleY",0),n.offsetShearY=vi(r,"shearY",0),n.mixRotate=vi(r,"mixRotate",1),n.mixX=vi(r,"mixX",1),n.mixY=vi(r,"mixY",n.mixX),n.mixScaleX=vi(r,"mixScaleX",1),n.mixScaleY=vi(r,"mixScaleY",n.mixScaleX),n.mixShearY=vi(r,"mixShearY",1),i.transformConstraints.push(n)}if(s.path)for(let t=0;t<s.path.length;t++){let r=s.path[t],n=new xe(r.name);n.order=vi(r,"order",0),n.skinRequired=vi(r,"skin",!1);for(let t=0;t<r.bones.length;t++){let e=r.bones[t],s=i.findBone(e);if(!s)throw new Error(`Couldn't find bone ${e} for path constraint ${r.name}.`);n.bones.push(s)}let a=r.target,o=i.findSlot(a);if(!o)throw new Error(`Couldn't find target slot ${a} for path constraint ${r.name}.`);n.target=o,n.positionMode=g.enumValue(we,vi(r,"positionMode","Percent")),n.spacingMode=g.enumValue(ve,vi(r,"spacingMode","Length")),n.rotateMode=g.enumValue(ye,vi(r,"rotateMode","Tangent")),n.offsetRotation=vi(r,"rotation",0),n.position=vi(r,"position",0),0==n.positionMode&&(n.position*=e),n.spacing=vi(r,"spacing",0),0!=n.spacingMode&&1!=n.spacingMode||(n.spacing*=e),n.mixRotate=vi(r,"mixRotate",1),n.mixX=vi(r,"mixX",1),n.mixY=vi(r,"mixY",n.mixX),i.pathConstraints.push(n)}if(s.skins)for(let t=0;t<s.skins.length;t++){let e=s.skins[t],r=new Ce(e.name);if(e.bones)for(let t=0;t<e.bones.length;t++){let s=e.bones[t],n=i.findBone(s);if(!n)throw new Error(`Couldn't find bone ${s} for skin ${e.name}.`);r.bones.push(n)}if(e.ik)for(let t=0;t<e.ik.length;t++){let s=e.ik[t],n=i.findIkConstraint(s);if(!n)throw new Error(`Couldn't find IK constraint ${s} for skin ${e.name}.`);r.constraints.push(n)}if(e.transform)for(let t=0;t<e.transform.length;t++){let s=e.transform[t],n=i.findTransformConstraint(s);if(!n)throw new Error(`Couldn't find transform constraint ${s} for skin ${e.name}.`);r.constraints.push(n)}if(e.path)for(let t=0;t<e.path.length;t++){let s=e.path[t],n=i.findPathConstraint(s);if(!n)throw new Error(`Couldn't find path constraint ${s} for skin ${e.name}.`);r.constraints.push(n)}for(let t in e.attachments){let s=i.findSlot(t);if(!s)throw new Error(`Couldn't find slot ${t} for skin ${e.name}.`);let n=e.attachments[t];for(let t in n){let e=this.readAttachment(n[t],r,s.index,t,i);e&&r.setAttachment(s.index,t,e)}}i.skins.push(r),"default"==r.name&&(i.defaultSkin=r)}for(let t=0,e=this.linkedMeshes.length;t<e;t++){let e=this.linkedMeshes[t],s=e.skin?i.findSkin(e.skin):i.defaultSkin;if(!s)throw new Error(`Skin not found: ${e.skin}`);let r=s.getAttachment(e.slotIndex,e.parent);if(!r)throw new Error(`Parent mesh not found: ${e.parent}`);e.mesh.timelineAttachment=e.inheritTimeline?r:e.mesh,e.mesh.setParentMesh(r),null!=e.mesh.region&&e.mesh.updateRegion()}if(this.linkedMeshes.length=0,s.events)for(let t in s.events){let e=s.events[t],r=new pe(t);r.intValue=vi(e,"int",0),r.floatValue=vi(e,"float",0),r.stringValue=vi(e,"string",""),r.audioPath=vi(e,"audio",null),r.audioPath&&(r.volume=vi(e,"volume",1),r.balance=vi(e,"balance",0)),i.events.push(r)}if(s.animations)for(let t in s.animations){let e=s.animations[t];this.readAnimation(e,t,i)}return i}readAttachment(t,e,i,s,r){let n=this.scale;switch(s=vi(t,"name",s),vi(t,"type","region")){case"region":{let i=vi(t,"path",s),r=this.readSequence(vi(t,"sequence",null)),a=this.attachmentLoader.newRegionAttachment(e,s,i,r);if(!a)return null;a.path=i,a.x=vi(t,"x",0)*n,a.y=vi(t,"y",0)*n,a.scaleX=vi(t,"scaleX",1),a.scaleY=vi(t,"scaleY",1),a.rotation=vi(t,"rotation",0),a.width=t.width*n,a.height=t.height*n,a.sequence=r;let o=vi(t,"color",null);return o&&a.color.setFromString(o),null!=a.region&&a.updateRegion(),a}case"boundingbox":{let i=this.attachmentLoader.newBoundingBoxAttachment(e,s);if(!i)return null;this.readVertices(t,i,t.vertexCount<<1);let r=vi(t,"color",null);return r&&i.color.setFromString(r),i}case"mesh":case"linkedmesh":{let r=vi(t,"path",s),a=this.readSequence(vi(t,"sequence",null)),o=this.attachmentLoader.newMeshAttachment(e,s,r,a);if(!o)return null;o.path=r;let h=vi(t,"color",null);h&&o.color.setFromString(h),o.width=vi(t,"width",0)*n,o.height=vi(t,"height",0)*n,o.sequence=a;let l=vi(t,"parent",null);if(l)return this.linkedMeshes.push(new mi(o,vi(t,"skin",null),i,l,vi(t,"timelines",!0))),o;let c=t.uvs;return this.readVertices(t,o,c.length),o.triangles=t.triangles,o.regionUVs=c,null!=o.region&&o.updateRegion(),o.edges=vi(t,"edges",null),o.hullLength=2*vi(t,"hull",0),o}case"path":{let i=this.attachmentLoader.newPathAttachment(e,s);if(!i)return null;i.closed=vi(t,"closed",!1),i.constantSpeed=vi(t,"constantSpeed",!0);let r=t.vertexCount;this.readVertices(t,i,r<<1);let a=g.newArray(r/3,0);for(let e=0;e<t.lengths.length;e++)a[e]=t.lengths[e]*n;i.lengths=a;let o=vi(t,"color",null);return o&&i.color.setFromString(o),i}case"point":{let i=this.attachmentLoader.newPointAttachment(e,s);if(!i)return null;i.x=vi(t,"x",0)*n,i.y=vi(t,"y",0)*n,i.rotation=vi(t,"rotation",0);let r=vi(t,"color",null);return r&&i.color.setFromString(r),i}case"clipping":{let i=this.attachmentLoader.newClippingAttachment(e,s);if(!i)return null;let n=vi(t,"end",null);n&&(i.endSlot=r.findSlot(n));let a=t.vertexCount;this.readVertices(t,i,a<<1);let o=vi(t,"color",null);return o&&i.color.setFromString(o),i}}return null}readSequence(t){if(null==t)return null;let e=new T(vi(t,"count",0));return e.start=vi(t,"start",1),e.digits=vi(t,"digits",0),e.setupIndex=vi(t,"setup",0),e}readVertices(t,e,i){let s=this.scale;e.worldVerticesLength=i;let r=t.vertices;if(i==r.length){let t=g.toFloatArray(r);if(1!=s)for(let e=0,i=r.length;e<i;e++)t[e]*=s;return void(e.vertices=t)}let n=new Array,a=new Array;for(let t=0,e=r.length;t<e;){let e=r[t++];a.push(e);for(let i=t+4*e;t<i;t+=4)a.push(r[t]),n.push(r[t+1]*s),n.push(r[t+2]*s),n.push(r[t+3])}e.bones=a,e.vertices=g.toFloatArray(n)}readAnimation(t,e,i){let s=this.scale,r=new Array;if(t.slots)for(let e in t.slots){let s=t.slots[e],n=i.findSlot(e);if(!n)throw new Error("Slot not found: "+e);let a=n.index;for(let t in s){let e=s[t];if(!e)continue;let i=e.length;if("attachment"==t){let t=new xt(i,a);for(let s=0;s<i;s++){let i=e[s];t.setFrame(s,vi(i,"time",0),vi(i,"name",null))}r.push(t)}else if("rgba"==t){let t=new dt(i,i<<2,a),s=e[0],n=vi(s,"time",0),o=l.fromString(s.color);for(let i=0,r=0;;i++){t.setFrame(i,n,o.r,o.g,o.b,o.a);let a=e[i+1];if(!a){t.shrink(r);break}let h=vi(a,"time",0),c=l.fromString(a.color),u=s.curve;u&&(r=wi(u,t,r,i,0,n,h,o.r,c.r,1),r=wi(u,t,r,i,1,n,h,o.g,c.g,1),r=wi(u,t,r,i,2,n,h,o.b,c.b,1),r=wi(u,t,r,i,3,n,h,o.a,c.a,1)),n=h,o=c,s=a}r.push(t)}else if("rgb"==t){let t=new ft(i,3*i,a),s=e[0],n=vi(s,"time",0),o=l.fromString(s.color);for(let i=0,r=0;;i++){t.setFrame(i,n,o.r,o.g,o.b);let a=e[i+1];if(!a){t.shrink(r);break}let h=vi(a,"time",0),c=l.fromString(a.color),u=s.curve;u&&(r=wi(u,t,r,i,0,n,h,o.r,c.r,1),r=wi(u,t,r,i,1,n,h,o.g,c.g,1),r=wi(u,t,r,i,2,n,h,o.b,c.b,1)),n=h,o=c,s=a}r.push(t)}else if("alpha"==t)r.push(gi(e,new pt(i,i,a),0,1));else if("rgba2"==t){let t=new mt(i,7*i,a),s=e[0],n=vi(s,"time",0),o=l.fromString(s.light),h=l.fromString(s.dark);for(let i=0,r=0;;i++){t.setFrame(i,n,o.r,o.g,o.b,o.a,h.r,h.g,h.b);let a=e[i+1];if(!a){t.shrink(r);break}let c=vi(a,"time",0),u=l.fromString(a.light),d=l.fromString(a.dark),f=s.curve;f&&(r=wi(f,t,r,i,0,n,c,o.r,u.r,1),r=wi(f,t,r,i,1,n,c,o.g,u.g,1),r=wi(f,t,r,i,2,n,c,o.b,u.b,1),r=wi(f,t,r,i,3,n,c,o.a,u.a,1),r=wi(f,t,r,i,4,n,c,h.r,d.r,1),r=wi(f,t,r,i,5,n,c,h.g,d.g,1),r=wi(f,t,r,i,6,n,c,h.b,d.b,1)),n=c,o=u,h=d,s=a}r.push(t)}else if("rgb2"==t){let t=new gt(i,6*i,a),s=e[0],n=vi(s,"time",0),o=l.fromString(s.light),h=l.fromString(s.dark);for(let i=0,r=0;;i++){t.setFrame(i,n,o.r,o.g,o.b,h.r,h.g,h.b);let a=e[i+1];if(!a){t.shrink(r);break}let c=vi(a,"time",0),u=l.fromString(a.light),d=l.fromString(a.dark),f=s.curve;f&&(r=wi(f,t,r,i,0,n,c,o.r,u.r,1),r=wi(f,t,r,i,1,n,c,o.g,u.g,1),r=wi(f,t,r,i,2,n,c,o.b,u.b,1),r=wi(f,t,r,i,3,n,c,h.r,d.r,1),r=wi(f,t,r,i,4,n,c,h.g,d.g,1),r=wi(f,t,r,i,5,n,c,h.b,d.b,1)),n=c,o=u,h=d,s=a}r.push(t)}}}if(t.bones)for(let e in t.bones){let n=t.bones[e],a=i.findBone(e);if(!a)throw new Error("Bone not found: "+e);let o=a.index;for(let t in n){let e=n[t],i=e.length;if(0!=i)if("rotate"===t)r.push(gi(e,new it(i,i,o),0,1));else if("translate"===t){let t=new st(i,i<<1,o);r.push(xi(e,t,"x","y",0,s))}else if("translatex"===t){let t=new rt(i,i,o);r.push(gi(e,t,0,s))}else if("translatey"===t){let t=new nt(i,i,o);r.push(gi(e,t,0,s))}else if("scale"===t){let t=new at(i,i<<1,o);r.push(xi(e,t,"x","y",1,1))}else if("scalex"===t){let t=new ot(i,i,o);r.push(gi(e,t,1,1))}else if("scaley"===t){let t=new ht(i,i,o);r.push(gi(e,t,1,1))}else if("shear"===t){let t=new lt(i,i<<1,o);r.push(xi(e,t,"x","y",0,1))}else if("shearx"===t){let t=new ct(i,i,o);r.push(gi(e,t,0,1))}else if("sheary"===t){let t=new ut(i,i,o);r.push(gi(e,t,0,1))}}}if(t.ik)for(let e in t.ik){let n=t.ik[e],a=n[0];if(!a)continue;let o=i.findIkConstraint(e);if(!o)throw new Error("IK Constraint not found: "+e);let h=i.ikConstraints.indexOf(o),l=new St(n.length,n.length<<1,h),c=vi(a,"time",0),u=vi(a,"mix",1),d=vi(a,"softness",0)*s;for(let t=0,e=0;;t++){l.setFrame(t,c,u,d,vi(a,"bendPositive",!0)?1:-1,vi(a,"compress",!1),vi(a,"stretch",!1));let i=n[t+1];if(!i){l.shrink(e);break}let r=vi(i,"time",0),o=vi(i,"mix",1),h=vi(i,"softness",0)*s,f=a.curve;f&&(e=wi(f,l,e,t,0,c,r,u,o,1),e=wi(f,l,e,t,1,c,r,d,h,s)),c=r,u=o,d=h,a=i}r.push(l)}if(t.transform)for(let e in t.transform){let s=t.transform[e],n=s[0];if(!n)continue;let a=i.findTransformConstraint(e);if(!a)throw new Error("Transform constraint not found: "+e);let o=i.transformConstraints.indexOf(a),h=new Mt(s.length,6*s.length,o),l=vi(n,"time",0),c=vi(n,"mixRotate",1),u=vi(n,"mixX",1),d=vi(n,"mixY",u),f=vi(n,"mixScaleX",1),p=vi(n,"mixScaleY",f),m=vi(n,"mixShearY",1);for(let t=0,e=0;;t++){h.setFrame(t,l,c,u,d,f,p,m);let i=s[t+1];if(!i){h.shrink(e);break}let r=vi(i,"time",0),a=vi(i,"mixRotate",1),o=vi(i,"mixX",1),g=vi(i,"mixY",o),x=vi(i,"mixScaleX",1),w=vi(i,"mixScaleY",x),v=vi(i,"mixShearY",1),y=n.curve;y&&(e=wi(y,h,e,t,0,l,r,c,a,1),e=wi(y,h,e,t,1,l,r,u,o,1),e=wi(y,h,e,t,2,l,r,d,g,1),e=wi(y,h,e,t,3,l,r,f,x,1),e=wi(y,h,e,t,4,l,r,p,w,1),e=wi(y,h,e,t,5,l,r,m,v,1)),l=r,c=a,u=o,d=g,f=x,p=w,f=x,n=i}r.push(h)}if(t.path)for(let e in t.path){let n=t.path[e],a=i.findPathConstraint(e);if(!a)throw new Error("Path constraint not found: "+e);let o=i.pathConstraints.indexOf(a);for(let t in n){let e=n[t],i=e[0];if(!i)continue;let h=e.length;if("position"===t){let t=new It(h,h,o);r.push(gi(e,t,0,0==a.positionMode?s:1))}else if("spacing"===t){let t=new Tt(h,h,o);r.push(gi(e,t,0,0==a.spacingMode||1==a.spacingMode?s:1))}else if("mix"===t){let t=new kt(h,3*h,o),s=vi(i,"time",0),n=vi(i,"mixRotate",1),a=vi(i,"mixX",1),l=vi(i,"mixY",a);for(let r=0,o=0;;r++){t.setFrame(r,s,n,a,l);let h=e[r+1];if(!h){t.shrink(o);break}let c=vi(h,"time",0),u=vi(h,"mixRotate",1),d=vi(h,"mixX",1),f=vi(h,"mixY",d),p=i.curve;p&&(o=wi(p,t,o,r,0,s,c,n,u,1),o=wi(p,t,o,r,1,s,c,a,d,1),o=wi(p,t,o,r,2,s,c,l,f,1)),s=c,n=u,a=d,l=f,i=h}r.push(t)}}}if(t.attachments)for(let e in t.attachments){let n=t.attachments[e],a=i.findSkin(e);if(!a)throw new Error("Skin not found: "+e);for(let t in n){let e=n[t],o=i.findSlot(t);if(!o)throw new Error("Slot not found: "+t);let h=o.index;for(let t in e){let i=e[t],n=a.getAttachment(h,t);for(let t in i){let e=i[t],a=e[0];if(a)if("deform"==t){let t=n.bones,i=n.vertices,o=t?i.length/3*2:i.length,l=new wt(e.length,e.length,h,n),c=vi(a,"time",0);for(let r=0,n=0;;r++){let h,u=vi(a,"vertices",null);if(u){h=g.newFloatArray(o);let e=vi(a,"offset",0);if(g.arrayCopy(u,0,h,e,u.length),1!=s)for(let t=e,i=t+u.length;t<i;t++)h[t]*=s;if(!t)for(let t=0;t<o;t++)h[t]+=i[t]}else h=t?g.newFloatArray(o):i;l.setFrame(r,c,h);let d=e[r+1];if(!d){l.shrink(n);break}let f=vi(d,"time",0),p=a.curve;p&&(n=wi(p,l,n,r,0,c,f,0,1,1)),c=f,a=d}r.push(l)}else if("sequence"==t){let t=new Ct(e.length,h,n),i=0;for(let s=0;s<e.length;s++){let r=vi(a,"delay",i),n=vi(a,"time",0),o=k[vi(a,"mode","hold")],h=vi(a,"index",0);t.setFrame(s,n,o,h,r),i=r,a=e[s+1]}r.push(t)}}}}}if(t.drawOrder){let e=new At(t.drawOrder.length),s=i.slots.length,n=0;for(let r=0;r<t.drawOrder.length;r++,n++){let a=t.drawOrder[r],o=null,h=vi(a,"offsets",null);if(h){o=g.newArray(s,-1);let t=g.newArray(s-h.length,0),e=0,r=0;for(let s=0;s<h.length;s++){let n=h[s],a=i.findSlot(n.slot);if(!a)throw new Error("Slot not found: "+a);let l=a.index;for(;e!=l;)t[r++]=e++;o[e+n.offset]=e++}for(;e<s;)t[r++]=e++;for(let e=s-1;e>=0;e--)-1==o[e]&&(o[e]=t[--r])}e.setFrame(n,vi(a,"time",0),o)}r.push(e)}if(t.events){let e=new yt(t.events.length),s=0;for(let r=0;r<t.events.length;r++,s++){let n=t.events[r],a=i.findEvent(n.name);if(!a)throw new Error("Event not found: "+n.name);let o=new fe(g.toSinglePrecision(vi(n,"time",0)),a);o.intValue=vi(n,"int",a.intValue),o.floatValue=vi(n,"float",a.floatValue),o.stringValue=vi(n,"string",a.stringValue),o.data.audioPath&&(o.volume=vi(n,"volume",1),o.balance=vi(n,"balance",0)),e.setFrame(s,o)}r.push(e)}let n=0;for(let t=0,e=r.length;t<e;t++)n=Math.max(n,r[t].getDuration());i.animations.push(new C(e,r,n))}},mi=class{parent;skin;slotIndex;mesh;inheritTimeline;constructor(t,e,i,s,r){this.mesh=t,this.skin=e,this.slotIndex=i,this.parent=s,this.inheritTimeline=r}};function gi(t,e,i,s){let r=t[0],n=vi(r,"time",0),a=vi(r,"value",i)*s,o=0;for(let h=0;;h++){e.setFrame(h,n,a);let l=t[h+1];if(!l)return e.shrink(o),e;let c=vi(l,"time",0),u=vi(l,"value",i)*s;r.curve&&(o=wi(r.curve,e,o,h,0,n,c,a,u,s)),n=c,a=u,r=l}}function xi(t,e,i,s,r,n){let a=t[0],o=vi(a,"time",0),h=vi(a,i,r)*n,l=vi(a,s,r)*n,c=0;for(let u=0;;u++){e.setFrame(u,o,h,l);let d=t[u+1];if(!d)return e.shrink(c),e;let f=vi(d,"time",0),p=vi(d,i,r)*n,m=vi(d,s,r)*n,g=a.curve;g&&(c=wi(g,e,c,u,0,o,f,h,p,n),c=wi(g,e,c,u,1,o,f,l,m,n)),o=f,h=p,l=m,a=d}}function wi(t,e,i,s,r,n,a,o,h,l){if("stepped"==t)return e.setStepped(s),i;let c=r<<2,u=t[c],d=t[c+1]*l,f=t[c+2],p=t[c+3]*l;return e.setBezier(i,s,r,n,o,u,d,f,p,a,h),i+1}function vi(t,e,i){return void 0!==t[e]?t[e]:i}void 0===Math.fround&&(Math.fround=(Ne=new Float32Array(1),function(t){return Ne[0]=t,Ne[0]}));var yi,bi=class extends Gt{constructor(t){super(t)}setFilters(t,e){}setWraps(t,e){}dispose(){}},Ai=class extends ue{constructor(t="",e=new de){super((t=>new bi(t)),t,e)}},Si=g.newFloatArray(8),Mi=class{ctx;triangleRendering=!1;debugRendering=!1;vertices=g.newFloatArray(8192);tempColor=new l;constructor(t){this.ctx=t}draw(t){this.triangleRendering?this.drawTriangles(t):this.drawImages(t)}drawImages(t){let e=this.ctx,i=this.tempColor,s=t.color,r=t.drawOrder;this.debugRendering&&(e.strokeStyle="green");for(let t=0,n=r.length;t<n;t++){let n=r[t],a=n.bone;if(!a.active)continue;let o=n.getAttachment();if(!(o instanceof ne))continue;o.computeWorldVertices(n,Si,0,2);let h=o.region,l=h.texture.getImage(),c=n.color,u=o.color;i.set(s.r*c.r*u.r,s.g*c.g*u.g,s.b*c.b*u.b,s.a*c.a*u.a),e.save(),e.transform(a.a,a.c,a.b,a.d,a.worldX,a.worldY),e.translate(o.offset[0],o.offset[1]),e.rotate(o.rotation*Math.PI/180);let d=o.width/h.originalWidth;e.scale(d*o.scaleX,d*o.scaleY);let f=h.width,p=h.height;if(e.translate(f/2,p/2),90==o.region.degrees){let t=f;f=p,p=t,e.rotate(-Math.PI/2)}e.scale(1,-1),e.translate(-f/2,-p/2),e.globalAlpha=i.a,e.drawImage(l,l.width*h.u,l.height*h.v,f,p,0,0,f,p),this.debugRendering&&e.strokeRect(0,0,f,p),e.restore()}}drawTriangles(t){let e=this.ctx,i=this.tempColor,s=t.color,r=t.drawOrder,n=null,a=this.vertices,o=null;for(let t=0,l=r.length;t<l;t++){let l,c=r[t],u=c.getAttachment();if(u instanceof ne){let t=u;a=this.computeRegionVertices(c,t,!1),o=Mi.QUAD_TRIANGLES,l=t.region.texture.getImage()}else{if(!(u instanceof ee))continue;{let t=u;a=this.computeMeshVertices(c,t,!1),o=t.triangles,l=t.region.texture.getImage()}}if(l){c.data.blendMode!=n&&(n=c.data.blendMode);let t=c.color,r=u.color;i.set(s.r*t.r*r.r,s.g*t.g*r.g,s.b*t.b*r.b,s.a*t.a*r.a),e.globalAlpha=i.a;for(var h=0;h<o.length;h+=3){let t=8*o[h],i=8*o[h+1],s=8*o[h+2],r=a[t],n=a[t+1],c=a[t+6],u=a[t+7],d=a[i],f=a[i+1],p=a[i+6],m=a[i+7],g=a[s],x=a[s+1],w=a[s+6],v=a[s+7];this.drawTriangle(l,r,n,c,u,d,f,p,m,g,x,w,v),this.debugRendering&&(e.strokeStyle="green",e.beginPath(),e.moveTo(r,n),e.lineTo(d,f),e.lineTo(g,x),e.lineTo(r,n),e.stroke())}}}this.ctx.globalAlpha=1}drawTriangle(t,e,i,s,r,n,a,o,h,l,c,u,d){let f=this.ctx;s*=t.width,r*=t.height,o*=t.width,h*=t.height,u*=t.width,d*=t.height,f.beginPath(),f.moveTo(e,i),f.lineTo(n,a),f.lineTo(l,c),f.closePath();var p=1/((o-=s)*(d-=r)-(u-=s)*(h-=r)),m=(d*(n-=e)-h*(l-=e))*p,g=(d*(a-=i)-h*(c-=i))*p,x=(o*l-u*n)*p,w=(o*c-u*a)*p,v=e-m*s-x*r,y=i-g*s-w*r;f.save(),f.transform(m,g,x,w,v,y),f.clip(),f.drawImage(t,0,0),f.restore()}computeRegionVertices(t,e,i){let s=t.bone.skeleton.color,r=t.color,n=e.color,a=s.a*r.a*n.a,o=i?a:1,h=this.tempColor;h.set(s.r*r.r*n.r*o,s.g*r.g*n.g*o,s.b*r.b*n.b*o,a),e.computeWorldVertices(t,this.vertices,0,Mi.VERTEX_SIZE);let l=this.vertices,c=e.uvs;return l[ne.C1R]=h.r,l[ne.C1G]=h.g,l[ne.C1B]=h.b,l[ne.C1A]=h.a,l[ne.U1]=c[0],l[ne.V1]=c[1],l[ne.C2R]=h.r,l[ne.C2G]=h.g,l[ne.C2B]=h.b,l[ne.C2A]=h.a,l[ne.U2]=c[2],l[ne.V2]=c[3],l[ne.C3R]=h.r,l[ne.C3G]=h.g,l[ne.C3B]=h.b,l[ne.C3A]=h.a,l[ne.U3]=c[4],l[ne.V3]=c[5],l[ne.C4R]=h.r,l[ne.C4G]=h.g,l[ne.C4B]=h.b,l[ne.C4A]=h.a,l[ne.U4]=c[6],l[ne.V4]=c[7],l}computeMeshVertices(t,e,i){let s=t.bone.skeleton.color,r=t.color,n=e.color,a=s.a*r.a*n.a,o=i?a:1,h=this.tempColor;h.set(s.r*r.r*n.r*o,s.g*r.g*n.g*o,s.b*r.b*n.b*o,a);let l=e.worldVerticesLength/2,c=this.vertices;c.length<e.worldVerticesLength&&(this.vertices=c=g.newFloatArray(e.worldVerticesLength)),e.computeWorldVertices(t,0,e.worldVerticesLength,c,0,Mi.VERTEX_SIZE);let u=e.uvs;for(let t=0,e=0,i=2;t<l;t++)c[i++]=h.r,c[i++]=h.g,c[i++]=h.b,c[i++]=h.a,c[i++]=u[e++],c[i++]=u[e++],i+=2;return c}},Ii=Mi;return r(Ii,"QUAD_TRIANGLES",[0,1,2,2,3,0]),r(Ii,"VERTEX_SIZE",8),yi=n,((r,n,a,o)=>{if(n&&"object"==typeof n||"function"==typeof n)for(let h of i(n))s.call(r,h)||h===a||t(r,h,{get:()=>n[h],enumerable:!(o=e(n,h))||o.enumerable});return r})(t({},"__esModule",{value:!0}),yi)})();t.exports=e}).call(window)},6280:t=>{(function(){"use strict";var e=(()=>{var t=Object.defineProperty,e=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,r=(e,i,s)=>(((e,i,s)=>{i in e?t(e,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[i]=s})(e,"symbol"!=typeof i?i+"":i,s),s),n={};((e,i)=>{for(var s in i)t(e,s,{get:i[s],enumerable:!0})})(n,{AlphaTimeline:()=>pt,Animation:()=>C,AnimationState:()=>Yt,AnimationStateAdapter:()=>Lt,AnimationStateData:()=>Ut,AssetManager:()=>Si,AssetManagerBase:()=>ue,AtlasAttachmentLoader:()=>ae,Attachment:()=>A,AttachmentTimeline:()=>xt,BinaryInput:()=>Pe,BlendMode:()=>Ye,Bone:()=>le,BoneData:()=>oe,BoundingBoxAttachment:()=>Wt,CURRENT:()=>_t,CameraController:()=>Gi,ClippingAttachment:()=>qt,Color:()=>l,Color2Attribute:()=>es,ColorAttribute:()=>ts,ConstraintData:()=>ce,CurveTimeline:()=>$,CurveTimeline1:()=>tt,CurveTimeline2:()=>et,DebugUtils:()=>x,DeformTimeline:()=>wt,Downloader:()=>de,DrawOrderTimeline:()=>At,Event:()=>fe,EventData:()=>pe,EventQueue:()=>Xt,EventTimeline:()=>yt,EventType:()=>Pt,FIRST:()=>Bt,FakeTexture:()=>Kt,GLTexture:()=>Ai,HOLD_FIRST:()=>Vt,HOLD_MIX:()=>zt,HOLD_SUBSEQUENT:()=>Ot,IkConstraint:()=>me,IkConstraintData:()=>ge,IkConstraintTimeline:()=>St,Input:()=>Wi,IntSet:()=>a,Interpolation:()=>d,LoadingScreen:()=>As,M00:()=>Ii,M01:()=>Ti,M02:()=>ki,M03:()=>Ei,M10:()=>Ci,M11:()=>Ri,M12:()=>Yi,M13:()=>Fi,M20:()=>Xi,M21:()=>Pi,M22:()=>Li,M23:()=>Di,M30:()=>Bi,M31:()=>Oi,M32:()=>Vi,M33:()=>zi,ManagedWebGLRenderingContext:()=>yi,MathUtils:()=>u,Matrix4:()=>_i,Mesh:()=>Zi,MeshAttachment:()=>ee,MixBlend:()=>R,MixDirection:()=>Y,OrthoCamera:()=>Ui,PathAttachment:()=>ie,PathConstraint:()=>Ae,PathConstraintData:()=>xe,PathConstraintMixTimeline:()=>kt,PathConstraintPositionTimeline:()=>It,PathConstraintSpacingTimeline:()=>Tt,PointAttachment:()=>se,PolygonBatcher:()=>rs,Pool:()=>w,Position2Attribute:()=>Ji,Position3Attribute:()=>Qi,PositionMode:()=>we,Pow:()=>f,PowOut:()=>p,RGB2Timeline:()=>gt,RGBA2Timeline:()=>mt,RGBATimeline:()=>dt,RGBTimeline:()=>ft,RegionAttachment:()=>ne,ResizeMode:()=>vs,RotateMode:()=>ye,RotateTimeline:()=>it,SETUP:()=>Nt,SUBSEQUENT:()=>Dt,ScaleTimeline:()=>at,ScaleXTimeline:()=>ot,ScaleYTimeline:()=>ht,SceneRenderer:()=>ws,SequenceTimeline:()=>Ct,Shader:()=>ji,ShapeRenderer:()=>ns,ShapeType:()=>as,ShearTimeline:()=>lt,ShearXTimeline:()=>ct,ShearYTimeline:()=>ut,Skeleton:()=>Te,SkeletonBinary:()=>Xe,SkeletonBounds:()=>ui,SkeletonClipping:()=>fi,SkeletonData:()=>ke,SkeletonDebugRenderer:()=>hs,SkeletonJson:()=>pi,SkeletonRenderer:()=>us,Skin:()=>Ce,SkinEntry:()=>Ee,Slot:()=>Se,SlotData:()=>Re,SpacingMode:()=>ve,SpineCanvas:()=>Is,StringSet:()=>o,TexCoordAttribute:()=>$i,Texture:()=>Gt,TextureAtlas:()=>Jt,TextureAtlasPage:()=>$t,TextureAtlasRegion:()=>te,TextureFilter:()=>Ht,TextureRegion:()=>Zt,TextureWrap:()=>jt,TimeKeeper:()=>y,Timeline:()=>Q,Touch:()=>qi,TrackEntry:()=>Ft,TransformConstraint:()=>Me,TransformConstraintData:()=>Fe,TransformConstraintTimeline:()=>Mt,TransformMode:()=>he,TranslateTimeline:()=>st,TranslateXTimeline:()=>rt,TranslateYTimeline:()=>nt,Triangulator:()=>di,Utils:()=>g,Vector2:()=>v,Vector3:()=>Mi,VertexAttachment:()=>M,VertexAttribute:()=>Ki,VertexAttributeType:()=>is,WindowedMean:()=>b});var a=class{array=new Array;add(t){let e=this.contains(t);return this.array[0|t]=0|t,!e}contains(t){return null!=this.array[0|t]}remove(t){this.array[0|t]=void 0}clear(){this.array.length=0}},o=class{entries={};size=0;add(t){let e=this.entries[t];return this.entries[t]=!0,!e&&(this.size++,!0)}addAll(t){let e=this.size;for(var i=0,s=t.length;i<s;i++)this.add(t[i]);return e!=this.size}contains(t){return this.entries[t]}clear(){this.entries={},this.size=0}},h=class{constructor(t=0,e=0,i=0,s=0){this.r=t,this.g=e,this.b=i,this.a=s}set(t,e,i,s){return this.r=t,this.g=e,this.b=i,this.a=s,this.clamp()}setFromColor(t){return this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a,this}setFromString(t){return t="#"==t.charAt(0)?t.substr(1):t,this.r=parseInt(t.substr(0,2),16)/255,this.g=parseInt(t.substr(2,2),16)/255,this.b=parseInt(t.substr(4,2),16)/255,this.a=8!=t.length?1:parseInt(t.substr(6,2),16)/255,this}add(t,e,i,s){return this.r+=t,this.g+=e,this.b+=i,this.a+=s,this.clamp()}clamp(){return this.r<0?this.r=0:this.r>1&&(this.r=1),this.g<0?this.g=0:this.g>1&&(this.g=1),this.b<0?this.b=0:this.b>1&&(this.b=1),this.a<0?this.a=0:this.a>1&&(this.a=1),this}static rgba8888ToColor(t,e){t.r=((4278190080&e)>>>24)/255,t.g=((16711680&e)>>>16)/255,t.b=((65280&e)>>>8)/255,t.a=(255&e)/255}static rgb888ToColor(t,e){t.r=((16711680&e)>>>16)/255,t.g=((65280&e)>>>8)/255,t.b=(255&e)/255}static fromString(t){return(new h).setFromString(t)}},l=h;r(l,"WHITE",new h(1,1,1,1)),r(l,"RED",new h(1,0,0,1)),r(l,"GREEN",new h(0,1,0,1)),r(l,"BLUE",new h(0,0,1,1)),r(l,"MAGENTA",new h(1,0,1,1));var c=class{static clamp(t,e,i){return t<e?e:t>i?i:t}static cosDeg(t){return Math.cos(t*c.degRad)}static sinDeg(t){return Math.sin(t*c.degRad)}static signum(t){return t>0?1:t<0?-1:0}static toInt(t){return t>0?Math.floor(t):Math.ceil(t)}static cbrt(t){let e=Math.pow(Math.abs(t),1/3);return t<0?-e:e}static randomTriangular(t,e){return c.randomTriangularWith(t,e,.5*(t+e))}static randomTriangularWith(t,e,i){let s=Math.random(),r=e-t;return s<=(i-t)/r?t+Math.sqrt(s*r*(i-t)):e-Math.sqrt((1-s)*r*(e-i))}static isPowerOfTwo(t){return t&&!(t&t-1)}},u=c;r(u,"PI",3.1415927),r(u,"PI2",2*c.PI),r(u,"radiansToDegrees",180/c.PI),r(u,"radDeg",c.radiansToDegrees),r(u,"degreesToRadians",c.PI/180),r(u,"degRad",c.degreesToRadians);var d=class{apply(t,e,i){return t+(e-t)*this.applyInternal(i)}},f=class extends d{power=2;constructor(t){super(),this.power=t}applyInternal(t){return t<=.5?Math.pow(2*t,this.power)/2:Math.pow(2*(t-1),this.power)/(this.power%2==0?-2:2)+1}},p=class extends f{constructor(t){super(t)}applyInternal(t){return Math.pow(t-1,this.power)*(this.power%2==0?-1:1)+1}},m=class{static arrayCopy(t,e,i,s,r){for(let n=e,a=s;n<e+r;n++,a++)i[a]=t[n]}static arrayFill(t,e,i,s){for(let r=e;r<i;r++)t[r]=s}static setArraySize(t,e,i=0){let s=t.length;if(s==e)return t;if(t.length=e,s<e)for(let r=s;r<e;r++)t[r]=i;return t}static ensureArrayCapacity(t,e,i=0){return t.length>=e?t:m.setArraySize(t,e,i)}static newArray(t,e){let i=new Array(t);for(let s=0;s<t;s++)i[s]=e;return i}static newFloatArray(t){if(m.SUPPORTS_TYPED_ARRAYS)return new Float32Array(t);{let e=new Array(t);for(let t=0;t<e.length;t++)e[t]=0;return e}}static newShortArray(t){if(m.SUPPORTS_TYPED_ARRAYS)return new Int16Array(t);{let e=new Array(t);for(let t=0;t<e.length;t++)e[t]=0;return e}}static toFloatArray(t){return m.SUPPORTS_TYPED_ARRAYS?new Float32Array(t):t}static toSinglePrecision(t){return m.SUPPORTS_TYPED_ARRAYS?Math.fround(t):t}static webkit602BugfixHelper(t,e){}static contains(t,e,i=!0){for(var s=0;s<t.length;s++)if(t[s]==e)return!0;return!1}static enumValue(t,e){return t[e[0].toUpperCase()+e.slice(1)]}},g=m;r(g,"SUPPORTS_TYPED_ARRAYS","undefined"!=typeof Float32Array);var x=class{static logBones(t){for(let e=0;e<t.bones.length;e++){let i=t.bones[e];console.log(i.data.name+", "+i.a+", "+i.b+", "+i.c+", "+i.d+", "+i.worldX+", "+i.worldY)}}},w=class{items=new Array;instantiator;constructor(t){this.instantiator=t}obtain(){return this.items.length>0?this.items.pop():this.instantiator()}free(t){t.reset&&t.reset(),this.items.push(t)}freeAll(t){for(let e=0;e<t.length;e++)this.free(t[e])}clear(){this.items.length=0}},v=class{constructor(t=0,e=0){this.x=t,this.y=e}set(t,e){return this.x=t,this.y=e,this}length(){let t=this.x,e=this.y;return Math.sqrt(t*t+e*e)}normalize(){let t=this.length();return 0!=t&&(this.x/=t,this.y/=t),this}},y=class{maxDelta=.064;framesPerSecond=0;delta=0;totalTime=0;lastTime=Date.now()/1e3;frameCount=0;frameTime=0;update(){let t=Date.now()/1e3;this.delta=t-this.lastTime,this.frameTime+=this.delta,this.totalTime+=this.delta,this.delta>this.maxDelta&&(this.delta=this.maxDelta),this.lastTime=t,this.frameCount++,this.frameTime>1&&(this.framesPerSecond=this.frameCount/this.frameTime,this.frameTime=0,this.frameCount=0)}},b=class{values;addedValues=0;lastValue=0;mean=0;dirty=!0;constructor(t=32){this.values=new Array(t)}hasEnoughData(){return this.addedValues>=this.values.length}addValue(t){this.addedValues<this.values.length&&this.addedValues++,this.values[this.lastValue++]=t,this.lastValue>this.values.length-1&&(this.lastValue=0),this.dirty=!0}getMean(){if(this.hasEnoughData()){if(this.dirty){let t=0;for(let e=0;e<this.values.length;e++)t+=this.values[e];this.mean=t/this.values.length,this.dirty=!1}return this.mean}return 0}},A=class{name;constructor(t){if(!t)throw new Error("name cannot be null.");this.name=t}},S=class extends A{id=S.nextID++;bones=null;vertices=[];worldVerticesLength=0;timelineAttachment=this;constructor(t){super(t)}computeWorldVertices(t,e,i,s,r,n){i=r+(i>>1)*n;let a=t.bone.skeleton,o=t.deform,h=this.vertices,l=this.bones;if(!l){o.length>0&&(h=o);let a=t.bone,l=a.worldX,c=a.worldY,u=a.a,d=a.b,f=a.c,p=a.d;for(let t=e,a=r;a<i;t+=2,a+=n){let e=h[t],i=h[t+1];s[a]=e*u+i*d+l,s[a+1]=e*f+i*p+c}return}let c=0,u=0;for(let t=0;t<e;t+=2){let t=l[c];c+=t+1,u+=t}let d=a.bones;if(0==o.length)for(let t=r,e=3*u;t<i;t+=n){let i=0,r=0,n=l[c++];for(n+=c;c<n;c++,e+=3){let t=d[l[c]],s=h[e],n=h[e+1],a=h[e+2];i+=(s*t.a+n*t.b+t.worldX)*a,r+=(s*t.c+n*t.d+t.worldY)*a}s[t]=i,s[t+1]=r}else{let t=o;for(let e=r,a=3*u,o=u<<1;e<i;e+=n){let i=0,r=0,n=l[c++];for(n+=c;c<n;c++,a+=3,o+=2){let e=d[l[c]],s=h[a]+t[o],n=h[a+1]+t[o+1],u=h[a+2];i+=(s*e.a+n*e.b+e.worldX)*u,r+=(s*e.c+n*e.d+e.worldY)*u}s[e]=i,s[e+1]=r}}}copyTo(t){this.bones?(t.bones=new Array(this.bones.length),g.arrayCopy(this.bones,0,t.bones,0,this.bones.length)):t.bones=null,this.vertices&&(t.vertices=g.newFloatArray(this.vertices.length),g.arrayCopy(this.vertices,0,t.vertices,0,this.vertices.length)),t.worldVerticesLength=this.worldVerticesLength,t.timelineAttachment=this.timelineAttachment}},M=S;r(M,"nextID",0);var I=class{id=I.nextID();regions;start=0;digits=0;setupIndex=0;constructor(t){this.regions=new Array(t)}copy(){let t=new I(this.regions.length);return g.arrayCopy(this.regions,0,t.regions,0,this.regions.length),t.start=this.start,t.digits=this.digits,t.setupIndex=this.setupIndex,t}apply(t,e){let i=t.sequenceIndex;-1==i&&(i=this.setupIndex),i>=this.regions.length&&(i=this.regions.length-1);let s=this.regions[i];e.region!=s&&(e.region=s,e.updateRegion())}getPath(t,e){let i=t,s=(this.start+e).toString();for(let t=this.digits-s.length;t>0;t--)i+="0";return i+=s,i}static nextID(){return I._nextID++}},T=I;r(T,"_nextID",0);var k=(t=>(t[t.hold=0]="hold",t[t.once=1]="once",t[t.loop=2]="loop",t[t.pingpong=3]="pingpong",t[t.onceReverse=4]="onceReverse",t[t.loopReverse=5]="loopReverse",t[t.pingpongReverse=6]="pingpongReverse",t))(k||{}),E=[0,1,2,3,4,5,6],C=class{name;timelines=[];timelineIds=new o;duration;constructor(t,e,i){if(!t)throw new Error("name cannot be null.");this.name=t,this.setTimelines(e),this.duration=i}setTimelines(t){if(!t)throw new Error("timelines cannot be null.");this.timelines=t,this.timelineIds.clear();for(var e=0;e<t.length;e++)this.timelineIds.addAll(t[e].getPropertyIds())}hasTimeline(t){for(let e=0;e<t.length;e++)if(this.timelineIds.contains(t[e]))return!0;return!1}apply(t,e,i,s,r,n,a,o){if(!t)throw new Error("skeleton cannot be null.");s&&0!=this.duration&&(i%=this.duration,e>0&&(e%=this.duration));let h=this.timelines;for(let s=0,l=h.length;s<l;s++)h[s].apply(t,e,i,r,n,a,o)}},R=(t=>(t[t.setup=0]="setup",t[t.first=1]="first",t[t.replace=2]="replace",t[t.add=3]="add",t))(R||{}),Y=(t=>(t[t.mixIn=0]="mixIn",t[t.mixOut=1]="mixOut",t))(Y||{}),F=0,X=1,P=2,L=3,D=4,B=5,O=6,V=7,z=8,N=9,_=10,U=11,W=12,q=13,G=14,H=15,j=16,Z=17,K=18,J=19,Q=class{propertyIds;frames;constructor(t,e){this.propertyIds=e,this.frames=g.newFloatArray(t*this.getFrameEntries())}getPropertyIds(){return this.propertyIds}getFrameEntries(){return 1}getFrameCount(){return this.frames.length/this.getFrameEntries()}getDuration(){return this.frames[this.frames.length-this.getFrameEntries()]}static search1(t,e){let i=t.length;for(let s=1;s<i;s++)if(t[s]>e)return s-1;return i-1}static search(t,e,i){let s=t.length;for(let r=i;r<s;r+=i)if(t[r]>e)return r-i;return s-i}},$=class extends Q{curves;constructor(t,e,i){super(t,i),this.curves=g.newFloatArray(t+18*e),this.curves[t-1]=1}setLinear(t){this.curves[t]=0}setStepped(t){this.curves[t]=1}shrink(t){let e=this.getFrameCount()+18*t;if(this.curves.length>e){let t=g.newFloatArray(e);g.arrayCopy(this.curves,0,t,0,e),this.curves=t}}setBezier(t,e,i,s,r,n,a,o,h,l,c){let u=this.curves,d=this.getFrameCount()+18*t;0==i&&(u[e]=2+d);let f=.03*(s-2*n+o),p=.03*(r-2*a+h),m=.006*(3*(n-o)-s+l),g=.006*(3*(a-h)-r+c),x=2*f+m,w=2*p+g,v=.3*(n-s)+f+.16666667*m,y=.3*(a-r)+p+.16666667*g,b=s+v,A=r+y;for(let t=d+18;d<t;d+=2)u[d]=b,u[d+1]=A,v+=x,y+=w,x+=m,w+=g,b+=v,A+=y}getBezierValue(t,e,i,s){let r=this.curves;if(r[s]>t){let n=this.frames[e],a=this.frames[e+i];return a+(t-n)/(r[s]-n)*(r[s+1]-a)}let n=s+18;for(s+=2;s<n;s+=2)if(r[s]>=t){let e=r[s-2],i=r[s-1];return i+(t-e)/(r[s]-e)*(r[s+1]-i)}e+=this.getFrameEntries();let a=r[n-2],o=r[n-1];return o+(t-a)/(this.frames[e]-a)*(this.frames[e+i]-o)}},tt=class extends ${constructor(t,e,i){super(t,e,[i])}getFrameEntries(){return 2}setFrame(t,e,i){t<<=1,this.frames[t]=e,this.frames[t+1]=i}getCurveValue(t){let e=this.frames,i=e.length-2;for(let s=2;s<=i;s+=2)if(e[s]>t){i=s-2;break}let s=this.curves[i>>1];switch(s){case 0:let s=e[i],r=e[i+1];return r+(t-s)/(e[i+2]-s)*(e[i+2+1]-r);case 1:return e[i+1]}return this.getBezierValue(t,i,1,s-2)}},et=class extends ${constructor(t,e,i,s){super(t,e,[i,s])}getFrameEntries(){return 3}setFrame(t,e,i,s){t*=3,this.frames[t]=e,this.frames[t+1]=i,this.frames[t+2]=s}},it=class extends tt{boneIndex=0;constructor(t,e,i){super(t,e,F+"|"+i),this.boneIndex=i}apply(t,e,i,s,r,n,a){let o=t.bones[this.boneIndex];if(!o.active)return;if(i<this.frames[0]){switch(n){case 0:return void(o.rotation=o.data.rotation);case 1:o.rotation+=(o.data.rotation-o.rotation)*r}return}let h=this.getCurveValue(i);switch(n){case 0:o.rotation=o.data.rotation+h*r;break;case 1:case 2:h+=o.data.rotation-o.rotation;case 3:o.rotation+=h*r}}},st=class extends et{boneIndex=0;constructor(t,e,i){super(t,e,X+"|"+i,P+"|"+i),this.boneIndex=i}apply(t,e,i,s,r,n,a){let o=t.bones[this.boneIndex];if(!o.active)return;let h=this.frames;if(i<h[0]){switch(n){case 0:return o.x=o.data.x,void(o.y=o.data.y);case 1:o.x+=(o.data.x-o.x)*r,o.y+=(o.data.y-o.y)*r}return}let l=0,c=0,u=Q.search(h,i,3),d=this.curves[u/3];switch(d){case 0:let t=h[u];l=h[u+1],c=h[u+2];let e=(i-t)/(h[u+3]-t);l+=(h[u+3+1]-l)*e,c+=(h[u+3+2]-c)*e;break;case 1:l=h[u+1],c=h[u+2];break;default:l=this.getBezierValue(i,u,1,d-2),c=this.getBezierValue(i,u,2,d+18-2)}switch(n){case 0:o.x=o.data.x+l*r,o.y=o.data.y+c*r;break;case 1:case 2:o.x+=(o.data.x+l-o.x)*r,o.y+=(o.data.y+c-o.y)*r;break;case 3:o.x+=l*r,o.y+=c*r}}},rt=class extends tt{boneIndex=0;constructor(t,e,i){super(t,e,X+"|"+i),this.boneIndex=i}apply(t,e,i,s,r,n,a){let o=t.bones[this.boneIndex];if(!o.active)return;if(i<this.frames[0]){switch(n){case 0:return void(o.x=o.data.x);case 1:o.x+=(o.data.x-o.x)*r}return}let h=this.getCurveValue(i);switch(n){case 0:o.x=o.data.x+h*r;break;case 1:case 2:o.x+=(o.data.x+h-o.x)*r;break;case 3:o.x+=h*r}}},nt=class extends tt{boneIndex=0;constructor(t,e,i){super(t,e,P+"|"+i),this.boneIndex=i}apply(t,e,i,s,r,n,a){let o=t.bones[this.boneIndex];if(!o.active)return;if(i<this.frames[0]){switch(n){case 0:return void(o.y=o.data.y);case 1:o.y+=(o.data.y-o.y)*r}return}let h=this.getCurveValue(i);switch(n){case 0:o.y=o.data.y+h*r;break;case 1:case 2:o.y+=(o.data.y+h-o.y)*r;break;case 3:o.y+=h*r}}},at=class extends et{boneIndex=0;constructor(t,e,i){super(t,e,L+"|"+i,D+"|"+i),this.boneIndex=i}apply(t,e,i,s,r,n,a){let o=t.bones[this.boneIndex];if(!o.active)return;let h,l,c=this.frames;if(i<c[0]){switch(n){case 0:return o.scaleX=o.data.scaleX,void(o.scaleY=o.data.scaleY);case 1:o.scaleX+=(o.data.scaleX-o.scaleX)*r,o.scaleY+=(o.data.scaleY-o.scaleY)*r}return}let d=Q.search(c,i,3),f=this.curves[d/3];switch(f){case 0:let t=c[d];h=c[d+1],l=c[d+2];let e=(i-t)/(c[d+3]-t);h+=(c[d+3+1]-h)*e,l+=(c[d+3+2]-l)*e;break;case 1:h=c[d+1],l=c[d+2];break;default:h=this.getBezierValue(i,d,1,f-2),l=this.getBezierValue(i,d,2,f+18-2)}if(h*=o.data.scaleX,l*=o.data.scaleY,1==r)3==n?(o.scaleX+=h-o.data.scaleX,o.scaleY+=l-o.data.scaleY):(o.scaleX=h,o.scaleY=l);else{let t=0,e=0;if(1==a)switch(n){case 0:t=o.data.scaleX,e=o.data.scaleY,o.scaleX=t+(Math.abs(h)*u.signum(t)-t)*r,o.scaleY=e+(Math.abs(l)*u.signum(e)-e)*r;break;case 1:case 2:t=o.scaleX,e=o.scaleY,o.scaleX=t+(Math.abs(h)*u.signum(t)-t)*r,o.scaleY=e+(Math.abs(l)*u.signum(e)-e)*r;break;case 3:o.scaleX+=(h-o.data.scaleX)*r,o.scaleY+=(l-o.data.scaleY)*r}else switch(n){case 0:t=Math.abs(o.data.scaleX)*u.signum(h),e=Math.abs(o.data.scaleY)*u.signum(l),o.scaleX=t+(h-t)*r,o.scaleY=e+(l-e)*r;break;case 1:case 2:t=Math.abs(o.scaleX)*u.signum(h),e=Math.abs(o.scaleY)*u.signum(l),o.scaleX=t+(h-t)*r,o.scaleY=e+(l-e)*r;break;case 3:o.scaleX+=(h-o.data.scaleX)*r,o.scaleY+=(l-o.data.scaleY)*r}}}},ot=class extends tt{boneIndex=0;constructor(t,e,i){super(t,e,L+"|"+i),this.boneIndex=i}apply(t,e,i,s,r,n,a){let o=t.bones[this.boneIndex];if(!o.active)return;if(i<this.frames[0]){switch(n){case 0:return void(o.scaleX=o.data.scaleX);case 1:o.scaleX+=(o.data.scaleX-o.scaleX)*r}return}let h=this.getCurveValue(i)*o.data.scaleX;if(1==r)3==n?o.scaleX+=h-o.data.scaleX:o.scaleX=h;else{let t=0;if(1==a)switch(n){case 0:t=o.data.scaleX,o.scaleX=t+(Math.abs(h)*u.signum(t)-t)*r;break;case 1:case 2:t=o.scaleX,o.scaleX=t+(Math.abs(h)*u.signum(t)-t)*r;break;case 3:o.scaleX+=(h-o.data.scaleX)*r}else switch(n){case 0:t=Math.abs(o.data.scaleX)*u.signum(h),o.scaleX=t+(h-t)*r;break;case 1:case 2:t=Math.abs(o.scaleX)*u.signum(h),o.scaleX=t+(h-t)*r;break;case 3:o.scaleX+=(h-o.data.scaleX)*r}}}},ht=class extends tt{boneIndex=0;constructor(t,e,i){super(t,e,D+"|"+i),this.boneIndex=i}apply(t,e,i,s,r,n,a){let o=t.bones[this.boneIndex];if(!o.active)return;if(i<this.frames[0]){switch(n){case 0:return void(o.scaleY=o.data.scaleY);case 1:o.scaleY+=(o.data.scaleY-o.scaleY)*r}return}let h=this.getCurveValue(i)*o.data.scaleY;if(1==r)3==n?o.scaleY+=h-o.data.scaleY:o.scaleY=h;else{let t=0;if(1==a)switch(n){case 0:t=o.data.scaleY,o.scaleY=t+(Math.abs(h)*u.signum(t)-t)*r;break;case 1:case 2:t=o.scaleY,o.scaleY=t+(Math.abs(h)*u.signum(t)-t)*r;break;case 3:o.scaleY+=(h-o.data.scaleY)*r}else switch(n){case 0:t=Math.abs(o.data.scaleY)*u.signum(h),o.scaleY=t+(h-t)*r;break;case 1:case 2:t=Math.abs(o.scaleY)*u.signum(h),o.scaleY=t+(h-t)*r;break;case 3:o.scaleY+=(h-o.data.scaleY)*r}}}},lt=class extends et{boneIndex=0;constructor(t,e,i){super(t,e,B+"|"+i,O+"|"+i),this.boneIndex=i}apply(t,e,i,s,r,n,a){let o=t.bones[this.boneIndex];if(!o.active)return;let h=this.frames;if(i<h[0]){switch(n){case 0:return o.shearX=o.data.shearX,void(o.shearY=o.data.shearY);case 1:o.shearX+=(o.data.shearX-o.shearX)*r,o.shearY+=(o.data.shearY-o.shearY)*r}return}let l=0,c=0,u=Q.search(h,i,3),d=this.curves[u/3];switch(d){case 0:let t=h[u];l=h[u+1],c=h[u+2];let e=(i-t)/(h[u+3]-t);l+=(h[u+3+1]-l)*e,c+=(h[u+3+2]-c)*e;break;case 1:l=h[u+1],c=h[u+2];break;default:l=this.getBezierValue(i,u,1,d-2),c=this.getBezierValue(i,u,2,d+18-2)}switch(n){case 0:o.shearX=o.data.shearX+l*r,o.shearY=o.data.shearY+c*r;break;case 1:case 2:o.shearX+=(o.data.shearX+l-o.shearX)*r,o.shearY+=(o.data.shearY+c-o.shearY)*r;break;case 3:o.shearX+=l*r,o.shearY+=c*r}}},ct=class extends tt{boneIndex=0;constructor(t,e,i){super(t,e,B+"|"+i),this.boneIndex=i}apply(t,e,i,s,r,n,a){let o=t.bones[this.boneIndex];if(!o.active)return;if(i<this.frames[0]){switch(n){case 0:return void(o.shearX=o.data.shearX);case 1:o.shearX+=(o.data.shearX-o.shearX)*r}return}let h=this.getCurveValue(i);switch(n){case 0:o.shearX=o.data.shearX+h*r;break;case 1:case 2:o.shearX+=(o.data.shearX+h-o.shearX)*r;break;case 3:o.shearX+=h*r}}},ut=class extends tt{boneIndex=0;constructor(t,e,i){super(t,e,O+"|"+i),this.boneIndex=i}apply(t,e,i,s,r,n,a){let o=t.bones[this.boneIndex];if(!o.active)return;if(i<this.frames[0]){switch(n){case 0:return void(o.shearY=o.data.shearY);case 1:o.shearY+=(o.data.shearY-o.shearY)*r}return}let h=this.getCurveValue(i);switch(n){case 0:o.shearY=o.data.shearY+h*r;break;case 1:case 2:o.shearY+=(o.data.shearY+h-o.shearY)*r;break;case 3:o.shearY+=h*r}}},dt=class extends ${slotIndex=0;constructor(t,e,i){super(t,e,[V+"|"+i,z+"|"+i]),this.slotIndex=i}getFrameEntries(){return 5}setFrame(t,e,i,s,r,n){t*=5,this.frames[t]=e,this.frames[t+1]=i,this.frames[t+2]=s,this.frames[t+3]=r,this.frames[t+4]=n}apply(t,e,i,s,r,n,a){let o=t.slots[this.slotIndex];if(!o.bone.active)return;let h=this.frames,l=o.color;if(i<h[0]){let t=o.data.color;switch(n){case 0:return void l.setFromColor(t);case 1:l.add((t.r-l.r)*r,(t.g-l.g)*r,(t.b-l.b)*r,(t.a-l.a)*r)}return}let c=0,u=0,d=0,f=0,p=Q.search(h,i,5),m=this.curves[p/5];switch(m){case 0:let t=h[p];c=h[p+1],u=h[p+2],d=h[p+3],f=h[p+4];let e=(i-t)/(h[p+5]-t);c+=(h[p+5+1]-c)*e,u+=(h[p+5+2]-u)*e,d+=(h[p+5+3]-d)*e,f+=(h[p+5+4]-f)*e;break;case 1:c=h[p+1],u=h[p+2],d=h[p+3],f=h[p+4];break;default:c=this.getBezierValue(i,p,1,m-2),u=this.getBezierValue(i,p,2,m+18-2),d=this.getBezierValue(i,p,3,m+36-2),f=this.getBezierValue(i,p,4,m+54-2)}1==r?l.set(c,u,d,f):(0==n&&l.setFromColor(o.data.color),l.add((c-l.r)*r,(u-l.g)*r,(d-l.b)*r,(f-l.a)*r))}},ft=class extends ${slotIndex=0;constructor(t,e,i){super(t,e,[V+"|"+i]),this.slotIndex=i}getFrameEntries(){return 4}setFrame(t,e,i,s,r){t<<=2,this.frames[t]=e,this.frames[t+1]=i,this.frames[t+2]=s,this.frames[t+3]=r}apply(t,e,i,s,r,n,a){let o=t.slots[this.slotIndex];if(!o.bone.active)return;let h=this.frames,l=o.color;if(i<h[0]){let t=o.data.color;switch(n){case 0:return l.r=t.r,l.g=t.g,void(l.b=t.b);case 1:l.r+=(t.r-l.r)*r,l.g+=(t.g-l.g)*r,l.b+=(t.b-l.b)*r}return}let c=0,u=0,d=0,f=Q.search(h,i,4),p=this.curves[f>>2];switch(p){case 0:let t=h[f];c=h[f+1],u=h[f+2],d=h[f+3];let e=(i-t)/(h[f+4]-t);c+=(h[f+4+1]-c)*e,u+=(h[f+4+2]-u)*e,d+=(h[f+4+3]-d)*e;break;case 1:c=h[f+1],u=h[f+2],d=h[f+3];break;default:c=this.getBezierValue(i,f,1,p-2),u=this.getBezierValue(i,f,2,p+18-2),d=this.getBezierValue(i,f,3,p+36-2)}if(1==r)l.r=c,l.g=u,l.b=d;else{if(0==n){let t=o.data.color;l.r=t.r,l.g=t.g,l.b=t.b}l.r+=(c-l.r)*r,l.g+=(u-l.g)*r,l.b+=(d-l.b)*r}}},pt=class extends tt{slotIndex=0;constructor(t,e,i){super(t,e,z+"|"+i),this.slotIndex=i}apply(t,e,i,s,r,n,a){let o=t.slots[this.slotIndex];if(!o.bone.active)return;let h=o.color;if(i<this.frames[0]){let t=o.data.color;switch(n){case 0:return void(h.a=t.a);case 1:h.a+=(t.a-h.a)*r}return}let l=this.getCurveValue(i);1==r?h.a=l:(0==n&&(h.a=o.data.color.a),h.a+=(l-h.a)*r)}},mt=class extends ${slotIndex=0;constructor(t,e,i){super(t,e,[V+"|"+i,z+"|"+i,N+"|"+i]),this.slotIndex=i}getFrameEntries(){return 8}setFrame(t,e,i,s,r,n,a,o,h){t<<=3,this.frames[t]=e,this.frames[t+1]=i,this.frames[t+2]=s,this.frames[t+3]=r,this.frames[t+4]=n,this.frames[t+5]=a,this.frames[t+6]=o,this.frames[t+7]=h}apply(t,e,i,s,r,n,a){let o=t.slots[this.slotIndex];if(!o.bone.active)return;let h=this.frames,l=o.color,c=o.darkColor;if(i<h[0]){let t=o.data.color,e=o.data.darkColor;switch(n){case 0:return l.setFromColor(t),c.r=e.r,c.g=e.g,void(c.b=e.b);case 1:l.add((t.r-l.r)*r,(t.g-l.g)*r,(t.b-l.b)*r,(t.a-l.a)*r),c.r+=(e.r-c.r)*r,c.g+=(e.g-c.g)*r,c.b+=(e.b-c.b)*r}return}let u=0,d=0,f=0,p=0,m=0,g=0,x=0,w=Q.search(h,i,8),v=this.curves[w>>3];switch(v){case 0:let t=h[w];u=h[w+1],d=h[w+2],f=h[w+3],p=h[w+4],m=h[w+5],g=h[w+6],x=h[w+7];let e=(i-t)/(h[w+8]-t);u+=(h[w+8+1]-u)*e,d+=(h[w+8+2]-d)*e,f+=(h[w+8+3]-f)*e,p+=(h[w+8+4]-p)*e,m+=(h[w+8+5]-m)*e,g+=(h[w+8+6]-g)*e,x+=(h[w+8+7]-x)*e;break;case 1:u=h[w+1],d=h[w+2],f=h[w+3],p=h[w+4],m=h[w+5],g=h[w+6],x=h[w+7];break;default:u=this.getBezierValue(i,w,1,v-2),d=this.getBezierValue(i,w,2,v+18-2),f=this.getBezierValue(i,w,3,v+36-2),p=this.getBezierValue(i,w,4,v+54-2),m=this.getBezierValue(i,w,5,v+72-2),g=this.getBezierValue(i,w,6,v+90-2),x=this.getBezierValue(i,w,7,v+108-2)}if(1==r)l.set(u,d,f,p),c.r=m,c.g=g,c.b=x;else{if(0==n){l.setFromColor(o.data.color);let t=o.data.darkColor;c.r=t.r,c.g=t.g,c.b=t.b}l.add((u-l.r)*r,(d-l.g)*r,(f-l.b)*r,(p-l.a)*r),c.r+=(m-c.r)*r,c.g+=(g-c.g)*r,c.b+=(x-c.b)*r}}},gt=class extends ${slotIndex=0;constructor(t,e,i){super(t,e,[V+"|"+i,N+"|"+i]),this.slotIndex=i}getFrameEntries(){return 7}setFrame(t,e,i,s,r,n,a,o){t*=7,this.frames[t]=e,this.frames[t+1]=i,this.frames[t+2]=s,this.frames[t+3]=r,this.frames[t+4]=n,this.frames[t+5]=a,this.frames[t+6]=o}apply(t,e,i,s,r,n,a){let o=t.slots[this.slotIndex];if(!o.bone.active)return;let h=this.frames,l=o.color,c=o.darkColor;if(i<h[0]){let t=o.data.color,e=o.data.darkColor;switch(n){case 0:return l.r=t.r,l.g=t.g,l.b=t.b,c.r=e.r,c.g=e.g,void(c.b=e.b);case 1:l.r+=(t.r-l.r)*r,l.g+=(t.g-l.g)*r,l.b+=(t.b-l.b)*r,c.r+=(e.r-c.r)*r,c.g+=(e.g-c.g)*r,c.b+=(e.b-c.b)*r}return}let u=0,d=0,f=0,p=0,m=0,g=0,x=Q.search(h,i,7),w=this.curves[x/7];switch(w){case 0:let t=h[x];u=h[x+1],d=h[x+2],f=h[x+3],p=h[x+4],m=h[x+5],g=h[x+6];let e=(i-t)/(h[x+7]-t);u+=(h[x+7+1]-u)*e,d+=(h[x+7+2]-d)*e,f+=(h[x+7+3]-f)*e,p+=(h[x+7+4]-p)*e,m+=(h[x+7+5]-m)*e,g+=(h[x+7+6]-g)*e;break;case 1:u=h[x+1],d=h[x+2],f=h[x+3],p=h[x+4],m=h[x+5],g=h[x+6];break;default:u=this.getBezierValue(i,x,1,w-2),d=this.getBezierValue(i,x,2,w+18-2),f=this.getBezierValue(i,x,3,w+36-2),p=this.getBezierValue(i,x,4,w+54-2),m=this.getBezierValue(i,x,5,w+72-2),g=this.getBezierValue(i,x,6,w+90-2)}if(1==r)l.r=u,l.g=d,l.b=f,c.r=p,c.g=m,c.b=g;else{if(0==n){let t=o.data.color,e=o.data.darkColor;l.r=t.r,l.g=t.g,l.b=t.b,c.r=e.r,c.g=e.g,c.b=e.b}l.r+=(u-l.r)*r,l.g+=(d-l.g)*r,l.b+=(f-l.b)*r,c.r+=(p-c.r)*r,c.g+=(m-c.g)*r,c.b+=(g-c.b)*r}}},xt=class extends Q{slotIndex=0;attachmentNames;constructor(t,e){super(t,[_+"|"+e]),this.slotIndex=e,this.attachmentNames=new Array(t)}getFrameCount(){return this.frames.length}setFrame(t,e,i){this.frames[t]=e,this.attachmentNames[t]=i}apply(t,e,i,s,r,n,a){let o=t.slots[this.slotIndex];o.bone.active&&(1!=a?i<this.frames[0]?0!=n&&1!=n||this.setAttachment(t,o,o.data.attachmentName):this.setAttachment(t,o,this.attachmentNames[Q.search1(this.frames,i)]):0==n&&this.setAttachment(t,o,o.data.attachmentName))}setAttachment(t,e,i){e.setAttachment(i?t.getAttachment(this.slotIndex,i):null)}},wt=class extends ${slotIndex=0;attachment;vertices;constructor(t,e,i,s){super(t,e,[U+"|"+i+"|"+s.id]),this.slotIndex=i,this.attachment=s,this.vertices=new Array(t)}getFrameCount(){return this.frames.length}setFrame(t,e,i){this.frames[t]=e,this.vertices[t]=i}setBezier(t,e,i,s,r,n,a,o,h,l,c){let u=this.curves,d=this.getFrameCount()+18*t;0==i&&(u[e]=2+d);let f=.03*(s-2*n+o),p=.03*h-.06*a,m=.006*(3*(n-o)-s+l),g=.018*(a-h+.33333333),x=2*f+m,w=2*p+g,v=.3*(n-s)+f+.16666667*m,y=.3*a+p+.16666667*g,b=s+v,A=y;for(let t=d+18;d<t;d+=2)u[d]=b,u[d+1]=A,v+=x,y+=w,x+=m,w+=g,b+=v,A+=y}getCurvePercent(t,e){let i=this.curves,s=i[e];switch(s){case 0:let i=this.frames[e];return(t-i)/(this.frames[e+this.getFrameEntries()]-i);case 1:return 0}if(s-=2,i[s]>t){let r=this.frames[e];return i[s+1]*(t-r)/(i[s]-r)}let r=s+18;for(s+=2;s<r;s+=2)if(i[s]>=t){let e=i[s-2],r=i[s-1];return r+(t-e)/(i[s]-e)*(i[s+1]-r)}let n=i[r-2],a=i[r-1];return a+(1-a)*(t-n)/(this.frames[e+this.getFrameEntries()]-n)}apply(t,e,i,s,r,n,a){let o=t.slots[this.slotIndex];if(!o.bone.active)return;let h=o.getAttachment();if(!h)return;if(!(h instanceof M)||h.timelineAttachment!=this.attachment)return;let l=o.deform;0==l.length&&(n=0);let c=this.vertices,u=c[0].length,d=this.frames;if(i<d[0]){switch(n){case 0:return void(l.length=0);case 1:if(1==r)return void(l.length=0);l.length=u;let t=h;if(t.bones){r=1-r;for(f=0;f<u;f++)l[f]*=r}else{let e=t.vertices;for(var f=0;f<u;f++)l[f]+=(e[f]-l[f])*r}}return}if(l.length=u,i>=d[d.length-1]){let t=c[d.length-1];if(1==r)if(3==n){let e=h;if(e.bones)for(let e=0;e<u;e++)l[e]+=t[e];else{let i=e.vertices;for(let e=0;e<u;e++)l[e]+=t[e]-i[e]}}else g.arrayCopy(t,0,l,0,u);else switch(n){case 0:{let e=h;if(e.bones)for(let e=0;e<u;e++)l[e]=t[e]*r;else{let i=e.vertices;for(let e=0;e<u;e++){let s=i[e];l[e]=s+(t[e]-s)*r}}break}case 1:case 2:for(let e=0;e<u;e++)l[e]+=(t[e]-l[e])*r;break;case 3:let e=h;if(e.bones)for(let e=0;e<u;e++)l[e]+=t[e]*r;else{let i=e.vertices;for(let e=0;e<u;e++)l[e]+=(t[e]-i[e])*r}}return}let p=Q.search1(d,i),m=this.getCurvePercent(i,p),x=c[p],w=c[p+1];if(1==r)if(3==n){let t=h;if(t.bones)for(let t=0;t<u;t++){let e=x[t];l[t]+=e+(w[t]-e)*m}else{let e=t.vertices;for(let t=0;t<u;t++){let i=x[t];l[t]+=i+(w[t]-i)*m-e[t]}}}else for(let t=0;t<u;t++){let e=x[t];l[t]=e+(w[t]-e)*m}else switch(n){case 0:{let t=h;if(t.bones)for(let t=0;t<u;t++){let e=x[t];l[t]=(e+(w[t]-e)*m)*r}else{let e=t.vertices;for(let t=0;t<u;t++){let i=x[t],s=e[t];l[t]=s+(i+(w[t]-i)*m-s)*r}}break}case 1:case 2:for(let t=0;t<u;t++){let e=x[t];l[t]+=(e+(w[t]-e)*m-l[t])*r}break;case 3:let t=h;if(t.bones)for(let t=0;t<u;t++){let e=x[t];l[t]+=(e+(w[t]-e)*m)*r}else{let e=t.vertices;for(let t=0;t<u;t++){let i=x[t];l[t]+=(i+(w[t]-i)*m-e[t])*r}}}}},vt=class extends Q{events;constructor(t){super(t,vt.propertyIds),this.events=new Array(t)}getFrameCount(){return this.frames.length}setFrame(t,e){this.frames[t]=e.time,this.events[t]=e}apply(t,e,i,s,r,n,a){if(!s)return;let o=this.frames,h=this.frames.length;if(e>i)this.apply(t,e,Number.MAX_VALUE,s,r,n,a),e=-1;else if(e>=o[h-1])return;if(i<o[0])return;let l=0;if(e<o[0])l=0;else{l=Q.search1(o,e)+1;let t=o[l];for(;l>0&&o[l-1]==t;)l--}for(;l<h&&i>=o[l];l++)s.push(this.events[l])}},yt=vt;r(yt,"propertyIds",[""+W]);var bt=class extends Q{drawOrders;constructor(t){super(t,bt.propertyIds),this.drawOrders=new Array(t)}getFrameCount(){return this.frames.length}setFrame(t,e,i){this.frames[t]=e,this.drawOrders[t]=i}apply(t,e,i,s,r,n,a){if(1==a)return void(0==n&&g.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length));if(i<this.frames[0])return void(0!=n&&1!=n||g.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length));let o=Q.search1(this.frames,i),h=this.drawOrders[o];if(h){let e=t.drawOrder,i=t.slots;for(let t=0,s=h.length;t<s;t++)e[t]=i[h[t]]}else g.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length)}},At=bt;r(At,"propertyIds",[""+q]);var St=class extends ${ikConstraintIndex=0;constructor(t,e,i){super(t,e,[G+"|"+i]),this.ikConstraintIndex=i}getFrameEntries(){return 6}setFrame(t,e,i,s,r,n,a){t*=6,this.frames[t]=e,this.frames[t+1]=i,this.frames[t+2]=s,this.frames[t+3]=r,this.frames[t+4]=n?1:0,this.frames[t+5]=a?1:0}apply(t,e,i,s,r,n,a){let o=t.ikConstraints[this.ikConstraintIndex];if(!o.active)return;let h=this.frames;if(i<h[0]){switch(n){case 0:return o.mix=o.data.mix,o.softness=o.data.softness,o.bendDirection=o.data.bendDirection,o.compress=o.data.compress,void(o.stretch=o.data.stretch);case 1:o.mix+=(o.data.mix-o.mix)*r,o.softness+=(o.data.softness-o.softness)*r,o.bendDirection=o.data.bendDirection,o.compress=o.data.compress,o.stretch=o.data.stretch}return}let l=0,c=0,u=Q.search(h,i,6),d=this.curves[u/6];switch(d){case 0:let t=h[u];l=h[u+1],c=h[u+2];let e=(i-t)/(h[u+6]-t);l+=(h[u+6+1]-l)*e,c+=(h[u+6+2]-c)*e;break;case 1:l=h[u+1],c=h[u+2];break;default:l=this.getBezierValue(i,u,1,d-2),c=this.getBezierValue(i,u,2,d+18-2)}0==n?(o.mix=o.data.mix+(l-o.data.mix)*r,o.softness=o.data.softness+(c-o.data.softness)*r,1==a?(o.bendDirection=o.data.bendDirection,o.compress=o.data.compress,o.stretch=o.data.stretch):(o.bendDirection=h[u+3],o.compress=0!=h[u+4],o.stretch=0!=h[u+5])):(o.mix+=(l-o.mix)*r,o.softness+=(c-o.softness)*r,0==a&&(o.bendDirection=h[u+3],o.compress=0!=h[u+4],o.stretch=0!=h[u+5]))}},Mt=class extends ${transformConstraintIndex=0;constructor(t,e,i){super(t,e,[H+"|"+i]),this.transformConstraintIndex=i}getFrameEntries(){return 7}setFrame(t,e,i,s,r,n,a,o){let h=this.frames;h[t*=7]=e,h[t+1]=i,h[t+2]=s,h[t+3]=r,h[t+4]=n,h[t+5]=a,h[t+6]=o}apply(t,e,i,s,r,n,a){let o=t.transformConstraints[this.transformConstraintIndex];if(!o.active)return;let h,l,c,u,d,f,p=this.frames;if(i<p[0]){let t=o.data;switch(n){case 0:return o.mixRotate=t.mixRotate,o.mixX=t.mixX,o.mixY=t.mixY,o.mixScaleX=t.mixScaleX,o.mixScaleY=t.mixScaleY,void(o.mixShearY=t.mixShearY);case 1:o.mixRotate+=(t.mixRotate-o.mixRotate)*r,o.mixX+=(t.mixX-o.mixX)*r,o.mixY+=(t.mixY-o.mixY)*r,o.mixScaleX+=(t.mixScaleX-o.mixScaleX)*r,o.mixScaleY+=(t.mixScaleY-o.mixScaleY)*r,o.mixShearY+=(t.mixShearY-o.mixShearY)*r}return}let m=Q.search(p,i,7),g=this.curves[m/7];switch(g){case 0:let t=p[m];h=p[m+1],l=p[m+2],c=p[m+3],u=p[m+4],d=p[m+5],f=p[m+6];let e=(i-t)/(p[m+7]-t);h+=(p[m+7+1]-h)*e,l+=(p[m+7+2]-l)*e,c+=(p[m+7+3]-c)*e,u+=(p[m+7+4]-u)*e,d+=(p[m+7+5]-d)*e,f+=(p[m+7+6]-f)*e;break;case 1:h=p[m+1],l=p[m+2],c=p[m+3],u=p[m+4],d=p[m+5],f=p[m+6];break;default:h=this.getBezierValue(i,m,1,g-2),l=this.getBezierValue(i,m,2,g+18-2),c=this.getBezierValue(i,m,3,g+36-2),u=this.getBezierValue(i,m,4,g+54-2),d=this.getBezierValue(i,m,5,g+72-2),f=this.getBezierValue(i,m,6,g+90-2)}if(0==n){let t=o.data;o.mixRotate=t.mixRotate+(h-t.mixRotate)*r,o.mixX=t.mixX+(l-t.mixX)*r,o.mixY=t.mixY+(c-t.mixY)*r,o.mixScaleX=t.mixScaleX+(u-t.mixScaleX)*r,o.mixScaleY=t.mixScaleY+(d-t.mixScaleY)*r,o.mixShearY=t.mixShearY+(f-t.mixShearY)*r}else o.mixRotate+=(h-o.mixRotate)*r,o.mixX+=(l-o.mixX)*r,o.mixY+=(c-o.mixY)*r,o.mixScaleX+=(u-o.mixScaleX)*r,o.mixScaleY+=(d-o.mixScaleY)*r,o.mixShearY+=(f-o.mixShearY)*r}},It=class extends tt{pathConstraintIndex=0;constructor(t,e,i){super(t,e,j+"|"+i),this.pathConstraintIndex=i}apply(t,e,i,s,r,n,a){let o=t.pathConstraints[this.pathConstraintIndex];if(!o.active)return;if(i<this.frames[0]){switch(n){case 0:return void(o.position=o.data.position);case 1:o.position+=(o.data.position-o.position)*r}return}let h=this.getCurveValue(i);0==n?o.position=o.data.position+(h-o.data.position)*r:o.position+=(h-o.position)*r}},Tt=class extends tt{pathConstraintIndex=0;constructor(t,e,i){super(t,e,Z+"|"+i),this.pathConstraintIndex=i}apply(t,e,i,s,r,n,a){let o=t.pathConstraints[this.pathConstraintIndex];if(!o.active)return;if(i<this.frames[0]){switch(n){case 0:return void(o.spacing=o.data.spacing);case 1:o.spacing+=(o.data.spacing-o.spacing)*r}return}let h=this.getCurveValue(i);0==n?o.spacing=o.data.spacing+(h-o.data.spacing)*r:o.spacing+=(h-o.spacing)*r}},kt=class extends ${pathConstraintIndex=0;constructor(t,e,i){super(t,e,[K+"|"+i]),this.pathConstraintIndex=i}getFrameEntries(){return 4}setFrame(t,e,i,s,r){let n=this.frames;n[t<<=2]=e,n[t+1]=i,n[t+2]=s,n[t+3]=r}apply(t,e,i,s,r,n,a){let o=t.pathConstraints[this.pathConstraintIndex];if(!o.active)return;let h,l,c,u=this.frames;if(i<u[0]){switch(n){case 0:return o.mixRotate=o.data.mixRotate,o.mixX=o.data.mixX,void(o.mixY=o.data.mixY);case 1:o.mixRotate+=(o.data.mixRotate-o.mixRotate)*r,o.mixX+=(o.data.mixX-o.mixX)*r,o.mixY+=(o.data.mixY-o.mixY)*r}return}let d=Q.search(u,i,4),f=this.curves[d>>2];switch(f){case 0:let t=u[d];h=u[d+1],l=u[d+2],c=u[d+3];let e=(i-t)/(u[d+4]-t);h+=(u[d+4+1]-h)*e,l+=(u[d+4+2]-l)*e,c+=(u[d+4+3]-c)*e;break;case 1:h=u[d+1],l=u[d+2],c=u[d+3];break;default:h=this.getBezierValue(i,d,1,f-2),l=this.getBezierValue(i,d,2,f+18-2),c=this.getBezierValue(i,d,3,f+36-2)}if(0==n){let t=o.data;o.mixRotate=t.mixRotate+(h-t.mixRotate)*r,o.mixX=t.mixX+(l-t.mixX)*r,o.mixY=t.mixY+(c-t.mixY)*r}else o.mixRotate+=(h-o.mixRotate)*r,o.mixX+=(l-o.mixX)*r,o.mixY+=(c-o.mixY)*r}},Et=class extends Q{slotIndex;attachment;constructor(t,e,i){super(t,[J+"|"+e+"|"+i.sequence.id]),this.slotIndex=e,this.attachment=i}getFrameEntries(){return Et.ENTRIES}getSlotIndex(){return this.slotIndex}getAttachment(){return this.attachment}setFrame(t,e,i,s,r){let n=this.frames;n[t*=Et.ENTRIES]=e,n[t+Et.MODE]=i|s<<4,n[t+Et.DELAY]=r}apply(t,e,i,s,r,n,a){let o=t.slots[this.slotIndex];if(!o.bone.active)return;let h=o.attachment,l=this.attachment;if(!(h==l||h instanceof M&&h.timelineAttachment==l))return;let c=this.frames;if(i<c[0])return void(0!=n&&1!=n||(o.sequenceIndex=-1));let u=Q.search(c,i,Et.ENTRIES),d=c[u],f=c[u+Et.MODE],p=c[u+Et.DELAY];if(!this.attachment.sequence)return;let m=f>>4,g=this.attachment.sequence.regions.length,x=E[15&f];if(0!=x)switch(m+=(i-d)/p+1e-5|0,x){case 1:m=Math.min(g-1,m);break;case 2:m%=g;break;case 3:{let t=(g<<1)-2;m=0==t?0:m%t,m>=g&&(m=t-m);break}case 4:m=Math.max(g-1-m,0);break;case 5:m=g-1-m%g;break;case 6:{let t=(g<<1)-2;m=0==t?0:(m+g-1)%t,m>=g&&(m=t-m)}}o.sequenceIndex=m}},Ct=Et;r(Ct,"ENTRIES",3),r(Ct,"MODE",1),r(Ct,"DELAY",2);var Rt=class{static emptyAnimation(){return Rt._emptyAnimation}data;tracks=new Array;timeScale=1;unkeyedState=0;events=new Array;listeners=new Array;queue=new Xt(this);propertyIDs=new o;animationsChanged=!1;trackEntryPool=new w((()=>new Ft));constructor(t){this.data=t}update(t){t*=this.timeScale;let e=this.tracks;for(let i=0,s=e.length;i<s;i++){let s=e[i];if(!s)continue;s.animationLast=s.nextAnimationLast,s.trackLast=s.nextTrackLast;let r=t*s.timeScale;if(s.delay>0){if(s.delay-=r,s.delay>0)continue;r=-s.delay,s.delay=0}let n=s.next;if(n){let e=s.trackLast-n.delay;if(e>=0){for(n.delay=0,n.trackTime+=0==s.timeScale?0:(e/s.timeScale+t)*n.timeScale,s.trackTime+=r,this.setCurrent(i,n,!0);n.mixingFrom;)n.mixTime+=t,n=n.mixingFrom;continue}}else if(s.trackLast>=s.trackEnd&&!s.mixingFrom){e[i]=null,this.queue.end(s),this.clearNext(s);continue}if(s.mixingFrom&&this.updateMixingFrom(s,t)){let t=s.mixingFrom;for(s.mixingFrom=null,t&&(t.mixingTo=null);t;)this.queue.end(t),t=t.mixingFrom}s.trackTime+=r}this.queue.drain()}updateMixingFrom(t,e){let i=t.mixingFrom;if(!i)return!0;let s=this.updateMixingFrom(i,e);return i.animationLast=i.nextAnimationLast,i.trackLast=i.nextTrackLast,t.mixTime>0&&t.mixTime>=t.mixDuration?(0!=i.totalAlpha&&0!=t.mixDuration||(t.mixingFrom=i.mixingFrom,i.mixingFrom&&(i.mixingFrom.mixingTo=t),t.interruptAlpha=i.interruptAlpha,this.queue.end(i)),s):(i.trackTime+=e*i.timeScale,t.mixTime+=e,!1)}apply(t){if(!t)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();let e=this.events,i=this.tracks,s=!1;for(let n=0,a=i.length;n<a;n++){let a=i[n];if(!a||a.delay>0)continue;s=!0;let o=0==n?1:a.mixBlend,h=a.alpha;a.mixingFrom?h*=this.applyMixingFrom(a,t,o):a.trackTime>=a.trackEnd&&!a.next&&(h=0);let l=a.animationLast,c=a.getAnimationTime(),u=c,d=e;a.reverse&&(u=a.animation.duration-u,d=null);let f=a.animation.timelines,p=f.length;if(0==n&&1==h||3==o)for(let e=0;e<p;e++){g.webkit602BugfixHelper(h,o);var r=f[e];r instanceof xt?this.applyAttachmentTimeline(r,t,u,o,!0):r.apply(t,l,u,d,h,o,0)}else{let e=a.timelineMode,i=a.shortestRotation,s=!i&&a.timelinesRotation.length!=p<<1;s&&(a.timelinesRotation.length=p<<1);for(let r=0;r<p;r++){let n=f[r],c=e[r]==Dt?o:0;!i&&n instanceof it?this.applyRotateTimeline(n,t,u,h,c,a.timelinesRotation,r<<1,s):n instanceof xt?this.applyAttachmentTimeline(n,t,u,o,!0):(g.webkit602BugfixHelper(h,o),n.apply(t,l,u,d,h,c,0))}}this.queueEvents(a,c),e.length=0,a.nextAnimationLast=c,a.nextTrackLast=a.trackTime}for(var n=this.unkeyedState+Nt,a=t.slots,o=0,h=t.slots.length;o<h;o++){var l=a[o];if(l.attachmentState==n){var c=l.data.attachmentName;l.setAttachment(c?t.getAttachment(l.data.index,c):null)}}return this.unkeyedState+=2,this.queue.drain(),s}applyMixingFrom(t,e,i){let s=t.mixingFrom;s.mixingFrom&&this.applyMixingFrom(s,e,i);let r=0;0==t.mixDuration?(r=1,1==i&&(i=0)):(r=t.mixTime/t.mixDuration,r>1&&(r=1),1!=i&&(i=s.mixBlend));let n=r<s.attachmentThreshold,a=r<s.drawOrderThreshold,o=s.animation.timelines,h=o.length,l=s.alpha*t.interruptAlpha,c=l*(1-r),u=s.animationLast,d=s.getAnimationTime(),f=d,p=null;if(s.reverse?f=s.animation.duration-f:r<s.eventThreshold&&(p=this.events),3==i)for(let t=0;t<h;t++)o[t].apply(e,u,f,p,c,i,1);else{let t=s.timelineMode,r=s.timelineHoldMix,d=s.shortestRotation,m=!d&&s.timelinesRotation.length!=h<<1;m&&(s.timelinesRotation.length=h<<1),s.totalAlpha=0;for(let x=0;x<h;x++){let h,w=o[x],v=1,y=0;switch(t[x]){case Dt:if(!a&&w instanceof At)continue;h=i,y=c;break;case Bt:h=0,y=c;break;case Ot:h=i,y=l;break;case Vt:h=0,y=l;break;default:h=0;let t=r[x];y=l*Math.max(0,1-t.mixTime/t.mixDuration)}s.totalAlpha+=y,!d&&w instanceof it?this.applyRotateTimeline(w,e,f,y,h,s.timelinesRotation,x<<1,m):w instanceof xt?this.applyAttachmentTimeline(w,e,f,h,n):(g.webkit602BugfixHelper(y,i),a&&w instanceof At&&0==h&&(v=0),w.apply(e,u,f,p,y,h,v))}}return t.mixDuration>0&&this.queueEvents(s,d),this.events.length=0,s.nextAnimationLast=d,s.nextTrackLast=s.trackTime,r}applyAttachmentTimeline(t,e,i,s,r){var n=e.slots[t.slotIndex];n.bone.active&&(i<t.frames[0]?0!=s&&1!=s||this.setAttachment(e,n,n.data.attachmentName,r):this.setAttachment(e,n,t.attachmentNames[Q.search1(t.frames,i)],r),n.attachmentState<=this.unkeyedState&&(n.attachmentState=this.unkeyedState+Nt))}setAttachment(t,e,i,s){e.setAttachment(i?t.getAttachment(e.data.index,i):null),s&&(e.attachmentState=this.unkeyedState+_t)}applyRotateTimeline(t,e,i,s,r,n,a,o){if(o&&(n[a]=0),1==s)return void t.apply(e,0,i,null,1,r,0);let h=e.bones[t.boneIndex];if(!h.active)return;let l=0,c=0;if(i<t.frames[0])switch(r){case 0:h.rotation=h.data.rotation;default:return;case 1:l=h.rotation,c=h.data.rotation}else l=0==r?h.data.rotation:h.rotation,c=h.data.rotation+t.getCurveValue(i);let d=0,f=c-l;if(f-=360*(16384-(16384.499999999996-f/360|0)),0==f)d=n[a];else{let t=0,e=0;o?(t=0,e=f):(t=n[a],e=n[a+1]);let i=f>0,s=t>=0;u.signum(e)!=u.signum(f)&&Math.abs(e)<=90&&(Math.abs(t)>180&&(t+=360*u.signum(t)),s=i),d=f+t-t%360,s!=i&&(d+=360*u.signum(t)),n[a]=d}n[a+1]=f,h.rotation=l+d*s}queueEvents(t,e){let i=t.animationStart,s=t.animationEnd,r=s-i,n=t.trackLast%r,a=this.events,o=0,h=a.length;for(;o<h;o++){let e=a[o];if(e.time<n)break;e.time>s||this.queue.event(t,e)}let l=!1;for(l=t.loop?0==r||n>t.trackTime%r:e>=s&&t.animationLast<s,l&&this.queue.complete(t);o<h;o++){let e=a[o];e.time<i||this.queue.event(t,e)}}clearTracks(){let t=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(let t=0,e=this.tracks.length;t<e;t++)this.clearTrack(t);this.tracks.length=0,this.queue.drainDisabled=t,this.queue.drain()}clearTrack(t){if(t>=this.tracks.length)return;let e=this.tracks[t];if(!e)return;this.queue.end(e),this.clearNext(e);let i=e;for(;;){let t=i.mixingFrom;if(!t)break;this.queue.end(t),i.mixingFrom=null,i.mixingTo=null,i=t}this.tracks[e.trackIndex]=null,this.queue.drain()}setCurrent(t,e,i){let s=this.expandToIndex(t);this.tracks[t]=e,e.previous=null,s&&(i&&this.queue.interrupt(s),e.mixingFrom=s,s.mixingTo=e,e.mixTime=0,s.mixingFrom&&s.mixDuration>0&&(e.interruptAlpha*=Math.min(1,s.mixTime/s.mixDuration)),s.timelinesRotation.length=0),this.queue.start(e)}setAnimation(t,e,i=!1){let s=this.data.skeletonData.findAnimation(e);if(!s)throw new Error("Animation not found: "+e);return this.setAnimationWith(t,s,i)}setAnimationWith(t,e,i=!1){if(!e)throw new Error("animation cannot be null.");let s=!0,r=this.expandToIndex(t);r&&(-1==r.nextTrackLast?(this.tracks[t]=r.mixingFrom,this.queue.interrupt(r),this.queue.end(r),this.clearNext(r),r=r.mixingFrom,s=!1):this.clearNext(r));let n=this.trackEntry(t,e,i,r);return this.setCurrent(t,n,s),this.queue.drain(),n}addAnimation(t,e,i=!1,s=0){let r=this.data.skeletonData.findAnimation(e);if(!r)throw new Error("Animation not found: "+e);return this.addAnimationWith(t,r,i,s)}addAnimationWith(t,e,i=!1,s=0){if(!e)throw new Error("animation cannot be null.");let r=this.expandToIndex(t);if(r)for(;r.next;)r=r.next;let n=this.trackEntry(t,e,i,r);return r?(r.next=n,n.previous=r,s<=0&&(s+=r.getTrackComplete()-n.mixDuration)):(this.setCurrent(t,n,!0),this.queue.drain()),n.delay=s,n}setEmptyAnimation(t,e=0){let i=this.setAnimationWith(t,Rt.emptyAnimation(),!1);return i.mixDuration=e,i.trackEnd=e,i}addEmptyAnimation(t,e=0,i=0){let s=this.addAnimationWith(t,Rt.emptyAnimation(),!1,i);return i<=0&&(s.delay+=s.mixDuration-e),s.mixDuration=e,s.trackEnd=e,s}setEmptyAnimations(t=0){let e=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(let e=0,i=this.tracks.length;e<i;e++){let i=this.tracks[e];i&&this.setEmptyAnimation(i.trackIndex,t)}this.queue.drainDisabled=e,this.queue.drain()}expandToIndex(t){return t<this.tracks.length?this.tracks[t]:(g.ensureArrayCapacity(this.tracks,t+1,null),this.tracks.length=t+1,null)}trackEntry(t,e,i,s){let r=this.trackEntryPool.obtain();return r.reset(),r.trackIndex=t,r.animation=e,r.loop=i,r.holdPrevious=!1,r.reverse=!1,r.shortestRotation=!1,r.eventThreshold=0,r.attachmentThreshold=0,r.drawOrderThreshold=0,r.animationStart=0,r.animationEnd=e.duration,r.animationLast=-1,r.nextAnimationLast=-1,r.delay=0,r.trackTime=0,r.trackLast=-1,r.nextTrackLast=-1,r.trackEnd=Number.MAX_VALUE,r.timeScale=1,r.alpha=1,r.mixTime=0,r.mixDuration=s?this.data.getMix(s.animation,e):0,r.interruptAlpha=1,r.totalAlpha=0,r.mixBlend=2,r}clearNext(t){let e=t.next;for(;e;)this.queue.dispose(e),e=e.next;t.next=null}_animationsChanged(){this.animationsChanged=!1,this.propertyIDs.clear();let t=this.tracks;for(let e=0,i=t.length;e<i;e++){let i=t[e];if(i){for(;i.mixingFrom;)i=i.mixingFrom;do{i.mixingTo&&3==i.mixBlend||this.computeHold(i),i=i.mixingTo}while(i)}}}computeHold(t){let e=t.mixingTo,i=t.animation.timelines,s=t.animation.timelines.length,r=t.timelineMode;r.length=s;let n=t.timelineHoldMix;n.length=0;let a=this.propertyIDs;if(e&&e.holdPrevious)for(let t=0;t<s;t++)r[t]=a.addAll(i[t].getPropertyIds())?Vt:Ot;else t:for(let o=0;o<s;o++){let s=i[o],h=s.getPropertyIds();if(a.addAll(h))if(!e||s instanceof xt||s instanceof At||s instanceof yt||!e.animation.hasTimeline(h))r[o]=Bt;else{for(let i=e.mixingTo;i;i=i.mixingTo)if(!i.animation.hasTimeline(h)){if(t.mixDuration>0){r[o]=zt,n[o]=i;continue t}break}r[o]=Vt}else r[o]=Dt}}getCurrent(t){return t>=this.tracks.length?null:this.tracks[t]}addListener(t){if(!t)throw new Error("listener cannot be null.");this.listeners.push(t)}removeListener(t){let e=this.listeners.indexOf(t);e>=0&&this.listeners.splice(e,1)}clearListeners(){this.listeners.length=0}clearListenerNotifications(){this.queue.clear()}},Yt=Rt;r(Yt,"_emptyAnimation",new C("<empty>",[],0));var Ft=class{animation=null;previous=null;next=null;mixingFrom=null;mixingTo=null;listener=null;trackIndex=0;loop=!1;holdPrevious=!1;reverse=!1;shortestRotation=!1;eventThreshold=0;attachmentThreshold=0;drawOrderThreshold=0;animationStart=0;animationEnd=0;animationLast=0;nextAnimationLast=0;delay=0;trackTime=0;trackLast=0;nextTrackLast=0;trackEnd=0;timeScale=0;alpha=0;mixTime=0;mixDuration=0;interruptAlpha=0;totalAlpha=0;mixBlend=2;timelineMode=new Array;timelineHoldMix=new Array;timelinesRotation=new Array;reset(){this.next=null,this.previous=null,this.mixingFrom=null,this.mixingTo=null,this.animation=null,this.listener=null,this.timelineMode.length=0,this.timelineHoldMix.length=0,this.timelinesRotation.length=0}getAnimationTime(){if(this.loop){let t=this.animationEnd-this.animationStart;return 0==t?this.animationStart:this.trackTime%t+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)}setAnimationLast(t){this.animationLast=t,this.nextAnimationLast=t}isComplete(){return this.trackTime>=this.animationEnd-this.animationStart}resetRotationDirections(){this.timelinesRotation.length=0}getTrackComplete(){let t=this.animationEnd-this.animationStart;if(0!=t){if(this.loop)return t*(1+(this.trackTime/t|0));if(this.trackTime<t)return t}return this.trackTime}},Xt=class{objects=[];drainDisabled=!1;animState;constructor(t){this.animState=t}start(t){this.objects.push(Pt.start),this.objects.push(t),this.animState.animationsChanged=!0}interrupt(t){this.objects.push(Pt.interrupt),this.objects.push(t)}end(t){this.objects.push(Pt.end),this.objects.push(t),this.animState.animationsChanged=!0}dispose(t){this.objects.push(Pt.dispose),this.objects.push(t)}complete(t){this.objects.push(Pt.complete),this.objects.push(t)}event(t,e){this.objects.push(Pt.event),this.objects.push(t),this.objects.push(e)}drain(){if(this.drainDisabled)return;this.drainDisabled=!0;let t=this.objects,e=this.animState.listeners;for(let i=0;i<t.length;i+=2){let s=t[i],r=t[i+1];switch(s){case Pt.start:r.listener&&r.listener.start&&r.listener.start(r);for(let t=0;t<e.length;t++){let i=e[t];i.start&&i.start(r)}break;case Pt.interrupt:r.listener&&r.listener.interrupt&&r.listener.interrupt(r);for(let t=0;t<e.length;t++){let i=e[t];i.interrupt&&i.interrupt(r)}break;case Pt.end:r.listener&&r.listener.end&&r.listener.end(r);for(let t=0;t<e.length;t++){let i=e[t];i.end&&i.end(r)}case Pt.dispose:r.listener&&r.listener.dispose&&r.listener.dispose(r);for(let t=0;t<e.length;t++){let i=e[t];i.dispose&&i.dispose(r)}this.animState.trackEntryPool.free(r);break;case Pt.complete:r.listener&&r.listener.complete&&r.listener.complete(r);for(let t=0;t<e.length;t++){let i=e[t];i.complete&&i.complete(r)}break;case Pt.event:let s=t[2+i++];r.listener&&r.listener.event&&r.listener.event(r,s);for(let t=0;t<e.length;t++){let i=e[t];i.event&&i.event(r,s)}}}this.clear(),this.drainDisabled=!1}clear(){this.objects.length=0}},Pt=(t=>(t[t.start=0]="start",t[t.interrupt=1]="interrupt",t[t.end=2]="end",t[t.dispose=3]="dispose",t[t.complete=4]="complete",t[t.event=5]="event",t))(Pt||{}),Lt=class{start(t){}interrupt(t){}end(t){}dispose(t){}complete(t){}event(t,e){}},Dt=0,Bt=1,Ot=2,Vt=3,zt=4,Nt=1,_t=2,Ut=class{skeletonData;animationToMixTime={};defaultMix=0;constructor(t){if(!t)throw new Error("skeletonData cannot be null.");this.skeletonData=t}setMix(t,e,i){let s=this.skeletonData.findAnimation(t);if(!s)throw new Error("Animation not found: "+t);let r=this.skeletonData.findAnimation(e);if(!r)throw new Error("Animation not found: "+e);this.setMixWith(s,r,i)}setMixWith(t,e,i){if(!t)throw new Error("from cannot be null.");if(!e)throw new Error("to cannot be null.");let s=t.name+"."+e.name;this.animationToMixTime[s]=i}getMix(t,e){let i=t.name+"."+e.name,s=this.animationToMixTime[i];return void 0===s?this.defaultMix:s}},Wt=class extends M{color=new l(1,1,1,1);constructor(t){super(t)}copy(){let t=new Wt(this.name);return this.copyTo(t),t.color.setFromColor(this.color),t}},qt=class extends M{endSlot=null;color=new l(.2275,.2275,.8078,1);constructor(t){super(t)}copy(){let t=new qt(this.name);return this.copyTo(t),t.endSlot=this.endSlot,t.color.setFromColor(this.color),t}},Gt=class{_image;constructor(t){this._image=t}getImage(){return this._image}},Ht=(t=>(t[t.Nearest=9728]="Nearest",t[t.Linear=9729]="Linear",t[t.MipMap=9987]="MipMap",t[t.MipMapNearestNearest=9984]="MipMapNearestNearest",t[t.MipMapLinearNearest=9985]="MipMapLinearNearest",t[t.MipMapNearestLinear=9986]="MipMapNearestLinear",t[t.MipMapLinearLinear=9987]="MipMapLinearLinear",t))(Ht||{}),jt=(t=>(t[t.MirroredRepeat=33648]="MirroredRepeat",t[t.ClampToEdge=33071]="ClampToEdge",t[t.Repeat=10497]="Repeat",t))(jt||{}),Zt=class{texture;u=0;v=0;u2=0;v2=0;width=0;height=0;degrees=0;offsetX=0;offsetY=0;originalWidth=0;originalHeight=0},Kt=class extends Gt{setFilters(t,e){}setWraps(t,e){}dispose(){}},Jt=class{pages=new Array;regions=new Array;constructor(t){let e=new Qt(t),i=new Array(4),s={size:t=>{t.width=parseInt(i[1]),t.height=parseInt(i[2])},format:()=>{},filter:t=>{t.minFilter=g.enumValue(Ht,i[1]),t.magFilter=g.enumValue(Ht,i[2])},repeat:t=>{-1!=i[1].indexOf("x")&&(t.uWrap=10497),-1!=i[1].indexOf("y")&&(t.vWrap=10497)},pma:t=>{t.pma="true"==i[1]}};var r={xy:t=>{t.x=parseInt(i[1]),t.y=parseInt(i[2])},size:t=>{t.width=parseInt(i[1]),t.height=parseInt(i[2])},bounds:t=>{t.x=parseInt(i[1]),t.y=parseInt(i[2]),t.width=parseInt(i[3]),t.height=parseInt(i[4])},offset:t=>{t.offsetX=parseInt(i[1]),t.offsetY=parseInt(i[2])},orig:t=>{t.originalWidth=parseInt(i[1]),t.originalHeight=parseInt(i[2])},offsets:t=>{t.offsetX=parseInt(i[1]),t.offsetY=parseInt(i[2]),t.originalWidth=parseInt(i[3]),t.originalHeight=parseInt(i[4])},rotate:t=>{let e=i[1];"true"==e?t.degrees=90:"false"!=e&&(t.degrees=parseInt(e))},index:t=>{t.index=parseInt(i[1])}};let n=e.readLine();for(;n&&0==n.trim().length;)n=e.readLine();for(;n&&0!=n.trim().length&&0!=e.readEntry(i,n);)n=e.readLine();let a=null,o=null,h=null;for(;null!==n;)if(0==n.trim().length)a=null,n=e.readLine();else if(a){let t=new te(a,n);for(;;){let s=e.readEntry(i,n=e.readLine());if(0==s)break;let a=r[i[0]];if(a)a(t);else{o||(o=[]),h||(h=[]),o.push(i[0]);let t=[];for(let e=0;e<s;e++)t.push(parseInt(i[e+1]));h.push(t)}}0==t.originalWidth&&0==t.originalHeight&&(t.originalWidth=t.width,t.originalHeight=t.height),o&&o.length>0&&h&&h.length>0&&(t.names=o,t.values=h,o=null,h=null),t.u=t.x/a.width,t.v=t.y/a.height,90==t.degrees?(t.u2=(t.x+t.height)/a.width,t.v2=(t.y+t.width)/a.height):(t.u2=(t.x+t.width)/a.width,t.v2=(t.y+t.height)/a.height),this.regions.push(t)}else{for(a=new $t(n.trim());0!=e.readEntry(i,n=e.readLine());){let t=s[i[0]];t&&t(a)}this.pages.push(a)}}findRegion(t){for(let e=0;e<this.regions.length;e++)if(this.regions[e].name==t)return this.regions[e];return null}setTextures(t,e=""){for(let i of this.pages)i.setTexture(t.get(e+i.name))}dispose(){for(let t=0;t<this.pages.length;t++)this.pages[t].texture?.dispose()}},Qt=class{lines;index=0;constructor(t){this.lines=t.split(/\r\n|\r|\n/)}readLine(){return this.index>=this.lines.length?null:this.lines[this.index++]}readEntry(t,e){if(!e)return 0;if(0==(e=e.trim()).length)return 0;let i=e.indexOf(":");if(-1==i)return 0;t[0]=e.substr(0,i).trim();for(let s=1,r=i+1;;s++){let i=e.indexOf(",",r);if(-1==i)return t[s]=e.substr(r).trim(),s;if(t[s]=e.substr(r,i-r).trim(),r=i+1,4==s)return 4}}},$t=class{name;minFilter=9728;magFilter=9728;uWrap=33071;vWrap=33071;texture=null;width=0;height=0;pma=!1;regions=new Array;constructor(t){this.name=t}setTexture(t){this.texture=t,t.setFilters(this.minFilter,this.magFilter),t.setWraps(this.uWrap,this.vWrap);for(let e of this.regions)e.texture=t}},te=class extends Zt{page;name;x=0;y=0;offsetX=0;offsetY=0;originalWidth=0;originalHeight=0;index=0;degrees=0;names=null;values=null;constructor(t,e){super(),this.page=t,this.name=e,t.regions.push(this)}},ee=class extends M{region=null;path;regionUVs=[];uvs=[];triangles=[];color=new l(1,1,1,1);width=0;height=0;hullLength=0;edges=[];parentMesh=null;sequence=null;tempColor=new l(0,0,0,0);constructor(t,e){super(t),this.path=e}updateRegion(){if(!this.region)throw new Error("Region not set.");let t=this.regionUVs;this.uvs&&this.uvs.length==t.length||(this.uvs=g.newFloatArray(t.length));let e=this.uvs,i=this.uvs.length,s=this.region.u,r=this.region.v,n=0,a=0;if(this.region instanceof te){let o=this.region,h=o.page.texture.getImage(),l=h.width,c=h.height;switch(o.degrees){case 90:s-=(o.originalHeight-o.offsetY-o.height)/l,r-=(o.originalWidth-o.offsetX-o.width)/c,n=o.originalHeight/l,a=o.originalWidth/c;for(let o=0;o<i;o+=2)e[o]=s+t[o+1]*n,e[o+1]=r+(1-t[o])*a;return;case 180:s-=(o.originalWidth-o.offsetX-o.width)/l,r-=o.offsetY/c,n=o.originalWidth/l,a=o.originalHeight/c;for(let o=0;o<i;o+=2)e[o]=s+(1-t[o])*n,e[o+1]=r+(1-t[o+1])*a;return;case 270:s-=o.offsetY/l,r-=o.offsetX/c,n=o.originalHeight/l,a=o.originalWidth/c;for(let o=0;o<i;o+=2)e[o]=s+(1-t[o+1])*n,e[o+1]=r+t[o]*a;return}s-=o.offsetX/l,r-=(o.originalHeight-o.offsetY-o.height)/c,n=o.originalWidth/l,a=o.originalHeight/c}else this.region?(n=this.region.u2-s,a=this.region.v2-r):(s=r=0,n=a=1);for(let o=0;o<i;o+=2)e[o]=s+t[o]*n,e[o+1]=r+t[o+1]*a}getParentMesh(){return this.parentMesh}setParentMesh(t){this.parentMesh=t,t&&(this.bones=t.bones,this.vertices=t.vertices,this.worldVerticesLength=t.worldVerticesLength,this.regionUVs=t.regionUVs,this.triangles=t.triangles,this.hullLength=t.hullLength,this.worldVerticesLength=t.worldVerticesLength)}copy(){if(this.parentMesh)return this.newLinkedMesh();let t=new ee(this.name,this.path);return t.region=this.region,t.color.setFromColor(this.color),this.copyTo(t),t.regionUVs=new Array(this.regionUVs.length),g.arrayCopy(this.regionUVs,0,t.regionUVs,0,this.regionUVs.length),t.uvs=new Array(this.uvs.length),g.arrayCopy(this.uvs,0,t.uvs,0,this.uvs.length),t.triangles=new Array(this.triangles.length),g.arrayCopy(this.triangles,0,t.triangles,0,this.triangles.length),t.hullLength=this.hullLength,t.sequence=null!=this.sequence?this.sequence.copy():null,this.edges&&(t.edges=new Array(this.edges.length),g.arrayCopy(this.edges,0,t.edges,0,this.edges.length)),t.width=this.width,t.height=this.height,t}computeWorldVertices(t,e,i,s,r,n){null!=this.sequence&&this.sequence.apply(t,this),super.computeWorldVertices(t,e,i,s,r,n)}newLinkedMesh(){let t=new ee(this.name,this.path);return t.region=this.region,t.color.setFromColor(this.color),t.timelineAttachment=this.timelineAttachment,t.setParentMesh(this.parentMesh?this.parentMesh:this),null!=t.region&&t.updateRegion(),t}},ie=class extends M{lengths=[];closed=!1;constantSpeed=!1;color=new l(1,1,1,1);constructor(t){super(t)}copy(){let t=new ie(this.name);return this.copyTo(t),t.lengths=new Array(this.lengths.length),g.arrayCopy(this.lengths,0,t.lengths,0,this.lengths.length),t.closed=closed,t.constantSpeed=this.constantSpeed,t.color.setFromColor(this.color),t}},se=class extends M{x=0;y=0;rotation=0;color=new l(.38,.94,0,1);constructor(t){super(t)}computeWorldPosition(t,e){return e.x=this.x*t.a+this.y*t.b+t.worldX,e.y=this.x*t.c+this.y*t.d+t.worldY,e}computeWorldRotation(t){let e=u.cosDeg(this.rotation),i=u.sinDeg(this.rotation),s=e*t.a+i*t.b,r=e*t.c+i*t.d;return Math.atan2(r,s)*u.radDeg}copy(){let t=new se(this.name);return t.x=this.x,t.y=this.y,t.rotation=this.rotation,t.color.setFromColor(this.color),t}},re=class extends A{x=0;y=0;scaleX=1;scaleY=1;rotation=0;width=0;height=0;color=new l(1,1,1,1);path;region=null;sequence=null;offset=g.newFloatArray(8);uvs=g.newFloatArray(8);tempColor=new l(1,1,1,1);constructor(t,e){super(t),this.path=e}updateRegion(){if(!this.region)throw new Error("Region not set.");let t=this.region,e=this.uvs;if(null==t)return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e[4]=1,e[5]=1,e[6]=1,void(e[7]=0);let i=this.width/this.region.originalWidth*this.scaleX,s=this.height/this.region.originalHeight*this.scaleY,r=-this.width/2*this.scaleX+this.region.offsetX*i,n=-this.height/2*this.scaleY+this.region.offsetY*s,a=r+this.region.width*i,o=n+this.region.height*s,h=this.rotation*Math.PI/180,l=Math.cos(h),c=Math.sin(h),u=this.x,d=this.y,f=r*l+u,p=r*c,m=n*l+d,g=n*c,x=a*l+u,w=a*c,v=o*l+d,y=o*c,b=this.offset;b[0]=f-g,b[1]=m+p,b[2]=f-y,b[3]=v+p,b[4]=x-y,b[5]=v+w,b[6]=x-g,b[7]=m+w,90==t.degrees?(e[0]=t.u2,e[1]=t.v2,e[2]=t.u,e[3]=t.v2,e[4]=t.u,e[5]=t.v,e[6]=t.u2,e[7]=t.v):(e[0]=t.u,e[1]=t.v2,e[2]=t.u,e[3]=t.v,e[4]=t.u2,e[5]=t.v,e[6]=t.u2,e[7]=t.v2)}computeWorldVertices(t,e,i,s){null!=this.sequence&&this.sequence.apply(t,this);let r=t.bone,n=this.offset,a=r.worldX,o=r.worldY,h=r.a,l=r.b,c=r.c,u=r.d,d=0,f=0;d=n[0],f=n[1],e[i]=d*h+f*l+a,e[i+1]=d*c+f*u+o,i+=s,d=n[2],f=n[3],e[i]=d*h+f*l+a,e[i+1]=d*c+f*u+o,i+=s,d=n[4],f=n[5],e[i]=d*h+f*l+a,e[i+1]=d*c+f*u+o,i+=s,d=n[6],f=n[7],e[i]=d*h+f*l+a,e[i+1]=d*c+f*u+o}copy(){let t=new re(this.name,this.path);return t.region=this.region,t.x=this.x,t.y=this.y,t.scaleX=this.scaleX,t.scaleY=this.scaleY,t.rotation=this.rotation,t.width=this.width,t.height=this.height,g.arrayCopy(this.uvs,0,t.uvs,0,8),g.arrayCopy(this.offset,0,t.offset,0,8),t.color.setFromColor(this.color),t.sequence=null!=this.sequence?this.sequence.copy():null,t}},ne=re;r(ne,"X1",0),r(ne,"Y1",1),r(ne,"C1R",2),r(ne,"C1G",3),r(ne,"C1B",4),r(ne,"C1A",5),r(ne,"U1",6),r(ne,"V1",7),r(ne,"X2",8),r(ne,"Y2",9),r(ne,"C2R",10),r(ne,"C2G",11),r(ne,"C2B",12),r(ne,"C2A",13),r(ne,"U2",14),r(ne,"V2",15),r(ne,"X3",16),r(ne,"Y3",17),r(ne,"C3R",18),r(ne,"C3G",19),r(ne,"C3B",20),r(ne,"C3A",21),r(ne,"U3",22),r(ne,"V3",23),r(ne,"X4",24),r(ne,"Y4",25),r(ne,"C4R",26),r(ne,"C4G",27),r(ne,"C4B",28),r(ne,"C4A",29),r(ne,"U4",30),r(ne,"V4",31);var ae=class{atlas;constructor(t){this.atlas=t}loadSequence(t,e,i){let s=i.regions;for(let r=0,n=s.length;r<n;r++){let n=i.getPath(e,r),a=this.atlas.findRegion(n);if(null==a)throw new Error("Region not found in atlas: "+n+" (sequence: "+t+")");s[r]=a}}newRegionAttachment(t,e,i,s){let r=new ne(e,i);if(null!=s)this.loadSequence(e,i,s);else{let t=this.atlas.findRegion(i);if(!t)throw new Error("Region not found in atlas: "+i+" (region attachment: "+e+")");r.region=t}return r}newMeshAttachment(t,e,i,s){let r=new ee(e,i);if(null!=s)this.loadSequence(e,i,s);else{let t=this.atlas.findRegion(i);if(!t)throw new Error("Region not found in atlas: "+i+" (mesh attachment: "+e+")");r.region=t}return r}newBoundingBoxAttachment(t,e){return new Wt(e)}newPathAttachment(t,e){return new ie(e)}newPointAttachment(t,e){return new se(e)}newClippingAttachment(t,e){return new qt(e)}},oe=class{index=0;name;parent=null;length=0;x=0;y=0;rotation=0;scaleX=1;scaleY=1;shearX=0;shearY=0;transformMode=he.Normal;skinRequired=!1;color=new l;constructor(t,e,i){if(t<0)throw new Error("index must be >= 0.");if(!e)throw new Error("name cannot be null.");this.index=t,this.name=e,this.parent=i}},he=(t=>(t[t.Normal=0]="Normal",t[t.OnlyTranslation=1]="OnlyTranslation",t[t.NoRotationOrReflection=2]="NoRotationOrReflection",t[t.NoScale=3]="NoScale",t[t.NoScaleOrReflection=4]="NoScaleOrReflection",t))(he||{}),le=class{data;skeleton;parent=null;children=new Array;x=0;y=0;rotation=0;scaleX=0;scaleY=0;shearX=0;shearY=0;ax=0;ay=0;arotation=0;ascaleX=0;ascaleY=0;ashearX=0;ashearY=0;a=0;b=0;c=0;d=0;worldY=0;worldX=0;sorted=!1;active=!1;constructor(t,e,i){if(!t)throw new Error("data cannot be null.");if(!e)throw new Error("skeleton cannot be null.");this.data=t,this.skeleton=e,this.parent=i,this.setToSetupPose()}isActive(){return this.active}update(){this.updateWorldTransformWith(this.ax,this.ay,this.arotation,this.ascaleX,this.ascaleY,this.ashearX,this.ashearY)}updateWorldTransform(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)}updateWorldTransformWith(t,e,i,s,r,n,a){this.ax=t,this.ay=e,this.arotation=i,this.ascaleX=s,this.ascaleY=r,this.ashearX=n,this.ashearY=a;let o=this.parent;if(!o){let o=this.skeleton,h=i+90+a,l=o.scaleX,c=o.scaleY;return this.a=u.cosDeg(i+n)*s*l,this.b=u.cosDeg(h)*r*l,this.c=u.sinDeg(i+n)*s*c,this.d=u.sinDeg(h)*r*c,this.worldX=t*l+o.x,void(this.worldY=e*c+o.y)}let h=o.a,l=o.b,c=o.c,d=o.d;switch(this.worldX=h*t+l*e+o.worldX,this.worldY=c*t+d*e+o.worldY,this.data.transformMode){case 0:{let t=i+90+a,e=u.cosDeg(i+n)*s,o=u.cosDeg(t)*r,f=u.sinDeg(i+n)*s,p=u.sinDeg(t)*r;return this.a=h*e+l*f,this.b=h*o+l*p,this.c=c*e+d*f,void(this.d=c*o+d*p)}case 1:{let t=i+90+a;this.a=u.cosDeg(i+n)*s,this.b=u.cosDeg(t)*r,this.c=u.sinDeg(i+n)*s,this.d=u.sinDeg(t)*r;break}case 2:{let t=h*h+c*c,e=0;t>1e-4?(t=Math.abs(h*d-l*c)/t,h/=this.skeleton.scaleX,c/=this.skeleton.scaleY,l=c*t,d=h*t,e=Math.atan2(c,h)*u.radDeg):(h=0,c=0,e=90-Math.atan2(d,l)*u.radDeg);let o=i+n-e,f=i+a-e+90,p=u.cosDeg(o)*s,m=u.cosDeg(f)*r,g=u.sinDeg(o)*s,x=u.sinDeg(f)*r;this.a=h*p-l*g,this.b=h*m-l*x,this.c=c*p+d*g,this.d=c*m+d*x;break}case 3:case 4:{let t=u.cosDeg(i),e=u.sinDeg(i),o=(h*t+l*e)/this.skeleton.scaleX,f=(c*t+d*e)/this.skeleton.scaleY,p=Math.sqrt(o*o+f*f);p>1e-5&&(p=1/p),o*=p,f*=p,p=Math.sqrt(o*o+f*f),3==this.data.transformMode&&h*d-l*c<0!=(this.skeleton.scaleX<0!=this.skeleton.scaleY<0)&&(p=-p);let m=Math.PI/2+Math.atan2(f,o),g=Math.cos(m)*p,x=Math.sin(m)*p,w=u.cosDeg(n)*s,v=u.cosDeg(90+a)*r,y=u.sinDeg(n)*s,b=u.sinDeg(90+a)*r;this.a=o*w+g*y,this.b=o*v+g*b,this.c=f*w+x*y,this.d=f*v+x*b;break}}this.a*=this.skeleton.scaleX,this.b*=this.skeleton.scaleX,this.c*=this.skeleton.scaleY,this.d*=this.skeleton.scaleY}setToSetupPose(){let t=this.data;this.x=t.x,this.y=t.y,this.rotation=t.rotation,this.scaleX=t.scaleX,this.scaleY=t.scaleY,this.shearX=t.shearX,this.shearY=t.shearY}getWorldRotationX(){return Math.atan2(this.c,this.a)*u.radDeg}getWorldRotationY(){return Math.atan2(this.d,this.b)*u.radDeg}getWorldScaleX(){return Math.sqrt(this.a*this.a+this.c*this.c)}getWorldScaleY(){return Math.sqrt(this.b*this.b+this.d*this.d)}updateAppliedTransform(){let t=this.parent;if(!t)return this.ax=this.worldX-this.skeleton.x,this.ay=this.worldY-this.skeleton.y,this.arotation=Math.atan2(this.c,this.a)*u.radDeg,this.ascaleX=Math.sqrt(this.a*this.a+this.c*this.c),this.ascaleY=Math.sqrt(this.b*this.b+this.d*this.d),this.ashearX=0,void(this.ashearY=Math.atan2(this.a*this.b+this.c*this.d,this.a*this.d-this.b*this.c)*u.radDeg);let e=t.a,i=t.b,s=t.c,r=t.d,n=1/(e*r-i*s),a=this.worldX-t.worldX,o=this.worldY-t.worldY;this.ax=a*r*n-o*i*n,this.ay=o*e*n-a*s*n;let h=n*r,l=n*e,c=n*i,d=n*s,f=h*this.a-c*this.c,p=h*this.b-c*this.d,m=l*this.c-d*this.a,g=l*this.d-d*this.b;if(this.ashearX=0,this.ascaleX=Math.sqrt(f*f+m*m),this.ascaleX>1e-4){let t=f*g-p*m;this.ascaleY=t/this.ascaleX,this.ashearY=Math.atan2(f*p+m*g,t)*u.radDeg,this.arotation=Math.atan2(m,f)*u.radDeg}else this.ascaleX=0,this.ascaleY=Math.sqrt(p*p+g*g),this.ashearY=0,this.arotation=90-Math.atan2(g,p)*u.radDeg}worldToLocal(t){let e=1/(this.a*this.d-this.b*this.c),i=t.x-this.worldX,s=t.y-this.worldY;return t.x=i*this.d*e-s*this.b*e,t.y=s*this.a*e-i*this.c*e,t}localToWorld(t){let e=t.x,i=t.y;return t.x=e*this.a+i*this.b+this.worldX,t.y=e*this.c+i*this.d+this.worldY,t}worldToLocalRotation(t){let e=u.sinDeg(t),i=u.cosDeg(t);return Math.atan2(this.a*e-this.c*i,this.d*i-this.b*e)*u.radDeg+this.rotation-this.shearX}localToWorldRotation(t){t-=this.rotation-this.shearX;let e=u.sinDeg(t),i=u.cosDeg(t);return Math.atan2(i*this.c+e*this.d,i*this.a+e*this.b)*u.radDeg}rotateWorld(t){let e=this.a,i=this.b,s=this.c,r=this.d,n=u.cosDeg(t),a=u.sinDeg(t);this.a=n*e-a*s,this.b=n*i-a*r,this.c=a*e+n*s,this.d=a*i+n*r}},ce=class{constructor(t,e,i){this.name=t,this.order=e,this.skinRequired=i}},ue=class{pathPrefix="";textureLoader;downloader;assets={};errors={};toLoad=0;loaded=0;constructor(t,e="",i=new de){this.textureLoader=t,this.pathPrefix=e,this.downloader=i}start(t){return this.toLoad++,this.pathPrefix+t}success(t,e,i){this.toLoad--,this.loaded++,this.assets[e]=i,t&&t(e,i)}error(t,e,i){this.toLoad--,this.loaded++,this.errors[e]=i,t&&t(e,i)}loadAll(){return new Promise(((t,e)=>{let i=()=>{this.isLoadingComplete()?this.hasErrors()?e(this.errors):t(this):requestAnimationFrame(i)};requestAnimationFrame(i)}))}setRawDataURI(t,e){this.downloader.rawDataUris[this.pathPrefix+t]=e}loadBinary(t,e=()=>{},i=()=>{}){t=this.start(t),this.downloader.downloadBinary(t,(i=>{this.success(e,t,i)}),((e,s)=>{this.error(i,t,`Couldn't load binary ${t}: status ${e}, ${s}`)}))}loadText(t,e=()=>{},i=()=>{}){t=this.start(t),this.downloader.downloadText(t,(i=>{this.success(e,t,i)}),((e,s)=>{this.error(i,t,`Couldn't load text ${t}: status ${e}, ${s}`)}))}loadJson(t,e=()=>{},i=()=>{}){t=this.start(t),this.downloader.downloadJson(t,(i=>{this.success(e,t,i)}),((e,s)=>{this.error(i,t,`Couldn't load JSON ${t}: status ${e}, ${s}`)}))}loadTexture(t,e=()=>{},i=()=>{}){if(t=this.start(t),!!("undefined"==typeof window||"undefined"==typeof navigator||!window.document))fetch(t,{mode:"cors"}).then((e=>e.ok?e.blob():(this.error(i,t,`Couldn't load image: ${t}`),null))).then((t=>t?createImageBitmap(t,{premultiplyAlpha:"none",colorSpaceConversion:"none"}):null)).then((i=>{i&&this.success(e,t,this.textureLoader(i))}));else{let s=new Image;s.crossOrigin="anonymous",s.onload=()=>{this.success(e,t,this.textureLoader(s))},s.onerror=()=>{this.error(i,t,`Couldn't load image: ${t}`)},this.downloader.rawDataUris[t]&&(t=this.downloader.rawDataUris[t]),s.src=t}}loadTextureAtlas(t,e=()=>{},i=()=>{},s){let r=t.lastIndexOf("/"),n=r>=0?t.substring(0,r+1):"";t=this.start(t),this.downloader.downloadText(t,(r=>{try{let a=new Jt(r),o=a.pages.length,h=!1;for(let r of a.pages)this.loadTexture(s?s[r.name]:n+r.name,((i,s)=>{h||(r.setTexture(s),0==--o&&this.success(e,t,a))}),((e,s)=>{h||this.error(i,t,`Couldn't load texture atlas ${t} page image: ${e}`),h=!0}))}catch(e){this.error(i,t,`Couldn't parse texture atlas ${t}: ${e.message}`)}}),((e,s)=>{this.error(i,t,`Couldn't load texture atlas ${t}: status ${e}, ${s}`)}))}get(t){return this.assets[this.pathPrefix+t]}require(t){t=this.pathPrefix+t;let e=this.assets[t];if(e)return e;let i=this.errors[t];throw Error("Asset not found: "+t+(i?"\n"+i:""))}remove(t){t=this.pathPrefix+t;let e=this.assets[t];return e.dispose&&e.dispose(),delete this.assets[t],e}removeAll(){for(let t in this.assets){let e=this.assets[t];e.dispose&&e.dispose()}this.assets={}}isLoadingComplete(){return 0==this.toLoad}getToLoad(){return this.toLoad}getLoaded(){return this.loaded}dispose(){this.removeAll()}hasErrors(){return Object.keys(this.errors).length>0}getErrors(){return this.errors}},de=class{callbacks={};rawDataUris={};dataUriToString(t){if(!t.startsWith("data:"))throw new Error("Not a data URI.");let e=t.indexOf("base64,");return-1!=e?(e+=7,atob(t.substr(e))):t.substr(t.indexOf(",")+1)}base64ToUint8Array(t){for(var e=window.atob(t),i=e.length,s=new Uint8Array(i),r=0;r<i;r++)s[r]=e.charCodeAt(r);return s}dataUriToUint8Array(t){if(!t.startsWith("data:"))throw new Error("Not a data URI.");let e=t.indexOf("base64,");if(-1==e)throw new Error("Not a binary data URI.");return e+=7,this.base64ToUint8Array(t.substr(e))}downloadText(t,e,i){if(this.start(t,e,i))return;if(this.rawDataUris[t]){try{let e=this.rawDataUris[t];this.finish(t,200,this.dataUriToString(e))}catch(e){this.finish(t,400,JSON.stringify(e))}return}let s=new XMLHttpRequest;s.overrideMimeType("text/html"),s.open("GET",t,!0);let r=()=>{this.finish(t,s.status,s.responseText)};s.onload=r,s.onerror=r,s.send()}downloadJson(t,e,i){this.downloadText(t,(t=>{e(JSON.parse(t))}),i)}downloadBinary(t,e,i){if(this.start(t,e,i))return;if(this.rawDataUris[t]){try{let e=this.rawDataUris[t];this.finish(t,200,this.dataUriToUint8Array(e))}catch(e){this.finish(t,400,JSON.stringify(e))}return}let s=new XMLHttpRequest;s.open("GET",t,!0),s.responseType="arraybuffer";let r=()=>{this.finish(t,s.status,s.response)};s.onload=()=>{200==s.status||0==s.status?this.finish(t,200,new Uint8Array(s.response)):r()},s.onerror=r,s.send()}start(t,e,i){let s=this.callbacks[t];try{if(s)return!0;this.callbacks[t]=s=[]}finally{s.push(e,i)}}finish(t,e,i){let s=this.callbacks[t];delete this.callbacks[t];let r=200==e||0==e?[i]:[e,i];for(let t=r.length-1,e=s.length;t<e;t+=2)s[t].apply(null,r)}},fe=class{data;intValue=0;floatValue=0;stringValue=null;time=0;volume=0;balance=0;constructor(t,e){if(!e)throw new Error("data cannot be null.");this.time=t,this.data=e}},pe=class{name;intValue=0;floatValue=0;stringValue=null;audioPath=null;volume=0;balance=0;constructor(t){this.name=t}},me=class{data;bones;target;bendDirection=0;compress=!1;stretch=!1;mix=1;softness=0;active=!1;constructor(t,e){if(!t)throw new Error("data cannot be null.");if(!e)throw new Error("skeleton cannot be null.");this.data=t,this.mix=t.mix,this.softness=t.softness,this.bendDirection=t.bendDirection,this.compress=t.compress,this.stretch=t.stretch,this.bones=new Array;for(let i=0;i<t.bones.length;i++){let s=e.findBone(t.bones[i].name);if(!s)throw new Error(`Couldn't find bone ${t.bones[i].name}`);this.bones.push(s)}let i=e.findBone(t.target.name);if(!i)throw new Error(`Couldn't find bone ${t.target.name}`);this.target=i}isActive(){return this.active}update(){if(0==this.mix)return;let t=this.target,e=this.bones;switch(e.length){case 1:this.apply1(e[0],t.worldX,t.worldY,this.compress,this.stretch,this.data.uniform,this.mix);break;case 2:this.apply2(e[0],e[1],t.worldX,t.worldY,this.bendDirection,this.stretch,this.data.uniform,this.softness,this.mix)}}apply1(t,e,i,s,r,n,a){let o=t.parent;if(!o)throw new Error("IK bone must have parent.");let h=o.a,l=o.b,c=o.c,d=o.d,f=-t.ashearX-t.arotation,p=0,m=0;switch(t.data.transformMode){case 1:p=(e-t.worldX)*u.signum(t.skeleton.scaleX),m=(i-t.worldY)*u.signum(t.skeleton.scaleY);break;case 2:let s=Math.abs(h*d-l*c)/Math.max(1e-4,h*h+c*c),r=h/t.skeleton.scaleX,n=c/t.skeleton.scaleY;l=-n*s*t.skeleton.scaleX,d=r*s*t.skeleton.scaleY,f+=Math.atan2(n,r)*u.radDeg;default:let a=e-o.worldX,g=i-o.worldY,x=h*d-l*c;Math.abs(x)<=1e-4?(p=0,m=0):(p=(a*d-g*l)/x-t.ax,m=(g*h-a*c)/x-t.ay)}f+=Math.atan2(m,p)*u.radDeg,t.ascaleX<0&&(f+=180),f>180?f-=360:f<-180&&(f+=360);let g=t.ascaleX,x=t.ascaleY;if(s||r){switch(t.data.transformMode){case 3:case 4:p=e-t.worldX,m=i-t.worldY}let o=t.data.length*g,h=Math.sqrt(p*p+m*m);if(s&&h<o||r&&h>o&&o>1e-4){let t=(h/o-1)*a+1;g*=t,n&&(x*=t)}}t.updateWorldTransformWith(t.ax,t.ay,t.arotation+f*a,g,x,t.ashearX,t.ashearY)}apply2(t,e,i,s,r,n,a,o,h){let l=t.ax,c=t.ay,d=t.ascaleX,f=t.ascaleY,p=d,m=f,g=e.ascaleX,x=0,w=0,v=0;d<0?(d=-d,x=180,v=-1):(x=0,v=1),f<0&&(f=-f,v=-v),g<0?(g=-g,w=180):w=0;let y=e.ax,b=0,A=0,S=0,M=t.a,I=t.b,T=t.c,k=t.d,E=Math.abs(d-f)<=1e-4;!E||n?(b=0,A=M*y+t.worldX,S=T*y+t.worldY):(b=e.ay,A=M*y+I*b+t.worldX,S=T*y+k*b+t.worldY);let C=t.parent;if(!C)throw new Error("IK parent must itself have a parent.");M=C.a,I=C.b,T=C.c,k=C.d;let R=M*k-I*T,Y=A-C.worldX,F=S-C.worldY;R=Math.abs(R)<=1e-4?0:1/R;let X,P,L=(Y*k-F*I)*R-l,D=(F*M-Y*T)*R-c,B=Math.sqrt(L*L+D*D),O=e.data.length*g;if(B<1e-4)return this.apply1(t,i,s,!1,n,!1,h),void e.updateWorldTransformWith(y,b,0,e.ascaleX,e.ascaleY,e.ashearX,e.ashearY);Y=i-C.worldX,F=s-C.worldY;let V=(Y*k-F*I)*R-l,z=(F*M-Y*T)*R-c,N=V*V+z*z;if(0!=o){o*=d*(g+1)*.5;let t=Math.sqrt(N),e=t-B-O*d+o;if(e>0){let i=Math.min(1,e/(2*o))-1;i=(e-o*(1-i*i))/t,V-=i*V,z-=i*z,N=V*V+z*z}}t:if(E){O*=d;let t=(N-B*B-O*O)/(2*B*O);t<-1?(t=-1,P=Math.PI*r):t>1?(t=1,P=0,n&&(M=(Math.sqrt(N)/(B+O)-1)*h+1,p*=M,a&&(m*=M))):P=Math.acos(t)*r,M=B+O*t,I=O*Math.sin(P),X=Math.atan2(z*M-V*I,V*M+z*I)}else{M=d*O,I=f*O;let t=M*M,e=I*I,i=Math.atan2(z,V);T=e*B*B+t*N-t*e;let s=-2*e*B,n=e-t;if(k=s*s-4*n*T,k>=0){let t=Math.sqrt(k);s<0&&(t=-t),t=.5*-(s+t);let e=t/n,a=T/t,o=Math.abs(e)<Math.abs(a)?e:a;if(o*o<=N){F=Math.sqrt(N-o*o)*r,X=i-Math.atan2(F,o),P=Math.atan2(F/f,(o-B)/d);break t}}let a=u.PI,o=B-M,h=o*o,l=0,c=0,p=B+M,m=p*p,g=0;T=-M*B/(t-e),T>=-1&&T<=1&&(T=Math.acos(T),Y=M*Math.cos(T)+B,F=I*Math.sin(T),k=Y*Y+F*F,k<h&&(a=T,h=k,o=Y,l=F),k>m&&(c=T,m=k,p=Y,g=F)),N<=.5*(h+m)?(X=i-Math.atan2(l*r,o),P=a*r):(X=i-Math.atan2(g*r,p),P=c*r)}let _=Math.atan2(b,y)*v,U=t.arotation;X=(X-_)*u.radDeg+x-U,X>180?X-=360:X<-180&&(X+=360),t.updateWorldTransformWith(l,c,U+X*h,p,m,0,0),U=e.arotation,P=((P+_)*u.radDeg-e.ashearX)*v+w-U,P>180?P-=360:P<-180&&(P+=360),e.updateWorldTransformWith(y,b,U+P*h,e.ascaleX,e.ascaleY,e.ashearX,e.ashearY)}},ge=class extends ce{bones=new Array;_target=null;set target(t){this._target=t}get target(){if(this._target)return this._target;throw new Error("BoneData not set.")}bendDirection=1;compress=!1;stretch=!1;uniform=!1;mix=1;softness=0;constructor(t){super(t,0,!1)}},xe=class extends ce{bones=new Array;_target=null;set target(t){this._target=t}get target(){if(this._target)return this._target;throw new Error("SlotData not set.")}positionMode=we.Fixed;spacingMode=ve.Fixed;rotateMode=ye.Chain;offsetRotation=0;position=0;spacing=0;mixRotate=0;mixX=0;mixY=0;constructor(t){super(t,0,!1)}},we=(t=>(t[t.Fixed=0]="Fixed",t[t.Percent=1]="Percent",t))(we||{}),ve=(t=>(t[t.Length=0]="Length",t[t.Fixed=1]="Fixed",t[t.Percent=2]="Percent",t[t.Proportional=3]="Proportional",t))(ve||{}),ye=(t=>(t[t.Tangent=0]="Tangent",t[t.Chain=1]="Chain",t[t.ChainScale=2]="ChainScale",t))(ye||{}),be=class{data;bones;target;position=0;spacing=0;mixRotate=0;mixX=0;mixY=0;spaces=new Array;positions=new Array;world=new Array;curves=new Array;lengths=new Array;segments=new Array;active=!1;constructor(t,e){if(!t)throw new Error("data cannot be null.");if(!e)throw new Error("skeleton cannot be null.");this.data=t,this.bones=new Array;for(let i=0,s=t.bones.length;i<s;i++){let s=e.findBone(t.bones[i].name);if(!s)throw new Error(`Couldn't find bone ${t.bones[i].name}.`);this.bones.push(s)}let i=e.findSlot(t.target.name);if(!i)throw new Error(`Couldn't find target bone ${t.target.name}`);this.target=i,this.position=t.position,this.spacing=t.spacing,this.mixRotate=t.mixRotate,this.mixX=t.mixX,this.mixY=t.mixY}isActive(){return this.active}update(){let t=this.target.getAttachment();if(!(t instanceof ie))return;let e=this.mixRotate,i=this.mixX,s=this.mixY;if(0==e&&0==i&&0==s)return;let r=this.data,n=0==r.rotateMode,a=2==r.rotateMode,o=this.bones,h=o.length,l=n?h:h+1,c=g.setArraySize(this.spaces,l),d=a?this.lengths=g.setArraySize(this.lengths,h):[],f=this.spacing;switch(r.spacingMode){case 2:if(a)for(let t=0,e=l-1;t<e;t++){let e=o[t],i=e.data.length;if(i<be.epsilon)d[t]=0;else{let s=i*e.a,r=i*e.c;d[t]=Math.sqrt(s*s+r*r)}}g.arrayFill(c,1,l,f);break;case 3:let t=0;for(let e=0,i=l-1;e<i;){let i=o[e],s=i.data.length;if(s<be.epsilon)a&&(d[e]=0),c[++e]=f;else{let r=s*i.a,n=s*i.c,o=Math.sqrt(r*r+n*n);a&&(d[e]=o),c[++e]=o,t+=o}}if(t>0){t=l/t*f;for(let e=1;e<l;e++)c[e]*=t}break;default:let e=0==r.spacingMode;for(let t=0,i=l-1;t<i;){let i=o[t],s=i.data.length;if(s<be.epsilon)a&&(d[t]=0),c[++t]=f;else{let r=s*i.a,n=s*i.c,o=Math.sqrt(r*r+n*n);a&&(d[t]=o),c[++t]=(e?s+f:f)*o/s}}}let p=this.computeWorldPositions(t,l,n),m=p[0],x=p[1],w=r.offsetRotation,v=!1;if(0==w)v=1==r.rotateMode;else{v=!1;let t=this.target.bone;w*=t.a*t.d-t.b*t.c>0?u.degRad:-u.degRad}for(let t=0,r=3;t<h;t++,r+=3){let h=o[t];h.worldX+=(m-h.worldX)*i,h.worldY+=(x-h.worldY)*s;let l=p[r],f=p[r+1],g=l-m,y=f-x;if(a){let i=d[t];if(0!=i){let t=(Math.sqrt(g*g+y*y)/i-1)*e+1;h.a*=t,h.c*=t}}if(m=l,x=f,e>0){let i=h.a,s=h.b,a=h.c,o=h.d,l=0,d=0,f=0;if(l=n?p[r-1]:0==c[t+1]?p[r+2]:Math.atan2(y,g),l-=Math.atan2(a,i),v){d=Math.cos(l),f=Math.sin(l);let t=h.data.length;m+=(t*(d*i-f*a)-g)*e,x+=(t*(f*i+d*a)-y)*e}else l+=w;l>u.PI?l-=u.PI2:l<-u.PI&&(l+=u.PI2),l*=e,d=Math.cos(l),f=Math.sin(l),h.a=d*i-f*a,h.b=d*s-f*o,h.c=f*i+d*a,h.d=f*s+d*o}h.updateAppliedTransform()}}computeWorldPositions(t,e,i){let s=this.target,r=this.position,n=this.spaces,a=g.setArraySize(this.positions,3*e+2),o=this.world,h=t.closed,l=t.worldVerticesLength,c=l/6,u=be.NONE;if(!t.constantSpeed){let d=t.lengths;c-=h?1:2;let f,p=d[c];switch(1==this.data.positionMode&&(r*=p),this.data.spacingMode){case 2:f=p;break;case 3:f=p/e;break;default:f=1}o=g.setArraySize(this.world,8);for(let m=0,g=0,x=0;m<e;m++,g+=3){let e=n[m]*f;r+=e;let w=r;if(h)w%=p,w<0&&(w+=p),x=0;else{if(w<0){u!=be.BEFORE&&(u=be.BEFORE,t.computeWorldVertices(s,2,4,o,0,2)),this.addBeforePosition(w,o,0,a,g);continue}if(w>p){u!=be.AFTER&&(u=be.AFTER,t.computeWorldVertices(s,l-6,4,o,0,2)),this.addAfterPosition(w-p,o,0,a,g);continue}}for(;;x++){let t=d[x];if(!(w>t)){if(0==x)w/=t;else{let e=d[x-1];w=(w-e)/(t-e)}break}}x!=u&&(u=x,h&&x==c?(t.computeWorldVertices(s,l-4,4,o,0,2),t.computeWorldVertices(s,0,4,o,4,2)):t.computeWorldVertices(s,6*x+2,8,o,0,2)),this.addCurvePosition(w,o[0],o[1],o[2],o[3],o[4],o[5],o[6],o[7],a,g,i||m>0&&0==e)}return a}h?(l+=2,o=g.setArraySize(this.world,l),t.computeWorldVertices(s,2,l-4,o,0,2),t.computeWorldVertices(s,0,2,o,l-4,2),o[l-2]=o[0],o[l-1]=o[1]):(c--,l-=4,o=g.setArraySize(this.world,l),t.computeWorldVertices(s,2,l,o,0,2));let d,f=g.setArraySize(this.curves,c),p=0,m=o[0],x=o[1],w=0,v=0,y=0,b=0,A=0,S=0,M=0,I=0,T=0,k=0,E=0,C=0,R=0,Y=0;for(let t=0,e=2;t<c;t++,e+=6)w=o[e],v=o[e+1],y=o[e+2],b=o[e+3],A=o[e+4],S=o[e+5],M=.1875*(m-2*w+y),I=.1875*(x-2*v+b),T=.09375*(3*(w-y)-m+A),k=.09375*(3*(v-b)-x+S),E=2*M+T,C=2*I+k,R=.75*(w-m)+M+.16666667*T,Y=.75*(v-x)+I+.16666667*k,p+=Math.sqrt(R*R+Y*Y),R+=E,Y+=C,E+=T,C+=k,p+=Math.sqrt(R*R+Y*Y),R+=E,Y+=C,p+=Math.sqrt(R*R+Y*Y),R+=E+T,Y+=C+k,p+=Math.sqrt(R*R+Y*Y),f[t]=p,m=A,x=S;switch(1==this.data.positionMode&&(r*=p),this.data.spacingMode){case 2:d=p;break;case 3:d=p/e;break;default:d=1}let F=this.segments,X=0;for(let t=0,s=0,c=0,g=0;t<e;t++,s+=3){let e=n[t]*d;r+=e;let P=r;if(h)P%=p,P<0&&(P+=p),c=0;else{if(P<0){this.addBeforePosition(P,o,0,a,s);continue}if(P>p){this.addAfterPosition(P-p,o,l-4,a,s);continue}}for(;;c++){let t=f[c];if(!(P>t)){if(0==c)P/=t;else{let e=f[c-1];P=(P-e)/(t-e)}break}}if(c!=u){u=c;let t=6*c;for(m=o[t],x=o[t+1],w=o[t+2],v=o[t+3],y=o[t+4],b=o[t+5],A=o[t+6],S=o[t+7],M=.03*(m-2*w+y),I=.03*(x-2*v+b),T=.006*(3*(w-y)-m+A),k=.006*(3*(v-b)-x+S),E=2*M+T,C=2*I+k,R=.3*(w-m)+M+.16666667*T,Y=.3*(v-x)+I+.16666667*k,X=Math.sqrt(R*R+Y*Y),F[0]=X,t=1;t<8;t++)R+=E,Y+=C,E+=T,C+=k,X+=Math.sqrt(R*R+Y*Y),F[t]=X;R+=E,Y+=C,X+=Math.sqrt(R*R+Y*Y),F[8]=X,R+=E+T,Y+=C+k,X+=Math.sqrt(R*R+Y*Y),F[9]=X,g=0}for(P*=X;;g++){let t=F[g];if(!(P>t)){if(0==g)P/=t;else{let e=F[g-1];P=g+(P-e)/(t-e)}break}}this.addCurvePosition(.1*P,m,x,w,v,y,b,A,S,a,s,i||t>0&&0==e)}return a}addBeforePosition(t,e,i,s,r){let n=e[i],a=e[i+1],o=e[i+2]-n,h=e[i+3]-a,l=Math.atan2(h,o);s[r]=n+t*Math.cos(l),s[r+1]=a+t*Math.sin(l),s[r+2]=l}addAfterPosition(t,e,i,s,r){let n=e[i+2],a=e[i+3],o=n-e[i],h=a-e[i+1],l=Math.atan2(h,o);s[r]=n+t*Math.cos(l),s[r+1]=a+t*Math.sin(l),s[r+2]=l}addCurvePosition(t,e,i,s,r,n,a,o,h,l,c,u){if(0==t||isNaN(t))return l[c]=e,l[c+1]=i,void(l[c+2]=Math.atan2(r-i,s-e));let d=t*t,f=d*t,p=1-t,m=p*p,g=m*p,x=p*t,w=3*x,v=p*w,y=w*t,b=e*g+s*v+n*y+o*f,A=i*g+r*v+a*y+h*f;l[c]=b,l[c+1]=A,u&&(l[c+2]=t<.001?Math.atan2(r-i,s-e):Math.atan2(A-(i*m+r*x*2+a*d),b-(e*m+s*x*2+n*d)))}},Ae=be;r(Ae,"NONE",-1),r(Ae,"BEFORE",-2),r(Ae,"AFTER",-3),r(Ae,"epsilon",1e-5);var Se=class{data;bone;color;darkColor=null;attachment=null;attachmentState=0;sequenceIndex=-1;deform=new Array;constructor(t,e){if(!t)throw new Error("data cannot be null.");if(!e)throw new Error("bone cannot be null.");this.data=t,this.bone=e,this.color=new l,this.darkColor=t.darkColor?new l:null,this.setToSetupPose()}getSkeleton(){return this.bone.skeleton}getAttachment(){return this.attachment}setAttachment(t){this.attachment!=t&&(t instanceof M&&this.attachment instanceof M&&t.timelineAttachment==this.attachment.timelineAttachment||(this.deform.length=0),this.attachment=t,this.sequenceIndex=-1)}setToSetupPose(){this.color.setFromColor(this.data.color),this.darkColor&&this.darkColor.setFromColor(this.data.darkColor),this.data.attachmentName?(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName))):this.attachment=null}},Me=class{data;bones;target;mixRotate=0;mixX=0;mixY=0;mixScaleX=0;mixScaleY=0;mixShearY=0;temp=new v;active=!1;constructor(t,e){if(!t)throw new Error("data cannot be null.");if(!e)throw new Error("skeleton cannot be null.");this.data=t,this.mixRotate=t.mixRotate,this.mixX=t.mixX,this.mixY=t.mixY,this.mixScaleX=t.mixScaleX,this.mixScaleY=t.mixScaleY,this.mixShearY=t.mixShearY,this.bones=new Array;for(let i=0;i<t.bones.length;i++){let s=e.findBone(t.bones[i].name);if(!s)throw new Error(`Couldn't find bone ${t.bones[i].name}.`);this.bones.push(s)}let i=e.findBone(t.target.name);if(!i)throw new Error(`Couldn't find target bone ${t.target.name}.`);this.target=i}isActive(){return this.active}update(){0==this.mixRotate&&0==this.mixX&&0==this.mixY&&0==this.mixScaleX&&0==this.mixScaleY&&0==this.mixShearY||(this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld())}applyAbsoluteWorld(){let t=this.mixRotate,e=this.mixX,i=this.mixY,s=this.mixScaleX,r=this.mixScaleY,n=this.mixShearY,a=0!=e||0!=i,o=this.target,h=o.a,l=o.b,c=o.c,d=o.d,f=h*d-l*c>0?u.degRad:-u.degRad,p=this.data.offsetRotation*f,m=this.data.offsetShearY*f,g=this.bones;for(let f=0,x=g.length;f<x;f++){let x=g[f];if(0!=t){let e=x.a,i=x.b,s=x.c,r=x.d,n=Math.atan2(c,h)-Math.atan2(s,e)+p;n>u.PI?n-=u.PI2:n<-u.PI&&(n+=u.PI2),n*=t;let a=Math.cos(n),o=Math.sin(n);x.a=a*e-o*s,x.b=a*i-o*r,x.c=o*e+a*s,x.d=o*i+a*r}if(a){let t=this.temp;o.localToWorld(t.set(this.data.offsetX,this.data.offsetY)),x.worldX+=(t.x-x.worldX)*e,x.worldY+=(t.y-x.worldY)*i}if(0!=s){let t=Math.sqrt(x.a*x.a+x.c*x.c);0!=t&&(t=(t+(Math.sqrt(h*h+c*c)-t+this.data.offsetScaleX)*s)/t),x.a*=t,x.c*=t}if(0!=r){let t=Math.sqrt(x.b*x.b+x.d*x.d);0!=t&&(t=(t+(Math.sqrt(l*l+d*d)-t+this.data.offsetScaleY)*r)/t),x.b*=t,x.d*=t}if(n>0){let t=x.b,e=x.d,i=Math.atan2(e,t),s=Math.atan2(d,l)-Math.atan2(c,h)-(i-Math.atan2(x.c,x.a));s>u.PI?s-=u.PI2:s<-u.PI&&(s+=u.PI2),s=i+(s+m)*n;let r=Math.sqrt(t*t+e*e);x.b=Math.cos(s)*r,x.d=Math.sin(s)*r}x.updateAppliedTransform()}}applyRelativeWorld(){let t=this.mixRotate,e=this.mixX,i=this.mixY,s=this.mixScaleX,r=this.mixScaleY,n=this.mixShearY,a=0!=e||0!=i,o=this.target,h=o.a,l=o.b,c=o.c,d=o.d,f=h*d-l*c>0?u.degRad:-u.degRad,p=this.data.offsetRotation*f,m=this.data.offsetShearY*f,g=this.bones;for(let f=0,x=g.length;f<x;f++){let x=g[f];if(0!=t){let e=x.a,i=x.b,s=x.c,r=x.d,n=Math.atan2(c,h)+p;n>u.PI?n-=u.PI2:n<-u.PI&&(n+=u.PI2),n*=t;let a=Math.cos(n),o=Math.sin(n);x.a=a*e-o*s,x.b=a*i-o*r,x.c=o*e+a*s,x.d=o*i+a*r}if(a){let t=this.temp;o.localToWorld(t.set(this.data.offsetX,this.data.offsetY)),x.worldX+=t.x*e,x.worldY+=t.y*i}if(0!=s){let t=(Math.sqrt(h*h+c*c)-1+this.data.offsetScaleX)*s+1;x.a*=t,x.c*=t}if(0!=r){let t=(Math.sqrt(l*l+d*d)-1+this.data.offsetScaleY)*r+1;x.b*=t,x.d*=t}if(n>0){let t=Math.atan2(d,l)-Math.atan2(c,h);t>u.PI?t-=u.PI2:t<-u.PI&&(t+=u.PI2);let e=x.b,i=x.d;t=Math.atan2(i,e)+(t-u.PI/2+m)*n;let s=Math.sqrt(e*e+i*i);x.b=Math.cos(t)*s,x.d=Math.sin(t)*s}x.updateAppliedTransform()}}applyAbsoluteLocal(){let t=this.mixRotate,e=this.mixX,i=this.mixY,s=this.mixScaleX,r=this.mixScaleY,n=this.mixShearY,a=this.target,o=this.bones;for(let h=0,l=o.length;h<l;h++){let l=o[h],c=l.arotation;if(0!=t){let e=a.arotation-c+this.data.offsetRotation;e-=360*(16384-(16384.499999999996-e/360|0)),c+=e*t}let u=l.ax,d=l.ay;u+=(a.ax-u+this.data.offsetX)*e,d+=(a.ay-d+this.data.offsetY)*i;let f=l.ascaleX,p=l.ascaleY;0!=s&&0!=f&&(f=(f+(a.ascaleX-f+this.data.offsetScaleX)*s)/f),0!=r&&0!=p&&(p=(p+(a.ascaleY-p+this.data.offsetScaleY)*r)/p);let m=l.ashearY;if(0!=n){let t=a.ashearY-m+this.data.offsetShearY;t-=360*(16384-(16384.499999999996-t/360|0)),m+=t*n}l.updateWorldTransformWith(u,d,c,f,p,l.ashearX,m)}}applyRelativeLocal(){let t=this.mixRotate,e=this.mixX,i=this.mixY,s=this.mixScaleX,r=this.mixScaleY,n=this.mixShearY,a=this.target,o=this.bones;for(let h=0,l=o.length;h<l;h++){let l=o[h],c=l.arotation+(a.arotation+this.data.offsetRotation)*t,u=l.ax+(a.ax+this.data.offsetX)*e,d=l.ay+(a.ay+this.data.offsetY)*i,f=l.ascaleX*((a.ascaleX-1+this.data.offsetScaleX)*s+1),p=l.ascaleY*((a.ascaleY-1+this.data.offsetScaleY)*r+1),m=l.ashearY+(a.ashearY+this.data.offsetShearY)*n;l.updateWorldTransformWith(u,d,c,f,p,l.ashearX,m)}}},Ie=class{data;bones;slots;drawOrder;ikConstraints;transformConstraints;pathConstraints;_updateCache=new Array;skin=null;color;scaleX=1;_scaleY=1;get scaleY(){return Ie.yDown?-this._scaleY:this._scaleY}set scaleY(t){this._scaleY=t}x=0;y=0;constructor(t){if(!t)throw new Error("data cannot be null.");this.data=t,this.bones=new Array;for(let e=0;e<t.bones.length;e++){let i,s=t.bones[e];if(s.parent){let t=this.bones[s.parent.index];i=new le(s,this,t),t.children.push(i)}else i=new le(s,this,null);this.bones.push(i)}this.slots=new Array,this.drawOrder=new Array;for(let e=0;e<t.slots.length;e++){let i=t.slots[e],s=this.bones[i.boneData.index],r=new Se(i,s);this.slots.push(r),this.drawOrder.push(r)}this.ikConstraints=new Array;for(let e=0;e<t.ikConstraints.length;e++){let i=t.ikConstraints[e];this.ikConstraints.push(new me(i,this))}this.transformConstraints=new Array;for(let e=0;e<t.transformConstraints.length;e++){let i=t.transformConstraints[e];this.transformConstraints.push(new Me(i,this))}this.pathConstraints=new Array;for(let e=0;e<t.pathConstraints.length;e++){let i=t.pathConstraints[e];this.pathConstraints.push(new Ae(i,this))}this.color=new l(1,1,1,1),this.updateCache()}updateCache(){this._updateCache.length=0;let t=this.bones;for(let e=0,i=t.length;e<i;e++){let i=t[e];i.sorted=i.data.skinRequired,i.active=!i.sorted}if(this.skin){let t=this.skin.bones;for(let e=0,i=this.skin.bones.length;e<i;e++){let i=this.bones[t[e].index];do{i.sorted=!1,i.active=!0,i=i.parent}while(i)}}let e=this.ikConstraints,i=this.transformConstraints,s=this.pathConstraints,r=e.length,n=i.length,a=s.length,o=r+n+a;t:for(let t=0;t<o;t++){for(let i=0;i<r;i++){let s=e[i];if(s.data.order==t){this.sortIkConstraint(s);continue t}}for(let e=0;e<n;e++){let s=i[e];if(s.data.order==t){this.sortTransformConstraint(s);continue t}}for(let e=0;e<a;e++){let i=s[e];if(i.data.order==t){this.sortPathConstraint(i);continue t}}}for(let e=0,i=t.length;e<i;e++)this.sortBone(t[e])}sortIkConstraint(t){if(t.active=t.target.isActive()&&(!t.data.skinRequired||this.skin&&g.contains(this.skin.constraints,t.data,!0)),!t.active)return;let e=t.target;this.sortBone(e);let i=t.bones,s=i[0];if(this.sortBone(s),1==i.length)this._updateCache.push(t),this.sortReset(s.children);else{let e=i[i.length-1];this.sortBone(e),this._updateCache.push(t),this.sortReset(s.children),e.sorted=!0}}sortPathConstraint(t){if(t.active=t.target.bone.isActive()&&(!t.data.skinRequired||this.skin&&g.contains(this.skin.constraints,t.data,!0)),!t.active)return;let e=t.target,i=e.data.index,s=e.bone;this.skin&&this.sortPathConstraintAttachment(this.skin,i,s),this.data.defaultSkin&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,i,s);for(let t=0,e=this.data.skins.length;t<e;t++)this.sortPathConstraintAttachment(this.data.skins[t],i,s);let r=e.getAttachment();r instanceof ie&&this.sortPathConstraintAttachmentWith(r,s);let n=t.bones,a=n.length;for(let t=0;t<a;t++)this.sortBone(n[t]);this._updateCache.push(t);for(let t=0;t<a;t++)this.sortReset(n[t].children);for(let t=0;t<a;t++)n[t].sorted=!0}sortTransformConstraint(t){if(t.active=t.target.isActive()&&(!t.data.skinRequired||this.skin&&g.contains(this.skin.constraints,t.data,!0)),!t.active)return;this.sortBone(t.target);let e=t.bones,i=e.length;if(t.data.local)for(let t=0;t<i;t++){let i=e[t];this.sortBone(i.parent),this.sortBone(i)}else for(let t=0;t<i;t++)this.sortBone(e[t]);this._updateCache.push(t);for(let t=0;t<i;t++)this.sortReset(e[t].children);for(let t=0;t<i;t++)e[t].sorted=!0}sortPathConstraintAttachment(t,e,i){let s=t.attachments[e];if(s)for(let t in s)this.sortPathConstraintAttachmentWith(s[t],i)}sortPathConstraintAttachmentWith(t,e){if(!(t instanceof ie))return;let i=t.bones;if(i){let t=this.bones;for(let e=0,s=i.length;e<s;){let s=i[e++];for(s+=e;e<s;)this.sortBone(t[i[e++]])}}else this.sortBone(e)}sortBone(t){if(!t)return;if(t.sorted)return;let e=t.parent;e&&this.sortBone(e),t.sorted=!0,this._updateCache.push(t)}sortReset(t){for(let e=0,i=t.length;e<i;e++){let i=t[e];i.active&&(i.sorted&&this.sortReset(i.children),i.sorted=!1)}}updateWorldTransform(){let t=this.bones;for(let e=0,i=t.length;e<i;e++){let i=t[e];i.ax=i.x,i.ay=i.y,i.arotation=i.rotation,i.ascaleX=i.scaleX,i.ascaleY=i.scaleY,i.ashearX=i.shearX,i.ashearY=i.shearY}let e=this._updateCache;for(let t=0,i=e.length;t<i;t++)e[t].update()}updateWorldTransformWith(t){let e=this.getRootBone();if(!e)throw new Error("Root bone must not be null.");let i=t.a,s=t.b,r=t.c,n=t.d;e.worldX=i*this.x+s*this.y+t.worldX,e.worldY=r*this.x+n*this.y+t.worldY;let a=e.rotation+90+e.shearY,o=u.cosDeg(e.rotation+e.shearX)*e.scaleX,h=u.cosDeg(a)*e.scaleY,l=u.sinDeg(e.rotation+e.shearX)*e.scaleX,c=u.sinDeg(a)*e.scaleY;e.a=(i*o+s*l)*this.scaleX,e.b=(i*h+s*c)*this.scaleX,e.c=(r*o+n*l)*this.scaleY,e.d=(r*h+n*c)*this.scaleY;let d=this._updateCache;for(let t=0,i=d.length;t<i;t++){let i=d[t];i!=e&&i.update()}}setToSetupPose(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()}setBonesToSetupPose(){let t=this.bones;for(let e=0,i=t.length;e<i;e++)t[e].setToSetupPose();let e=this.ikConstraints;for(let t=0,i=e.length;t<i;t++){let i=e[t];i.mix=i.data.mix,i.softness=i.data.softness,i.bendDirection=i.data.bendDirection,i.compress=i.data.compress,i.stretch=i.data.stretch}let i=this.transformConstraints;for(let t=0,e=i.length;t<e;t++){let e=i[t],s=e.data;e.mixRotate=s.mixRotate,e.mixX=s.mixX,e.mixY=s.mixY,e.mixScaleX=s.mixScaleX,e.mixScaleY=s.mixScaleY,e.mixShearY=s.mixShearY}let s=this.pathConstraints;for(let t=0,e=s.length;t<e;t++){let e=s[t],i=e.data;e.position=i.position,e.spacing=i.spacing,e.mixRotate=i.mixRotate,e.mixX=i.mixX,e.mixY=i.mixY}}setSlotsToSetupPose(){let t=this.slots;g.arrayCopy(t,0,this.drawOrder,0,t.length);for(let e=0,i=t.length;e<i;e++)t[e].setToSetupPose()}getRootBone(){return 0==this.bones.length?null:this.bones[0]}findBone(t){if(!t)throw new Error("boneName cannot be null.");let e=this.bones;for(let i=0,s=e.length;i<s;i++){let s=e[i];if(s.data.name==t)return s}return null}findSlot(t){if(!t)throw new Error("slotName cannot be null.");let e=this.slots;for(let i=0,s=e.length;i<s;i++){let s=e[i];if(s.data.name==t)return s}return null}setSkinByName(t){let e=this.data.findSkin(t);if(!e)throw new Error("Skin not found: "+t);this.setSkin(e)}setSkin(t){if(t!=this.skin){if(t)if(this.skin)t.attachAll(this,this.skin);else{let e=this.slots;for(let i=0,s=e.length;i<s;i++){let s=e[i],r=s.data.attachmentName;if(r){let e=t.getAttachment(i,r);e&&s.setAttachment(e)}}}this.skin=t,this.updateCache()}}getAttachmentByName(t,e){let i=this.data.findSlot(t);if(!i)throw new Error(`Can't find slot with name ${t}`);return this.getAttachment(i.index,e)}getAttachment(t,e){if(!e)throw new Error("attachmentName cannot be null.");if(this.skin){let i=this.skin.getAttachment(t,e);if(i)return i}return this.data.defaultSkin?this.data.defaultSkin.getAttachment(t,e):null}setAttachment(t,e){if(!t)throw new Error("slotName cannot be null.");let i=this.slots;for(let s=0,r=i.length;s<r;s++){let r=i[s];if(r.data.name==t){let i=null;if(e&&(i=this.getAttachment(s,e),!i))throw new Error("Attachment not found: "+e+", for slot: "+t);return void r.setAttachment(i)}}throw new Error("Slot not found: "+t)}findIkConstraint(t){if(!t)throw new Error("constraintName cannot be null.");let e=this.ikConstraints;for(let i=0,s=e.length;i<s;i++){let s=e[i];if(s.data.name==t)return s}return null}findTransformConstraint(t){if(!t)throw new Error("constraintName cannot be null.");let e=this.transformConstraints;for(let i=0,s=e.length;i<s;i++){let s=e[i];if(s.data.name==t)return s}return null}findPathConstraint(t){if(!t)throw new Error("constraintName cannot be null.");let e=this.pathConstraints;for(let i=0,s=e.length;i<s;i++){let s=e[i];if(s.data.name==t)return s}return null}getBoundsRect(){let t=new v,e=new v;return this.getBounds(t,e),{x:t.x,y:t.y,width:e.x,height:e.y}}getBounds(t,e,i=new Array(2)){if(!t)throw new Error("offset cannot be null.");if(!e)throw new Error("size cannot be null.");let s=this.drawOrder,r=Number.POSITIVE_INFINITY,n=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY,o=Number.NEGATIVE_INFINITY;for(let t=0,e=s.length;t<e;t++){let e=s[t];if(!e.bone.active)continue;let h=0,l=null,c=e.getAttachment();if(c instanceof ne)h=8,l=g.setArraySize(i,h,0),c.computeWorldVertices(e,l,0,2);else if(c instanceof ee){let t=c;h=t.worldVerticesLength,l=g.setArraySize(i,h,0),t.computeWorldVertices(e,0,h,l,0,2)}if(l)for(let t=0,e=l.length;t<e;t+=2){let e=l[t],i=l[t+1];r=Math.min(r,e),n=Math.min(n,i),a=Math.max(a,e),o=Math.max(o,i)}}t.set(r,n),e.set(a-r,o-n)}},Te=Ie;r(Te,"yDown",!1);var ke=class{name=null;bones=new Array;slots=new Array;skins=new Array;defaultSkin=null;events=new Array;animations=new Array;ikConstraints=new Array;transformConstraints=new Array;pathConstraints=new Array;x=0;y=0;width=0;height=0;version=null;hash=null;fps=0;imagesPath=null;audioPath=null;findBone(t){if(!t)throw new Error("boneName cannot be null.");let e=this.bones;for(let i=0,s=e.length;i<s;i++){let s=e[i];if(s.name==t)return s}return null}findSlot(t){if(!t)throw new Error("slotName cannot be null.");let e=this.slots;for(let i=0,s=e.length;i<s;i++){let s=e[i];if(s.name==t)return s}return null}findSkin(t){if(!t)throw new Error("skinName cannot be null.");let e=this.skins;for(let i=0,s=e.length;i<s;i++){let s=e[i];if(s.name==t)return s}return null}findEvent(t){if(!t)throw new Error("eventDataName cannot be null.");let e=this.events;for(let i=0,s=e.length;i<s;i++){let s=e[i];if(s.name==t)return s}return null}findAnimation(t){if(!t)throw new Error("animationName cannot be null.");let e=this.animations;for(let i=0,s=e.length;i<s;i++){let s=e[i];if(s.name==t)return s}return null}findIkConstraint(t){if(!t)throw new Error("constraintName cannot be null.");let e=this.ikConstraints;for(let i=0,s=e.length;i<s;i++){let s=e[i];if(s.name==t)return s}return null}findTransformConstraint(t){if(!t)throw new Error("constraintName cannot be null.");let e=this.transformConstraints;for(let i=0,s=e.length;i<s;i++){let s=e[i];if(s.name==t)return s}return null}findPathConstraint(t){if(!t)throw new Error("constraintName cannot be null.");let e=this.pathConstraints;for(let i=0,s=e.length;i<s;i++){let s=e[i];if(s.name==t)return s}return null}},Ee=class{constructor(t=0,e,i){this.slotIndex=t,this.name=e,this.attachment=i}},Ce=class{name;attachments=new Array;bones=Array();constraints=new Array;constructor(t){if(!t)throw new Error("name cannot be null.");this.name=t}setAttachment(t,e,i){if(!i)throw new Error("attachment cannot be null.");let s=this.attachments;t>=s.length&&(s.length=t+1),s[t]||(s[t]={}),s[t][e]=i}addSkin(t){for(let e=0;e<t.bones.length;e++){let i=t.bones[e],s=!1;for(let t=0;t<this.bones.length;t++)if(this.bones[t]==i){s=!0;break}s||this.bones.push(i)}for(let e=0;e<t.constraints.length;e++){let i=t.constraints[e],s=!1;for(let t=0;t<this.constraints.length;t++)if(this.constraints[t]==i){s=!0;break}s||this.constraints.push(i)}let e=t.getAttachments();for(let t=0;t<e.length;t++){var i=e[t];this.setAttachment(i.slotIndex,i.name,i.attachment)}}copySkin(t){for(let e=0;e<t.bones.length;e++){let i=t.bones[e],s=!1;for(let t=0;t<this.bones.length;t++)if(this.bones[t]==i){s=!0;break}s||this.bones.push(i)}for(let e=0;e<t.constraints.length;e++){let i=t.constraints[e],s=!1;for(let t=0;t<this.constraints.length;t++)if(this.constraints[t]==i){s=!0;break}s||this.constraints.push(i)}let e=t.getAttachments();for(let t=0;t<e.length;t++){var i=e[t];i.attachment&&(i.attachment instanceof ee?(i.attachment=i.attachment.newLinkedMesh(),this.setAttachment(i.slotIndex,i.name,i.attachment)):(i.attachment=i.attachment.copy(),this.setAttachment(i.slotIndex,i.name,i.attachment)))}}getAttachment(t,e){let i=this.attachments[t];return i?i[e]:null}removeAttachment(t,e){let i=this.attachments[t];i&&delete i[e]}getAttachments(){let t=new Array;for(var e=0;e<this.attachments.length;e++){let i=this.attachments[e];if(i)for(let s in i){let r=i[s];r&&t.push(new Ee(e,s,r))}}return t}getAttachmentsForSlot(t,e){let i=this.attachments[t];if(i)for(let s in i){let r=i[s];r&&e.push(new Ee(t,s,r))}}clear(){this.attachments.length=0,this.bones.length=0,this.constraints.length=0}attachAll(t,e){let i=0;for(let s=0;s<t.slots.length;s++){let r=t.slots[s],n=r.getAttachment();if(n&&i<e.attachments.length){let t=e.attachments[i];for(let e in t){if(n==t[e]){let t=this.getAttachment(i,e);t&&r.setAttachment(t);break}}}i++}}},Re=class{index=0;name;boneData;color=new l(1,1,1,1);darkColor=null;attachmentName=null;blendMode=Ye.Normal;constructor(t,e,i){if(t<0)throw new Error("index must be >= 0.");if(!e)throw new Error("name cannot be null.");if(!i)throw new Error("boneData cannot be null.");this.index=t,this.name=e,this.boneData=i}},Ye=(t=>(t[t.Normal=0]="Normal",t[t.Additive=1]="Additive",t[t.Multiply=2]="Multiply",t[t.Screen=3]="Screen",t))(Ye||{}),Fe=class extends ce{bones=new Array;_target=null;set target(t){this._target=t}get target(){if(this._target)return this._target;throw new Error("BoneData not set.")}mixRotate=0;mixX=0;mixY=0;mixScaleX=0;mixScaleY=0;mixShearY=0;offsetRotation=0;offsetX=0;offsetY=0;offsetScaleX=0;offsetScaleY=0;offsetShearY=0;relative=!1;local=!1;constructor(t){super(t,0,!1)}},Xe=class{scale=1;attachmentLoader;linkedMeshes=new Array;constructor(t){this.attachmentLoader=t}readSkeletonData(t){let e=this.scale,i=new ke;i.name="";let s=new Pe(t),r=s.readInt32(),n=s.readInt32();i.hash=0==n&&0==r?null:n.toString(16)+r.toString(16),i.version=s.readString(),i.x=s.readFloat(),i.y=s.readFloat(),i.width=s.readFloat(),i.height=s.readFloat();let a=s.readBoolean();a&&(i.fps=s.readFloat(),i.imagesPath=s.readString(),i.audioPath=s.readString());let o=0;o=s.readInt(!0);for(let t=0;t<o;t++){let t=s.readString();if(!t)throw new Error("String in string table must not be null.");s.strings.push(t)}o=s.readInt(!0);for(let t=0;t<o;t++){let r=s.readString();if(!r)throw new Error("Bone name must not be null.");let n=0==t?null:i.bones[s.readInt(!0)],o=new oe(t,r,n);o.rotation=s.readFloat(),o.x=s.readFloat()*e,o.y=s.readFloat()*e,o.scaleX=s.readFloat(),o.scaleY=s.readFloat(),o.shearX=s.readFloat(),o.shearY=s.readFloat(),o.length=s.readFloat()*e,o.transformMode=s.readInt(!0),o.skinRequired=s.readBoolean(),a&&l.rgba8888ToColor(o.color,s.readInt32()),i.bones.push(o)}o=s.readInt(!0);for(let t=0;t<o;t++){let e=s.readString();if(!e)throw new Error("Slot name must not be null.");let r=i.bones[s.readInt(!0)],n=new Re(t,e,r);l.rgba8888ToColor(n.color,s.readInt32());let a=s.readInt32();-1!=a&&l.rgb888ToColor(n.darkColor=new l,a),n.attachmentName=s.readStringRef(),n.blendMode=s.readInt(!0),i.slots.push(n)}o=s.readInt(!0);for(let t,r=0;r<o;r++){let r=s.readString();if(!r)throw new Error("IK constraint data name must not be null.");let n=new ge(r);n.order=s.readInt(!0),n.skinRequired=s.readBoolean(),t=s.readInt(!0);for(let e=0;e<t;e++)n.bones.push(i.bones[s.readInt(!0)]);n.target=i.bones[s.readInt(!0)],n.mix=s.readFloat(),n.softness=s.readFloat()*e,n.bendDirection=s.readByte(),n.compress=s.readBoolean(),n.stretch=s.readBoolean(),n.uniform=s.readBoolean(),i.ikConstraints.push(n)}o=s.readInt(!0);for(let t,r=0;r<o;r++){let r=s.readString();if(!r)throw new Error("Transform constraint data name must not be null.");let n=new Fe(r);n.order=s.readInt(!0),n.skinRequired=s.readBoolean(),t=s.readInt(!0);for(let e=0;e<t;e++)n.bones.push(i.bones[s.readInt(!0)]);n.target=i.bones[s.readInt(!0)],n.local=s.readBoolean(),n.relative=s.readBoolean(),n.offsetRotation=s.readFloat(),n.offsetX=s.readFloat()*e,n.offsetY=s.readFloat()*e,n.offsetScaleX=s.readFloat(),n.offsetScaleY=s.readFloat(),n.offsetShearY=s.readFloat(),n.mixRotate=s.readFloat(),n.mixX=s.readFloat(),n.mixY=s.readFloat(),n.mixScaleX=s.readFloat(),n.mixScaleY=s.readFloat(),n.mixShearY=s.readFloat(),i.transformConstraints.push(n)}o=s.readInt(!0);for(let t,r=0;r<o;r++){let r=s.readString();if(!r)throw new Error("Path constraint data name must not be null.");let n=new xe(r);n.order=s.readInt(!0),n.skinRequired=s.readBoolean(),t=s.readInt(!0);for(let e=0;e<t;e++)n.bones.push(i.bones[s.readInt(!0)]);n.target=i.slots[s.readInt(!0)],n.positionMode=s.readInt(!0),n.spacingMode=s.readInt(!0),n.rotateMode=s.readInt(!0),n.offsetRotation=s.readFloat(),n.position=s.readFloat(),0==n.positionMode&&(n.position*=e),n.spacing=s.readFloat(),0!=n.spacingMode&&1!=n.spacingMode||(n.spacing*=e),n.mixRotate=s.readFloat(),n.mixX=s.readFloat(),n.mixY=s.readFloat(),i.pathConstraints.push(n)}let h=this.readSkin(s,i,!0,a);h&&(i.defaultSkin=h,i.skins.push(h));{let t=i.skins.length;for(g.setArraySize(i.skins,o=t+s.readInt(!0));t<o;t++){let e=this.readSkin(s,i,!1,a);if(!e)throw new Error("readSkin() should not have returned null.");i.skins[t]=e}}o=this.linkedMeshes.length;for(let t=0;t<o;t++){let e=this.linkedMeshes[t],s=e.skin?i.findSkin(e.skin):i.defaultSkin;if(!s)throw new Error("Not skin found for linked mesh.");if(!e.parent)throw new Error("Linked mesh parent must not be null");let r=s.getAttachment(e.slotIndex,e.parent);if(!r)throw new Error(`Parent mesh not found: ${e.parent}`);e.mesh.timelineAttachment=e.inheritTimeline?r:e.mesh,e.mesh.setParentMesh(r),null!=e.mesh.region&&e.mesh.updateRegion()}this.linkedMeshes.length=0,o=s.readInt(!0);for(let t=0;t<o;t++){let t=s.readStringRef();if(!t)throw new Error;let e=new pe(t);e.intValue=s.readInt(!1),e.floatValue=s.readFloat(),e.stringValue=s.readString(),e.audioPath=s.readString(),e.audioPath&&(e.volume=s.readFloat(),e.balance=s.readFloat()),i.events.push(e)}o=s.readInt(!0);for(let t=0;t<o;t++){let t=s.readString();if(!t)throw new Error("Animatio name must not be null.");i.animations.push(this.readAnimation(s,t,i))}return i}readSkin(t,e,i,s){let r=null,n=0;if(i){if(n=t.readInt(!0),0==n)return null;r=new Ce("default")}else{let i=t.readStringRef();if(!i)throw new Error("Skin name must not be null.");r=new Ce(i),r.bones.length=t.readInt(!0);for(let i=0,s=r.bones.length;i<s;i++)r.bones[i]=e.bones[t.readInt(!0)];for(let i=0,s=t.readInt(!0);i<s;i++)r.constraints.push(e.ikConstraints[t.readInt(!0)]);for(let i=0,s=t.readInt(!0);i<s;i++)r.constraints.push(e.transformConstraints[t.readInt(!0)]);for(let i=0,s=t.readInt(!0);i<s;i++)r.constraints.push(e.pathConstraints[t.readInt(!0)]);n=t.readInt(!0)}for(let i=0;i<n;i++){let i=t.readInt(!0);for(let n=0,a=t.readInt(!0);n<a;n++){let n=t.readStringRef();if(!n)throw new Error("Attachment name must not be null");let a=this.readAttachment(t,e,r,i,n,s);a&&r.setAttachment(i,n,a)}}return r}readAttachment(t,e,i,s,r,n){let a=this.scale,o=t.readStringRef();switch(o||(o=r),t.readByte()){case Be.Region:{let e=t.readStringRef(),s=t.readFloat(),r=t.readFloat(),n=t.readFloat(),h=t.readFloat(),c=t.readFloat(),u=t.readFloat(),d=t.readFloat(),f=t.readInt32(),p=this.readSequence(t);e||(e=o);let m=this.attachmentLoader.newRegionAttachment(i,o,e,p);return m?(m.path=e,m.x=r*a,m.y=n*a,m.scaleX=h,m.scaleY=c,m.rotation=s,m.width=u*a,m.height=d*a,l.rgba8888ToColor(m.color,f),m.sequence=p,null==p&&m.updateRegion(),m):null}case Be.BoundingBox:{let e=t.readInt(!0),s=this.readVertices(t,e),r=n?t.readInt32():0,a=this.attachmentLoader.newBoundingBoxAttachment(i,o);return a?(a.worldVerticesLength=e<<1,a.vertices=s.vertices,a.bones=s.bones,n&&l.rgba8888ToColor(a.color,r),a):null}case Be.Mesh:{let e=t.readStringRef(),s=t.readInt32(),r=t.readInt(!0),h=this.readFloatArray(t,r<<1,1),c=this.readShortArray(t),u=this.readVertices(t,r),d=t.readInt(!0),f=this.readSequence(t),p=[],m=0,g=0;n&&(p=this.readShortArray(t),m=t.readFloat(),g=t.readFloat()),e||(e=o);let x=this.attachmentLoader.newMeshAttachment(i,o,e,f);return x?(x.path=e,l.rgba8888ToColor(x.color,s),x.bones=u.bones,x.vertices=u.vertices,x.worldVerticesLength=r<<1,x.triangles=c,x.regionUVs=h,null==f&&x.updateRegion(),x.hullLength=d<<1,x.sequence=f,n&&(x.edges=p,x.width=m*a,x.height=g*a),x):null}case Be.LinkedMesh:{let e=t.readStringRef(),r=t.readInt32(),h=t.readStringRef(),c=t.readStringRef(),u=t.readBoolean(),d=this.readSequence(t),f=0,p=0;n&&(f=t.readFloat(),p=t.readFloat()),e||(e=o);let m=this.attachmentLoader.newMeshAttachment(i,o,e,d);return m?(m.path=e,l.rgba8888ToColor(m.color,r),m.sequence=d,n&&(m.width=f*a,m.height=p*a),this.linkedMeshes.push(new Le(m,h,s,c,u)),m):null}case Be.Path:{let e=t.readBoolean(),s=t.readBoolean(),r=t.readInt(!0),h=this.readVertices(t,r),c=g.newArray(r/3,0);for(let e=0,i=c.length;e<i;e++)c[e]=t.readFloat()*a;let u=n?t.readInt32():0,d=this.attachmentLoader.newPathAttachment(i,o);return d?(d.closed=e,d.constantSpeed=s,d.worldVerticesLength=r<<1,d.vertices=h.vertices,d.bones=h.bones,d.lengths=c,n&&l.rgba8888ToColor(d.color,u),d):null}case Be.Point:{let e=t.readFloat(),s=t.readFloat(),r=t.readFloat(),h=n?t.readInt32():0,c=this.attachmentLoader.newPointAttachment(i,o);return c?(c.x=s*a,c.y=r*a,c.rotation=e,n&&l.rgba8888ToColor(c.color,h),c):null}case Be.Clipping:{let s=t.readInt(!0),r=t.readInt(!0),a=this.readVertices(t,r),h=n?t.readInt32():0,c=this.attachmentLoader.newClippingAttachment(i,o);return c?(c.endSlot=e.slots[s],c.worldVerticesLength=r<<1,c.vertices=a.vertices,c.bones=a.bones,n&&l.rgba8888ToColor(c.color,h),c):null}}return null}readSequence(t){if(!t.readBoolean())return null;let e=new T(t.readInt(!0));return e.start=t.readInt(!0),e.digits=t.readInt(!0),e.setupIndex=t.readInt(!0),e}readVertices(t,e){let i=this.scale,s=e<<1,r=new De;if(!t.readBoolean())return r.vertices=this.readFloatArray(t,s,i),r;let n=new Array,a=new Array;for(let s=0;s<e;s++){let e=t.readInt(!0);a.push(e);for(let s=0;s<e;s++)a.push(t.readInt(!0)),n.push(t.readFloat()*i),n.push(t.readFloat()*i),n.push(t.readFloat())}return r.vertices=g.toFloatArray(n),r.bones=a,r}readFloatArray(t,e,i){let s=new Array(e);if(1==i)for(let i=0;i<e;i++)s[i]=t.readFloat();else for(let r=0;r<e;r++)s[r]=t.readFloat()*i;return s}readShortArray(t){let e=t.readInt(!0),i=new Array(e);for(let s=0;s<e;s++)i[s]=t.readShort();return i}readAnimation(t,e,i){t.readInt(!0);let s=new Array,r=this.scale;new l,new l;for(let e=0,i=t.readInt(!0);e<i;e++){let e=t.readInt(!0);for(let i=0,r=t.readInt(!0);i<r;i++){let i=t.readByte(),r=t.readInt(!0),n=r-1;switch(i){case Qe:{let i=new xt(r,e);for(let e=0;e<r;e++)i.setFrame(e,t.readFloat(),t.readStringRef());s.push(i);break}case $e:{let i=t.readInt(!0),a=new dt(r,i,e),o=t.readFloat(),h=t.readUnsignedByte()/255,l=t.readUnsignedByte()/255,c=t.readUnsignedByte()/255,u=t.readUnsignedByte()/255;for(let e=0,i=0;a.setFrame(e,o,h,l,c,u),e!=n;e++){let s=t.readFloat(),r=t.readUnsignedByte()/255,n=t.readUnsignedByte()/255,d=t.readUnsignedByte()/255,f=t.readUnsignedByte()/255;switch(t.readByte()){case li:a.setStepped(e);break;case ci:ze(t,a,i++,e,0,o,s,h,r,1),ze(t,a,i++,e,1,o,s,l,n,1),ze(t,a,i++,e,2,o,s,c,d,1),ze(t,a,i++,e,3,o,s,u,f,1)}o=s,h=r,l=n,c=d,u=f}s.push(a);break}case ti:{let i=t.readInt(!0),a=new ft(r,i,e),o=t.readFloat(),h=t.readUnsignedByte()/255,l=t.readUnsignedByte()/255,c=t.readUnsignedByte()/255;for(let e=0,i=0;a.setFrame(e,o,h,l,c),e!=n;e++){let s=t.readFloat(),r=t.readUnsignedByte()/255,n=t.readUnsignedByte()/255,u=t.readUnsignedByte()/255;switch(t.readByte()){case li:a.setStepped(e);break;case ci:ze(t,a,i++,e,0,o,s,h,r,1),ze(t,a,i++,e,1,o,s,l,n,1),ze(t,a,i++,e,2,o,s,c,u,1)}o=s,h=r,l=n,c=u}s.push(a);break}case ei:{let i=t.readInt(!0),a=new mt(r,i,e),o=t.readFloat(),h=t.readUnsignedByte()/255,l=t.readUnsignedByte()/255,c=t.readUnsignedByte()/255,u=t.readUnsignedByte()/255,d=t.readUnsignedByte()/255,f=t.readUnsignedByte()/255,p=t.readUnsignedByte()/255;for(let e=0,i=0;a.setFrame(e,o,h,l,c,u,d,f,p),e!=n;e++){let s=t.readFloat(),r=t.readUnsignedByte()/255,n=t.readUnsignedByte()/255,m=t.readUnsignedByte()/255,g=t.readUnsignedByte()/255,x=t.readUnsignedByte()/255,w=t.readUnsignedByte()/255,v=t.readUnsignedByte()/255;switch(t.readByte()){case li:a.setStepped(e);break;case ci:ze(t,a,i++,e,0,o,s,h,r,1),ze(t,a,i++,e,1,o,s,l,n,1),ze(t,a,i++,e,2,o,s,c,m,1),ze(t,a,i++,e,3,o,s,u,g,1),ze(t,a,i++,e,4,o,s,d,x,1),ze(t,a,i++,e,5,o,s,f,w,1),ze(t,a,i++,e,6,o,s,p,v,1)}o=s,h=r,l=n,c=m,u=g,d=x,f=w,p=v}s.push(a);break}case ii:{let i=t.readInt(!0),a=new gt(r,i,e),o=t.readFloat(),h=t.readUnsignedByte()/255,l=t.readUnsignedByte()/255,c=t.readUnsignedByte()/255,u=t.readUnsignedByte()/255,d=t.readUnsignedByte()/255,f=t.readUnsignedByte()/255;for(let e=0,i=0;a.setFrame(e,o,h,l,c,u,d,f),e!=n;e++){let s=t.readFloat(),r=t.readUnsignedByte()/255,n=t.readUnsignedByte()/255,p=t.readUnsignedByte()/255,m=t.readUnsignedByte()/255,g=t.readUnsignedByte()/255,x=t.readUnsignedByte()/255;switch(t.readByte()){case li:a.setStepped(e);break;case ci:ze(t,a,i++,e,0,o,s,h,r,1),ze(t,a,i++,e,1,o,s,l,n,1),ze(t,a,i++,e,2,o,s,c,p,1),ze(t,a,i++,e,3,o,s,u,m,1),ze(t,a,i++,e,4,o,s,d,g,1),ze(t,a,i++,e,5,o,s,f,x,1)}o=s,h=r,l=n,c=p,u=m,d=g,f=x}s.push(a);break}case si:{let i=new pt(r,t.readInt(!0),e),a=t.readFloat(),o=t.readUnsignedByte()/255;for(let e=0,s=0;i.setFrame(e,a,o),e!=n;e++){let r=t.readFloat(),n=t.readUnsignedByte()/255;switch(t.readByte()){case li:i.setStepped(e);break;case ci:ze(t,i,s++,e,0,a,r,o,n,1)}a=r,o=n}s.push(i)}}}}for(let e=0,i=t.readInt(!0);e<i;e++){let e=t.readInt(!0);for(let i=0,n=t.readInt(!0);i<n;i++){let i=t.readByte(),n=t.readInt(!0),a=t.readInt(!0);switch(i){case _e:s.push(Oe(t,new it(n,a,e),1));break;case Ue:s.push(Ve(t,new st(n,a,e),r));break;case We:s.push(Oe(t,new rt(n,a,e),r));break;case qe:s.push(Oe(t,new nt(n,a,e),r));break;case Ge:s.push(Ve(t,new at(n,a,e),1));break;case He:s.push(Oe(t,new ot(n,a,e),1));break;case je:s.push(Oe(t,new ht(n,a,e),1));break;case Ze:s.push(Ve(t,new lt(n,a,e),1));break;case Ke:s.push(Oe(t,new ct(n,a,e),1));break;case Je:s.push(Oe(t,new ut(n,a,e),1))}}}for(let e=0,i=t.readInt(!0);e<i;e++){let e=t.readInt(!0),i=t.readInt(!0),n=i-1,a=new St(i,t.readInt(!0),e),o=t.readFloat(),h=t.readFloat(),l=t.readFloat()*r;for(let e=0,i=0;a.setFrame(e,o,h,l,t.readByte(),t.readBoolean(),t.readBoolean()),e!=n;e++){let s=t.readFloat(),n=t.readFloat(),c=t.readFloat()*r;switch(t.readByte()){case li:a.setStepped(e);break;case ci:ze(t,a,i++,e,0,o,s,h,n,1),ze(t,a,i++,e,1,o,s,l,c,r)}o=s,h=n,l=c}s.push(a)}for(let e=0,i=t.readInt(!0);e<i;e++){let e=t.readInt(!0),i=t.readInt(!0),r=i-1,n=new Mt(i,t.readInt(!0),e),a=t.readFloat(),o=t.readFloat(),h=t.readFloat(),l=t.readFloat(),c=t.readFloat(),u=t.readFloat(),d=t.readFloat();for(let e=0,i=0;n.setFrame(e,a,o,h,l,c,u,d),e!=r;e++){let s=t.readFloat(),r=t.readFloat(),f=t.readFloat(),p=t.readFloat(),m=t.readFloat(),g=t.readFloat(),x=t.readFloat();switch(t.readByte()){case li:n.setStepped(e);break;case ci:ze(t,n,i++,e,0,a,s,o,r,1),ze(t,n,i++,e,1,a,s,h,f,1),ze(t,n,i++,e,2,a,s,l,p,1),ze(t,n,i++,e,3,a,s,c,m,1),ze(t,n,i++,e,4,a,s,u,g,1),ze(t,n,i++,e,5,a,s,d,x,1)}a=s,o=r,h=f,l=p,c=m,u=g,d=x}s.push(n)}for(let e=0,n=t.readInt(!0);e<n;e++){let e=t.readInt(!0),n=i.pathConstraints[e];for(let i=0,a=t.readInt(!0);i<a;i++)switch(t.readByte()){case ai:s.push(Oe(t,new It(t.readInt(!0),t.readInt(!0),e),0==n.positionMode?r:1));break;case oi:s.push(Oe(t,new Tt(t.readInt(!0),t.readInt(!0),e),0==n.spacingMode||1==n.spacingMode?r:1));break;case hi:let i=new kt(t.readInt(!0),t.readInt(!0),e),a=t.readFloat(),o=t.readFloat(),h=t.readFloat(),l=t.readFloat();for(let e=0,s=0,r=i.getFrameCount()-1;i.setFrame(e,a,o,h,l),e!=r;e++){let r=t.readFloat(),n=t.readFloat(),c=t.readFloat(),u=t.readFloat();switch(t.readByte()){case li:i.setStepped(e);break;case ci:ze(t,i,s++,e,0,a,r,o,n,1),ze(t,i,s++,e,1,a,r,h,c,1),ze(t,i,s++,e,2,a,r,l,u,1)}a=r,o=n,h=c,l=u}s.push(i)}}for(let e=0,n=t.readInt(!0);e<n;e++){let e=i.skins[t.readInt(!0)];for(let i=0,n=t.readInt(!0);i<n;i++){let i=t.readInt(!0);for(let n=0,a=t.readInt(!0);n<a;n++){let n=t.readStringRef();if(!n)throw new Error("attachmentName must not be null.");let a=e.getAttachment(i,n),o=t.readByte(),h=t.readInt(!0),l=h-1;switch(o){case ri:{let e=a,n=e.bones,o=e.vertices,c=n?o.length/3*2:o.length,u=t.readInt(!0),d=new wt(h,u,i,e),f=t.readFloat();for(let e=0,i=0;;e++){let s,a=t.readInt(!0);if(0==a)s=n?g.newFloatArray(c):o;else{s=g.newFloatArray(c);let e=t.readInt(!0);if(a+=e,1==r)for(let i=e;i<a;i++)s[i]=t.readFloat();else for(let i=e;i<a;i++)s[i]=t.readFloat()*r;if(!n)for(let t=0,e=s.length;t<e;t++)s[t]+=o[t]}if(d.setFrame(e,f,s),e==l)break;let h=t.readFloat();switch(t.readByte()){case li:d.setStepped(e);break;case ci:ze(t,d,i++,e,0,f,h,0,1,1)}f=h}s.push(d);break}case ni:{let e=new Ct(h,i,a);for(let i=0;i<h;i++){let s=t.readFloat(),r=t.readInt32();e.setFrame(i,s,E[15&r],r>>4,t.readFloat())}s.push(e);break}}}}}let n=t.readInt(!0);if(n>0){let e=new At(n),r=i.slots.length;for(let i=0;i<n;i++){let s=t.readFloat(),n=t.readInt(!0),a=g.newArray(r,0);for(let t=r-1;t>=0;t--)a[t]=-1;let o=g.newArray(r-n,0),h=0,l=0;for(let e=0;e<n;e++){let e=t.readInt(!0);for(;h!=e;)o[l++]=h++;a[h+t.readInt(!0)]=h++}for(;h<r;)o[l++]=h++;for(let t=r-1;t>=0;t--)-1==a[t]&&(a[t]=o[--l]);e.setFrame(i,s,a)}s.push(e)}let a=t.readInt(!0);if(a>0){let e=new yt(a);for(let s=0;s<a;s++){let r=t.readFloat(),n=i.events[t.readInt(!0)],a=new fe(r,n);a.intValue=t.readInt(!1),a.floatValue=t.readFloat(),a.stringValue=t.readBoolean()?t.readString():n.stringValue,a.data.audioPath&&(a.volume=t.readFloat(),a.balance=t.readFloat()),e.setFrame(s,a)}s.push(e)}let o=0;for(let t=0,e=s.length;t<e;t++)o=Math.max(o,s[t].getDuration());return new C(e,s,o)}},Pe=class{constructor(t,e=new Array,i=0,s=new DataView(t.buffer)){this.strings=e,this.index=i,this.buffer=s}readByte(){return this.buffer.getInt8(this.index++)}readUnsignedByte(){return this.buffer.getUint8(this.index++)}readShort(){let t=this.buffer.getInt16(this.index);return this.index+=2,t}readInt32(){let t=this.buffer.getInt32(this.index);return this.index+=4,t}readInt(t){let e=this.readByte(),i=127&e;return 128&e&&(e=this.readByte(),i|=(127&e)<<7,128&e&&(e=this.readByte(),i|=(127&e)<<14,128&e&&(e=this.readByte(),i|=(127&e)<<21,128&e&&(e=this.readByte(),i|=(127&e)<<28)))),t?i:i>>>1^-(1&i)}readStringRef(){let t=this.readInt(!0);return 0==t?null:this.strings[t-1]}readString(){let t=this.readInt(!0);switch(t){case 0:return null;case 1:return""}t--;let e="";for(let i=0;i<t;){let t=this.readUnsignedByte();switch(t>>4){case 12:case 13:e+=String.fromCharCode((31&t)<<6|63&this.readByte()),i+=2;break;case 14:e+=String.fromCharCode((15&t)<<12|(63&this.readByte())<<6|63&this.readByte()),i+=3;break;default:e+=String.fromCharCode(t),i++}}return e}readFloat(){let t=this.buffer.getFloat32(this.index);return this.index+=4,t}readBoolean(){return 0!=this.readByte()}},Le=class{parent;skin;slotIndex;mesh;inheritTimeline;constructor(t,e,i,s,r){this.mesh=t,this.skin=e,this.slotIndex=i,this.parent=s,this.inheritTimeline=r}},De=class{constructor(t=null,e=null){this.bones=t,this.vertices=e}},Be=(t=>(t[t.Region=0]="Region",t[t.BoundingBox=1]="BoundingBox",t[t.Mesh=2]="Mesh",t[t.LinkedMesh=3]="LinkedMesh",t[t.Path=4]="Path",t[t.Point=5]="Point",t[t.Clipping=6]="Clipping",t))(Be||{});function Oe(t,e,i){let s=t.readFloat(),r=t.readFloat()*i;for(let n=0,a=0,o=e.getFrameCount()-1;e.setFrame(n,s,r),n!=o;n++){let o=t.readFloat(),h=t.readFloat()*i;switch(t.readByte()){case li:e.setStepped(n);break;case ci:ze(t,e,a++,n,0,s,o,r,h,i)}s=o,r=h}return e}function Ve(t,e,i){let s=t.readFloat(),r=t.readFloat()*i,n=t.readFloat()*i;for(let a=0,o=0,h=e.getFrameCount()-1;e.setFrame(a,s,r,n),a!=h;a++){let h=t.readFloat(),l=t.readFloat()*i,c=t.readFloat()*i;switch(t.readByte()){case li:e.setStepped(a);break;case ci:ze(t,e,o++,a,0,s,h,r,l,i),ze(t,e,o++,a,1,s,h,n,c,i)}s=h,r=l,n=c}return e}function ze(t,e,i,s,r,n,a,o,h,l){e.setBezier(i,s,r,n,o,t.readFloat(),t.readFloat()*l,t.readFloat(),t.readFloat()*l,a,h)}var Ne,_e=0,Ue=1,We=2,qe=3,Ge=4,He=5,je=6,Ze=7,Ke=8,Je=9,Qe=0,$e=1,ti=2,ei=3,ii=4,si=5,ri=0,ni=1,ai=0,oi=1,hi=2,li=1,ci=2,ui=class{minX=0;minY=0;maxX=0;maxY=0;boundingBoxes=new Array;polygons=new Array;polygonPool=new w((()=>g.newFloatArray(16)));update(t,e){if(!t)throw new Error("skeleton cannot be null.");let i=this.boundingBoxes,s=this.polygons,r=this.polygonPool,n=t.slots,a=n.length;i.length=0,r.freeAll(s),s.length=0;for(let t=0;t<a;t++){let e=n[t];if(!e.bone.active)continue;let a=e.getAttachment();if(a instanceof Wt){let t=a;i.push(t);let n=r.obtain();n.length!=t.worldVerticesLength&&(n=g.newFloatArray(t.worldVerticesLength)),s.push(n),t.computeWorldVertices(e,0,t.worldVerticesLength,n,0,2)}}e?this.aabbCompute():(this.minX=Number.POSITIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY)}aabbCompute(){let t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY,s=Number.NEGATIVE_INFINITY,r=this.polygons;for(let n=0,a=r.length;n<a;n++){let a=r[n],o=a;for(let r=0,n=a.length;r<n;r+=2){let n=o[r],a=o[r+1];t=Math.min(t,n),e=Math.min(e,a),i=Math.max(i,n),s=Math.max(s,a)}}this.minX=t,this.minY=e,this.maxX=i,this.maxY=s}aabbContainsPoint(t,e){return t>=this.minX&&t<=this.maxX&&e>=this.minY&&e<=this.maxY}aabbIntersectsSegment(t,e,i,s){let r=this.minX,n=this.minY,a=this.maxX,o=this.maxY;if(t<=r&&i<=r||e<=n&&s<=n||t>=a&&i>=a||e>=o&&s>=o)return!1;let h=(s-e)/(i-t),l=h*(r-t)+e;if(l>n&&l<o)return!0;if(l=h*(a-t)+e,l>n&&l<o)return!0;let c=(n-e)/h+t;return c>r&&c<a||(c=(o-e)/h+t,c>r&&c<a)}aabbIntersectsSkeleton(t){return this.minX<t.maxX&&this.maxX>t.minX&&this.minY<t.maxY&&this.maxY>t.minY}containsPoint(t,e){let i=this.polygons;for(let s=0,r=i.length;s<r;s++)if(this.containsPointPolygon(i[s],t,e))return this.boundingBoxes[s];return null}containsPointPolygon(t,e,i){let s=t,r=t.length,n=r-2,a=!1;for(let t=0;t<r;t+=2){let r=s[t+1],o=s[n+1];if(r<i&&o>=i||o<i&&r>=i){let h=s[t];h+(i-r)/(o-r)*(s[n]-h)<e&&(a=!a)}n=t}return a}intersectsSegment(t,e,i,s){let r=this.polygons;for(let n=0,a=r.length;n<a;n++)if(this.intersectsSegmentPolygon(r[n],t,e,i,s))return this.boundingBoxes[n];return null}intersectsSegmentPolygon(t,e,i,s,r){let n=t,a=t.length,o=e-s,h=i-r,l=e*r-i*s,c=n[a-2],u=n[a-1];for(let t=0;t<a;t+=2){let a=n[t],d=n[t+1],f=c*d-u*a,p=c-a,m=u-d,g=o*m-h*p,x=(l*p-o*f)/g;if((x>=c&&x<=a||x>=a&&x<=c)&&(x>=e&&x<=s||x>=s&&x<=e)){let t=(l*m-h*f)/g;if((t>=u&&t<=d||t>=d&&t<=u)&&(t>=i&&t<=r||t>=r&&t<=i))return!0}c=a,u=d}return!1}getPolygon(t){if(!t)throw new Error("boundingBox cannot be null.");let e=this.boundingBoxes.indexOf(t);return-1==e?null:this.polygons[e]}getWidth(){return this.maxX-this.minX}getHeight(){return this.maxY-this.minY}},di=class{convexPolygons=new Array;convexPolygonsIndices=new Array;indicesArray=new Array;isConcaveArray=new Array;triangles=new Array;polygonPool=new w((()=>new Array));polygonIndicesPool=new w((()=>new Array));triangulate(t){let e=t,i=t.length>>1,s=this.indicesArray;s.length=0;for(let t=0;t<i;t++)s[t]=t;let r=this.isConcaveArray;r.length=0;for(let t=0,n=i;t<n;++t)r[t]=di.isConcave(t,i,e,s);let n=this.triangles;for(n.length=0;i>3;){let t=i-1,a=0,o=1;for(;;){t:if(!r[a]){let n=s[t]<<1,h=s[a]<<1,l=s[o]<<1,c=e[n],u=e[n+1],d=e[h],f=e[h+1],p=e[l],m=e[l+1];for(let n=(o+1)%i;n!=t;n=(n+1)%i){if(!r[n])continue;let t=s[n]<<1,i=e[t],a=e[t+1];if(di.positiveArea(p,m,c,u,i,a)&&di.positiveArea(c,u,d,f,i,a)&&di.positiveArea(d,f,p,m,i,a))break t}break}if(0==o){do{if(!r[a])break;a--}while(a>0);break}t=a,a=o,o=(o+1)%i}n.push(s[(i+a-1)%i]),n.push(s[a]),n.push(s[(a+1)%i]),s.splice(a,1),r.splice(a,1),i--;let h=(i+a-1)%i,l=a==i?0:a;r[h]=di.isConcave(h,i,e,s),r[l]=di.isConcave(l,i,e,s)}return 3==i&&(n.push(s[2]),n.push(s[0]),n.push(s[1])),n}decompose(t,e){let i=t,s=this.convexPolygons;this.polygonPool.freeAll(s),s.length=0;let r=this.convexPolygonsIndices;this.polygonIndicesPool.freeAll(r),r.length=0;let n=this.polygonIndicesPool.obtain();n.length=0;let a=this.polygonPool.obtain();a.length=0;let o=-1,h=0;for(let t=0,l=e.length;t<l;t+=3){let l=e[t]<<1,c=e[t+1]<<1,u=e[t+2]<<1,d=i[l],f=i[l+1],p=i[c],m=i[c+1],g=i[u],x=i[u+1],w=!1;if(o==l){let t=a.length-4,e=di.winding(a[t],a[t+1],a[t+2],a[t+3],g,x),i=di.winding(g,x,a[0],a[1],a[2],a[3]);e==h&&i==h&&(a.push(g),a.push(x),n.push(u),w=!0)}w||(a.length>0?(s.push(a),r.push(n)):(this.polygonPool.free(a),this.polygonIndicesPool.free(n)),a=this.polygonPool.obtain(),a.length=0,a.push(d),a.push(f),a.push(p),a.push(m),a.push(g),a.push(x),n=this.polygonIndicesPool.obtain(),n.length=0,n.push(l),n.push(c),n.push(u),h=di.winding(d,f,p,m,g,x),o=l)}a.length>0&&(s.push(a),r.push(n));for(let t=0,e=s.length;t<e;t++){if(n=r[t],0==n.length)continue;let i=n[0],o=n[n.length-1];a=s[t];let h=a.length-4,l=a[h],c=a[h+1],u=a[h+2],d=a[h+3],f=a[0],p=a[1],m=a[2],g=a[3],x=di.winding(l,c,u,d,f,p);for(let h=0;h<e;h++){if(h==t)continue;let e=r[h];if(3!=e.length)continue;let w=e[0],v=e[1],y=e[2],b=s[h],A=b[b.length-2],S=b[b.length-1];if(w!=i||v!=o)continue;let M=di.winding(l,c,u,d,A,S),I=di.winding(A,S,f,p,m,g);M==x&&I==x&&(b.length=0,e.length=0,a.push(A),a.push(S),n.push(y),l=u,c=d,u=A,d=S,h=0)}}for(let t=s.length-1;t>=0;t--)a=s[t],0==a.length&&(s.splice(t,1),this.polygonPool.free(a),n=r[t],r.splice(t,1),this.polygonIndicesPool.free(n));return s}static isConcave(t,e,i,s){let r=s[(e+t-1)%e]<<1,n=s[t]<<1,a=s[(t+1)%e]<<1;return!this.positiveArea(i[r],i[r+1],i[n],i[n+1],i[a],i[a+1])}static positiveArea(t,e,i,s,r,n){return t*(n-s)+i*(e-n)+r*(s-e)>=0}static winding(t,e,i,s,r,n){let a=i-t,o=s-e;return r*o-n*a+a*e-t*o>=0?1:-1}},fi=class{triangulator=new di;clippingPolygon=new Array;clipOutput=new Array;clippedVertices=new Array;clippedTriangles=new Array;scratch=new Array;clipAttachment=null;clippingPolygons=null;clipStart(t,e){if(this.clipAttachment)return 0;this.clipAttachment=e;let i=e.worldVerticesLength,s=g.setArraySize(this.clippingPolygon,i);e.computeWorldVertices(t,0,i,s,0,2);let r=this.clippingPolygon;fi.makeClockwise(r);let n=this.clippingPolygons=this.triangulator.decompose(r,this.triangulator.triangulate(r));for(let t=0,e=n.length;t<e;t++){let e=n[t];fi.makeClockwise(e),e.push(e[0]),e.push(e[1])}return n.length}clipEndWithSlot(t){this.clipAttachment&&this.clipAttachment.endSlot==t.data&&this.clipEnd()}clipEnd(){this.clipAttachment&&(this.clipAttachment=null,this.clippingPolygons=null,this.clippedVertices.length=0,this.clippedTriangles.length=0,this.clippingPolygon.length=0)}isClipping(){return null!=this.clipAttachment}clipTriangles(t,e,i,s,r,n,a,o){let h=this.clipOutput,l=this.clippedVertices,c=this.clippedTriangles,u=this.clippingPolygons,d=u.length,f=o?12:8,p=0;l.length=0,c.length=0;t:for(let e=0;e<s;e+=3){let s=i[e]<<1,m=t[s],x=t[s+1],w=r[s],v=r[s+1];s=i[e+1]<<1;let y=t[s],b=t[s+1],A=r[s],S=r[s+1];s=i[e+2]<<1;let M=t[s],I=t[s+1],T=r[s],k=r[s+1];for(let t=0;t<d;t++){let e=l.length;if(!this.clip(m,x,y,b,M,I,u[t],h)){let t=g.setArraySize(l,e+3*f);t[e]=m,t[e+1]=x,t[e+2]=n.r,t[e+3]=n.g,t[e+4]=n.b,t[e+5]=n.a,o?(t[e+6]=w,t[e+7]=v,t[e+8]=a.r,t[e+9]=a.g,t[e+10]=a.b,t[e+11]=a.a,t[e+12]=y,t[e+13]=b,t[e+14]=n.r,t[e+15]=n.g,t[e+16]=n.b,t[e+17]=n.a,t[e+18]=A,t[e+19]=S,t[e+20]=a.r,t[e+21]=a.g,t[e+22]=a.b,t[e+23]=a.a,t[e+24]=M,t[e+25]=I,t[e+26]=n.r,t[e+27]=n.g,t[e+28]=n.b,t[e+29]=n.a,t[e+30]=T,t[e+31]=k,t[e+32]=a.r,t[e+33]=a.g,t[e+34]=a.b,t[e+35]=a.a):(t[e+6]=w,t[e+7]=v,t[e+8]=y,t[e+9]=b,t[e+10]=n.r,t[e+11]=n.g,t[e+12]=n.b,t[e+13]=n.a,t[e+14]=A,t[e+15]=S,t[e+16]=M,t[e+17]=I,t[e+18]=n.r,t[e+19]=n.g,t[e+20]=n.b,t[e+21]=n.a,t[e+22]=T,t[e+23]=k),e=c.length;let i=g.setArraySize(c,e+3);i[e]=p,i[e+1]=p+1,i[e+2]=p+2,p+=3;continue t}{let t=h.length;if(0==t)continue;let i=b-I,s=M-y,r=m-M,u=I-x,d=1/(i*r+s*(x-I)),E=t>>1,C=this.clipOutput,R=g.setArraySize(l,e+E*f);for(let h=0;h<t;h+=2){let t=C[h],l=C[h+1];R[e]=t,R[e+1]=l,R[e+2]=n.r,R[e+3]=n.g,R[e+4]=n.b,R[e+5]=n.a;let c=t-M,p=l-I,m=(i*c+s*p)*d,g=(u*c+r*p)*d,x=1-m-g;R[e+6]=w*m+A*g+T*x,R[e+7]=v*m+S*g+k*x,o&&(R[e+8]=a.r,R[e+9]=a.g,R[e+10]=a.b,R[e+11]=a.a),e+=f}e=c.length;let Y=g.setArraySize(c,e+3*(E-2));E--;for(let t=1;t<E;t++)Y[e]=p,Y[e+1]=p+t,Y[e+2]=p+t+1,e+=3;p+=E+1}}}}clip(t,e,i,s,r,n,a,o){let h,l=o,c=!1;a.length%4>=2?(h=o,o=this.scratch):h=this.scratch,h.length=0,h.push(t),h.push(e),h.push(i),h.push(s),h.push(r),h.push(n),h.push(t),h.push(e),o.length=0;let u=a,d=a.length-4;for(let t=0;;t+=2){let e=u[t],i=u[t+1],s=u[t+2],r=u[t+3],n=e-s,a=i-r,f=h,p=h.length-2,m=o.length;for(let t=0;t<p;t+=2){let h=f[t],l=f[t+1],u=f[t+2],d=f[t+3],p=n*(d-r)-a*(u-s)>0;if(n*(l-r)-a*(h-s)>0){if(p){o.push(u),o.push(d);continue}let t=d-l,n=u-h,a=t*(s-e)-n*(r-i);if(Math.abs(a)>1e-6){let c=(n*(i-l)-t*(e-h))/a;o.push(e+(s-e)*c),o.push(i+(r-i)*c)}else o.push(e),o.push(i)}else if(p){let t=d-l,n=u-h,a=t*(s-e)-n*(r-i);if(Math.abs(a)>1e-6){let c=(n*(i-l)-t*(e-h))/a;o.push(e+(s-e)*c),o.push(i+(r-i)*c)}else o.push(e),o.push(i);o.push(u),o.push(d)}c=!0}if(m==o.length)return l.length=0,!0;if(o.push(o[0]),o.push(o[1]),t==d)break;let g=o;(o=h).length=0,h=g}if(l!=o){l.length=0;for(let t=0,e=o.length-2;t<e;t++)l[t]=o[t]}else l.length=l.length-2;return c}static makeClockwise(t){let e=t,i=t.length,s=e[i-2]*e[1]-e[0]*e[i-1],r=0,n=0,a=0,o=0;for(let t=0,h=i-3;t<h;t+=2)r=e[t],n=e[t+1],a=e[t+2],o=e[t+3],s+=r*o-a*n;if(!(s<0))for(let t=0,s=i-2,r=i>>1;t<r;t+=2){let i=e[t],r=e[t+1],n=s-t;e[t]=e[n],e[t+1]=e[n+1],e[n]=i,e[n+1]=r}}},pi=class{attachmentLoader;scale=1;linkedMeshes=new Array;constructor(t){this.attachmentLoader=t}readSkeletonData(t){let e=this.scale,i=new ke,s="string"==typeof t?JSON.parse(t):t,r=s.skeleton;if(r&&(i.hash=r.hash,i.version=r.spine,i.x=r.x,i.y=r.y,i.width=r.width,i.height=r.height,i.fps=r.fps,i.imagesPath=r.images),s.bones)for(let t=0;t<s.bones.length;t++){let r=s.bones[t],n=null,a=vi(r,"parent",null);a&&(n=i.findBone(a));let o=new oe(i.bones.length,r.name,n);o.length=vi(r,"length",0)*e,o.x=vi(r,"x",0)*e,o.y=vi(r,"y",0)*e,o.rotation=vi(r,"rotation",0),o.scaleX=vi(r,"scaleX",1),o.scaleY=vi(r,"scaleY",1),o.shearX=vi(r,"shearX",0),o.shearY=vi(r,"shearY",0),o.transformMode=g.enumValue(he,vi(r,"transform","Normal")),o.skinRequired=vi(r,"skin",!1);let h=vi(r,"color",null);h&&o.color.setFromString(h),i.bones.push(o)}if(s.slots)for(let t=0;t<s.slots.length;t++){let e=s.slots[t],r=i.findBone(e.bone);if(!r)throw new Error(`Couldn't find bone ${e.bone} for slot ${e.name}`);let n=new Re(i.slots.length,e.name,r),a=vi(e,"color",null);a&&n.color.setFromString(a);let o=vi(e,"dark",null);o&&(n.darkColor=l.fromString(o)),n.attachmentName=vi(e,"attachment",null),n.blendMode=g.enumValue(Ye,vi(e,"blend","normal")),i.slots.push(n)}if(s.ik)for(let t=0;t<s.ik.length;t++){let r=s.ik[t],n=new ge(r.name);n.order=vi(r,"order",0),n.skinRequired=vi(r,"skin",!1);for(let t=0;t<r.bones.length;t++){let e=i.findBone(r.bones[t]);if(!e)throw new Error(`Couldn't find bone ${r.bones[t]} for IK constraint ${r.name}.`);n.bones.push(e)}let a=i.findBone(r.target);if(!a)throw new Error(`Couldn't find target bone ${r.target} for IK constraint ${r.name}.`);n.target=a,n.mix=vi(r,"mix",1),n.softness=vi(r,"softness",0)*e,n.bendDirection=vi(r,"bendPositive",!0)?1:-1,n.compress=vi(r,"compress",!1),n.stretch=vi(r,"stretch",!1),n.uniform=vi(r,"uniform",!1),i.ikConstraints.push(n)}if(s.transform)for(let t=0;t<s.transform.length;t++){let r=s.transform[t],n=new Fe(r.name);n.order=vi(r,"order",0),n.skinRequired=vi(r,"skin",!1);for(let t=0;t<r.bones.length;t++){let e=r.bones[t],s=i.findBone(e);if(!s)throw new Error(`Couldn't find bone ${e} for transform constraint ${r.name}.`);n.bones.push(s)}let a=r.target,o=i.findBone(a);if(!o)throw new Error(`Couldn't find target bone ${a} for transform constraint ${r.name}.`);n.target=o,n.local=vi(r,"local",!1),n.relative=vi(r,"relative",!1),n.offsetRotation=vi(r,"rotation",0),n.offsetX=vi(r,"x",0)*e,n.offsetY=vi(r,"y",0)*e,n.offsetScaleX=vi(r,"scaleX",0),n.offsetScaleY=vi(r,"scaleY",0),n.offsetShearY=vi(r,"shearY",0),n.mixRotate=vi(r,"mixRotate",1),n.mixX=vi(r,"mixX",1),n.mixY=vi(r,"mixY",n.mixX),n.mixScaleX=vi(r,"mixScaleX",1),n.mixScaleY=vi(r,"mixScaleY",n.mixScaleX),n.mixShearY=vi(r,"mixShearY",1),i.transformConstraints.push(n)}if(s.path)for(let t=0;t<s.path.length;t++){let r=s.path[t],n=new xe(r.name);n.order=vi(r,"order",0),n.skinRequired=vi(r,"skin",!1);for(let t=0;t<r.bones.length;t++){let e=r.bones[t],s=i.findBone(e);if(!s)throw new Error(`Couldn't find bone ${e} for path constraint ${r.name}.`);n.bones.push(s)}let a=r.target,o=i.findSlot(a);if(!o)throw new Error(`Couldn't find target slot ${a} for path constraint ${r.name}.`);n.target=o,n.positionMode=g.enumValue(we,vi(r,"positionMode","Percent")),n.spacingMode=g.enumValue(ve,vi(r,"spacingMode","Length")),n.rotateMode=g.enumValue(ye,vi(r,"rotateMode","Tangent")),n.offsetRotation=vi(r,"rotation",0),n.position=vi(r,"position",0),0==n.positionMode&&(n.position*=e),n.spacing=vi(r,"spacing",0),0!=n.spacingMode&&1!=n.spacingMode||(n.spacing*=e),n.mixRotate=vi(r,"mixRotate",1),n.mixX=vi(r,"mixX",1),n.mixY=vi(r,"mixY",n.mixX),i.pathConstraints.push(n)}if(s.skins)for(let t=0;t<s.skins.length;t++){let e=s.skins[t],r=new Ce(e.name);if(e.bones)for(let t=0;t<e.bones.length;t++){let s=e.bones[t],n=i.findBone(s);if(!n)throw new Error(`Couldn't find bone ${s} for skin ${e.name}.`);r.bones.push(n)}if(e.ik)for(let t=0;t<e.ik.length;t++){let s=e.ik[t],n=i.findIkConstraint(s);if(!n)throw new Error(`Couldn't find IK constraint ${s} for skin ${e.name}.`);r.constraints.push(n)}if(e.transform)for(let t=0;t<e.transform.length;t++){let s=e.transform[t],n=i.findTransformConstraint(s);if(!n)throw new Error(`Couldn't find transform constraint ${s} for skin ${e.name}.`);r.constraints.push(n)}if(e.path)for(let t=0;t<e.path.length;t++){let s=e.path[t],n=i.findPathConstraint(s);if(!n)throw new Error(`Couldn't find path constraint ${s} for skin ${e.name}.`);r.constraints.push(n)}for(let t in e.attachments){let s=i.findSlot(t);if(!s)throw new Error(`Couldn't find slot ${t} for skin ${e.name}.`);let n=e.attachments[t];for(let t in n){let e=this.readAttachment(n[t],r,s.index,t,i);e&&r.setAttachment(s.index,t,e)}}i.skins.push(r),"default"==r.name&&(i.defaultSkin=r)}for(let t=0,e=this.linkedMeshes.length;t<e;t++){let e=this.linkedMeshes[t],s=e.skin?i.findSkin(e.skin):i.defaultSkin;if(!s)throw new Error(`Skin not found: ${e.skin}`);let r=s.getAttachment(e.slotIndex,e.parent);if(!r)throw new Error(`Parent mesh not found: ${e.parent}`);e.mesh.timelineAttachment=e.inheritTimeline?r:e.mesh,e.mesh.setParentMesh(r),null!=e.mesh.region&&e.mesh.updateRegion()}if(this.linkedMeshes.length=0,s.events)for(let t in s.events){let e=s.events[t],r=new pe(t);r.intValue=vi(e,"int",0),r.floatValue=vi(e,"float",0),r.stringValue=vi(e,"string",""),r.audioPath=vi(e,"audio",null),r.audioPath&&(r.volume=vi(e,"volume",1),r.balance=vi(e,"balance",0)),i.events.push(r)}if(s.animations)for(let t in s.animations){let e=s.animations[t];this.readAnimation(e,t,i)}return i}readAttachment(t,e,i,s,r){let n=this.scale;switch(s=vi(t,"name",s),vi(t,"type","region")){case"region":{let i=vi(t,"path",s),r=this.readSequence(vi(t,"sequence",null)),a=this.attachmentLoader.newRegionAttachment(e,s,i,r);if(!a)return null;a.path=i,a.x=vi(t,"x",0)*n,a.y=vi(t,"y",0)*n,a.scaleX=vi(t,"scaleX",1),a.scaleY=vi(t,"scaleY",1),a.rotation=vi(t,"rotation",0),a.width=t.width*n,a.height=t.height*n,a.sequence=r;let o=vi(t,"color",null);return o&&a.color.setFromString(o),null!=a.region&&a.updateRegion(),a}case"boundingbox":{let i=this.attachmentLoader.newBoundingBoxAttachment(e,s);if(!i)return null;this.readVertices(t,i,t.vertexCount<<1);let r=vi(t,"color",null);return r&&i.color.setFromString(r),i}case"mesh":case"linkedmesh":{let r=vi(t,"path",s),a=this.readSequence(vi(t,"sequence",null)),o=this.attachmentLoader.newMeshAttachment(e,s,r,a);if(!o)return null;o.path=r;let h=vi(t,"color",null);h&&o.color.setFromString(h),o.width=vi(t,"width",0)*n,o.height=vi(t,"height",0)*n,o.sequence=a;let l=vi(t,"parent",null);if(l)return this.linkedMeshes.push(new mi(o,vi(t,"skin",null),i,l,vi(t,"timelines",!0))),o;let c=t.uvs;return this.readVertices(t,o,c.length),o.triangles=t.triangles,o.regionUVs=c,null!=o.region&&o.updateRegion(),o.edges=vi(t,"edges",null),o.hullLength=2*vi(t,"hull",0),o}case"path":{let i=this.attachmentLoader.newPathAttachment(e,s);if(!i)return null;i.closed=vi(t,"closed",!1),i.constantSpeed=vi(t,"constantSpeed",!0);let r=t.vertexCount;this.readVertices(t,i,r<<1);let a=g.newArray(r/3,0);for(let e=0;e<t.lengths.length;e++)a[e]=t.lengths[e]*n;i.lengths=a;let o=vi(t,"color",null);return o&&i.color.setFromString(o),i}case"point":{let i=this.attachmentLoader.newPointAttachment(e,s);if(!i)return null;i.x=vi(t,"x",0)*n,i.y=vi(t,"y",0)*n,i.rotation=vi(t,"rotation",0);let r=vi(t,"color",null);return r&&i.color.setFromString(r),i}case"clipping":{let i=this.attachmentLoader.newClippingAttachment(e,s);if(!i)return null;let n=vi(t,"end",null);n&&(i.endSlot=r.findSlot(n));let a=t.vertexCount;this.readVertices(t,i,a<<1);let o=vi(t,"color",null);return o&&i.color.setFromString(o),i}}return null}readSequence(t){if(null==t)return null;let e=new T(vi(t,"count",0));return e.start=vi(t,"start",1),e.digits=vi(t,"digits",0),e.setupIndex=vi(t,"setup",0),e}readVertices(t,e,i){let s=this.scale;e.worldVerticesLength=i;let r=t.vertices;if(i==r.length){let t=g.toFloatArray(r);if(1!=s)for(let e=0,i=r.length;e<i;e++)t[e]*=s;return void(e.vertices=t)}let n=new Array,a=new Array;for(let t=0,e=r.length;t<e;){let e=r[t++];a.push(e);for(let i=t+4*e;t<i;t+=4)a.push(r[t]),n.push(r[t+1]*s),n.push(r[t+2]*s),n.push(r[t+3])}e.bones=a,e.vertices=g.toFloatArray(n)}readAnimation(t,e,i){let s=this.scale,r=new Array;if(t.slots)for(let e in t.slots){let s=t.slots[e],n=i.findSlot(e);if(!n)throw new Error("Slot not found: "+e);let a=n.index;for(let t in s){let e=s[t];if(!e)continue;let i=e.length;if("attachment"==t){let t=new xt(i,a);for(let s=0;s<i;s++){let i=e[s];t.setFrame(s,vi(i,"time",0),vi(i,"name",null))}r.push(t)}else if("rgba"==t){let t=new dt(i,i<<2,a),s=e[0],n=vi(s,"time",0),o=l.fromString(s.color);for(let i=0,r=0;;i++){t.setFrame(i,n,o.r,o.g,o.b,o.a);let a=e[i+1];if(!a){t.shrink(r);break}let h=vi(a,"time",0),c=l.fromString(a.color),u=s.curve;u&&(r=wi(u,t,r,i,0,n,h,o.r,c.r,1),r=wi(u,t,r,i,1,n,h,o.g,c.g,1),r=wi(u,t,r,i,2,n,h,o.b,c.b,1),r=wi(u,t,r,i,3,n,h,o.a,c.a,1)),n=h,o=c,s=a}r.push(t)}else if("rgb"==t){let t=new ft(i,3*i,a),s=e[0],n=vi(s,"time",0),o=l.fromString(s.color);for(let i=0,r=0;;i++){t.setFrame(i,n,o.r,o.g,o.b);let a=e[i+1];if(!a){t.shrink(r);break}let h=vi(a,"time",0),c=l.fromString(a.color),u=s.curve;u&&(r=wi(u,t,r,i,0,n,h,o.r,c.r,1),r=wi(u,t,r,i,1,n,h,o.g,c.g,1),r=wi(u,t,r,i,2,n,h,o.b,c.b,1)),n=h,o=c,s=a}r.push(t)}else if("alpha"==t)r.push(gi(e,new pt(i,i,a),0,1));else if("rgba2"==t){let t=new mt(i,7*i,a),s=e[0],n=vi(s,"time",0),o=l.fromString(s.light),h=l.fromString(s.dark);for(let i=0,r=0;;i++){t.setFrame(i,n,o.r,o.g,o.b,o.a,h.r,h.g,h.b);let a=e[i+1];if(!a){t.shrink(r);break}let c=vi(a,"time",0),u=l.fromString(a.light),d=l.fromString(a.dark),f=s.curve;f&&(r=wi(f,t,r,i,0,n,c,o.r,u.r,1),r=wi(f,t,r,i,1,n,c,o.g,u.g,1),r=wi(f,t,r,i,2,n,c,o.b,u.b,1),r=wi(f,t,r,i,3,n,c,o.a,u.a,1),r=wi(f,t,r,i,4,n,c,h.r,d.r,1),r=wi(f,t,r,i,5,n,c,h.g,d.g,1),r=wi(f,t,r,i,6,n,c,h.b,d.b,1)),n=c,o=u,h=d,s=a}r.push(t)}else if("rgb2"==t){let t=new gt(i,6*i,a),s=e[0],n=vi(s,"time",0),o=l.fromString(s.light),h=l.fromString(s.dark);for(let i=0,r=0;;i++){t.setFrame(i,n,o.r,o.g,o.b,h.r,h.g,h.b);let a=e[i+1];if(!a){t.shrink(r);break}let c=vi(a,"time",0),u=l.fromString(a.light),d=l.fromString(a.dark),f=s.curve;f&&(r=wi(f,t,r,i,0,n,c,o.r,u.r,1),r=wi(f,t,r,i,1,n,c,o.g,u.g,1),r=wi(f,t,r,i,2,n,c,o.b,u.b,1),r=wi(f,t,r,i,3,n,c,h.r,d.r,1),r=wi(f,t,r,i,4,n,c,h.g,d.g,1),r=wi(f,t,r,i,5,n,c,h.b,d.b,1)),n=c,o=u,h=d,s=a}r.push(t)}}}if(t.bones)for(let e in t.bones){let n=t.bones[e],a=i.findBone(e);if(!a)throw new Error("Bone not found: "+e);let o=a.index;for(let t in n){let e=n[t],i=e.length;if(0!=i)if("rotate"===t)r.push(gi(e,new it(i,i,o),0,1));else if("translate"===t){let t=new st(i,i<<1,o);r.push(xi(e,t,"x","y",0,s))}else if("translatex"===t){let t=new rt(i,i,o);r.push(gi(e,t,0,s))}else if("translatey"===t){let t=new nt(i,i,o);r.push(gi(e,t,0,s))}else if("scale"===t){let t=new at(i,i<<1,o);r.push(xi(e,t,"x","y",1,1))}else if("scalex"===t){let t=new ot(i,i,o);r.push(gi(e,t,1,1))}else if("scaley"===t){let t=new ht(i,i,o);r.push(gi(e,t,1,1))}else if("shear"===t){let t=new lt(i,i<<1,o);r.push(xi(e,t,"x","y",0,1))}else if("shearx"===t){let t=new ct(i,i,o);r.push(gi(e,t,0,1))}else if("sheary"===t){let t=new ut(i,i,o);r.push(gi(e,t,0,1))}}}if(t.ik)for(let e in t.ik){let n=t.ik[e],a=n[0];if(!a)continue;let o=i.findIkConstraint(e);if(!o)throw new Error("IK Constraint not found: "+e);let h=i.ikConstraints.indexOf(o),l=new St(n.length,n.length<<1,h),c=vi(a,"time",0),u=vi(a,"mix",1),d=vi(a,"softness",0)*s;for(let t=0,e=0;;t++){l.setFrame(t,c,u,d,vi(a,"bendPositive",!0)?1:-1,vi(a,"compress",!1),vi(a,"stretch",!1));let i=n[t+1];if(!i){l.shrink(e);break}let r=vi(i,"time",0),o=vi(i,"mix",1),h=vi(i,"softness",0)*s,f=a.curve;f&&(e=wi(f,l,e,t,0,c,r,u,o,1),e=wi(f,l,e,t,1,c,r,d,h,s)),c=r,u=o,d=h,a=i}r.push(l)}if(t.transform)for(let e in t.transform){let s=t.transform[e],n=s[0];if(!n)continue;let a=i.findTransformConstraint(e);if(!a)throw new Error("Transform constraint not found: "+e);let o=i.transformConstraints.indexOf(a),h=new Mt(s.length,6*s.length,o),l=vi(n,"time",0),c=vi(n,"mixRotate",1),u=vi(n,"mixX",1),d=vi(n,"mixY",u),f=vi(n,"mixScaleX",1),p=vi(n,"mixScaleY",f),m=vi(n,"mixShearY",1);for(let t=0,e=0;;t++){h.setFrame(t,l,c,u,d,f,p,m);let i=s[t+1];if(!i){h.shrink(e);break}let r=vi(i,"time",0),a=vi(i,"mixRotate",1),o=vi(i,"mixX",1),g=vi(i,"mixY",o),x=vi(i,"mixScaleX",1),w=vi(i,"mixScaleY",x),v=vi(i,"mixShearY",1),y=n.curve;y&&(e=wi(y,h,e,t,0,l,r,c,a,1),e=wi(y,h,e,t,1,l,r,u,o,1),e=wi(y,h,e,t,2,l,r,d,g,1),e=wi(y,h,e,t,3,l,r,f,x,1),e=wi(y,h,e,t,4,l,r,p,w,1),e=wi(y,h,e,t,5,l,r,m,v,1)),l=r,c=a,u=o,d=g,f=x,p=w,f=x,n=i}r.push(h)}if(t.path)for(let e in t.path){let n=t.path[e],a=i.findPathConstraint(e);if(!a)throw new Error("Path constraint not found: "+e);let o=i.pathConstraints.indexOf(a);for(let t in n){let e=n[t],i=e[0];if(!i)continue;let h=e.length;if("position"===t){let t=new It(h,h,o);r.push(gi(e,t,0,0==a.positionMode?s:1))}else if("spacing"===t){let t=new Tt(h,h,o);r.push(gi(e,t,0,0==a.spacingMode||1==a.spacingMode?s:1))}else if("mix"===t){let t=new kt(h,3*h,o),s=vi(i,"time",0),n=vi(i,"mixRotate",1),a=vi(i,"mixX",1),l=vi(i,"mixY",a);for(let r=0,o=0;;r++){t.setFrame(r,s,n,a,l);let h=e[r+1];if(!h){t.shrink(o);break}let c=vi(h,"time",0),u=vi(h,"mixRotate",1),d=vi(h,"mixX",1),f=vi(h,"mixY",d),p=i.curve;p&&(o=wi(p,t,o,r,0,s,c,n,u,1),o=wi(p,t,o,r,1,s,c,a,d,1),o=wi(p,t,o,r,2,s,c,l,f,1)),s=c,n=u,a=d,l=f,i=h}r.push(t)}}}if(t.attachments)for(let e in t.attachments){let n=t.attachments[e],a=i.findSkin(e);if(!a)throw new Error("Skin not found: "+e);for(let t in n){let e=n[t],o=i.findSlot(t);if(!o)throw new Error("Slot not found: "+t);let h=o.index;for(let t in e){let i=e[t],n=a.getAttachment(h,t);for(let t in i){let e=i[t],a=e[0];if(a)if("deform"==t){let t=n.bones,i=n.vertices,o=t?i.length/3*2:i.length,l=new wt(e.length,e.length,h,n),c=vi(a,"time",0);for(let r=0,n=0;;r++){let h,u=vi(a,"vertices",null);if(u){h=g.newFloatArray(o);let e=vi(a,"offset",0);if(g.arrayCopy(u,0,h,e,u.length),1!=s)for(let t=e,i=t+u.length;t<i;t++)h[t]*=s;if(!t)for(let t=0;t<o;t++)h[t]+=i[t]}else h=t?g.newFloatArray(o):i;l.setFrame(r,c,h);let d=e[r+1];if(!d){l.shrink(n);break}let f=vi(d,"time",0),p=a.curve;p&&(n=wi(p,l,n,r,0,c,f,0,1,1)),c=f,a=d}r.push(l)}else if("sequence"==t){let t=new Ct(e.length,h,n),i=0;for(let s=0;s<e.length;s++){let r=vi(a,"delay",i),n=vi(a,"time",0),o=k[vi(a,"mode","hold")],h=vi(a,"index",0);t.setFrame(s,n,o,h,r),i=r,a=e[s+1]}r.push(t)}}}}}if(t.drawOrder){let e=new At(t.drawOrder.length),s=i.slots.length,n=0;for(let r=0;r<t.drawOrder.length;r++,n++){let a=t.drawOrder[r],o=null,h=vi(a,"offsets",null);if(h){o=g.newArray(s,-1);let t=g.newArray(s-h.length,0),e=0,r=0;for(let s=0;s<h.length;s++){let n=h[s],a=i.findSlot(n.slot);if(!a)throw new Error("Slot not found: "+a);let l=a.index;for(;e!=l;)t[r++]=e++;o[e+n.offset]=e++}for(;e<s;)t[r++]=e++;for(let e=s-1;e>=0;e--)-1==o[e]&&(o[e]=t[--r])}e.setFrame(n,vi(a,"time",0),o)}r.push(e)}if(t.events){let e=new yt(t.events.length),s=0;for(let r=0;r<t.events.length;r++,s++){let n=t.events[r],a=i.findEvent(n.name);if(!a)throw new Error("Event not found: "+n.name);let o=new fe(g.toSinglePrecision(vi(n,"time",0)),a);o.intValue=vi(n,"int",a.intValue),o.floatValue=vi(n,"float",a.floatValue),o.stringValue=vi(n,"string",a.stringValue),o.data.audioPath&&(o.volume=vi(n,"volume",1),o.balance=vi(n,"balance",0)),e.setFrame(s,o)}r.push(e)}let n=0;for(let t=0,e=r.length;t<e;t++)n=Math.max(n,r[t].getDuration());i.animations.push(new C(e,r,n))}},mi=class{parent;skin;slotIndex;mesh;inheritTimeline;constructor(t,e,i,s,r){this.mesh=t,this.skin=e,this.slotIndex=i,this.parent=s,this.inheritTimeline=r}};function gi(t,e,i,s){let r=t[0],n=vi(r,"time",0),a=vi(r,"value",i)*s,o=0;for(let h=0;;h++){e.setFrame(h,n,a);let l=t[h+1];if(!l)return e.shrink(o),e;let c=vi(l,"time",0),u=vi(l,"value",i)*s;r.curve&&(o=wi(r.curve,e,o,h,0,n,c,a,u,s)),n=c,a=u,r=l}}function xi(t,e,i,s,r,n){let a=t[0],o=vi(a,"time",0),h=vi(a,i,r)*n,l=vi(a,s,r)*n,c=0;for(let u=0;;u++){e.setFrame(u,o,h,l);let d=t[u+1];if(!d)return e.shrink(c),e;let f=vi(d,"time",0),p=vi(d,i,r)*n,m=vi(d,s,r)*n,g=a.curve;g&&(c=wi(g,e,c,u,0,o,f,h,p,n),c=wi(g,e,c,u,1,o,f,l,m,n)),o=f,h=p,l=m,a=d}}function wi(t,e,i,s,r,n,a,o,h,l){if("stepped"==t)return e.setStepped(s),i;let c=r<<2,u=t[c],d=t[c+1]*l,f=t[c+2],p=t[c+3]*l;return e.setBezier(i,s,r,n,o,u,d,f,p,a,h),i+1}function vi(t,e,i){return void 0!==t[e]?t[e]:i}void 0===Math.fround&&(Math.fround=(Ne=new Float32Array(1),function(t){return Ne[0]=t,Ne[0]}));var yi=class{canvas;gl;restorables=new Array;constructor(t,e={alpha:"true"}){if(t instanceof WebGLRenderingContext||"undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext)this.gl=t,this.canvas=this.gl.canvas;else{let i=t;this.gl=i.getContext("webgl2",e)||i.getContext("webgl",e),this.canvas=i,i.addEventListener("webglcontextlost",(t=>{t&&t.preventDefault()})),i.addEventListener("webglcontextrestored",(t=>{for(let t=0,e=this.restorables.length;t<e;t++)this.restorables[t].restore()}))}}addRestorable(t){this.restorables.push(t)}removeRestorable(t){let e=this.restorables.indexOf(t);e>-1&&this.restorables.splice(e,1)}},bi=class extends Gt{context;texture=null;boundUnit=0;useMipMaps=!1;constructor(t,e,i=!1){super(e),this.context=t instanceof yi?t:new yi(t),this.useMipMaps=i,this.restore(),this.context.addRestorable(this)}setFilters(t,e){let i=this.context.gl;this.bind(),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,t),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,bi.validateMagFilter(e)),this.useMipMaps=bi.usesMipMaps(t),this.useMipMaps&&i.generateMipmap(i.TEXTURE_2D)}static validateMagFilter(t){switch(t){case 9987:case 9987:case 9985:case 9986:case 9984:return 9729;default:return t}}static usesMipMaps(t){switch(t){case 9987:case 9987:case 9985:case 9986:case 9984:return!0;default:return!1}}setWraps(t,e){let i=this.context.gl;this.bind(),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,t),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,e)}update(t){let e=this.context.gl;this.texture||(this.texture=this.context.gl.createTexture()),this.bind(),bi.DISABLE_UNPACK_PREMULTIPLIED_ALPHA_WEBGL&&e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,this._image),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t?e.LINEAR_MIPMAP_LINEAR:e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),t&&e.generateMipmap(e.TEXTURE_2D)}restore(){this.texture=null,this.update(this.useMipMaps)}bind(t=0){let e=this.context.gl;this.boundUnit=t,e.activeTexture(e.TEXTURE0+t),e.bindTexture(e.TEXTURE_2D,this.texture)}unbind(){let t=this.context.gl;t.activeTexture(t.TEXTURE0+this.boundUnit),t.bindTexture(t.TEXTURE_2D,null)}dispose(){this.context.removeRestorable(this),this.context.gl.deleteTexture(this.texture)}},Ai=bi;r(Ai,"DISABLE_UNPACK_PREMULTIPLIED_ALPHA_WEBGL",!1);var Si=class extends ue{constructor(t,e="",i=new de){super((e=>new Ai(t,e)),e,i)}},Mi=class{x=0;y=0;z=0;constructor(t=0,e=0,i=0){this.x=t,this.y=e,this.z=i}setFrom(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}set(t,e,i){return this.x=t,this.y=e,this.z=i,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}scale(t){return this.x*=t,this.y*=t,this.z*=t,this}normalize(){let t=this.length();return 0==t||(t=1/t,this.x*=t,this.y*=t,this.z*=t),this}cross(t){return this.set(this.y*t.z-this.z*t.y,this.z*t.x-this.x*t.z,this.x*t.y-this.y*t.x)}multiply(t){let e=t.values;return this.set(this.x*e[Ii]+this.y*e[Ti]+this.z*e[ki]+e[Ei],this.x*e[Ci]+this.y*e[Ri]+this.z*e[Yi]+e[Fi],this.x*e[Xi]+this.y*e[Pi]+this.z*e[Li]+e[Di])}project(t){let e=t.values,i=1/(this.x*e[Bi]+this.y*e[Oi]+this.z*e[Vi]+e[zi]);return this.set((this.x*e[Ii]+this.y*e[Ti]+this.z*e[ki]+e[Ei])*i,(this.x*e[Ci]+this.y*e[Ri]+this.z*e[Yi]+e[Fi])*i,(this.x*e[Xi]+this.y*e[Pi]+this.z*e[Li]+e[Di])*i)}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}distance(t){let e=t.x-this.x,i=t.y-this.y,s=t.z-this.z;return Math.sqrt(e*e+i*i+s*s)}},Ii=0,Ti=4,ki=8,Ei=12,Ci=1,Ri=5,Yi=9,Fi=13,Xi=2,Pi=6,Li=10,Di=14,Bi=3,Oi=7,Vi=11,zi=15,Ni=class{temp=new Float32Array(16);values=new Float32Array(16);constructor(){let t=this.values;t[Ii]=1,t[Ri]=1,t[Li]=1,t[zi]=1}set(t){return this.values.set(t),this}transpose(){let t=this.temp,e=this.values;return t[Ii]=e[Ii],t[Ti]=e[Ci],t[ki]=e[Xi],t[Ei]=e[Bi],t[Ci]=e[Ti],t[Ri]=e[Ri],t[Yi]=e[Pi],t[Fi]=e[Oi],t[Xi]=e[ki],t[Pi]=e[Yi],t[Li]=e[Li],t[Di]=e[Vi],t[Bi]=e[Ei],t[Oi]=e[Fi],t[Vi]=e[Di],t[zi]=e[zi],this.set(t)}identity(){let t=this.values;return t[Ii]=1,t[Ti]=0,t[ki]=0,t[Ei]=0,t[Ci]=0,t[Ri]=1,t[Yi]=0,t[Fi]=0,t[Xi]=0,t[Pi]=0,t[Li]=1,t[Di]=0,t[Bi]=0,t[Oi]=0,t[Vi]=0,t[zi]=1,this}invert(){let t=this.values,e=this.temp,i=t[Bi]*t[Pi]*t[Yi]*t[Ei]-t[Xi]*t[Oi]*t[Yi]*t[Ei]-t[Bi]*t[Ri]*t[Li]*t[Ei]+t[Ci]*t[Oi]*t[Li]*t[Ei]+t[Xi]*t[Ri]*t[Vi]*t[Ei]-t[Ci]*t[Pi]*t[Vi]*t[Ei]-t[Bi]*t[Pi]*t[ki]*t[Fi]+t[Xi]*t[Oi]*t[ki]*t[Fi]+t[Bi]*t[Ti]*t[Li]*t[Fi]-t[Ii]*t[Oi]*t[Li]*t[Fi]-t[Xi]*t[Ti]*t[Vi]*t[Fi]+t[Ii]*t[Pi]*t[Vi]*t[Fi]+t[Bi]*t[Ri]*t[ki]*t[Di]-t[Ci]*t[Oi]*t[ki]*t[Di]-t[Bi]*t[Ti]*t[Yi]*t[Di]+t[Ii]*t[Oi]*t[Yi]*t[Di]+t[Ci]*t[Ti]*t[Vi]*t[Di]-t[Ii]*t[Ri]*t[Vi]*t[Di]-t[Xi]*t[Ri]*t[ki]*t[zi]+t[Ci]*t[Pi]*t[ki]*t[zi]+t[Xi]*t[Ti]*t[Yi]*t[zi]-t[Ii]*t[Pi]*t[Yi]*t[zi]-t[Ci]*t[Ti]*t[Li]*t[zi]+t[Ii]*t[Ri]*t[Li]*t[zi];if(0==i)throw new Error("non-invertible matrix");let s=1/i;return e[Ii]=t[Yi]*t[Di]*t[Oi]-t[Fi]*t[Li]*t[Oi]+t[Fi]*t[Pi]*t[Vi]-t[Ri]*t[Di]*t[Vi]-t[Yi]*t[Pi]*t[zi]+t[Ri]*t[Li]*t[zi],e[Ti]=t[Ei]*t[Li]*t[Oi]-t[ki]*t[Di]*t[Oi]-t[Ei]*t[Pi]*t[Vi]+t[Ti]*t[Di]*t[Vi]+t[ki]*t[Pi]*t[zi]-t[Ti]*t[Li]*t[zi],e[ki]=t[ki]*t[Fi]*t[Oi]-t[Ei]*t[Yi]*t[Oi]+t[Ei]*t[Ri]*t[Vi]-t[Ti]*t[Fi]*t[Vi]-t[ki]*t[Ri]*t[zi]+t[Ti]*t[Yi]*t[zi],e[Ei]=t[Ei]*t[Yi]*t[Pi]-t[ki]*t[Fi]*t[Pi]-t[Ei]*t[Ri]*t[Li]+t[Ti]*t[Fi]*t[Li]+t[ki]*t[Ri]*t[Di]-t[Ti]*t[Yi]*t[Di],e[Ci]=t[Fi]*t[Li]*t[Bi]-t[Yi]*t[Di]*t[Bi]-t[Fi]*t[Xi]*t[Vi]+t[Ci]*t[Di]*t[Vi]+t[Yi]*t[Xi]*t[zi]-t[Ci]*t[Li]*t[zi],e[Ri]=t[ki]*t[Di]*t[Bi]-t[Ei]*t[Li]*t[Bi]+t[Ei]*t[Xi]*t[Vi]-t[Ii]*t[Di]*t[Vi]-t[ki]*t[Xi]*t[zi]+t[Ii]*t[Li]*t[zi],e[Yi]=t[Ei]*t[Yi]*t[Bi]-t[ki]*t[Fi]*t[Bi]-t[Ei]*t[Ci]*t[Vi]+t[Ii]*t[Fi]*t[Vi]+t[ki]*t[Ci]*t[zi]-t[Ii]*t[Yi]*t[zi],e[Fi]=t[ki]*t[Fi]*t[Xi]-t[Ei]*t[Yi]*t[Xi]+t[Ei]*t[Ci]*t[Li]-t[Ii]*t[Fi]*t[Li]-t[ki]*t[Ci]*t[Di]+t[Ii]*t[Yi]*t[Di],e[Xi]=t[Ri]*t[Di]*t[Bi]-t[Fi]*t[Pi]*t[Bi]+t[Fi]*t[Xi]*t[Oi]-t[Ci]*t[Di]*t[Oi]-t[Ri]*t[Xi]*t[zi]+t[Ci]*t[Pi]*t[zi],e[Pi]=t[Ei]*t[Pi]*t[Bi]-t[Ti]*t[Di]*t[Bi]-t[Ei]*t[Xi]*t[Oi]+t[Ii]*t[Di]*t[Oi]+t[Ti]*t[Xi]*t[zi]-t[Ii]*t[Pi]*t[zi],e[Li]=t[Ti]*t[Fi]*t[Bi]-t[Ei]*t[Ri]*t[Bi]+t[Ei]*t[Ci]*t[Oi]-t[Ii]*t[Fi]*t[Oi]-t[Ti]*t[Ci]*t[zi]+t[Ii]*t[Ri]*t[zi],e[Di]=t[Ei]*t[Ri]*t[Xi]-t[Ti]*t[Fi]*t[Xi]-t[Ei]*t[Ci]*t[Pi]+t[Ii]*t[Fi]*t[Pi]+t[Ti]*t[Ci]*t[Di]-t[Ii]*t[Ri]*t[Di],e[Bi]=t[Yi]*t[Pi]*t[Bi]-t[Ri]*t[Li]*t[Bi]-t[Yi]*t[Xi]*t[Oi]+t[Ci]*t[Li]*t[Oi]+t[Ri]*t[Xi]*t[Vi]-t[Ci]*t[Pi]*t[Vi],e[Oi]=t[Ti]*t[Li]*t[Bi]-t[ki]*t[Pi]*t[Bi]+t[ki]*t[Xi]*t[Oi]-t[Ii]*t[Li]*t[Oi]-t[Ti]*t[Xi]*t[Vi]+t[Ii]*t[Pi]*t[Vi],e[Vi]=t[ki]*t[Ri]*t[Bi]-t[Ti]*t[Yi]*t[Bi]-t[ki]*t[Ci]*t[Oi]+t[Ii]*t[Yi]*t[Oi]+t[Ti]*t[Ci]*t[Vi]-t[Ii]*t[Ri]*t[Vi],e[zi]=t[Ti]*t[Yi]*t[Xi]-t[ki]*t[Ri]*t[Xi]+t[ki]*t[Ci]*t[Pi]-t[Ii]*t[Yi]*t[Pi]-t[Ti]*t[Ci]*t[Li]+t[Ii]*t[Ri]*t[Li],t[Ii]=e[Ii]*s,t[Ti]=e[Ti]*s,t[ki]=e[ki]*s,t[Ei]=e[Ei]*s,t[Ci]=e[Ci]*s,t[Ri]=e[Ri]*s,t[Yi]=e[Yi]*s,t[Fi]=e[Fi]*s,t[Xi]=e[Xi]*s,t[Pi]=e[Pi]*s,t[Li]=e[Li]*s,t[Di]=e[Di]*s,t[Bi]=e[Bi]*s,t[Oi]=e[Oi]*s,t[Vi]=e[Vi]*s,t[zi]=e[zi]*s,this}determinant(){let t=this.values;return t[Bi]*t[Pi]*t[Yi]*t[Ei]-t[Xi]*t[Oi]*t[Yi]*t[Ei]-t[Bi]*t[Ri]*t[Li]*t[Ei]+t[Ci]*t[Oi]*t[Li]*t[Ei]+t[Xi]*t[Ri]*t[Vi]*t[Ei]-t[Ci]*t[Pi]*t[Vi]*t[Ei]-t[Bi]*t[Pi]*t[ki]*t[Fi]+t[Xi]*t[Oi]*t[ki]*t[Fi]+t[Bi]*t[Ti]*t[Li]*t[Fi]-t[Ii]*t[Oi]*t[Li]*t[Fi]-t[Xi]*t[Ti]*t[Vi]*t[Fi]+t[Ii]*t[Pi]*t[Vi]*t[Fi]+t[Bi]*t[Ri]*t[ki]*t[Di]-t[Ci]*t[Oi]*t[ki]*t[Di]-t[Bi]*t[Ti]*t[Yi]*t[Di]+t[Ii]*t[Oi]*t[Yi]*t[Di]+t[Ci]*t[Ti]*t[Vi]*t[Di]-t[Ii]*t[Ri]*t[Vi]*t[Di]-t[Xi]*t[Ri]*t[ki]*t[zi]+t[Ci]*t[Pi]*t[ki]*t[zi]+t[Xi]*t[Ti]*t[Yi]*t[zi]-t[Ii]*t[Pi]*t[Yi]*t[zi]-t[Ci]*t[Ti]*t[Li]*t[zi]+t[Ii]*t[Ri]*t[Li]*t[zi]}translate(t,e,i){let s=this.values;return s[Ei]+=t,s[Fi]+=e,s[Di]+=i,this}copy(){return(new Ni).set(this.values)}projection(t,e,i,s){this.identity();let r=1/Math.tan(i*(Math.PI/180)/2),n=(e+t)/(t-e),a=2*e*t/(t-e),o=this.values;return o[Ii]=r/s,o[Ci]=0,o[Xi]=0,o[Bi]=0,o[Ti]=0,o[Ri]=r,o[Pi]=0,o[Oi]=0,o[ki]=0,o[Yi]=0,o[Li]=n,o[Vi]=-1,o[Ei]=0,o[Fi]=0,o[Di]=a,o[zi]=0,this}ortho2d(t,e,i,s){return this.ortho(t,t+i,e,e+s,0,1)}ortho(t,e,i,s,r,n){this.identity();let a=2/(e-t),o=2/(s-i),h=-2/(n-r),l=-(e+t)/(e-t),c=-(s+i)/(s-i),u=-(n+r)/(n-r),d=this.values;return d[Ii]=a,d[Ci]=0,d[Xi]=0,d[Bi]=0,d[Ti]=0,d[Ri]=o,d[Pi]=0,d[Oi]=0,d[ki]=0,d[Yi]=0,d[Li]=h,d[Vi]=0,d[Ei]=l,d[Fi]=c,d[Di]=u,d[zi]=1,this}multiply(t){let e=this.temp,i=this.values,s=t.values;return e[Ii]=i[Ii]*s[Ii]+i[Ti]*s[Ci]+i[ki]*s[Xi]+i[Ei]*s[Bi],e[Ti]=i[Ii]*s[Ti]+i[Ti]*s[Ri]+i[ki]*s[Pi]+i[Ei]*s[Oi],e[ki]=i[Ii]*s[ki]+i[Ti]*s[Yi]+i[ki]*s[Li]+i[Ei]*s[Vi],e[Ei]=i[Ii]*s[Ei]+i[Ti]*s[Fi]+i[ki]*s[Di]+i[Ei]*s[zi],e[Ci]=i[Ci]*s[Ii]+i[Ri]*s[Ci]+i[Yi]*s[Xi]+i[Fi]*s[Bi],e[Ri]=i[Ci]*s[Ti]+i[Ri]*s[Ri]+i[Yi]*s[Pi]+i[Fi]*s[Oi],e[Yi]=i[Ci]*s[ki]+i[Ri]*s[Yi]+i[Yi]*s[Li]+i[Fi]*s[Vi],e[Fi]=i[Ci]*s[Ei]+i[Ri]*s[Fi]+i[Yi]*s[Di]+i[Fi]*s[zi],e[Xi]=i[Xi]*s[Ii]+i[Pi]*s[Ci]+i[Li]*s[Xi]+i[Di]*s[Bi],e[Pi]=i[Xi]*s[Ti]+i[Pi]*s[Ri]+i[Li]*s[Pi]+i[Di]*s[Oi],e[Li]=i[Xi]*s[ki]+i[Pi]*s[Yi]+i[Li]*s[Li]+i[Di]*s[Vi],e[Di]=i[Xi]*s[Ei]+i[Pi]*s[Fi]+i[Li]*s[Di]+i[Di]*s[zi],e[Bi]=i[Bi]*s[Ii]+i[Oi]*s[Ci]+i[Vi]*s[Xi]+i[zi]*s[Bi],e[Oi]=i[Bi]*s[Ti]+i[Oi]*s[Ri]+i[Vi]*s[Pi]+i[zi]*s[Oi],e[Vi]=i[Bi]*s[ki]+i[Oi]*s[Yi]+i[Vi]*s[Li]+i[zi]*s[Vi],e[zi]=i[Bi]*s[Ei]+i[Oi]*s[Fi]+i[Vi]*s[Di]+i[zi]*s[zi],this.set(this.temp)}multiplyLeft(t){let e=this.temp,i=this.values,s=t.values;return e[Ii]=s[Ii]*i[Ii]+s[Ti]*i[Ci]+s[ki]*i[Xi]+s[Ei]*i[Bi],e[Ti]=s[Ii]*i[Ti]+s[Ti]*i[Ri]+s[ki]*i[Pi]+s[Ei]*i[Oi],e[ki]=s[Ii]*i[ki]+s[Ti]*i[Yi]+s[ki]*i[Li]+s[Ei]*i[Vi],e[Ei]=s[Ii]*i[Ei]+s[Ti]*i[Fi]+s[ki]*i[Di]+s[Ei]*i[zi],e[Ci]=s[Ci]*i[Ii]+s[Ri]*i[Ci]+s[Yi]*i[Xi]+s[Fi]*i[Bi],e[Ri]=s[Ci]*i[Ti]+s[Ri]*i[Ri]+s[Yi]*i[Pi]+s[Fi]*i[Oi],e[Yi]=s[Ci]*i[ki]+s[Ri]*i[Yi]+s[Yi]*i[Li]+s[Fi]*i[Vi],e[Fi]=s[Ci]*i[Ei]+s[Ri]*i[Fi]+s[Yi]*i[Di]+s[Fi]*i[zi],e[Xi]=s[Xi]*i[Ii]+s[Pi]*i[Ci]+s[Li]*i[Xi]+s[Di]*i[Bi],e[Pi]=s[Xi]*i[Ti]+s[Pi]*i[Ri]+s[Li]*i[Pi]+s[Di]*i[Oi],e[Li]=s[Xi]*i[ki]+s[Pi]*i[Yi]+s[Li]*i[Li]+s[Di]*i[Vi],e[Di]=s[Xi]*i[Ei]+s[Pi]*i[Fi]+s[Li]*i[Di]+s[Di]*i[zi],e[Bi]=s[Bi]*i[Ii]+s[Oi]*i[Ci]+s[Vi]*i[Xi]+s[zi]*i[Bi],e[Oi]=s[Bi]*i[Ti]+s[Oi]*i[Ri]+s[Vi]*i[Pi]+s[zi]*i[Oi],e[Vi]=s[Bi]*i[ki]+s[Oi]*i[Yi]+s[Vi]*i[Li]+s[zi]*i[Vi],e[zi]=s[Bi]*i[Ei]+s[Oi]*i[Fi]+s[Vi]*i[Di]+s[zi]*i[zi],this.set(this.temp)}lookAt(t,e,i){let s=Ni.xAxis,r=Ni.yAxis,n=Ni.zAxis;n.setFrom(e).normalize(),s.setFrom(e).normalize(),s.cross(i).normalize(),r.setFrom(s).cross(n).normalize(),this.identity();let a=this.values;return a[Ii]=s.x,a[Ti]=s.y,a[ki]=s.z,a[Ci]=r.x,a[Ri]=r.y,a[Yi]=r.z,a[Xi]=-n.x,a[Pi]=-n.y,a[Li]=-n.z,Ni.tmpMatrix.identity(),Ni.tmpMatrix.values[Ei]=-t.x,Ni.tmpMatrix.values[Fi]=-t.y,Ni.tmpMatrix.values[Di]=-t.z,this.multiply(Ni.tmpMatrix),this}},_i=Ni;r(_i,"xAxis",new Mi),r(_i,"yAxis",new Mi),r(_i,"zAxis",new Mi),r(_i,"tmpMatrix",new Ni);var Ui=class{position=new Mi(0,0,0);direction=new Mi(0,0,-1);up=new Mi(0,1,0);near=0;far=100;zoom=1;viewportWidth=0;viewportHeight=0;projectionView=new _i;inverseProjectionView=new _i;projection=new _i;view=new _i;constructor(t,e){this.viewportWidth=t,this.viewportHeight=e,this.update()}update(){let t=this.projection,e=this.view,i=this.projectionView,s=this.inverseProjectionView,r=this.zoom,n=this.viewportWidth,a=this.viewportHeight;t.ortho(r*(-n/2),r*(n/2),r*(-a/2),r*(a/2),this.near,this.far),e.lookAt(this.position,this.direction,this.up),i.set(t.values),i.multiply(e),s.set(i.values).invert()}screenToWorld(t,e,i){let s=t.x,r=i-t.y-1;return t.x=2*s/e-1,t.y=2*r/i-1,t.z=2*t.z-1,t.project(this.inverseProjectionView),t}worldToScreen(t,e,i){return t.project(this.projectionView),t.x=e*(t.x+1)/2,t.y=i*(t.y+1)/2,t.z=(t.z+1)/2,t}setViewport(t,e){this.viewportWidth=t,this.viewportHeight=e}},Wi=class{element;mouseX=0;mouseY=0;buttonDown=!1;touch0=null;touch1=null;initialPinchDistance=0;listeners=new Array;eventListeners=[];constructor(t){this.element=t,this.setupCallbacks(t)}setupCallbacks(t){let e=e=>{if(e instanceof MouseEvent){let i=t.getBoundingClientRect();this.mouseX=e.clientX-i.left,this.mouseY=e.clientY-i.top,this.listeners.map((t=>{this.buttonDown?t.dragged&&t.dragged(this.mouseX,this.mouseY):t.moved&&t.moved(this.mouseX,this.mouseY)}))}},i=s=>{if(s instanceof MouseEvent){let r=t.getBoundingClientRect();this.mouseX=s.clientX-r.left,this.mouseY=s.clientY-r.top,this.buttonDown=!1,this.listeners.map((t=>{t.up&&t.up(this.mouseX,this.mouseY)})),document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",i)}};t.addEventListener("mousedown",(s=>{if(s instanceof MouseEvent){let r=t.getBoundingClientRect();this.mouseX=s.clientX-r.left,this.mouseY=s.clientY-r.top,this.buttonDown=!0,this.listeners.map((t=>{t.down&&t.down(this.mouseX,this.mouseY)})),document.addEventListener("mousemove",e),document.addEventListener("mouseup",i)}}),!0),t.addEventListener("mousemove",e,!0),t.addEventListener("mouseup",i,!0),t.addEventListener("wheel",(t=>{t.preventDefault();let e=t.deltaY;t.deltaMode==WheelEvent.DOM_DELTA_LINE&&(e*=8),t.deltaMode==WheelEvent.DOM_DELTA_PAGE&&(e*=24),this.listeners.map((e=>{e.wheel&&e.wheel(t.deltaY)}))}),!0),t.addEventListener("touchstart",(e=>{if(!this.touch0||!this.touch1){let i=e.changedTouches.item(0);if(!i)return;let s=t.getBoundingClientRect(),r=i.clientX-s.left,n=i.clientY-s.top,a=new qi(i.identifier,r,n);if(this.mouseX=r,this.mouseY=n,this.buttonDown=!0,this.touch0){if(!this.touch1){this.touch1=a;let t=this.touch1.x-this.touch0.x,e=this.touch1.x-this.touch0.x;this.initialPinchDistance=Math.sqrt(t*t+e*e),this.listeners.map((t=>{t.zoom&&t.zoom(this.initialPinchDistance,this.initialPinchDistance)}))}}else this.touch0=a,this.listeners.map((t=>{t.down&&t.down(a.x,a.y)}))}e.preventDefault()}),!1),t.addEventListener("touchmove",(e=>{if(this.touch0){var i=e.changedTouches;let n=t.getBoundingClientRect();for(var s=0;s<i.length;s++){var r=i[s];let t=r.clientX-n.left,e=r.clientY-n.top;this.touch0.identifier===r.identifier&&(this.touch0.x=this.mouseX=t,this.touch0.y=this.mouseY=e,this.listeners.map((i=>{i.dragged&&i.dragged(t,e)}))),this.touch1&&this.touch1.identifier===r.identifier&&(this.touch1.x=this.mouseX=t,this.touch1.y=this.mouseY=e)}if(this.touch0&&this.touch1){let t=this.touch1.x-this.touch0.x,e=this.touch1.x-this.touch0.x,i=Math.sqrt(t*t+e*e);this.listeners.map((t=>{t.zoom&&t.zoom(this.initialPinchDistance,i)}))}}e.preventDefault()}),!1);let s=e=>{if(this.touch0){var i=e.changedTouches;let n=t.getBoundingClientRect();for(var s=0;s<i.length;s++){var r=i[s];let t=r.clientX-n.left,e=r.clientY-n.top;if(this.touch0.identifier===r.identifier){if(this.touch0=null,this.mouseX=t,this.mouseY=e,this.listeners.map((i=>{i.up&&i.up(t,e)})),!this.touch1){this.buttonDown=!1;break}this.touch0=this.touch1,this.touch1=null,this.mouseX=this.touch0.x,this.mouseX=this.touch0.x,this.buttonDown=!0,this.listeners.map((t=>{t.down&&t.down(this.touch0.x,this.touch0.y)}))}this.touch1&&this.touch1.identifier&&(this.touch1=null)}}e.preventDefault()};t.addEventListener("touchend",s,!1),t.addEventListener("touchcancel",s)}addListener(t){this.listeners.push(t)}removeListener(t){let e=this.listeners.indexOf(t);e>-1&&this.listeners.splice(e,1)}},qi=class{constructor(t,e,i){this.identifier=t,this.x=e,this.y=i}},Gi=class{constructor(t,e){this.canvas=t,this.camera=e;let i=0,s=0,r=0,n=0,a=0,o=0,h=0;new Wi(t).addListener({down:(t,l)=>{i=e.position.x,s=e.position.y,r=a=t,n=o=l,h=e.zoom},dragged:(h,l)=>{let c=h-r,u=l-n,d=e.screenToWorld(new Mi(0,0),t.clientWidth,t.clientHeight),f=e.screenToWorld(new Mi(c,u),t.clientWidth,t.clientHeight).sub(d);e.position.set(i-f.x,s-f.y,0),e.update(),a=h,o=l},wheel:i=>{let s=i/200*e.zoom,r=e.zoom+s;if(r>0){let s=0,n=0;if(i<0)s=a,n=o;else{let e=new Mi(t.clientWidth/2+15,t.clientHeight/2),i=a-e.x,r=t.clientHeight-1-o-e.y;s=e.x-i,n=t.clientHeight-1-e.y+r}let h=e.screenToWorld(new Mi(s,n),t.clientWidth,t.clientHeight);e.zoom=r,e.update();let l=e.screenToWorld(new Mi(s,n),t.clientWidth,t.clientHeight);e.position.add(h.sub(l)),e.update()}},zoom:(t,i)=>{let s=t/i;e.zoom=h*s},up:(t,e)=>{a=t,o=e},moved:(t,e)=>{a=t,o=e}})}},Hi=class{constructor(t,e,i){this.vertexShader=e,this.fragmentShader=i,this.vsSource=e,this.fsSource=i,this.context=t instanceof yi?t:new yi(t),this.context.addRestorable(this),this.compile()}context;vs=null;vsSource;fs=null;fsSource;program=null;tmp2x2=new Float32Array(4);tmp3x3=new Float32Array(9);tmp4x4=new Float32Array(16);getProgram(){return this.program}getVertexShader(){return this.vertexShader}getFragmentShader(){return this.fragmentShader}getVertexShaderSource(){return this.vsSource}getFragmentSource(){return this.fsSource}compile(){let t=this.context.gl;try{if(this.vs=this.compileShader(t.VERTEX_SHADER,this.vertexShader),!this.vs)throw new Error("Couldn't compile vertex shader.");if(this.fs=this.compileShader(t.FRAGMENT_SHADER,this.fragmentShader),!this.fs)throw new Error("Couldn#t compile fragment shader.");this.program=this.compileProgram(this.vs,this.fs)}catch(t){throw this.dispose(),t}}compileShader(t,e){let i=this.context.gl,s=i.createShader(t);if(!s)throw new Error("Couldn't create shader.");if(i.shaderSource(s,e),i.compileShader(s),!i.getShaderParameter(s,i.COMPILE_STATUS)){let t="Couldn't compile shader: "+i.getShaderInfoLog(s);if(i.deleteShader(s),!i.isContextLost())throw new Error(t)}return s}compileProgram(t,e){let i=this.context.gl,s=i.createProgram();if(!s)throw new Error("Couldn't compile program.");if(i.attachShader(s,t),i.attachShader(s,e),i.linkProgram(s),!i.getProgramParameter(s,i.LINK_STATUS)){let t="Couldn't compile shader program: "+i.getProgramInfoLog(s);if(i.deleteProgram(s),!i.isContextLost())throw new Error(t)}return s}restore(){this.compile()}bind(){this.context.gl.useProgram(this.program)}unbind(){this.context.gl.useProgram(null)}setUniformi(t,e){this.context.gl.uniform1i(this.getUniformLocation(t),e)}setUniformf(t,e){this.context.gl.uniform1f(this.getUniformLocation(t),e)}setUniform2f(t,e,i){this.context.gl.uniform2f(this.getUniformLocation(t),e,i)}setUniform3f(t,e,i,s){this.context.gl.uniform3f(this.getUniformLocation(t),e,i,s)}setUniform4f(t,e,i,s,r){this.context.gl.uniform4f(this.getUniformLocation(t),e,i,s,r)}setUniform2x2f(t,e){let i=this.context.gl;this.tmp2x2.set(e),i.uniformMatrix2fv(this.getUniformLocation(t),!1,this.tmp2x2)}setUniform3x3f(t,e){let i=this.context.gl;this.tmp3x3.set(e),i.uniformMatrix3fv(this.getUniformLocation(t),!1,this.tmp3x3)}setUniform4x4f(t,e){let i=this.context.gl;this.tmp4x4.set(e),i.uniformMatrix4fv(this.getUniformLocation(t),!1,this.tmp4x4)}getUniformLocation(t){let e=this.context.gl;if(!this.program)throw new Error("Shader not compiled.");let i=e.getUniformLocation(this.program,t);if(!i&&!e.isContextLost())throw new Error(`Couldn't find location for uniform ${t}`);return i}getAttributeLocation(t){let e=this.context.gl;if(!this.program)throw new Error("Shader not compiled.");let i=e.getAttribLocation(this.program,t);if(-1==i&&!e.isContextLost())throw new Error(`Couldn't find location for attribute ${t}`);return i}dispose(){this.context.removeRestorable(this);let t=this.context.gl;this.vs&&(t.deleteShader(this.vs),this.vs=null),this.fs&&(t.deleteShader(this.fs),this.fs=null),this.program&&(t.deleteProgram(this.program),this.program=null)}static newColoredTextured(t){let e=`\nattribute vec4 ${Hi.POSITION};\nattribute vec4 ${Hi.COLOR};\nattribute vec2 ${Hi.TEXCOORDS};\nuniform mat4 ${Hi.MVP_MATRIX};\nvarying vec4 v_color;\nvarying vec2 v_texCoords;\n\nvoid main () {\n\tv_color = ${Hi.COLOR};\n\tv_texCoords = ${Hi.TEXCOORDS};\n\tgl_Position = ${Hi.MVP_MATRIX} * ${Hi.POSITION};\n}\n`;return new Hi(t,e,"\n#ifdef GL_ES\n\t#define LOWP lowp\n\tprecision mediump float;\n#else\n\t#define LOWP\n#endif\nvarying LOWP vec4 v_color;\nvarying vec2 v_texCoords;\nuniform sampler2D u_texture;\n\nvoid main () {\n\tgl_FragColor = v_color * texture2D(u_texture, v_texCoords);\n}\n")}static newTwoColoredTextured(t){let e=`\nattribute vec4 ${Hi.POSITION};\nattribute vec4 ${Hi.COLOR};\nattribute vec4 ${Hi.COLOR2};\nattribute vec2 ${Hi.TEXCOORDS};\nuniform mat4 ${Hi.MVP_MATRIX};\nvarying vec4 v_light;\nvarying vec4 v_dark;\nvarying vec2 v_texCoords;\n\nvoid main () {\n\tv_light = ${Hi.COLOR};\n\tv_dark = ${Hi.COLOR2};\n\tv_texCoords = ${Hi.TEXCOORDS};\n\tgl_Position = ${Hi.MVP_MATRIX} * ${Hi.POSITION};\n}\n`;return new Hi(t,e,"\n#ifdef GL_ES\n\t#define LOWP lowp\n\tprecision mediump float;\n#else\n\t#define LOWP\n#endif\nvarying LOWP vec4 v_light;\nvarying LOWP vec4 v_dark;\nvarying vec2 v_texCoords;\nuniform sampler2D u_texture;\n\nvoid main () {\n\tvec4 texColor = texture2D(u_texture, v_texCoords);\n\tgl_FragColor.a = texColor.a * v_light.a;\n\tgl_FragColor.rgb = ((texColor.a - 1.0) * v_dark.a + 1.0 - texColor.rgb) * v_dark.rgb + texColor.rgb * v_light.rgb;\n}\n")}static newColored(t){let e=`\nattribute vec4 ${Hi.POSITION};\nattribute vec4 ${Hi.COLOR};\nuniform mat4 ${Hi.MVP_MATRIX};\nvarying vec4 v_color;\n\nvoid main () {\n\tv_color = ${Hi.COLOR};\n\tgl_Position = ${Hi.MVP_MATRIX} * ${Hi.POSITION};\n}\n`;return new Hi(t,e,"\n#ifdef GL_ES\n\t#define LOWP lowp\n\tprecision mediump float;\n#else\n\t#define LOWP\n#endif\nvarying LOWP vec4 v_color;\n\nvoid main () {\n\tgl_FragColor = v_color;\n}\n")}},ji=Hi;r(ji,"MVP_MATRIX","u_projTrans"),r(ji,"POSITION","a_position"),r(ji,"COLOR","a_color"),r(ji,"COLOR2","a_color2"),r(ji,"TEXCOORDS","a_texCoords"),r(ji,"SAMPLER","u_texture");var Zi=class{constructor(t,e,i,s){this.attributes=e,this.context=t instanceof yi?t:new yi(t),this.elementsPerVertex=0;for(let t=0;t<e.length;t++)this.elementsPerVertex+=e[t].numElements;this.vertices=new Float32Array(i*this.elementsPerVertex),this.indices=new Uint16Array(s),this.context.addRestorable(this)}context;vertices;verticesBuffer=null;verticesLength=0;dirtyVertices=!1;indices;indicesBuffer=null;indicesLength=0;dirtyIndices=!1;elementsPerVertex=0;getAttributes(){return this.attributes}maxVertices(){return this.vertices.length/this.elementsPerVertex}numVertices(){return this.verticesLength/this.elementsPerVertex}setVerticesLength(t){this.dirtyVertices=!0,this.verticesLength=t}getVertices(){return this.vertices}maxIndices(){return this.indices.length}numIndices(){return this.indicesLength}setIndicesLength(t){this.dirtyIndices=!0,this.indicesLength=t}getIndices(){return this.indices}getVertexSizeInFloats(){let t=0;for(var e=0;e<this.attributes.length;e++){t+=this.attributes[e].numElements}return t}setVertices(t){if(this.dirtyVertices=!0,t.length>this.vertices.length)throw Error("Mesh can't store more than "+this.maxVertices()+" vertices");this.vertices.set(t,0),this.verticesLength=t.length}setIndices(t){if(this.dirtyIndices=!0,t.length>this.indices.length)throw Error("Mesh can't store more than "+this.maxIndices()+" indices");this.indices.set(t,0),this.indicesLength=t.length}draw(t,e){this.drawWithOffset(t,e,0,this.indicesLength>0?this.indicesLength:this.verticesLength/this.elementsPerVertex)}drawWithOffset(t,e,i,s){let r=this.context.gl;(this.dirtyVertices||this.dirtyIndices)&&this.update(),this.bind(t),this.indicesLength>0?r.drawElements(e,s,r.UNSIGNED_SHORT,2*i):r.drawArrays(e,i,s),this.unbind(t)}bind(t){let e=this.context.gl;e.bindBuffer(e.ARRAY_BUFFER,this.verticesBuffer);let i=0;for(let s=0;s<this.attributes.length;s++){let r=this.attributes[s],n=t.getAttributeLocation(r.name);e.enableVertexAttribArray(n),e.vertexAttribPointer(n,r.numElements,e.FLOAT,!1,4*this.elementsPerVertex,4*i),i+=r.numElements}this.indicesLength>0&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indicesBuffer)}unbind(t){let e=this.context.gl;for(let i=0;i<this.attributes.length;i++){let s=this.attributes[i],r=t.getAttributeLocation(s.name);e.disableVertexAttribArray(r)}e.bindBuffer(e.ARRAY_BUFFER,null),this.indicesLength>0&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)}update(){let t=this.context.gl;this.dirtyVertices&&(this.verticesBuffer||(this.verticesBuffer=t.createBuffer()),t.bindBuffer(t.ARRAY_BUFFER,this.verticesBuffer),t.bufferData(t.ARRAY_BUFFER,this.vertices.subarray(0,this.verticesLength),t.DYNAMIC_DRAW),this.dirtyVertices=!1),this.dirtyIndices&&(this.indicesBuffer||(this.indicesBuffer=t.createBuffer()),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indicesBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices.subarray(0,this.indicesLength),t.DYNAMIC_DRAW),this.dirtyIndices=!1)}restore(){this.verticesBuffer=null,this.indicesBuffer=null,this.update()}dispose(){this.context.removeRestorable(this);let t=this.context.gl;t.deleteBuffer(this.verticesBuffer),t.deleteBuffer(this.indicesBuffer)}},Ki=class{constructor(t,e,i){this.name=t,this.type=e,this.numElements=i}},Ji=class extends Ki{constructor(){super(ji.POSITION,is.Float,2)}},Qi=class extends Ki{constructor(){super(ji.POSITION,is.Float,3)}},$i=class extends Ki{constructor(t=0){super(ji.TEXCOORDS+(0==t?"":t),is.Float,2)}},ts=class extends Ki{constructor(){super(ji.COLOR,is.Float,4)}},es=class extends Ki{constructor(){super(ji.COLOR2,is.Float,4)}},is=(t=>(t[t.Float=0]="Float",t))(is||{}),ss=class{context;drawCalls=0;isDrawing=!1;mesh;shader=null;lastTexture=null;verticesLength=0;indicesLength=0;srcColorBlend;srcAlphaBlend;dstBlend;cullWasEnabled=!1;constructor(t,e=!0,i=10920){if(i>10920)throw new Error("Can't have more than 10920 triangles per batch: "+i);this.context=t instanceof yi?t:new yi(t);let s=e?[new Ji,new ts,new $i,new es]:[new Ji,new ts,new $i];this.mesh=new Zi(t,s,i,3*i);let r=this.context.gl;this.srcColorBlend=r.SRC_ALPHA,this.srcAlphaBlend=r.ONE,this.dstBlend=r.ONE_MINUS_SRC_ALPHA}begin(t){if(this.isDrawing)throw new Error("PolygonBatch is already drawing. Call PolygonBatch.end() before calling PolygonBatch.begin()");this.drawCalls=0,this.shader=t,this.lastTexture=null,this.isDrawing=!0;let e=this.context.gl;e.enable(e.BLEND),e.blendFuncSeparate(this.srcColorBlend,this.dstBlend,this.srcAlphaBlend,this.dstBlend),ss.disableCulling&&(this.cullWasEnabled=e.isEnabled(e.CULL_FACE),this.cullWasEnabled&&e.disable(e.CULL_FACE))}setBlendMode(t,e){const i=ss.blendModesGL[t],s=e?i.srcRgbPma:i.srcRgb,r=i.srcAlpha,n=i.dstRgb;if(this.srcColorBlend==s&&this.srcAlphaBlend==r&&this.dstBlend==n)return;this.srcColorBlend=s,this.srcAlphaBlend=r,this.dstBlend=n,this.isDrawing&&this.flush(),this.context.gl.blendFuncSeparate(s,n,r,n)}draw(t,e,i){t!=this.lastTexture?(this.flush(),this.lastTexture=t):(this.verticesLength+e.length>this.mesh.getVertices().length||this.indicesLength+i.length>this.mesh.getIndices().length)&&this.flush();let s=this.mesh.numVertices();this.mesh.getVertices().set(e,this.verticesLength),this.verticesLength+=e.length,this.mesh.setVerticesLength(this.verticesLength);let r=this.mesh.getIndices();for(let t=this.indicesLength,e=0;e<i.length;t++,e++)r[t]=i[e]+s;this.indicesLength+=i.length,this.mesh.setIndicesLength(this.indicesLength)}flush(){if(0!=this.verticesLength){if(!this.lastTexture)throw new Error("No texture set.");if(!this.shader)throw new Error("No shader set.");this.lastTexture.bind(),this.mesh.draw(this.shader,this.context.gl.TRIANGLES),this.verticesLength=0,this.indicesLength=0,this.mesh.setVerticesLength(0),this.mesh.setIndicesLength(0),this.drawCalls++,ss.globalDrawCalls++}}end(){if(!this.isDrawing)throw new Error("PolygonBatch is not drawing. Call PolygonBatch.begin() before calling PolygonBatch.end()");(this.verticesLength>0||this.indicesLength>0)&&this.flush(),this.shader=null,this.lastTexture=null,this.isDrawing=!1;let t=this.context.gl;t.disable(t.BLEND),ss.disableCulling&&this.cullWasEnabled&&t.enable(t.CULL_FACE)}getDrawCalls(){return this.drawCalls}static getAndResetGlobalDrawCalls(){let t=ss.globalDrawCalls;return ss.globalDrawCalls=0,t}dispose(){this.mesh.dispose()}},rs=ss;r(rs,"disableCulling",!1),r(rs,"globalDrawCalls",0),r(rs,"blendModesGL",[{srcRgb:770,srcRgbPma:1,dstRgb:771,srcAlpha:1},{srcRgb:770,srcRgbPma:1,dstRgb:1,srcAlpha:1},{srcRgb:774,srcRgbPma:774,dstRgb:771,srcAlpha:1},{srcRgb:1,srcRgbPma:1,dstRgb:769,srcAlpha:1}]);var ns=class{context;isDrawing=!1;mesh;shapeType=as.Filled;color=new l(1,1,1,1);shader=null;vertexIndex=0;tmp=new v;srcColorBlend;srcAlphaBlend;dstBlend;constructor(t,e=10920){if(e>10920)throw new Error("Can't have more than 10920 triangles per batch: "+e);this.context=t instanceof yi?t:new yi(t),this.mesh=new Zi(t,[new Ji,new ts],e,0);let i=this.context.gl;this.srcColorBlend=i.SRC_ALPHA,this.srcAlphaBlend=i.ONE,this.dstBlend=i.ONE_MINUS_SRC_ALPHA}begin(t){if(this.isDrawing)throw new Error("ShapeRenderer.begin() has already been called");this.shader=t,this.vertexIndex=0,this.isDrawing=!0;let e=this.context.gl;e.enable(e.BLEND),e.blendFuncSeparate(this.srcColorBlend,this.dstBlend,this.srcAlphaBlend,this.dstBlend)}setBlendMode(t,e,i){if(this.srcColorBlend=t,this.srcAlphaBlend=e,this.dstBlend=i,this.isDrawing){this.flush(),this.context.gl.blendFuncSeparate(t,i,e,i)}}setColor(t){this.color.setFromColor(t)}setColorWith(t,e,i,s){this.color.set(t,e,i,s)}point(t,e,i){this.check(as.Point,1),i||(i=this.color),this.vertex(t,e,i)}line(t,e,i,s,r){this.check(as.Line,2);this.mesh.getVertices(),this.vertexIndex;r||(r=this.color),this.vertex(t,e,r),this.vertex(i,s,r)}triangle(t,e,i,s,r,n,a,o,h,l){this.check(t?as.Filled:as.Line,3);this.mesh.getVertices(),this.vertexIndex;o||(o=this.color),h||(h=this.color),l||(l=this.color),t?(this.vertex(e,i,o),this.vertex(s,r,h),this.vertex(n,a,l)):(this.vertex(e,i,o),this.vertex(s,r,h),this.vertex(s,r,o),this.vertex(n,a,h),this.vertex(n,a,o),this.vertex(e,i,h))}quad(t,e,i,s,r,n,a,o,h,l,c,u,d){this.check(t?as.Filled:as.Line,3);this.mesh.getVertices(),this.vertexIndex;l||(l=this.color),c||(c=this.color),u||(u=this.color),d||(d=this.color),t?(this.vertex(e,i,l),this.vertex(s,r,c),this.vertex(n,a,u),this.vertex(n,a,u),this.vertex(o,h,d),this.vertex(e,i,l)):(this.vertex(e,i,l),this.vertex(s,r,c),this.vertex(s,r,c),this.vertex(n,a,u),this.vertex(n,a,u),this.vertex(o,h,d),this.vertex(o,h,d),this.vertex(e,i,l))}rect(t,e,i,s,r,n){this.quad(t,e,i,e+s,i,e+s,i+r,e,i+r,n,n,n,n)}rectLine(t,e,i,s,r,n,a){this.check(t?as.Filled:as.Line,8),a||(a=this.color);let o=this.tmp.set(r-i,e-s);o.normalize(),n*=.5;let h=o.x*n,l=o.y*n;t?(this.vertex(e+h,i+l,a),this.vertex(e-h,i-l,a),this.vertex(s+h,r+l,a),this.vertex(s-h,r-l,a),this.vertex(s+h,r+l,a),this.vertex(e-h,i-l,a)):(this.vertex(e+h,i+l,a),this.vertex(e-h,i-l,a),this.vertex(s+h,r+l,a),this.vertex(s-h,r-l,a),this.vertex(s+h,r+l,a),this.vertex(e+h,i+l,a),this.vertex(s-h,r-l,a),this.vertex(e-h,i-l,a))}x(t,e,i){this.line(t-i,e-i,t+i,e+i),this.line(t-i,e+i,t+i,e-i)}polygon(t,e,i,s){if(i<3)throw new Error("Polygon must contain at least 3 vertices");this.check(as.Line,2*i),s||(s=this.color);this.mesh.getVertices(),this.vertexIndex;i<<=1;let r=t[e<<=1],n=t[e+1],a=e+i;for(let o=e,h=e+i-2;o<h;o+=2){let e=t[o],i=t[o+1],h=0,l=0;o+2>=a?(h=r,l=n):(h=t[o+2],l=t[o+3]),this.vertex(e,i,s),this.vertex(h,l,s)}}circle(t,e,i,s,r,n=0){if(0==n&&(n=Math.max(1,6*u.cbrt(s)|0)),n<=0)throw new Error("segments must be > 0.");r||(r=this.color);let a=2*u.PI/n,o=Math.cos(a),h=Math.sin(a),l=s,c=0;if(t){this.check(as.Filled,3*n+3),n--;for(let t=0;t<n;t++){this.vertex(e,i,r),this.vertex(e+l,i+c,r);let t=l;l=o*l-h*c,c=h*t+o*c,this.vertex(e+l,i+c,r)}this.vertex(e,i,r),this.vertex(e+l,i+c,r)}else{this.check(as.Line,2*n+2);for(let t=0;t<n;t++){this.vertex(e+l,i+c,r);let t=l;l=o*l-h*c,c=h*t+o*c,this.vertex(e+l,i+c,r)}this.vertex(e+l,i+c,r)}l=s,c=0,this.vertex(e+l,i+c,r)}curve(t,e,i,s,r,n,a,o,h,l){this.check(as.Line,2*h+2),l||(l=this.color);let c=1/h,u=c*c,d=c*c*c,f=3*c,p=3*u,m=6*u,g=6*d,x=t-2*i+r,w=e-2*s+n,v=3*(i-r)-t+a,y=3*(s-n)-e+o,b=t,A=e,S=(i-t)*f+x*p+v*d,M=(s-e)*f+w*p+y*d,I=x*m+v*g,T=w*m+y*g,k=v*g,E=y*g;for(;h-- >0;)this.vertex(b,A,l),b+=S,A+=M,S+=I,M+=T,I+=k,T+=E,this.vertex(b,A,l);this.vertex(b,A,l),this.vertex(a,o,l)}vertex(t,e,i){let s=this.vertexIndex,r=this.mesh.getVertices();r[s++]=t,r[s++]=e,r[s++]=i.r,r[s++]=i.g,r[s++]=i.b,r[s++]=i.a,this.vertexIndex=s}end(){if(!this.isDrawing)throw new Error("ShapeRenderer.begin() has not been called");this.flush();let t=this.context.gl;t.disable(t.BLEND),this.isDrawing=!1}flush(){if(0!=this.vertexIndex){if(!this.shader)throw new Error("No shader set.");this.mesh.setVerticesLength(this.vertexIndex),this.mesh.draw(this.shader,this.shapeType),this.vertexIndex=0}}check(t,e){if(!this.isDrawing)throw new Error("ShapeRenderer.begin() has not been called");if(this.shapeType==t){if(!(this.mesh.maxVertices()-this.mesh.numVertices()<e))return;this.flush()}else this.flush(),this.shapeType=t}dispose(){this.mesh.dispose()}},as=(t=>(t[t.Point=0]="Point",t[t.Line=1]="Line",t[t.Filled=4]="Filled",t))(as||{}),os=class{boneLineColor=new l(1,0,0,1);boneOriginColor=new l(0,1,0,1);attachmentLineColor=new l(0,0,1,.5);triangleLineColor=new l(1,.64,0,.5);pathColor=(new l).setFromString("FF7F00");clipColor=new l(.8,0,0,2);aabbColor=new l(0,1,0,.5);drawBones=!0;drawRegionAttachments=!0;drawBoundingBoxes=!0;drawMeshHull=!0;drawMeshTriangles=!0;drawPaths=!0;drawSkeletonXY=!1;drawClipping=!0;premultipliedAlpha=!1;scale=1;boneWidth=2;context;bounds=new ui;temp=new Array;vertices=g.newFloatArray(2048);constructor(t){this.context=t instanceof yi?t:new yi(t)}draw(t,e,i){let s=e.x,r=e.y,n=this.context.gl,a=this.premultipliedAlpha?n.ONE:n.SRC_ALPHA;t.setBlendMode(a,n.ONE,n.ONE_MINUS_SRC_ALPHA);let o=e.bones;if(this.drawBones){t.setColor(this.boneLineColor);for(let e=0,s=o.length;e<s;e++){let s=o[e];if(i&&i.indexOf(s.data.name)>-1)continue;if(!s.parent)continue;let r=s.data.length*s.a+s.worldX,n=s.data.length*s.c+s.worldY;t.rectLine(!0,s.worldX,s.worldY,r,n,this.boneWidth*this.scale)}this.drawSkeletonXY&&t.x(s,r,4*this.scale)}if(this.drawRegionAttachments){t.setColor(this.attachmentLineColor);let i=e.slots;for(let e=0,s=i.length;e<s;e++){let s=i[e],r=s.getAttachment();if(r instanceof ne){let e=r,i=this.vertices;e.computeWorldVertices(s,i,0,2),t.line(i[0],i[1],i[2],i[3]),t.line(i[2],i[3],i[4],i[5]),t.line(i[4],i[5],i[6],i[7]),t.line(i[6],i[7],i[0],i[1])}}}if(this.drawMeshHull||this.drawMeshTriangles){let i=e.slots;for(let e=0,s=i.length;e<s;e++){let s=i[e];if(!s.bone.active)continue;let r=s.getAttachment();if(!(r instanceof ee))continue;let n=r,a=this.vertices;n.computeWorldVertices(s,0,n.worldVerticesLength,a,0,2);let o=n.triangles,h=n.hullLength;if(this.drawMeshTriangles){t.setColor(this.triangleLineColor);for(let e=0,i=o.length;e<i;e+=3){let i=2*o[e],s=2*o[e+1],r=2*o[e+2];t.triangle(!1,a[i],a[i+1],a[s],a[s+1],a[r],a[r+1])}}if(this.drawMeshHull&&h>0){t.setColor(this.attachmentLineColor),h=2*(h>>1);let e=a[h-2],i=a[h-1];for(let s=0,r=h;s<r;s+=2){let r=a[s],n=a[s+1];t.line(r,n,e,i),e=r,i=n}}}}if(this.drawBoundingBoxes){let i=this.bounds;i.update(e,!0),t.setColor(this.aabbColor),t.rect(!1,i.minX,i.minY,i.getWidth(),i.getHeight());let s=i.polygons,r=i.boundingBoxes;for(let e=0,i=s.length;e<i;e++){let i=s[e];t.setColor(r[e].color),t.polygon(i,0,i.length)}}if(this.drawPaths){let i=e.slots;for(let e=0,s=i.length;e<s;e++){let s=i[e];if(!s.bone.active)continue;let r=s.getAttachment();if(!(r instanceof ie))continue;let n=r,a=n.worldVerticesLength,o=this.temp=g.setArraySize(this.temp,a,0);n.computeWorldVertices(s,0,a,o,0,2);let h=this.pathColor,l=o[2],c=o[3],u=0,d=0;if(n.closed){t.setColor(h);let e=o[0],i=o[1],s=o[a-2],r=o[a-1];u=o[a-4],d=o[a-3],t.curve(l,c,e,i,s,r,u,d,32),t.setColor(os.LIGHT_GRAY),t.line(l,c,e,i),t.line(u,d,s,r)}a-=4;for(let e=4;e<a;e+=6){let i=o[e],s=o[e+1],r=o[e+2],n=o[e+3];u=o[e+4],d=o[e+5],t.setColor(h),t.curve(l,c,i,s,r,n,u,d,32),t.setColor(os.LIGHT_GRAY),t.line(l,c,i,s),t.line(u,d,r,n),l=u,c=d}}}if(this.drawBones){t.setColor(this.boneOriginColor);for(let e=0,s=o.length;e<s;e++){let s=o[e];i&&i.indexOf(s.data.name)>-1||t.circle(!0,s.worldX,s.worldY,3*this.scale,this.boneOriginColor,8)}}if(this.drawClipping){let i=e.slots;t.setColor(this.clipColor);for(let e=0,s=i.length;e<s;e++){let s=i[e];if(!s.bone.active)continue;let r=s.getAttachment();if(!(r instanceof qt))continue;let n=r,a=n.worldVerticesLength,o=this.temp=g.setArraySize(this.temp,a,0);n.computeWorldVertices(s,0,a,o,0,2);for(let e=0,i=o.length;e<i;e+=2){let i=o[e],s=o[e+1],r=o[(e+2)%o.length],n=o[(e+3)%o.length];t.line(i,s,r,n)}}}}dispose(){}},hs=os;r(hs,"LIGHT_GRAY",new l(192/255,192/255,192/255,1)),r(hs,"GREEN",new l(0,1,0,1));var ls=class{constructor(t,e,i){this.vertices=t,this.numVertices=e,this.numFloats=i}},cs=class{premultipliedAlpha=!1;tempColor=new l;tempColor2=new l;vertices;vertexSize=8;twoColorTint=!1;renderable=new ls([],0,0);clipper=new fi;temp=new v;temp2=new v;temp3=new l;temp4=new l;constructor(t,e=!0){this.twoColorTint=e,e&&(this.vertexSize+=4),this.vertices=g.newFloatArray(1024*this.vertexSize)}draw(t,e,i=-1,s=-1,r=null){let n,a,o,h=this.clipper,l=this.premultipliedAlpha,c=this.twoColorTint,u=null,d=this.renderable,f=e.drawOrder,p=e.color,m=c?12:8,x=!1;-1==i&&(x=!0);for(let e=0,w=f.length;e<w;e++){let w=h.isClipping()?2:m,v=f[e];if(!v.bone.active){h.clipEndWithSlot(v);continue}if(i>=0&&i==v.data.index&&(x=!0),!x){h.clipEndWithSlot(v);continue}s>=0&&s==v.data.index&&(x=!1);let y,b=v.getAttachment();if(b instanceof ne){let t=b;d.vertices=this.vertices,d.numVertices=4,d.numFloats=w<<2,t.computeWorldVertices(v,d.vertices,0,w),a=cs.QUAD_TRIANGLES,n=t.uvs,y=t.region.texture,o=t.color}else{if(!(b instanceof ee)){if(b instanceof qt){let t=b;h.clipStart(v,t);continue}h.clipEndWithSlot(v);continue}{let t=b;d.vertices=this.vertices,d.numVertices=t.worldVerticesLength>>1,d.numFloats=d.numVertices*w,d.numFloats>d.vertices.length&&(d.vertices=this.vertices=g.newFloatArray(d.numFloats)),t.computeWorldVertices(v,0,t.worldVerticesLength,d.vertices,0,w),a=t.triangles,y=t.region.texture,n=t.uvs,o=t.color}}if(y){let e=v.color,i=this.tempColor;i.r=p.r*e.r*o.r,i.g=p.g*e.g*o.g,i.b=p.b*e.b*o.b,i.a=p.a*e.a*o.a,l&&(i.r*=i.a,i.g*=i.a,i.b*=i.a);let s=this.tempColor2;v.darkColor?(l?(s.r=v.darkColor.r*i.a,s.g=v.darkColor.g*i.a,s.b=v.darkColor.b*i.a):s.setFromColor(v.darkColor),s.a=l?1:0):s.set(0,0,0,1);let f=v.data.blendMode;if(f!=u&&(u=f,t.setBlendMode(u,l)),h.isClipping()){h.clipTriangles(d.vertices,d.numFloats,a,a.length,n,i,s,c);let e=new Float32Array(h.clippedVertices),o=h.clippedTriangles;r&&r(e,e.length,m),t.draw(y,e,o)}else{let e=d.vertices;if(c)for(let t=2,r=0,a=d.numFloats;t<a;t+=m,r+=2)e[t]=i.r,e[t+1]=i.g,e[t+2]=i.b,e[t+3]=i.a,e[t+4]=n[r],e[t+5]=n[r+1],e[t+6]=s.r,e[t+7]=s.g,e[t+8]=s.b,e[t+9]=s.a;else for(let t=2,s=0,r=d.numFloats;t<r;t+=m,s+=2)e[t]=i.r,e[t+1]=i.g,e[t+2]=i.b,e[t+3]=i.a,e[t+4]=n[s],e[t+5]=n[s+1];let o=d.vertices.subarray(0,d.numFloats);r&&r(d.vertices,d.numFloats,m),t.draw(y,o,a)}}h.clipEndWithSlot(v)}h.clipEnd()}},us=cs;r(us,"QUAD_TRIANGLES",[0,1,2,2,3,0]);var ds,fs,ps,ms=[0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0],gs=[0,1,2,2,3,0],xs=new l(1,1,1,1),ws=class{context;canvas;camera;batcher;twoColorTint=!1;batcherShader;shapes;shapesShader;activeRenderer=null;skeletonRenderer;skeletonDebugRenderer;constructor(t,e,i=!0){this.canvas=t,this.context=e instanceof yi?e:new yi(e),this.twoColorTint=i,this.camera=new Ui(t.width,t.height),this.batcherShader=i?ji.newTwoColoredTextured(this.context):ji.newColoredTextured(this.context),this.batcher=new rs(this.context,i),this.shapesShader=ji.newColored(this.context),this.shapes=new ns(this.context),this.skeletonRenderer=new us(this.context,i),this.skeletonDebugRenderer=new hs(this.context)}dispose(){this.batcher.dispose(),this.batcherShader.dispose(),this.shapes.dispose(),this.shapesShader.dispose(),this.skeletonDebugRenderer.dispose()}begin(){this.camera.update(),this.enableRenderer(this.batcher)}drawSkeleton(t,e=!1,i=-1,s=-1,r=null){this.enableRenderer(this.batcher),this.skeletonRenderer.premultipliedAlpha=e,this.skeletonRenderer.draw(this.batcher,t,i,s,r)}drawSkeletonDebug(t,e=!1,i){this.enableRenderer(this.shapes),this.skeletonDebugRenderer.premultipliedAlpha=e,this.skeletonDebugRenderer.draw(this.shapes,t,i)}drawTexture(t,e,i,s,r,n){this.enableRenderer(this.batcher),n||(n=xs);var a=0;ms[a++]=e,ms[a++]=i,ms[a++]=n.r,ms[a++]=n.g,ms[a++]=n.b,ms[a++]=n.a,ms[a++]=0,ms[a++]=1,this.twoColorTint&&(ms[a++]=0,ms[a++]=0,ms[a++]=0,ms[a++]=0),ms[a++]=e+s,ms[a++]=i,ms[a++]=n.r,ms[a++]=n.g,ms[a++]=n.b,ms[a++]=n.a,ms[a++]=1,ms[a++]=1,this.twoColorTint&&(ms[a++]=0,ms[a++]=0,ms[a++]=0,ms[a++]=0),ms[a++]=e+s,ms[a++]=i+r,ms[a++]=n.r,ms[a++]=n.g,ms[a++]=n.b,ms[a++]=n.a,ms[a++]=1,ms[a++]=0,this.twoColorTint&&(ms[a++]=0,ms[a++]=0,ms[a++]=0,ms[a++]=0),ms[a++]=e,ms[a++]=i+r,ms[a++]=n.r,ms[a++]=n.g,ms[a++]=n.b,ms[a++]=n.a,ms[a++]=0,ms[a++]=0,this.twoColorTint&&(ms[a++]=0,ms[a++]=0,ms[a++]=0,ms[a]=0),this.batcher.draw(t,ms,gs)}drawTextureUV(t,e,i,s,r,n,a,o,h,l){this.enableRenderer(this.batcher),l||(l=xs);var c=0;ms[c++]=e,ms[c++]=i,ms[c++]=l.r,ms[c++]=l.g,ms[c++]=l.b,ms[c++]=l.a,ms[c++]=n,ms[c++]=a,this.twoColorTint&&(ms[c++]=0,ms[c++]=0,ms[c++]=0,ms[c++]=0),ms[c++]=e+s,ms[c++]=i,ms[c++]=l.r,ms[c++]=l.g,ms[c++]=l.b,ms[c++]=l.a,ms[c++]=o,ms[c++]=a,this.twoColorTint&&(ms[c++]=0,ms[c++]=0,ms[c++]=0,ms[c++]=0),ms[c++]=e+s,ms[c++]=i+r,ms[c++]=l.r,ms[c++]=l.g,ms[c++]=l.b,ms[c++]=l.a,ms[c++]=o,ms[c++]=h,this.twoColorTint&&(ms[c++]=0,ms[c++]=0,ms[c++]=0,ms[c++]=0),ms[c++]=e,ms[c++]=i+r,ms[c++]=l.r,ms[c++]=l.g,ms[c++]=l.b,ms[c++]=l.a,ms[c++]=n,ms[c++]=h,this.twoColorTint&&(ms[c++]=0,ms[c++]=0,ms[c++]=0,ms[c]=0),this.batcher.draw(t,ms,gs)}drawTextureRotated(t,e,i,s,r,n,a,o,h){this.enableRenderer(this.batcher),h||(h=xs);let l=e+n,c=i+a,d=-n,f=-a,p=s-n,m=r-a,g=d,x=f,w=d,v=m,y=p,b=m,A=p,S=f,M=0,I=0,T=0,k=0,E=0,C=0,R=0,Y=0;if(0!=o){let t=u.cosDeg(o),e=u.sinDeg(o);M=t*g-e*x,I=e*g+t*x,R=t*w-e*v,Y=e*w+t*v,E=t*y-e*b,C=e*y+t*b,T=E+(M-R),k=C+(I-Y)}else M=g,I=x,R=w,Y=v,E=y,C=b,T=A,k=S;M+=l,I+=c,T+=l,k+=c,E+=l,C+=c,R+=l,Y+=c;var F=0;ms[F++]=M,ms[F++]=I,ms[F++]=h.r,ms[F++]=h.g,ms[F++]=h.b,ms[F++]=h.a,ms[F++]=0,ms[F++]=1,this.twoColorTint&&(ms[F++]=0,ms[F++]=0,ms[F++]=0,ms[F++]=0),ms[F++]=T,ms[F++]=k,ms[F++]=h.r,ms[F++]=h.g,ms[F++]=h.b,ms[F++]=h.a,ms[F++]=1,ms[F++]=1,this.twoColorTint&&(ms[F++]=0,ms[F++]=0,ms[F++]=0,ms[F++]=0),ms[F++]=E,ms[F++]=C,ms[F++]=h.r,ms[F++]=h.g,ms[F++]=h.b,ms[F++]=h.a,ms[F++]=1,ms[F++]=0,this.twoColorTint&&(ms[F++]=0,ms[F++]=0,ms[F++]=0,ms[F++]=0),ms[F++]=R,ms[F++]=Y,ms[F++]=h.r,ms[F++]=h.g,ms[F++]=h.b,ms[F++]=h.a,ms[F++]=0,ms[F++]=0,this.twoColorTint&&(ms[F++]=0,ms[F++]=0,ms[F++]=0,ms[F]=0),this.batcher.draw(t,ms,gs)}drawRegion(t,e,i,s,r,n){this.enableRenderer(this.batcher),n||(n=xs);var a=0;ms[a++]=e,ms[a++]=i,ms[a++]=n.r,ms[a++]=n.g,ms[a++]=n.b,ms[a++]=n.a,ms[a++]=t.u,ms[a++]=t.v2,this.twoColorTint&&(ms[a++]=0,ms[a++]=0,ms[a++]=0,ms[a++]=0),ms[a++]=e+s,ms[a++]=i,ms[a++]=n.r,ms[a++]=n.g,ms[a++]=n.b,ms[a++]=n.a,ms[a++]=t.u2,ms[a++]=t.v2,this.twoColorTint&&(ms[a++]=0,ms[a++]=0,ms[a++]=0,ms[a++]=0),ms[a++]=e+s,ms[a++]=i+r,ms[a++]=n.r,ms[a++]=n.g,ms[a++]=n.b,ms[a++]=n.a,ms[a++]=t.u2,ms[a++]=t.v,this.twoColorTint&&(ms[a++]=0,ms[a++]=0,ms[a++]=0,ms[a++]=0),ms[a++]=e,ms[a++]=i+r,ms[a++]=n.r,ms[a++]=n.g,ms[a++]=n.b,ms[a++]=n.a,ms[a++]=t.u,ms[a++]=t.v,this.twoColorTint&&(ms[a++]=0,ms[a++]=0,ms[a++]=0,ms[a]=0),this.batcher.draw(t.page.texture,ms,gs)}line(t,e,i,s,r,n){this.enableRenderer(this.shapes),this.shapes.line(t,e,i,s,r)}triangle(t,e,i,s,r,n,a,o,h,l){this.enableRenderer(this.shapes),this.shapes.triangle(t,e,i,s,r,n,a,o,h,l)}quad(t,e,i,s,r,n,a,o,h,l,c,u,d){this.enableRenderer(this.shapes),this.shapes.quad(t,e,i,s,r,n,a,o,h,l,c,u,d)}rect(t,e,i,s,r,n){this.enableRenderer(this.shapes),this.shapes.rect(t,e,i,s,r,n)}rectLine(t,e,i,s,r,n,a){this.enableRenderer(this.shapes),this.shapes.rectLine(t,e,i,s,r,n,a)}polygon(t,e,i,s){this.enableRenderer(this.shapes),this.shapes.polygon(t,e,i,s)}circle(t,e,i,s,r,n=0){this.enableRenderer(this.shapes),this.shapes.circle(t,e,i,s,r,n)}curve(t,e,i,s,r,n,a,o,h,l){this.enableRenderer(this.shapes),this.shapes.curve(t,e,i,s,r,n,a,o,h,l)}end(){this.activeRenderer===this.batcher?this.batcher.end():this.activeRenderer===this.shapes&&this.shapes.end(),this.activeRenderer=null}resize(t){let e=this.canvas;var i=window.devicePixelRatio||1,s=Math.round(e.clientWidth*i),r=Math.round(e.clientHeight*i);if(e.width==s&&e.height==r||(e.width=s,e.height=r),this.context.gl.viewport(0,0,e.width,e.height),t===vs.Expand)this.camera.setViewport(s,r);else if(t===vs.Fit){let t=e.width,i=e.height,s=this.camera.viewportWidth,r=this.camera.viewportHeight,n=r/s<i/t?s/t:r/i;this.camera.setViewport(t*n,i*n)}this.camera.update()}enableRenderer(t){this.activeRenderer!==t&&(this.end(),t instanceof rs?(this.batcherShader.bind(),this.batcherShader.setUniform4x4f(ji.MVP_MATRIX,this.camera.projectionView.values),this.batcherShader.setUniformi("u_texture",0),this.batcher.begin(this.batcherShader),this.activeRenderer=this.batcher):t instanceof ns?(this.shapesShader.bind(),this.shapesShader.setUniform4x4f(ji.MVP_MATRIX,this.camera.projectionView.values),this.shapes.begin(this.shapesShader),this.activeRenderer=this.shapes):this.activeRenderer=this.skeletonDebugRenderer)}},vs=(t=>(t[t.Stretch=0]="Stretch",t[t.Expand=1]="Expand",t[t.Fit=2]="Fit",t))(vs||{}),ys=0,bs=163,As=class{renderer;logo=null;spinner=null;angle=0;fadeOut=0;fadeIn=0;timeKeeper=new y;backgroundColor=new l(.135,.135,.135,1);tempColor=new l;constructor(t){if(this.renderer=t,this.timeKeeper.maxDelta=9,!fs){let t=navigator.userAgent.indexOf("Safari")>-1,e=()=>ys++;(fs=new Image).src=Ms,t||(fs.crossOrigin="anonymous"),fs.onload=e,(ds=new Image).src=Ss,t||(ds.crossOrigin="anonymous"),ds.onload=e}}dispose(){this.logo?.dispose(),this.spinner?.dispose()}draw(t=!1){if(ys<2||t&&this.fadeOut>1)return;this.timeKeeper.update();let e=Math.abs(Math.sin(this.timeKeeper.totalTime+.25));this.angle-=200*this.timeKeeper.delta*(1+1.5*Math.pow(e,5));let i=this.tempColor,s=this.renderer,r=s.canvas,n=s.context.gl;if(s.resize(1),s.camera.position.set(r.width/2,r.height/2,0),s.batcher.setBlendMode(0,!0),t){if(this.fadeOut+=this.timeKeeper.delta*(this.timeKeeper.totalTime<1?2:1),this.fadeOut>1)return;i.setFromColor(this.backgroundColor),e=1-this.fadeOut/1,e=1-(e-1)*(e-1),i.a*=e,i.a>0&&(s.camera.zoom=1,s.begin(),s.quad(!0,0,0,r.width,0,r.width,r.height,0,r.height,i,i,i,i),s.end())}else this.fadeIn+=this.timeKeeper.delta,this.backgroundColor.a>0&&(n.clearColor(this.backgroundColor.r,this.backgroundColor.g,this.backgroundColor.b,this.backgroundColor.a),n.clear(n.COLOR_BUFFER_BIT)),e=1;e*=Math.min(this.fadeIn/1,1),i.set(e,e,e,e),this.logo||(this.logo=new Ai(s.context,fs),this.spinner=new Ai(s.context,ds)),s.camera.zoom=Math.max(1,bs/r.height),s.begin(),s.drawTexture(this.logo,(r.width-165)/2,(r.height-108)/2,165,108,i),this.spinner&&s.drawTextureRotated(this.spinner,(r.width-bs)/2,(r.height-bs)/2,bs,bs,81.5,81.5,this.angle,i),s.end()}},Ss="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKMAAACjCAYAAADmbK6AAAALKElEQVR42u2de2iW5R/GPzuqcwfnnKfNmafl5tTNHWzqNi3DEMQykcAoJSsySkspjSIk0iD/07Kf4R+FnVBDUTshZGpWUEJaaiWFgZlUFmXmIe3HNXthyebeZ77P9H13ffBG8Y8H7ut7vff93N/7fu4vGGPiFZiez/Qtw9lytJajfzfw9z/j+efPOv7cV8W+lUNY2a8T/ayTCRsWFLJA5rtUO1LLkV5p9LJeJizQiHeqnlOtmVFtdTGrrZkJCxYXsTgaI6r9MY4/UpNItW4mFDaXsTlaM6qVZlBq3UwofFrJp0HMWJ9DvXUzobCznJ1BzFjWlTLrZkJh/TDWBzFjTgo51s2EgnKI0Rrx+FiOWzNzVaym91Syx5qZsGBWb2ZFa0ZN6dbMhAWTcpkUrRmXD2K5NTNhgVbH0Zpxbl/mWjMTFvRIo0e0ZpzcncnWzISKtvmiMWNRJ4qslwmVXRXsas2Ix8ZwzFqZsGFREYtaM+Oaa1ljrUzYkJ9G/ok6TlzKjJWZVFor0y7c1Zu7WjLiqiGsskamXdHopyT4vALmzS9k/t19uHtKHlOSIMn6xAtARjIZ1sFcUSZ0Y4La+G6M18hS2IlCn4a+WoC0JNL0d/dUupdnUj40g6EJ2VEdMnhrOG/p5f/jUXz8SgmvaGU6KpNRNsLVQV0OdXf24s63h/P2gWoOrBjMCr2GJFQnnxnIM3q5P1PPmaYv+4ev4/C6UtbpV2gzXCkgL5W8Bwt48OIc6ul6Tp+s4+SyASxLiI4+PYCn1bHzDZxvaQW6vZzto7MYnQIpNkf7kp5EuozYUroqEjcNKHHd0Tl9mBPN1pk+hFeieGBnBtog7UXjsj9pWg+m6duecw2cay1OC/uxMC47KmP9OIYfoz1YoC20J/rzRG4quTZK2EAyJGs20qwUbYw0aNRmUxtvfUW/uEtNzc1NB1/X8LVyd15hh82F43AvD+VlXcsSJEZa1CQ3ejleAO7oxR3RDP0XN91X4+NXYb8nkv7UNTwV7e0YTdu7I3g33t7tuaEbNwSZpps2fSyvs4M2Tjhot+jb0Xzbltj8r5j/xVt/6Z1Ob93U1ZYO691EhhzchcHeXosVjcNZysyezLw4xRZt05R+fTeuj8vOj+zKyG0j2aZcVVs6v+QalnjrMFZASQYl2nBoSyz06e3j/Xk8rgWYmMvEICu2pm1HOTuc7okV8FgRj0XukwzanhvCc/F+72TjoQjdObN1OFuDLmh0xP+WHtxiI10ukJlCprb4guiv1fP+avZrS1C7NAkliHZjDtZwMMgqbukAltpMlwuMy2FcEBPqvfLLar5Uqi0hBdEwryy+Mv5n6zkbjTBa+dlMlwvUZFETZKGiFM7tvbhdJ3gSVRO0wzIjnxmvl/J6a6JsGMYGrahtpssFeqbR841S3mhN80OjOaSDEdqd6SjaMKgzgzRK7q1ib3PT9sYyNo7JZoyNFNvRcVMZmy7WOvIuryv/Zvdmdt90+nY0bRp3AvROohFwdwW7dTG7RFlbwlqdrbOBYg005NAQmZU0HWt1rXMBH1Xw0dQ8pmqzoaPmdhun7bHZjNVe9qP9eFQfO1VkUmHjhAVUZ1GtnKFSbjrkrPfy4i4UW5t/6ZxM54J0CqxFe81KpGsQyE4h23oYY4wxxhhjjDHGGGOMMcYYY4wxxhhjjDHGGGOMMcYYY4wxxhhjjDHGGGOMMcYYY4wxxhhjjLna+bdOy+IiFquIpGq16Pb79cNYv3IIK/X/ugx+Ui6TVKvYVU9Nc8gX8od8Ir/IN/KPfCQ/yVfyl/6/pfJvLChkQdD6wyqntquCXYuKWJSfRr6D0dEAxV3xlw/khyD+kd/ku/88cHo+09tS3LBpO1HHCVUqcIA6CqB4K+6X6x35L/JM2loXurlWmUmlA5XogOIcK8/If5HncrSWo7F6cKIWPjT/RXGOlWfkv8hzaWsN4uaaysE6WIkOKM6x8oz8F3kusXqo2vxC5jtYiQ4ozrH0TeS5qIZcrB7qkrwdA8U5Vp6R/yLPZV8V+2L14Cl5THGwEh1QnGPlGfkv8lyUlIzFQ1cNYVVHrcjZ0VCcFe9Y+Eb+izy3ceclUl43aFN52DXXssYpnY6a4qFS8ZcP2uIf+e7inRh6pdFrdTGrm8uiHx/L8T2V7NGWzvJBLJ/bl7mTuzO5qBNFDoiJID/IF/KHfCK/yDfyT3O7d/KbfNfS80hNIrU0g9L6HOq1x5iTQo6FNpeLfCQ/yVfyl3xmXYwxxhhjjDHGGGOMMcYYY4wxxhhjjDHGGGOMMcYYY4wxxhhjjDHGGGOMMcYYY4wxxhhjjDHNk9z4JwJ0SqKTdQkbyEwhU393T6V7zzR6pieR3tE1ITeVXImhe6BXDGZFdRbVeank2TBhcaEMr0rwbixj49IBLL2/L/ffmMuNHfqO9tFZjJYBd1ewO3Lx+IcVfKhqna5nHZYR6XFPH+5R3eeI5t9fx/fvjeC9Jdew5OKZKqFR/RDVKL6vL/f9PJafmyvHsL+a/ff24V6NmjZQbGchVbY6UM2BluqHv1rCqzVZ1KQlkZboepCdQvacPsz5bjTfXao+yMEaDt7Wk9tSIMVGig3TejCtJSM2bSpkPjWPqd1S6Zao+lORSYWmgkOjORRNwZqd5ezMSiHLRooNr5XwWjS6/1XHX9vL2T67N7M1iyXa9JCrYjVrS1gbpJyw6hBfsmiNCYT0P9/A+Wj1/6qGr5YNYFlJBiWJogEzezLz/ZG8/9s4fgtSyuvNYbyp1IONFBtu7sHNv4/j9yAxUHWrdaWsG9+N8XHd+YxkMpSy+aySz841cC5oXbmHCnnI74yxAgZ3YbDeB4PEQCOpBpFNZWwa2ZWRcdnxLsl00crtRB0n2lLg8JNRfDKoM4NsolgBSmw/UMADba1+qpmqfyf6x1u/0a/og3I+aEunP6/i86osqmygcGarF4p54dex/Bo0LqfqOfVwIQ/HW5/RSkwV1oN2WLlHTc82TljAwM4M1O5LWwYKZTjibYXNS0N5KcjKTe10PadfLObFuJwK4ozp+UzXDBTUjL+M5ZcBnRkQV53dMIwNQTu6bSTbVEzbi5awuVByd2E/FgaN0Tc1fKOzBHHV2aAdVSdv6s5NNkp7cSH/++xAng2yyHx+CM/H21YhfdPp+0U1X0TbSZnXx8faG9Aop0MS0cToh1p+iLcpOkLj9t/JOk5eqoPHxnDsyf486an5yqCDK7XZ1O4oZ4dWyy3FSXHUAYq47uyYbMZoGmhpG3DlEFb6uNiVBhpyaHhnBO8oJmfqOROJjzIiP43hJ8UxITqqX56S2Hur2KsOnq3nrE6PPNKPRwrSKbAZrjTQNZmuE7oxYXMZmxWbw9dxWFu4W4ezVedOE6qzI7oyYkY+M7TPeWsPbk2UX1qioSN+E3OZqOR2cReKE+qQRFN0Pi7y73g/UawU1KzezJpXwLz5hczX1ueUPKYkNb6GJQZ+j7/aAfRZREsv+quGsMoamXZBW2Gt5eU0alorEzYsKmJRa/m4NdeyxlqZsCGa84DKnVorEzboC7podis69DfIJmwufHMc7famvvmxZiYsKOtKWbRm1OcW1syEBboSJFozLh/EcmtmwgIluaM14/phrLdmJixYXMTiaM24p5I91syEBTphFOR7Y2tmwgJNvUFOr+tov3UzoaAv44KYUatv62ZCoemdhtG0+hzqrZsJBR08DWLG0gxKrZu50qvpxos3U5NItW4mFPp1ot+lPlpq2lYXs9qamVBZUMiC1ox4pJYjvlfStAu6GmTLcLboMtPIV4/6im5fFfuUi9QIap2MiWP+D96R1vPmsD/fAAAAAElFTkSuQmCC",Ms="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKUAAABsCAYAAAALzHKmAAAQ7klEQVR42u3da4xdVRUA4D0zd2Y6nZY59DVtZ1puS9+lzC0YAi2UQ8AAQczFpPgA9VIeIQbirRqJ0cBUBVGjDr/QCKSNRSMmpuODxAdxqhgwxkhFjf6Sxh/+UUNVNGJCzR7uTvas7LXX2q9zzp3em6y0gTN3Zu75utZe5+yztxC9V+/Ve5X9En1Vjd7J6SFbLNF7naPw+l2jh7YHMBWssqMHtlsRdim4qsLtIawaPiHEQOLoNrA9iIkQDnRrVA1qD2LZ8ISoxYqKo13sQAtBWBayQWZUAXGRQM9JjCngDVY0UqJNDbQrMcaGmArdUKpIjbYiQLsCZCyIMQBy8QwnilR4Q5AuCpxFYvRFmBLbEiwKwpsSaWycVQGZBKMrwBjA9BhxDe57u2L2hOoKNCbOrgAZitEVYUxoKSMErQvSxYIzCkguRg5EF4AUhqUlhy/YUKSxcRaKsioYOQhD4I0yYxkR3PcJBcuFysmgsXAWBTMJyBCMIQh9kGGxXIXvexCQXbHGAMrBWTbM2CCpMSMLIxehC77lSJwXGth7M0FzoVJIXXDWQnGmhOkL0ic7YhhtWdGGkAuPAjUWGoF4faCmwBkbZmyUqUCyMqMLRA4+E6IsdTjidUHKBYrh9CnpRcH0ypKxsyOGEYNIIeTCOz91OIJ1QYoB5eAMyZo+MFNnyVTZ0YiRC9EGEMOyAgshxErHsL2XK1gOUgwohtM1a5YNM7Rsu4K0ZkcbRm4mpPBRwFZ5hg9eCqkrUB+csWGGogzNkqEgrdnRhpGLkINudaLgwvVB6oqzCjCTZElb2Y4B0gUjBtEG0ARnDRLjjoG9DwcshtQGlIPTljVjwUySLWNkyRCQVHa0ZUUTRAwgF91a33BEy0VKAcVwwqwZC2bqbOlUurllOxQkJzNyINoAYqjWhYYjWg5SCiiG05Q1U8FMjTIoS8YE6YORi1BHtJ4KIcQEEtTXUWAxpK44YVlPBdO1jCdFWTZIE8bVGEYMIRPcZGBw4HKQcoBiOE1ZMzbMgVQwU6JMAdKEEcuIJogUvg1YCCE2gsCO42DlIIVAKZwpYJaSLVNnSU6XjYHUmxhTmXaFaMO3EYkLqMC+FsLlIoVAKZzMrEnBhJeLfLNlKMrYWRIDCbOkFSSVHbHM6AKRC6/ODUewNqQ+OLlZkxpjUmV8MBbMUJSxyzY3Q1IgTRgxiBRCHdem0KDAUkBh9sRwwjEnAXMMgTnKhFlUtiwkS5rGka4g9SaGgxFmRC7AzTCEEBcyA36dDSsXqAtOLkysjGMwY5XxVChjZ0kuSCo7YlkRQsQQYtDEFsegsLoCxUp7Kpgps2UslFGzJGccSYHUmxhOZqwzEZqAbfUMCisHKIZzgsCpl3MTzMwTpi1bYp2477gyFKUxS7qWbdjY2EBS2dGE0QQRA7gNCyHEdhjE8RhUDlBT9tzgmjWZMFNlSy+Urk1OzCyJlW0XkK4YOQh1cDtcgwBrQmoDWkdgboBZE8mYsJSHlnFbJ+5bwmOPJ7lZkirbC8aRsMvmgtTHjBhGE0QbwJ2egUE1ITVlUC5OmDVdYNrKuN70xM6WoShjlW4464dbtiFIWK6x7GjESEHUUe0iYncnbMdQSE0Z1ITTNOb0hRmjjLtmS9dmJ2rp1jtuKktyyrb6YLEMCUHq2dGG0QQRQ7f72kzc+cJecerne8Wvv7JNPHPvenEkz8Sh3UtFc92QyGt9Yko/HgOLAIUZlItTz5ouMF3KuE+2jFLCQ1D6lm6fLMkBacuOJowYRBUXyfjuHjF3NhdnsfjvAfH6E9vFt9XxKgikEKgJZyyYalzOLeMu2bLbULI6bh+QGwmQ+rgRlumdGEQAao+K56bEL2woVUwOiev0r8OAUjiJrMmFCbvykGxZRAmPitK1dHM7bohyMsuyi/I8f0+e57fJYIKEZXpXo9E4mOf5XTKyLLvCBLETF8uY2SKepkC+dpX4T02Ivepr4HvZcOZ5fmee54fyPL+DmTUhzAs6n4n8bN5dr9f3YdkSg8nsxG0lPBVKVpNjG0/aGhzfLDmRZdnumZmZp8+c+cdZPV555fSr7Xb7s0jJ3i5Pcue4MxKkPPkvvXTqz/B92u32l0wYOzG1fkhcd/py8Rcbyq/vFM/KY1WA95h/3zzP71bfU6JsNpsfgj+P/FlbrdaDGExYyuXvLz8H+DudODH700ajcSM3W6Yu4alQ1spCOTd38jcKocTZbh9+9NixY99XJ8AEUkcpo9W64yH197m5k7+bnZ19QT+J09NHntQhwji/Jg58qi6++ofLxJ8gSFneVw2Ka4QQDfh1Ok4dZavVmtZ/nrm5k7/Vf55O1tRhboUw5+ZOvqyOl5+R/FyOHj32PYVU/tloNG5IXcKrhJIzngwp3fNjomazea/64BuNxts646f50lWv169utw9/DmtqdJQyZFaSJVuV6nq9fqMEof5/vV6/CYBqgJDlee+yAbF/+4i4ZWqZeNfaIfHWzn+Hx0KcEuU9+s8jv3ej0bhVlXOZydX/k0iRMeb8P0D5e6tj8zy/Xb9UJIc56h/yqVOnXul8lmuZ2bJslKmbHG7XrbpCmCXFRLvdfqQD6jTS3Jiy5I4OykM6ADV+1Eu1DmV6evopBORexzDi1L+X/HnGxsb2w3Hm9PSRJ9QxWPOTZdmlKht2hi+w6dkox5bqffI8fye3hDteGqKaHVsHXihKl0tB+h0cY+lute54AGRKDCW89LNTRynHb7ChUWVVjetOnJh9EYBUyPZeNCoOtsbFQwdXi4/esELcd+tq8cCHJ8UXp+viy9efLz7AgamjlKXc1AA1m83DoIRDlFubzeb96hhZLVTlgJ24gttutx+ONa50bHZKRenaeTs1OfpAfnr6yOOdE7EZdNwmlKocntXLNkA5JTGq47Ds+Lf94lWsyfnXleLfnIwJUN4DOnNYwuUxh2A3Ln9XULrfK8t3J27Tu3BVwiOjXJqoAy8UZej1yclGo3GTLN+gu3w+z/P3YaWbQqk3Ne12e4ZC+c8rxWsYytcPiP9RpZxCqWDKnxOiBNlyAUpOnGsoh4tA2Rm8X9xqtT6md5wyZmYe+0YRKL+1S/wYQ3n8zctBl5SBUv5djivfjMOPduIzcizeiYfr9foVvUwZG+XCuzibZKnSceZ5/v4QlKp8y7ElhnJlTeTP7BI/kllRYfzrfvHqFy4UX1vaL/aVlSmROzwbwdS29T2UcEwZF+V8ozM2lu1VY812u/15akypGh3TmFJesJbHHD167IdUxz3YJy5bNySuX1mbvy55CbMLtzU6tjGlsdFptVqfUMc0Go23F4wy1l2dSnbfvpMwVPe9WWVLDsrOJaF9MFu2Wq1PqmNkGce67xiXhTjdNwdlvV6/BgxfbPfBfVCetxi6b9/rlCup65QzM48dl2OjLMv26CibzeZ96sTIzEFdpwQXz9U1yrtVlpR/Zll2Fec65Y6l4pbbx8XHH9kknvzJlPjlHy8Tp29eKT5ou0aJoIT3w3dBlLDzVpfAJEZ1XOdaJZxnOSlvPMjPzxFljIvng914RwebsjYO7uhMyHu46sOfnf3Oz2TXDW6vvYxdFoIXz3Wc8J5zs9n8iOn2IrxTc2BM3Glqdp7dI553uaOjxrhwcob+MyuUpjs6WZZdon8OcigjPx8V+u+GTWFTSWEx3WYcdJ225jNDSE4q0GHCzlueHOyujn6bUWYgeb9ZZUaQPe+GzQ+Gc8+oOGhC+c1d4gfI16n3XDAhQ7+9qE9l01E2Go132GYKyXE1NiFDTcpoNpv3LOYJGWXNErJNW9sEp63p2RKiVPMn1bS1DgxsyhoGdGpmizj+xtXiDYnx7/vFmce3iWdW1cTVGEY4hQ2ZW0nNq8Qm/M6XbXm3S100lwGedFybuvNOibLI+ZS2ceU4eAxiEuvCkfmU8ycToDxETe6FgCBQHeqyAbFvfEhcO7BwDuXFCEbTZF840XeHK0jYcbs2OIGle0mVJ/mmnClEPQqxyTY5I8/zFhif7fSZee4bnrPOU4AssnRXHaVTCTd14dRDY3UbTIiSeFhsN/aMjgnqthFx880rxX3yATL5p3y4LPXzOaBkUyBjZMlYpbtQlIOBD475ZEusjMNSvkXe6VEoJVDkeZ2dzIfIFsRzU+JF2OyM9M9fTC/6SUYOyFQPjQ2nWiUjxnPfw5EeHqMWIqAeIFsAU847lJM2JM6xsewt1OIDLs99P7ZFHNdB/upS8XtPiD7PfLuCXJNolYyyFiNI/Zit65ItrOVafFbHcFohY7hPTN21Tjz4uc3iqfsnxKdX1MTl1OoYRFaMsToGB6Trw2JFP/OdZC2hJZ7ZkrMoAbbSGmelDJ91hFKuJeS7jlBMkJnrAqqJlgMUZS/dArPlGHNdSg5M3xXXtvquuEatvIYtDRhpxbUJuIgqsU5lGWtUploK0KuEU9mSW8YpmFQ556xNuYW7NiW13B+FkMiKHIy+C6eGgBxJvMR0oSv5hi6+z4HJyZoU0M2RVvDlrOQbcxVfX5AhZbuqy0v7ZstYMLHlAVlLTF9ALLbvu9Y5Zylpn/XOsd0ibIvxr2KCLHpp6SCUIdnSZSF+WzfOhem6GD+1KwR3Z4jNjrtDpNoZwmWd8yrupZN6Hx3fbMmFSe0Swdq2ZIPjxk1112Duo8OBGLrBkw/IoncdK2XHsdC9dHz204m50xh3tzFq1zFqtzHXrfCw7OgDsqyNnZLszVijsmXgrmNcmGtS78lIoMX2aJz03fKO2sDJddPQSCDPiQ1DfWBycY6XtXstc2PQKuxgG2McmXTPb9/9vmuJYXKyJrWjbeg+3xPM4O73nWqvbyw7xgZZSJbEUBa157cNJjdr2vb+5iA1YV3HxYscj30PDCEHIgcjtfm8K8hSsmRotkwFk5s1TTghUAopB6xrjHMBBkI0YYTZ0dZlxwLpkiWDULpmy5gwqayZgZNkA7oKQQCxctByYg0XIIEQQuRitGVHblMTA2ShKGPDpC6wu+DEgJqg2rDGDBtAF4Q6RAojp1xXGmSMbImVcR+YWNY04eQCtUG1ofUJ2/uvcETIgUhhdAE5GAlkKShjwHTNmhhODKgJqQ2sC14uOgyfD0IbRF+MlQaZAiZWyn2yJsTJATqGnHQO2Jhh+xlsACFCG0QbRtdyzQFZCZSxYPpmTS7Q5cjJHYNBYIkZpu99HoUQ/o4QIYSIZUZfjJ4ZMjZI32wZBDMU5yhy8pZTULl4XYP5fagMyEVoy4oupTpGduwnkloSlKEwY+AcQU4MhRTD6ovXBRwFzwWgCSEF0QVjJUGmgEllTS5OLlCIlIN1mS9mx/cZ5eLDALpCTI2RAhkTZQqYoTgpoCPECbaBHQ2ETL3PUl98ECAXYijG0OyYAmQoTG7W5ODkAF1CnVgm2JQx4okPA+gCMTbGskBGgRmaOblAh5GTORIrfKFx4VH4EIAxIXIxlg2SBbMvECY3e7oApbDaIgQu5/2HmeEKEINYiwSRi7EQkLFgumZOCuggctKGI4ULZN/vMeSLj0AYMytWEqMLzFg4fYDaoKaC6wvOFR4FkIPQFaILxrJAOsHsc/zlfYDWXE8qF22s8Pz5KHxcgEVALBtjJXBSSEOwFhk1Zgy4hitCT4hVw+gFs8/zwxqIBbUgyK7fcyA0PD9XX4iVxhiC0xdof6STWCsoBmKF7+cVCWFXQYyBMxRpf+STX1b0x45AhN0OMSrOGEirhrY/dfQAdjvS7oy+WCF6r1RIFxXWvlTRg1YVqFWBmxZbD99ig9pt0YPQw9rD1nstVri9V+/Ve3XrS/wfim4P5fIFxLoAAAAASUVORK5CYII=",Is=class{constructor(t,e){this.config=e,e.pathPrefix||(e.pathPrefix=""),e.app||(e.app={loadAssets:()=>{},initialize:()=>{},update:()=>{},render:()=>{},error:()=>{},dispose:()=>{}}),e.webglConfig&&(e.webglConfig={alpha:!0}),this.htmlCanvas=t,this.context=new yi(t,e.webglConfig),this.renderer=new ws(t,this.context),this.gl=this.context.gl,this.assetManager=new Si(this.context,e.pathPrefix),this.input=new Wi(t),e.app.loadAssets&&e.app.loadAssets(this);let i=()=>{this.disposed||(requestAnimationFrame(i),this.time.update(),e.app.update&&e.app.update(this,this.time.delta),e.app.render&&e.app.render(this))},s=()=>{this.disposed||(this.assetManager.isLoadingComplete()?this.assetManager.hasErrors()?e.app.error&&e.app.error(this,this.assetManager.getErrors()):(e.app.initialize&&e.app.initialize(this),i()):requestAnimationFrame(s))};requestAnimationFrame(s)}context;time=new y;htmlCanvas;gl;renderer;assetManager;input;disposed=!1;clear(t,e,i,s){this.gl.clearColor(t,e,i,s),this.gl.clear(this.gl.COLOR_BUFFER_BIT)}dispose(){this.config.app.dispose&&this.config.app.dispose(this),this.disposed=!0}};return ps=n,((r,n,a,o)=>{if(n&&"object"==typeof n||"function"==typeof n)for(let h of i(n))s.call(r,h)||h===a||t(r,h,{get:()=>n[h],enumerable:!(o=e(n,h))||o.enumerable});return r})(t({},"__esModule",{value:!0}),ps)})();t.exports=e}).call(window)},3709:(t,e,i)=>{var s={VERSION:"3.86.1",LOG_VERSION:"v386",BlendModes:i(7047),ScaleModes:i(7172),AUTO:0,CANVAS:1,WEBGL:2,HEADLESS:3,FOREVER:-1,NONE:4,UP:5,DOWN:6,LEFT:7,RIGHT:8};t.exports=s},3572:(t,e,i)=>{var s=i(1772),r=i(8969),n=new s({initialize:function(t,e){this.parent=t,this.events=e,e||(this.events=t.events?t.events:t),this.list={},this.values={},this._frozen=!1,!t.hasOwnProperty("sys")&&this.events&&this.events.once(r.DESTROY,this.destroy,this)},get:function(t){var e=this.list;if(Array.isArray(t)){for(var i=[],s=0;s<t.length;s++)i.push(e[t[s]]);return i}return e[t]},getAll:function(){var t={};for(var e in this.list)this.list.hasOwnProperty(e)&&(t[e]=this.list[e]);return t},query:function(t){var e={};for(var i in this.list)this.list.hasOwnProperty(i)&&i.match(t)&&(e[i]=this.list[i]);return e},set:function(t,e){if(this._frozen)return this;if("string"==typeof t)return this.setValue(t,e);for(var i in t)this.setValue(i,t[i]);return this},inc:function(t,e){if(this._frozen)return this;void 0===e&&(e=1);var i=this.get(t);return void 0===i&&(i=0),this.set(t,i+e),this},toggle:function(t){return this._frozen||this.set(t,!this.get(t)),this},setValue:function(t,e){if(this._frozen)return this;if(this.has(t))this.values[t]=e;else{var i=this,s=this.list,n=this.events,a=this.parent;Object.defineProperty(this.values,t,{enumerable:!0,configurable:!0,get:function(){return s[t]},set:function(e){if(!i._frozen){var o=s[t];s[t]=e,n.emit(r.CHANGE_DATA,a,t,e,o),n.emit(r.CHANGE_DATA_KEY+t,a,e,o)}}}),s[t]=e,n.emit(r.SET_DATA,a,t,e)}return this},each:function(t,e){for(var i=[this.parent,null,void 0],s=1;s<arguments.length;s++)i.push(arguments[s]);for(var r in this.list)i[1]=r,i[2]=this.list[r],t.apply(e,i);return this},merge:function(t,e){for(var i in void 0===e&&(e=!0),t)t.hasOwnProperty(i)&&(e||!e&&!this.has(i))&&this.setValue(i,t[i]);return this},remove:function(t){if(this._frozen)return this;if(!Array.isArray(t))return this.removeValue(t);for(var e=0;e<t.length;e++)this.removeValue(t[e]);return this},removeValue:function(t){if(this.has(t)){var e=this.list[t];delete this.list[t],delete this.values[t],this.events.emit(r.REMOVE_DATA,this.parent,t,e)}return this},pop:function(t){var e=void 0;return!this._frozen&&this.has(t)&&(e=this.list[t],delete this.list[t],delete this.values[t],this.events.emit(r.REMOVE_DATA,this.parent,t,e)),e},has:function(t){return this.list.hasOwnProperty(t)},setFreeze:function(t){return this._frozen=t,this},reset:function(){for(var t in this.list)delete this.list[t],delete this.values[t];return this._frozen=!1,this},destroy:function(){this.reset(),this.events.off(r.CHANGE_DATA),this.events.off(r.SET_DATA),this.events.off(r.REMOVE_DATA),this.parent=null},freeze:{get:function(){return this._frozen},set:function(t){this._frozen=!!t}},count:{get:function(){var t=0;for(var e in this.list)void 0!==this.list[e]&&t++;return t}}});t.exports=n},1011:t=>{t.exports="changedata"},1427:t=>{t.exports="changedata-"},7304:t=>{t.exports="destroy"},8467:t=>{t.exports="removedata"},4039:t=>{t.exports="setdata"},8969:(t,e,i)=>{t.exports={CHANGE_DATA:i(1011),CHANGE_DATA_KEY:i(1427),DESTROY:i(7304),REMOVE_DATA:i(8467),SET_DATA:i(4039)}},583:(t,e,i)=>{var s=i(4005),r={flac:!1,aac:!1,audioData:!1,dolby:!1,m4a:!1,mp3:!1,ogg:!1,opus:!1,wav:!1,webAudio:!1,webm:!1};t.exports=function(){if("function"==typeof importScripts)return r;r.audioData=!!window.Audio,r.webAudio=!(!window.AudioContext&&!window.webkitAudioContext);var t=document.createElement("audio"),e=!!t.canPlayType;try{if(e){var i=function(e,i){var s=t.canPlayType("audio/"+e).replace(/^no$/,"");return i?Boolean(s||t.canPlayType("audio/"+i).replace(/^no$/,"")):Boolean(s)};if(r.ogg=i('ogg; codecs="vorbis"'),r.opus=i('ogg; codecs="opus"',"opus"),r.mp3=i("mpeg"),r.wav=i("wav"),r.m4a=i("x-m4a"),r.aac=i("aac"),r.flac=i("flac","x-flac"),r.webm=i('webm; codecs="vorbis"'),""!==t.canPlayType('audio/mp4; codecs="ec-3"'))if(s.edge)r.dolby=!0;else if(s.safari&&s.safariVersion>=9&&/Mac OS X (\d+)_(\d+)/.test(navigator.userAgent)){var n=parseInt(RegExp.$1,10),a=parseInt(RegExp.$2,10);(10===n&&a>=11||n>10)&&(r.dolby=!0)}}}catch(t){}return r}()},4005:(t,e,i)=>{var s,r=i(5079),n={chrome:!1,chromeVersion:0,edge:!1,firefox:!1,firefoxVersion:0,ie:!1,ieVersion:0,mobileSafari:!1,opera:!1,safari:!1,safariVersion:0,silk:!1,trident:!1,tridentVersion:0,es2019:!1};t.exports=(s=navigator.userAgent,/Edg\/\d+/.test(s)?(n.edge=!0,n.es2019=!0):/OPR/.test(s)?(n.opera=!0,n.es2019=!0):/Chrome\/(\d+)/.test(s)&&!r.windowsPhone?(n.chrome=!0,n.chromeVersion=parseInt(RegExp.$1,10),n.es2019=n.chromeVersion>69):/Firefox\D+(\d+)/.test(s)?(n.firefox=!0,n.firefoxVersion=parseInt(RegExp.$1,10),n.es2019=n.firefoxVersion>10):/AppleWebKit\/(?!.*CriOS)/.test(s)&&r.iOS?(n.mobileSafari=!0,n.es2019=!0):/MSIE (\d+\.\d+);/.test(s)?(n.ie=!0,n.ieVersion=parseInt(RegExp.$1,10)):/Version\/(\d+\.\d+(\.\d+)?) Safari/.test(s)&&!r.windowsPhone?(n.safari=!0,n.safariVersion=parseInt(RegExp.$1,10),n.es2019=n.safariVersion>10):/Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(s)&&(n.ie=!0,n.trident=!0,n.tridentVersion=parseInt(RegExp.$1,10),n.ieVersion=parseInt(RegExp.$3,10)),/Silk/.test(s)&&(n.silk=!0),n)},9134:(t,e,i)=>{var s,r,n,a=i(5840),o={supportInverseAlpha:!1,supportNewBlendModes:!1};t.exports=("function"!=typeof importScripts&&void 0!==document&&(o.supportNewBlendModes=(s="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/",r="AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",(n=new Image).onload=function(){var t=new Image;t.onload=function(){var e=a.create2D(t,6).getContext("2d",{willReadFrequently:!0});if(e.globalCompositeOperation="multiply",e.drawImage(n,0,0),e.drawImage(t,2,0),!e.getImageData(2,0,1,1))return!1;var i=e.getImageData(2,0,1,1).data;a.remove(t),o.supportNewBlendModes=255===i[0]&&0===i[1]&&0===i[2]},t.src=s+"/wCKxvRF"+r},n.src=s+"AP804Oa6"+r,!1),o.supportInverseAlpha=function(){var t=a.create2D(this,2).getContext("2d",{willReadFrequently:!0});t.fillStyle="rgba(10, 20, 30, 0.5)",t.fillRect(0,0,1,1);var e=t.getImageData(0,0,1,1);if(null===e)return!1;t.putImageData(e,1,0);var i=t.getImageData(1,0,1,1),s=i.data[0]===e.data[0]&&i.data[1]===e.data[1]&&i.data[2]===e.data[2]&&i.data[3]===e.data[3];return a.remove(this),s}()),o)},2250:(t,e,i)=>{var s=i(5079),r=i(4005),n=i(5840),a={canvas:!1,canvasBitBltShift:null,file:!1,fileSystem:!1,getUserMedia:!0,littleEndian:!1,localStorage:!1,pointerLock:!1,stableSort:!1,support32bit:!1,vibration:!1,webGL:!1,worker:!1};t.exports=function(){if("function"==typeof importScripts)return a;a.canvas=!!window.CanvasRenderingContext2D;try{a.localStorage=!!localStorage.getItem}catch(t){a.localStorage=!1}a.file=!!(window.File&&window.FileReader&&window.FileList&&window.Blob),a.fileSystem=!!window.requestFileSystem;var t,e,i,o=!1;return a.webGL=function(){if(window.WebGLRenderingContext)try{var t=n.createWebGL(this),e=t.getContext("webgl")||t.getContext("experimental-webgl"),i=n.create2D(this),s=i.getContext("2d",{willReadFrequently:!0}).createImageData(1,1);return o=s.data instanceof Uint8ClampedArray,n.remove(t),n.remove(i),!!e}catch(t){return!1}return!1}(),a.worker=!!window.Worker,a.pointerLock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.oGetUserMedia,window.URL=window.URL||window.webkitURL||window.mozURL||window.msURL,a.getUserMedia=a.getUserMedia&&!!navigator.getUserMedia&&!!window.URL,r.firefox&&r.firefoxVersion<21&&(a.getUserMedia=!1),!s.iOS&&(r.ie||r.firefox||r.chrome)&&(a.canvasBitBltShift=!0),(r.safari||r.mobileSafari)&&(a.canvasBitBltShift=!1),navigator.vibrate=navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate,navigator.vibrate&&(a.vibration=!0),"undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint32Array&&(a.littleEndian=(t=new ArrayBuffer(4),e=new Uint8Array(t),i=new Uint32Array(t),e[0]=161,e[1]=178,e[2]=195,e[3]=212,3569595041===i[0]||2712847316!==i[0]&&null)),a.support32bit="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof Int32Array&&null!==a.littleEndian&&o,a}()},7080:t=>{var e={available:!1,cancel:"",keyboard:!1,request:""};t.exports=function(){if("function"==typeof importScripts)return e;var t,i="Fullscreen",s="FullScreen",r=["request"+i,"request"+s,"webkitRequest"+i,"webkitRequest"+s,"msRequest"+i,"msRequest"+s,"mozRequest"+s,"mozRequest"+i];for(t=0;t<r.length;t++)if(document.documentElement[r[t]]){e.available=!0,e.request=r[t];break}var n=["cancel"+s,"exit"+i,"webkitCancel"+s,"webkitExit"+i,"msCancel"+s,"msExit"+i,"mozCancel"+s,"mozExit"+i];if(e.available)for(t=0;t<n.length;t++)if(document[n[t]]){e.cancel=n[t];break}return window.Element&&Element.ALLOW_KEYBOARD_INPUT&&!/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)&&(e.keyboard=!0),Object.defineProperty(e,"active",{get:function(){return!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)}}),e}()},4821:(t,e,i)=>{var s=i(4005),r={gamepads:!1,mspointer:!1,touch:!1,wheelEvent:null};t.exports=("function"==typeof importScripts||(("ontouchstart"in document.documentElement||navigator.maxTouchPoints&&navigator.maxTouchPoints>=1)&&(r.touch=!0),(navigator.msPointerEnabled||navigator.pointerEnabled)&&(r.mspointer=!0),navigator.getGamepads&&(r.gamepads=!0),"onwheel"in window||s.ie&&"WheelEvent"in window?r.wheelEvent="wheel":"onmousewheel"in window?r.wheelEvent="mousewheel":s.firefox&&"MouseScrollEvent"in window&&(r.wheelEvent="DOMMouseScroll")),r)},5079:t=>{var e={android:!1,chromeOS:!1,cordova:!1,crosswalk:!1,desktop:!1,ejecta:!1,electron:!1,iOS:!1,iOSVersion:0,iPad:!1,iPhone:!1,kindle:!1,linux:!1,macOS:!1,node:!1,nodeWebkit:!1,pixelRatio:1,webApp:!1,windows:!1,windowsPhone:!1};t.exports=function(){if("function"==typeof importScripts)return e;var t=navigator.userAgent;/Windows/.test(t)?e.windows=!0:/Mac OS/.test(t)&&!/like Mac OS/.test(t)?navigator.maxTouchPoints&&navigator.maxTouchPoints>2?(e.iOS=!0,e.iPad=!0,navigator.appVersion.match(/Version\/(\d+)/),e.iOSVersion=parseInt(RegExp.$1,10)):e.macOS=!0:/Android/.test(t)?e.android=!0:/Linux/.test(t)?e.linux=!0:/iP[ao]d|iPhone/i.test(t)?(e.iOS=!0,navigator.appVersion.match(/OS (\d+)/),e.iOSVersion=parseInt(RegExp.$1,10),e.iPhone=-1!==t.toLowerCase().indexOf("iphone"),e.iPad=-1!==t.toLowerCase().indexOf("ipad")):/Kindle/.test(t)||/\bKF[A-Z][A-Z]+/.test(t)||/Silk.*Mobile Safari/.test(t)?e.kindle=!0:/CrOS/.test(t)&&(e.chromeOS=!0),(/Windows Phone/i.test(t)||/IEMobile/i.test(t))&&(e.android=!1,e.iOS=!1,e.macOS=!1,e.windows=!0,e.windowsPhone=!0);var i=/Silk/.test(t);return(e.windows||e.macOS||e.linux&&!i||e.chromeOS)&&(e.desktop=!0),(e.windowsPhone||/Windows NT/i.test(t)&&/Touch/i.test(t))&&(e.desktop=!1),navigator.standalone&&(e.webApp=!0),"function"!=typeof importScripts&&(void 0!==window.cordova&&(e.cordova=!0),void 0!==window.ejecta&&(e.ejecta=!0)),"undefined"!=typeof process&&process.versions&&process.versions.node&&(e.node=!0),e.node&&"object"==typeof process.versions&&(e.nodeWebkit=!!process.versions["node-webkit"],e.electron=!!process.versions.electron),/Crosswalk/.test(t)&&(e.crosswalk=!0),e.pixelRatio=window.devicePixelRatio||1,e}()},5561:(t,e,i)=>{var s=i(8831),r={h264:!1,hls:!1,mp4:!1,m4v:!1,ogg:!1,vp9:!1,webm:!1,mov:!0,hasRequestVideoFrame:!1};t.exports=function(){if("function"==typeof importScripts)return r;var t=document.createElement("video"),e=!!t.canPlayType,i=/^no$/;try{e&&(t.canPlayType('video/ogg; codecs="theora"').replace(i,"")&&(r.ogg=!0),t.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(i,"")&&(r.h264=!0,r.mp4=!0),t.canPlayType("video/x-m4v").replace(i,"")&&(r.m4v=!0),t.canPlayType('video/webm; codecs="vp8, vorbis"').replace(i,"")&&(r.webm=!0),t.canPlayType('video/webm; codecs="vp9"').replace(i,"")&&(r.vp9=!0),t.canPlayType('application/x-mpegURL; codecs="avc1.42E01E"').replace(i,"")&&(r.hls=!0))}catch(t){}return t.parentNode&&t.parentNode.removeChild(t),r.getVideoURL=function(t){Array.isArray(t)||(t=[t]);for(var e=0;e<t.length;e++){var i,n=s(t[e],"url",t[e]);if(0===n.indexOf("blob:"))return{url:n,type:""};if(i=0===n.indexOf("data:")?n.split(",")[0].match(/\/(.*?);/):n.match(/\.([a-zA-Z0-9]+)($|\?)/),i=s(t[e],"type",i?i[1]:"").toLowerCase(),r[i])return{url:n,type:i}}return null},r}()},5125:(t,e,i)=>{t.exports={os:i(5079),browser:i(4005),features:i(2250),input:i(4821),audio:i(583),video:i(5561),fullscreen:i(7080),canvasFeatures:i(9134)}},1501:(t,e,i)=>{var s=i(1772),r=new Float32Array(20),n=new s({initialize:function(){this._matrix=new Float32Array(20),this.alpha=1,this._dirty=!0,this._data=new Float32Array(20),this.reset()},set:function(t){return this._matrix.set(t),this._dirty=!0,this},reset:function(){var t=this._matrix;return t.fill(0),t[0]=1,t[6]=1,t[12]=1,t[18]=1,this.alpha=1,this._dirty=!0,this},getData:function(){var t=this._data;return this._dirty&&(t.set(this._matrix),t[4]/=255,t[9]/=255,t[14]/=255,t[19]/=255,this._dirty=!1),t},brightness:function(t,e){void 0===t&&(t=0),void 0===e&&(e=!1);var i=t;return this.multiply([i,0,0,0,0,0,i,0,0,0,0,0,i,0,0,0,0,0,1,0],e)},saturate:function(t,e){void 0===t&&(t=0),void 0===e&&(e=!1);var i=2*t/3+1,s=-.5*(i-1);return this.multiply([i,s,s,0,0,s,i,s,0,0,s,s,i,0,0,0,0,0,1,0],e)},desaturate:function(t){return void 0===t&&(t=!1),this.saturate(-1,t)},hue:function(t,e){void 0===t&&(t=0),void 0===e&&(e=!1),t=t/180*Math.PI;var i=Math.cos(t),s=Math.sin(t),r=.213,n=.715,a=.072;return this.multiply([r+.787*i+s*-r,n+i*-n+s*-n,a+i*-a+.928*s,0,0,r+i*-r+.143*s,n+i*(1-n)+.14*s,a+i*-a+-.283*s,0,0,r+i*-r+-.787*s,n+i*-n+s*n,a+.928*i+s*a,0,0,0,0,0,1,0],e)},grayscale:function(t,e){return void 0===t&&(t=1),void 0===e&&(e=!1),this.saturate(-t,e)},blackWhite:function(t){return void 0===t&&(t=!1),this.multiply(n.BLACK_WHITE,t)},contrast:function(t,e){void 0===t&&(t=0),void 0===e&&(e=!1);var i=t+1,s=-.5*(i-1);return this.multiply([i,0,0,0,s,0,i,0,0,s,0,0,i,0,s,0,0,0,1,0],e)},negative:function(t){return void 0===t&&(t=!1),this.multiply(n.NEGATIVE,t)},desaturateLuminance:function(t){return void 0===t&&(t=!1),this.multiply(n.DESATURATE_LUMINANCE,t)},sepia:function(t){return void 0===t&&(t=!1),this.multiply(n.SEPIA,t)},night:function(t,e){return void 0===t&&(t=.1),void 0===e&&(e=!1),this.multiply([-2*t,-t,0,0,0,-t,0,t,0,0,0,t,2*t,0,0,0,0,0,1,0],e)},lsd:function(t){return void 0===t&&(t=!1),this.multiply(n.LSD,t)},brown:function(t){return void 0===t&&(t=!1),this.multiply(n.BROWN,t)},vintagePinhole:function(t){return void 0===t&&(t=!1),this.multiply(n.VINTAGE,t)},kodachrome:function(t){return void 0===t&&(t=!1),this.multiply(n.KODACHROME,t)},technicolor:function(t){return void 0===t&&(t=!1),this.multiply(n.TECHNICOLOR,t)},polaroid:function(t){return void 0===t&&(t=!1),this.multiply(n.POLAROID,t)},shiftToBGR:function(t){return void 0===t&&(t=!1),this.multiply(n.SHIFT_BGR,t)},multiply:function(t,e){void 0===e&&(e=!1),e||this.reset();var i=this._matrix,s=r;return s.set(i),i.set([s[0]*t[0]+s[1]*t[5]+s[2]*t[10]+s[3]*t[15],s[0]*t[1]+s[1]*t[6]+s[2]*t[11]+s[3]*t[16],s[0]*t[2]+s[1]*t[7]+s[2]*t[12]+s[3]*t[17],s[0]*t[3]+s[1]*t[8]+s[2]*t[13]+s[3]*t[18],s[0]*t[4]+s[1]*t[9]+s[2]*t[14]+s[3]*t[19]+s[4],s[5]*t[0]+s[6]*t[5]+s[7]*t[10]+s[8]*t[15],s[5]*t[1]+s[6]*t[6]+s[7]*t[11]+s[8]*t[16],s[5]*t[2]+s[6]*t[7]+s[7]*t[12]+s[8]*t[17],s[5]*t[3]+s[6]*t[8]+s[7]*t[13]+s[8]*t[18],s[5]*t[4]+s[6]*t[9]+s[7]*t[14]+s[8]*t[19]+s[9],s[10]*t[0]+s[11]*t[5]+s[12]*t[10]+s[13]*t[15],s[10]*t[1]+s[11]*t[6]+s[12]*t[11]+s[13]*t[16],s[10]*t[2]+s[11]*t[7]+s[12]*t[12]+s[13]*t[17],s[10]*t[3]+s[11]*t[8]+s[12]*t[13]+s[13]*t[18],s[10]*t[4]+s[11]*t[9]+s[12]*t[14]+s[13]*t[19]+s[14],s[15]*t[0]+s[16]*t[5]+s[17]*t[10]+s[18]*t[15],s[15]*t[1]+s[16]*t[6]+s[17]*t[11]+s[18]*t[16],s[15]*t[2]+s[16]*t[7]+s[17]*t[12]+s[18]*t[17],s[15]*t[3]+s[16]*t[8]+s[17]*t[13]+s[18]*t[18],s[15]*t[4]+s[16]*t[9]+s[17]*t[14]+s[18]*t[19]+s[19]]),this._dirty=!0,this}});n.BLACK_WHITE=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],n.NEGATIVE=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],n.DESATURATE_LUMINANCE=[.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,0,0,0,1,0],n.SEPIA=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],n.LSD=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],n.BROWN=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],n.VINTAGE=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],n.KODACHROME=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],n.TECHNICOLOR=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],n.POLAROID=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],n.SHIFT_BGR=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],t.exports=n},5840:(t,e,i)=>{var s,r,n,a=i(3709),o=i(4206),h=[],l=!1;t.exports=(n=function(){var t=0;return h.forEach((function(e){e.parent&&t++})),t},{create2D:function(t,e,i){return s(t,e,i,a.CANVAS)},create:s=function(t,e,i,s,n){var c;void 0===e&&(e=1),void 0===i&&(i=1),void 0===s&&(s=a.CANVAS),void 0===n&&(n=!1);var u=r(s);return null===u?(u={parent:t,canvas:document.createElement("canvas"),type:s},s===a.CANVAS&&h.push(u),c=u.canvas):(u.parent=t,c=u.canvas),n&&(u.parent=c),c.width=e,c.height=i,l&&s===a.CANVAS&&o.disable(c.getContext("2d",{willReadFrequently:!1})),c},createWebGL:function(t,e,i){return s(t,e,i,a.WEBGL)},disableSmoothing:function(){l=!0},enableSmoothing:function(){l=!1},first:r=function(t){if(void 0===t&&(t=a.CANVAS),t===a.WEBGL)return null;for(var e=0;e<h.length;e++){var i=h[e];if(!i.parent&&i.type===t)return i}return null},free:function(){return h.length-n()},pool:h,remove:function(t){var e=t instanceof HTMLCanvasElement;h.forEach((function(i){(e&&i.canvas===t||!e&&i.parent===t)&&(i.parent=null,i.canvas.width=1,i.canvas.height=1)}))},total:n})},4206:t=>{var e,i="";t.exports={disable:function(t){return""===i&&(i=e(t)),i&&(t[i]=!1),t},enable:function(t){return""===i&&(i=e(t)),i&&(t[i]=!0),t},getPrefix:e=function(t){for(var e=["i","webkitI","msI","mozI","oI"],i=0;i<e.length;i++){var s=e[i]+"mageSmoothingEnabled";if(s in t)return s}return null},isEnabled:function(t){return null!==i?t[i]:null}}},4929:(t,e,i)=>{var s=i(1772),r=i(4038),n=new s({initialize:function(t,e,i,s,r,n){e||(e=t.sys.make.image({x:i,y:s,key:r,frame:n,add:!1})),this.bitmapMask=e,this.invertAlpha=!1,this.isStencil=!1},setBitmap:function(t){this.bitmapMask=t},preRenderWebGL:function(t,e,i){t.pipelines.BITMAPMASK_PIPELINE.beginMask(this,e,i)},postRenderWebGL:function(t,e,i){t.pipelines.BITMAPMASK_PIPELINE.endMask(this,e,i)},preRenderCanvas:function(){},postRenderCanvas:function(){},destroy:function(){this.bitmapMask=null}});r.register("bitmapMask",(function(t,e,i,s,r){return new n(this.scene,t,e,i,s,r)})),t.exports=n},2654:(t,e,i)=>{var s=new(i(1772))({initialize:function(t,e){this.geometryMask=e,this.invertAlpha=!1,this.isStencil=!0,this.level=0},setShape:function(t){return this.geometryMask=t,this},setInvertAlpha:function(t){return void 0===t&&(t=!0),this.invertAlpha=t,this},preRenderWebGL:function(t,e,i){var s=t.gl;t.flush(),0===t.maskStack.length&&(s.enable(s.STENCIL_TEST),s.clear(s.STENCIL_BUFFER_BIT),t.maskCount=0),t.currentCameraMask.mask!==this&&(t.currentMask.mask=this),t.maskStack.push({mask:this,camera:i}),this.applyStencil(t,i,!0),t.maskCount++},applyStencil:function(t,e,i){var s=t.gl,r=this.geometryMask,n=t.maskCount,a=255;s.colorMask(!1,!1,!1,!1),i?(s.stencilFunc(s.EQUAL,n,a),s.stencilOp(s.KEEP,s.KEEP,s.INCR),n++):(s.stencilFunc(s.EQUAL,n+1,a),s.stencilOp(s.KEEP,s.KEEP,s.DECR)),this.level=n,r.renderWebGL(t,r,e),t.flush(),s.colorMask(!0,!0,!0,!0),s.stencilOp(s.KEEP,s.KEEP,s.KEEP),this.invertAlpha?s.stencilFunc(s.NOTEQUAL,n,a):s.stencilFunc(s.EQUAL,n,a)},postRenderWebGL:function(t){var e=t.gl;t.maskStack.pop(),t.maskCount--,t.flush();var i=t.currentMask;if(0===t.maskStack.length)i.mask=null,e.disable(e.STENCIL_TEST);else{var s=t.maskStack[t.maskStack.length-1];s.mask.applyStencil(t,s.camera,!1),t.currentCameraMask.mask!==s.mask?(i.mask=s.mask,i.camera=s.camera):i.mask=null}},preRenderCanvas:function(t,e,i){var s=this.geometryMask;t.currentContext.save(),s.renderCanvas(t,s,i,null,null,!0),t.currentContext.clip()},postRenderCanvas:function(t){t.currentContext.restore()},destroy:function(){this.geometryMask=null}});t.exports=s},7045:(t,e,i)=>{var s=i(1772),r=i(1677),n=i(1994),a=new s({Extends:r,initialize:function(t,e){void 0===e&&(e=1),r.call(this,n.BARREL,t),this.amount=e}});t.exports=a},502:(t,e,i)=>{var s=i(1772),r=i(1677),n=i(1994),a=new s({Extends:r,initialize:function(t,e,i,s,a,o,h){void 0===i&&(i=1),void 0===s&&(s=1),void 0===a&&(a=1),void 0===o&&(o=1),void 0===h&&(h=4),r.call(this,n.BLOOM,t),this.steps=h,this.offsetX=i,this.offsetY=s,this.blurStrength=a,this.strength=o,this.glcolor=[1,1,1],null!=e&&(this.color=e)},color:{get:function(){var t=this.glcolor;return(255*t[0]<<16)+(255*t[1]<<8)+(255*t[2]|0)},set:function(t){var e=this.glcolor;e[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255}}});t.exports=a},5280:(t,e,i)=>{var s=i(1772),r=i(1677),n=i(1994),a=new s({Extends:r,initialize:function(t,e,i,s,a,o,h){void 0===e&&(e=0),void 0===i&&(i=2),void 0===s&&(s=2),void 0===a&&(a=1),void 0===h&&(h=4),r.call(this,n.BLUR,t),this.quality=e,this.x=i,this.y=s,this.steps=h,this.strength=a,this.glcolor=[1,1,1],null!=o&&(this.color=o)},color:{get:function(){var t=this.glcolor;return(255*t[0]<<16)+(255*t[1]<<8)+(255*t[2]|0)},set:function(t){var e=this.glcolor;e[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255}}});t.exports=a},7588:(t,e,i)=>{var s=i(1772),r=i(1677),n=i(1994),a=new s({Extends:r,initialize:function(t,e,i,s,a,o,h,l){void 0===e&&(e=.5),void 0===i&&(i=1),void 0===s&&(s=.2),void 0===a&&(a=!1),void 0===o&&(o=1),void 0===h&&(h=1),void 0===l&&(l=1),r.call(this,n.BOKEH,t),this.radius=e,this.amount=i,this.contrast=s,this.isTiltShift=a,this.strength=l,this.blurX=o,this.blurY=h}});t.exports=a},7157:(t,e,i)=>{var s=i(1772),r=i(1677),n=i(1994),a=new s({Extends:r,initialize:function(t,e,i,s,a,o){void 0===e&&(e=8),void 0===a&&(a=1),void 0===o&&(o=.005),r.call(this,n.CIRCLE,t),this.scale=a,this.feather=o,this.thickness=e,this.glcolor=[1,.2,.7],this.glcolor2=[1,0,0,.4],null!=i&&(this.color=i),null!=s&&(this.backgroundColor=s)},color:{get:function(){var t=this.glcolor;return(255*t[0]<<16)+(255*t[1]<<8)+(255*t[2]|0)},set:function(t){var e=this.glcolor;e[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255}},backgroundColor:{get:function(){var t=this.glcolor2;return(255*t[0]<<16)+(255*t[1]<<8)+(255*t[2]|0)},set:function(t){var e=this.glcolor2;e[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255}},backgroundAlpha:{get:function(){return this.glcolor2[3]},set:function(t){this.glcolor2[3]=t}}});t.exports=a},3131:(t,e,i)=>{var s=i(1772),r=i(1501),n=i(1994),a=new s({Extends:r,initialize:function(t){r.call(this),this.type=n.COLOR_MATRIX,this.gameObject=t,this.active=!0},destroy:function(){this.gameObject=null,this._matrix=null,this._data=null}});t.exports=a},1677:(t,e,i)=>{var s=new(i(1772))({initialize:function(t,e){this.type=t,this.gameObject=e,this.active=!0},setActive:function(t){return this.active=t,this},destroy:function(){this.gameObject=null,this.active=!1}});t.exports=s},9962:(t,e,i)=>{var s=i(1772),r=i(1677),n=i(1994),a=new s({Extends:r,initialize:function(t,e,i,s){void 0===e&&(e="__WHITE"),void 0===i&&(i=.005),void 0===s&&(s=.005),r.call(this,n.DISPLACEMENT,t),this.x=i,this.y=s,this.glTexture,this.setTexture(e)},setTexture:function(t){var e=this.gameObject.scene.sys.textures.getFrame(t);return e&&(this.glTexture=e.glTexture),this}});t.exports=a},3972:(t,e,i)=>{var s=i(1772),r=i(1677),n=i(1994),a=new s({Extends:r,initialize:function(t,e,i,s,a){void 0===i&&(i=4),void 0===s&&(s=0),void 0===a&&(a=!1),r.call(this,n.GLOW,t),this.outerStrength=i,this.innerStrength=s,this.knockout=a,this.glcolor=[1,1,1,1],void 0!==e&&(this.color=e)},color:{get:function(){var t=this.glcolor;return(255*t[0]<<16)+(255*t[1]<<8)+(255*t[2]|0)},set:function(t){var e=this.glcolor;e[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255}}});t.exports=a},6161:(t,e,i)=>{var s=i(1772),r=i(1677),n=i(1994),a=new s({Extends:r,initialize:function(t,e,i,s,a,o,h,l,c){void 0===s&&(s=.2),void 0===a&&(a=0),void 0===o&&(o=0),void 0===h&&(h=0),void 0===l&&(l=1),void 0===c&&(c=0),r.call(this,n.GRADIENT,t),this.alpha=s,this.size=c,this.fromX=a,this.fromY=o,this.toX=h,this.toY=l,this.glcolor1=[255,0,0],this.glcolor2=[0,255,0],null!=e&&(this.color1=e),null!=i&&(this.color2=i)},color1:{get:function(){var t=this.glcolor1;return(t[0]<<16)+(t[1]<<8)+(0|t[2])},set:function(t){var e=this.glcolor1;e[0]=t>>16&255,e[1]=t>>8&255,e[2]=255&t}},color2:{get:function(){var t=this.glcolor2;return(t[0]<<16)+(t[1]<<8)+(0|t[2])},set:function(t){var e=this.glcolor2;e[0]=t>>16&255,e[1]=t>>8&255,e[2]=255&t}}});t.exports=a},4925:(t,e,i)=>{var s=i(1772),r=i(1677),n=i(1994),a=new s({Extends:r,initialize:function(t,e){void 0===e&&(e=1),r.call(this,n.PIXELATE,t),this.amount=e}});t.exports=a},9261:(t,e,i)=>{var s=i(1772),r=i(1677),n=i(1994),a=new s({Extends:r,initialize:function(t,e,i,s,a,o,h,l){void 0===e&&(e=0),void 0===i&&(i=0),void 0===s&&(s=.1),void 0===a&&(a=1),void 0===h&&(h=6),void 0===l&&(l=1),r.call(this,n.SHADOW,t),this.x=e,this.y=i,this.decay=s,this.power=a,this.glcolor=[0,0,0,1],this.samples=h,this.intensity=l,void 0!==o&&(this.color=o)},color:{get:function(){var t=this.glcolor;return(255*t[0]<<16)+(255*t[1]<<8)+(255*t[2]|0)},set:function(t){var e=this.glcolor;e[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255}}});t.exports=a},6870:(t,e,i)=>{var s=i(1772),r=i(1677),n=i(1994),a=new s({Extends:r,initialize:function(t,e,i,s,a){void 0===e&&(e=.5),void 0===i&&(i=.5),void 0===s&&(s=3),void 0===a&&(a=!1),r.call(this,n.SHINE,t),this.speed=e,this.lineWidth=i,this.gradient=s,this.reveal=a}});t.exports=a},9407:(t,e,i)=>{var s=i(1772),r=i(1677),n=i(1994),a=new s({Extends:r,initialize:function(t,e,i,s,a){void 0===e&&(e=.5),void 0===i&&(i=.5),void 0===s&&(s=.5),void 0===a&&(a=.5),r.call(this,n.VIGNETTE,t),this.x=e,this.y=i,this.radius=s,this.strength=a}});t.exports=a},3434:(t,e,i)=>{var s=i(1772),r=i(1677),n=i(1994),a=new s({Extends:r,initialize:function(t,e,i,s,a){void 0===e&&(e=.1),void 0===i&&(i=0),void 0===s&&(s=0),void 0===a&&(a=!1),r.call(this,n.WIPE,t),this.progress=0,this.wipeWidth=e,this.direction=i,this.axis=s,this.reveal=a}});t.exports=a},1994:t=>{t.exports={GLOW:4,SHADOW:5,PIXELATE:6,VIGNETTE:7,SHINE:8,BLUR:9,GRADIENT:12,BLOOM:13,COLOR_MATRIX:14,CIRCLE:15,BARREL:16,DISPLACEMENT:17,WIPE:18,BOKEH:19}},4217:(t,e,i)=>{var s=i(1180),r=i(1994),n={Barrel:i(7045),Controller:i(1677),Bloom:i(502),Blur:i(5280),Bokeh:i(7588),Circle:i(7157),ColorMatrix:i(3131),Displacement:i(9962),Glow:i(3972),Gradient:i(6161),Pixelate:i(4925),Shadow:i(9261),Shine:i(6870),Vignette:i(9407),Wipe:i(3434)};n=s(!1,n,r),t.exports=n},6814:(t,e,i)=>{var s=i(7047),r=i(7931);t.exports=function(t,e,i){e.x=r(i,"x",0),e.y=r(i,"y",0),e.depth=r(i,"depth",0),e.flipX=r(i,"flipX",!1),e.flipY=r(i,"flipY",!1);var n=r(i,"scale",null);"number"==typeof n?e.setScale(n):null!==n&&(e.scaleX=r(n,"x",1),e.scaleY=r(n,"y",1));var a=r(i,"scrollFactor",null);"number"==typeof a?e.setScrollFactor(a):null!==a&&(e.scrollFactorX=r(a,"x",1),e.scrollFactorY=r(a,"y",1)),e.rotation=r(i,"rotation",0);var o=r(i,"angle",null);null!==o&&(e.angle=o),e.alpha=r(i,"alpha",1);var h=r(i,"origin",null);if("number"==typeof h)e.setOrigin(h);else if(null!==h){var l=r(h,"x",.5),c=r(h,"y",.5);e.setOrigin(l,c)}return e.blendMode=r(i,"blendMode",s.NORMAL),e.visible=r(i,"visible",!0),r(i,"add",!0)&&t.sys.displayList.add(e),e.preUpdate&&t.sys.updateList.add(e),e}},8894:(t,e,i)=>{var s=i(1772),r=i(7057),n=i(3572),a=i(792),o=i(8405),h=i(1607),l=new s({Extends:a,initialize:function(t,e){a.call(this),this.scene=t,this.displayList=null,this.type=e,this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.on(o.ADDED_TO_SCENE,this.addedToScene,this),this.on(o.REMOVED_FROM_SCENE,this.removedFromScene,this),t.sys.queueDepthSort()},setActive:function(t){return this.active=t,this},setName:function(t){return this.name=t,this},setState:function(t){return this.state=t,this},setDataEnabled:function(){return this.data||(this.data=new n(this)),this},setData:function(t,e){return this.data||(this.data=new n(this)),this.data.set(t,e),this},incData:function(t,e){return this.data||(this.data=new n(this)),this.data.inc(t,e),this},toggleData:function(t){return this.data||(this.data=new n(this)),this.data.toggle(t),this},getData:function(t){return this.data||(this.data=new n(this)),this.data.get(t)},setInteractive:function(t,e,i){return this.scene.sys.input.enable(this,t,e,i),this},disableInteractive:function(t){return void 0===t&&(t=!1),this.scene.sys.input.disable(this,t),this},removeInteractive:function(t){return void 0===t&&(t=!1),this.scene.sys.input.clear(this),t&&this.scene.sys.input.resetCursor(),this.input=void 0,this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return r(this)},willRender:function(t){return!(!(!this.displayList||!this.displayList.active||this.displayList.willRender(t))||l.RENDER_MASK!==this.renderFlags||0!==this.cameraFilter&&this.cameraFilter&t.id)},getIndexList:function(){for(var t=this,e=this.parentContainer,i=[];e&&(i.unshift(e.getIndex(t)),t=e,e.parentContainer);)e=e.parentContainer;return this.displayList?i.unshift(this.displayList.getIndex(t)):i.unshift(this.scene.sys.displayList.getIndex(t)),i},addToDisplayList:function(t){return void 0===t&&(t=this.scene.sys.displayList),this.displayList&&this.displayList!==t&&this.removeFromDisplayList(),t.exists(this)||(this.displayList=t,t.add(this,!0),t.queueDepthSort(),this.emit(o.ADDED_TO_SCENE,this,this.scene),t.events.emit(h.ADDED_TO_SCENE,this,this.scene)),this},addToUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.add(this),this},removeFromDisplayList:function(){var t=this.displayList||this.scene.sys.displayList;return t&&t.exists(this)&&(t.remove(this,!0),t.queueDepthSort(),this.displayList=null,this.emit(o.REMOVED_FROM_SCENE,this,this.scene),t.events.emit(h.REMOVED_FROM_SCENE,this,this.scene)),this},removeFromUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.remove(this),this},getDisplayList:function(){var t=null;return this.parentContainer?t=this.parentContainer.list:this.displayList&&(t=this.displayList.list),t},destroy:function(t){this.scene&&!this.ignoreDestroy&&(void 0===t&&(t=!1),this.preDestroy&&this.preDestroy.call(this),this.emit(o.DESTROY,this,t),this.removeAllListeners(),this.postPipelines&&this.resetPostPipeline(!0),this.removeFromDisplayList(),this.removeFromUpdateList(),this.input&&(this.scene.sys.input.clear(this),this.input=void 0),this.data&&(this.data.destroy(),this.data=void 0),this.body&&(this.body.destroy(),this.body=void 0),this.preFX&&(this.preFX.destroy(),this.preFX=void 0),this.postFX&&(this.postFX.destroy(),this.postFX=void 0),this.active=!1,this.visible=!1,this.scene=void 0,this.parentContainer=void 0)}});l.RENDER_MASK=15,t.exports=l},4038:(t,e,i)=>{var s=i(1772),r=i(522),n=i(1607),a=new s({initialize:function(t){this.scene=t,this.systems=t.sys,this.events=t.sys.events,this.displayList,this.updateList,this.events.once(n.BOOT,this.boot,this),this.events.on(n.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(n.DESTROY,this.destroy,this)},start:function(){this.events.once(n.SHUTDOWN,this.shutdown,this)},existing:function(t){return(t.renderCanvas||t.renderWebGL)&&this.displayList.add(t),t.preUpdate&&this.updateList.add(t),t},shutdown:function(){this.events.off(n.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(n.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});a.register=function(t,e){a.prototype.hasOwnProperty(t)||(a.prototype[t]=e)},a.remove=function(t){a.prototype.hasOwnProperty(t)&&delete a.prototype[t]},r.register("GameObjectFactory",a,"add"),t.exports=a},8835:(t,e,i)=>{var s=i(9465),r=new s,n=new s,a=new s,o={camera:r,sprite:n,calc:a};t.exports=function(t,e,i){var s=r,h=n,l=a;return h.applyITRS(t.x,t.y,t.rotation,t.scaleX,t.scaleY),s.copyFrom(e.matrix),i?(s.multiplyWithOffset(i,-e.scrollX*t.scrollFactorX,-e.scrollY*t.scrollFactorY),h.e=t.x,h.f=t.y):(h.e-=e.scrollX*t.scrollFactorX,h.f-=e.scrollY*t.scrollFactorY),s.multiply(h,l),o}},4224:(t,e,i)=>{var s=i(2522),r={_alpha:1,_alphaTL:1,_alphaTR:1,_alphaBL:1,_alphaBR:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(t,e,i,r){return void 0===t&&(t=1),void 0===e?this.alpha=t:(this._alphaTL=s(t,0,1),this._alphaTR=s(e,0,1),this._alphaBL=s(i,0,1),this._alphaBR=s(r,0,1)),this},alpha:{get:function(){return this._alpha},set:function(t){var e=s(t,0,1);this._alpha=e,this._alphaTL=e,this._alphaTR=e,this._alphaBL=e,this._alphaBR=e,0===e?this.renderFlags&=-3:this.renderFlags|=2}},alphaTopLeft:{get:function(){return this._alphaTL},set:function(t){var e=s(t,0,1);this._alphaTL=e,0!==e&&(this.renderFlags|=2)}},alphaTopRight:{get:function(){return this._alphaTR},set:function(t){var e=s(t,0,1);this._alphaTR=e,0!==e&&(this.renderFlags|=2)}},alphaBottomLeft:{get:function(){return this._alphaBL},set:function(t){var e=s(t,0,1);this._alphaBL=e,0!==e&&(this.renderFlags|=2)}},alphaBottomRight:{get:function(){return this._alphaBR},set:function(t){var e=s(t,0,1);this._alphaBR=e,0!==e&&(this.renderFlags|=2)}}};t.exports=r},3816:(t,e,i)=>{var s=i(2522),r={_alpha:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(t){return void 0===t&&(t=1),this.alpha=t,this},alpha:{get:function(){return this._alpha},set:function(t){var e=s(t,0,1);this._alpha=e,0===e?this.renderFlags&=-3:this.renderFlags|=2}}};t.exports=r},5736:(t,e,i)=>{var s=i(7047),r={_blendMode:s.NORMAL,blendMode:{get:function(){return this._blendMode},set:function(t){"string"==typeof t&&(t=s[t]),(t|=0)>=-1&&(this._blendMode=t)}},setBlendMode:function(t){return this.blendMode=t,this}};t.exports=r},6496:t=>{t.exports={width:0,height:0,displayWidth:{get:function(){return this.scaleX*this.width},set:function(t){this.scaleX=t/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(t){this.scaleY=t/this.height}},setSize:function(t,e){return this.width=t,this.height=e,this},setDisplaySize:function(t,e){return this.displayWidth=t,this.displayHeight=e,this}}},6444:t=>{var e={texture:null,frame:null,isCropped:!1,setCrop:function(t,e,i,s){if(void 0===t)this.isCropped=!1;else if(this.frame){if("number"==typeof t)this.frame.setCropUVs(this._crop,t,e,i,s,this.flipX,this.flipY);else{var r=t;this.frame.setCropUVs(this._crop,r.x,r.y,r.width,r.height,this.flipX,this.flipY)}this.isCropped=!0}return this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};t.exports=e},6653:(t,e,i)=>{var s=i(9218),r={_depth:0,depth:{get:function(){return this._depth},set:function(t){this.displayList&&this.displayList.queueDepthSort(),this._depth=t}},setDepth:function(t){return void 0===t&&(t=0),this.depth=t,this},setToTop:function(){var t=this.getDisplayList();return t&&s.BringToTop(t,this),this},setToBack:function(){var t=this.getDisplayList();return t&&s.SendToBack(t,this),this},setAbove:function(t){var e=this.getDisplayList();return e&&t&&s.MoveAbove(e,this,t),this},setBelow:function(t){var e=this.getDisplayList();return e&&t&&s.MoveBelow(e,this,t),this}};t.exports=r},6656:(t,e,i)=>{var s=i(1772),r=i(4217),n=i(2418),a=new s({initialize:function(t,e){this.gameObject=t,this.isPost=e,this.enabled=!1,this.list=[],this.padding=0},setPadding:function(t){return void 0===t&&(t=0),this.padding=t,this.gameObject},onFXCopy:function(){},onFX:function(){},enable:function(t){if(!this.isPost){var e=this.gameObject.scene.sys.renderer;e&&e.pipelines?(this.gameObject.pipeline=e.pipelines.FX_PIPELINE,void 0!==t&&(this.padding=t),this.enabled=!0):this.enabled=!1}},clear:function(){if(this.isPost)this.gameObject.resetPostPipeline(!0);else{for(var t=this.list,e=0;e<t.length;e++)t[e].destroy();this.list=[]}return this.enabled=!1,this.gameObject},remove:function(t){var e;if(this.isPost){var i=this.gameObject.getPostPipeline(String(t.type));for(Array.isArray(i)||(i=[i]),e=0;e<i.length;e++){var s=i[e];if(s.controller===t){this.gameObject.removePostPipeline(s),t.destroy();break}}}else{var r=this.list;for(e=0;e<r.length;e++)r[e]===t&&(n(r,e),t.destroy())}return this.gameObject},disable:function(t){return void 0===t&&(t=!1),this.isPost||this.gameObject.resetPipeline(),this.enabled=!1,t&&this.clear(),this.gameObject},add:function(t,e){if(!this.isPost)return this.enabled||this.enable(),this.list.push(t),t;var i=String(t.type);this.gameObject.setPostPipeline(i,e);var s=this.gameObject.getPostPipeline(i);return s?(Array.isArray(s)&&(s=s.pop()),s&&(s.controller=t),t):void 0},addGlow:function(t,e,i,s,n,a){return this.add(new r.Glow(this.gameObject,t,e,i,s),{quality:n,distance:a})},addShadow:function(t,e,i,s,n,a,o){return this.add(new r.Shadow(this.gameObject,t,e,i,s,n,a,o))},addPixelate:function(t){return this.add(new r.Pixelate(this.gameObject,t))},addVignette:function(t,e,i,s){return this.add(new r.Vignette(this.gameObject,t,e,i,s))},addShine:function(t,e,i,s){return this.add(new r.Shine(this.gameObject,t,e,i,s))},addBlur:function(t,e,i,s,n,a){return this.add(new r.Blur(this.gameObject,t,e,i,s,n,a))},addGradient:function(t,e,i,s,n,a,o,h){return this.add(new r.Gradient(this.gameObject,t,e,i,s,n,a,o,h))},addBloom:function(t,e,i,s,n,a){return this.add(new r.Bloom(this.gameObject,t,e,i,s,n,a))},addColorMatrix:function(){return this.add(new r.ColorMatrix(this.gameObject))},addCircle:function(t,e,i,s,n){return this.add(new r.Circle(this.gameObject,t,e,i,s,n))},addBarrel:function(t){return this.add(new r.Barrel(this.gameObject,t))},addDisplacement:function(t,e,i){return this.add(new r.Displacement(this.gameObject,t,e,i))},addWipe:function(t,e,i){return this.add(new r.Wipe(this.gameObject,t,e,i))},addReveal:function(t,e,i){return this.add(new r.Wipe(this.gameObject,t,e,i,!0))},addBokeh:function(t,e,i){return this.add(new r.Bokeh(this.gameObject,t,e,i))},addTiltShift:function(t,e,i,s,n,a){return this.add(new r.Bokeh(this.gameObject,t,e,i,!0,s,n,a))},destroy:function(){this.clear(),this.gameObject=null}});t.exports=a},3441:t=>{t.exports={flipX:!1,flipY:!1,toggleFlipX:function(){return this.flipX=!this.flipX,this},toggleFlipY:function(){return this.flipY=!this.flipY,this},setFlipX:function(t){return this.flipX=t,this},setFlipY:function(t){return this.flipY=t,this},setFlip:function(t,e){return this.flipX=t,this.flipY=e,this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this}}},5989:(t,e,i)=>{var s=i(6068),r=i(1887),n=i(2474),a={prepareBoundsOutput:function(t,e){(void 0===e&&(e=!1),0!==this.rotation&&r(t,this.x,this.y,this.rotation),e&&this.parentContainer)&&this.parentContainer.getBoundsTransformMatrix().transformPoint(t.x,t.y,t);return t},getCenter:function(t,e){return void 0===t&&(t=new n),t.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,t.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(t,e)},getTopLeft:function(t,e){return t||(t=new n),t.x=this.x-this.displayWidth*this.originX,t.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(t,e)},getTopCenter:function(t,e){return t||(t=new n),t.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,t.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(t,e)},getTopRight:function(t,e){return t||(t=new n),t.x=this.x-this.displayWidth*this.originX+this.displayWidth,t.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(t,e)},getLeftCenter:function(t,e){return t||(t=new n),t.x=this.x-this.displayWidth*this.originX,t.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(t,e)},getRightCenter:function(t,e){return t||(t=new n),t.x=this.x-this.displayWidth*this.originX+this.displayWidth,t.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(t,e)},getBottomLeft:function(t,e){return t||(t=new n),t.x=this.x-this.displayWidth*this.originX,t.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(t,e)},getBottomCenter:function(t,e){return t||(t=new n),t.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,t.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(t,e)},getBottomRight:function(t,e){return t||(t=new n),t.x=this.x-this.displayWidth*this.originX+this.displayWidth,t.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(t,e)},getBounds:function(t){var e,i,r,n,a,o,h,l;if(void 0===t&&(t=new s),this.parentContainer){var c=this.parentContainer.getBoundsTransformMatrix();this.getTopLeft(t),c.transformPoint(t.x,t.y,t),e=t.x,i=t.y,this.getTopRight(t),c.transformPoint(t.x,t.y,t),r=t.x,n=t.y,this.getBottomLeft(t),c.transformPoint(t.x,t.y,t),a=t.x,o=t.y,this.getBottomRight(t),c.transformPoint(t.x,t.y,t),h=t.x,l=t.y}else this.getTopLeft(t),e=t.x,i=t.y,this.getTopRight(t),r=t.x,n=t.y,this.getBottomLeft(t),a=t.x,o=t.y,this.getBottomRight(t),h=t.x,l=t.y;return t.x=Math.min(e,r,a,h),t.y=Math.min(i,n,o,l),t.width=Math.max(e,r,a,h)-t.x,t.height=Math.max(i,n,o,l)-t.y,t}};t.exports=a},8378:(t,e,i)=>{var s=i(4929),r=i(2654),n={mask:null,setMask:function(t){return this.mask=t,this},clearMask:function(t){return void 0===t&&(t=!1),t&&this.mask&&this.mask.destroy(),this.mask=null,this},createBitmapMask:function(t,e,i,r,n){return void 0===t&&(this.texture||this.shader||this.geom)&&(t=this),new s(this.scene,t,e,i,r,n)},createGeometryMask:function(t){return void 0!==t||"Graphics"!==this.type&&!this.geom||(t=this),new r(this.scene,t)}};t.exports=n},228:t=>{var e={_originComponent:!0,originX:.5,originY:.5,_displayOriginX:0,_displayOriginY:0,displayOriginX:{get:function(){return this._displayOriginX},set:function(t){this._displayOriginX=t,this.originX=t/this.width}},displayOriginY:{get:function(){return this._displayOriginY},set:function(t){this._displayOriginY=t,this.originY=t/this.height}},setOrigin:function(t,e){return void 0===t&&(t=.5),void 0===e&&(e=t),this.originX=t,this.originY=e,this.updateDisplayOrigin()},setOriginFromFrame:function(){return this.frame&&this.frame.customPivot?(this.originX=this.frame.pivotX,this.originY=this.frame.pivotY,this.updateDisplayOrigin()):this.setOrigin()},setDisplayOrigin:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.displayOriginX=t,this.displayOriginY=e,this},updateDisplayOrigin:function(){return this._displayOriginX=this.originX*this.width,this._displayOriginY=this.originY*this.height,this}};t.exports=e},6687:(t,e,i)=>{var s=i(1601),r=i(4686),n=i(1841),a=i(1588),o=i(2474),h={path:null,rotateToPath:!1,pathRotationOffset:0,pathOffset:null,pathVector:null,pathDelta:null,pathTween:null,pathConfig:null,_prevDirection:a.PLAYING_FORWARD,setPath:function(t,e){void 0===e&&(e=this.pathConfig);var i=this.pathTween;return i&&i.isPlaying()&&i.stop(),this.path=t,e&&this.startFollow(e),this},setRotateToPath:function(t,e){return void 0===e&&(e=0),this.rotateToPath=t,this.pathRotationOffset=e,this},isFollowing:function(){var t=this.pathTween;return t&&t.isPlaying()},startFollow:function(t,e){void 0===t&&(t={}),void 0===e&&(e=0);var i=this.pathTween;i&&i.isPlaying()&&i.stop(),"number"==typeof t&&(t={duration:t}),t.from=n(t,"from",0),t.to=n(t,"to",1);var h=r(t,"positionOnPath",!1);this.rotateToPath=r(t,"rotateToPath",!1),this.pathRotationOffset=n(t,"rotationOffset",0);var l=n(t,"startAt",e);if(l&&(t.onStart=function(t){var e=t.data[0];e.progress=l,e.elapsed=e.duration*l;var i=e.ease(e.progress);e.current=e.start+(e.end-e.start)*i,e.setTargetValue()}),this.pathOffset||(this.pathOffset=new o(this.x,this.y)),this.pathVector||(this.pathVector=new o),this.pathDelta||(this.pathDelta=new o),this.pathDelta.reset(),t.persist=!0,this.pathTween=this.scene.sys.tweens.addCounter(t),this.path.getStartPoint(this.pathOffset),h&&(this.x=this.pathOffset.x,this.y=this.pathOffset.y),this.pathOffset.x=this.x-this.pathOffset.x,this.pathOffset.y=this.y-this.pathOffset.y,this._prevDirection=a.PLAYING_FORWARD,this.rotateToPath){var c=this.path.getPoint(.1);this.rotation=Math.atan2(c.y-this.y,c.x-this.x)+s(this.pathRotationOffset)}return this.pathConfig=t,this},pauseFollow:function(){var t=this.pathTween;return t&&t.isPlaying()&&t.pause(),this},resumeFollow:function(){var t=this.pathTween;return t&&t.isPaused()&&t.resume(),this},stopFollow:function(){var t=this.pathTween;return t&&t.isPlaying()&&t.stop(),this},pathUpdate:function(){var t=this.pathTween;if(t&&t.data){var e=t.data[0],i=this.pathDelta,r=this.pathVector;if(i.copy(r).negate(),e.state===a.COMPLETE)return this.path.getPoint(e.end,r),i.add(r),r.add(this.pathOffset),void this.setPosition(r.x,r.y);if(e.state!==a.PLAYING_FORWARD&&e.state!==a.PLAYING_BACKWARD)return;this.path.getPoint(t.getValue(),r),i.add(r),r.add(this.pathOffset);var n=this.x,o=this.y;this.setPosition(r.x,r.y);var h=this.x-n,l=this.y-o;if(0===h&&0===l)return;if(e.state!==this._prevDirection)return void(this._prevDirection=e.state);this.rotateToPath&&(this.rotation=Math.atan2(l,h)+s(this.pathRotationOffset))}}};t.exports=h},3416:(t,e,i)=>{var s=i(8015),r={defaultPipeline:null,pipeline:null,pipelineData:null,initPipeline:function(t){this.pipelineData={};var e=this.scene.sys.renderer;if(!e)return!1;var i=e.pipelines;if(i){void 0===t&&(t=i.default);var s=i.get(t);if(s)return this.defaultPipeline=s,this.pipeline=s,!0}return!1},setPipeline:function(t,e,i){var r=this.scene.sys.renderer;if(!r)return this;var n=r.pipelines;if(n){var a=n.get(t);a&&(this.pipeline=a),e&&(this.pipelineData=i?s(e):e)}return this},setPipelineData:function(t,e){var i=this.pipelineData;return void 0===e?delete i[t]:i[t]=e,this},resetPipeline:function(t){return void 0===t&&(t=!1),this.pipeline=this.defaultPipeline,t&&(this.pipelineData={}),null!==this.pipeline},getPipelineName:function(){return null===this.pipeline?null:this.pipeline.name}};t.exports=r},1530:(t,e,i)=>{var s=i(8015),r=i(6656),n=i(2418),a={hasPostPipeline:!1,postPipelines:null,postPipelineData:null,preFX:null,postFX:null,initPostPipeline:function(t){this.postPipelines=[],this.postPipelineData={},this.postFX=new r(this,!0),t&&(this.preFX=new r(this,!1))},setPostPipeline:function(t,e,i){var r=this.scene.sys.renderer;if(!r)return this;var n=r.pipelines;if(n){Array.isArray(t)||(t=[t]);for(var a=0;a<t.length;a++){var o=n.getPostPipeline(t[a],this,e);o&&this.postPipelines.push(o)}e&&(this.postPipelineData=i?s(e):e)}return this.hasPostPipeline=this.postPipelines.length>0,this},setPostPipelineData:function(t,e){var i=this.postPipelineData;return void 0===e?delete i[t]:i[t]=e,this},getPostPipeline:function(t){for(var e="string"==typeof t,i=this.postPipelines,s=[],r=0;r<i.length;r++){var n=i[r];(e&&n.name===t||!e&&n instanceof t)&&s.push(n)}return 1===s.length?s[0]:s},resetPostPipeline:function(t){void 0===t&&(t=!1);for(var e=this.postPipelines,i=0;i<e.length;i++)e[i].destroy();this.postPipelines=[],this.hasPostPipeline=!1,t&&(this.postPipelineData={})},removePostPipeline:function(t){for(var e="string"==typeof t,i=this.postPipelines,s=i.length-1;s>=0;s--){var r=i[s];(e&&r.name===t||!e&&r===t)&&(r.destroy(),n(i,s))}return this.hasPostPipeline=this.postPipelines.length>0,this},clearFX:function(){return this.preFX&&this.preFX.clear(),this.postFX&&this.postFX.clear(),this}};t.exports=a},4548:t=>{var e={scrollFactorX:1,scrollFactorY:1,setScrollFactor:function(t,e){return void 0===e&&(e=t),this.scrollFactorX=t,this.scrollFactorY=e,this}};t.exports=e},7675:t=>{var e={_sizeComponent:!0,width:0,height:0,displayWidth:{get:function(){return Math.abs(this.scaleX*this.frame.realWidth)},set:function(t){this.scaleX=t/this.frame.realWidth}},displayHeight:{get:function(){return Math.abs(this.scaleY*this.frame.realHeight)},set:function(t){this.scaleY=t/this.frame.realHeight}},setSizeToFrame:function(t){t||(t=this.frame),this.width=t.realWidth,this.height=t.realHeight;var e=this.input;return e&&!e.customHitArea&&(e.hitArea.width=this.width,e.hitArea.height=this.height),this},setSize:function(t,e){return this.width=t,this.height=e,this},setDisplaySize:function(t,e){return this.displayWidth=t,this.displayHeight=e,this}};t.exports=e},2619:(t,e,i)=>{var s=i(4894),r={texture:null,frame:null,isCropped:!1,setTexture:function(t,e,i,s){return this.texture=this.scene.sys.textures.get(t),this.setFrame(e,i,s)},setFrame:function(t,e,i){return void 0===e&&(e=!0),void 0===i&&(i=!0),t instanceof s?(this.texture=this.scene.sys.textures.get(t.texture.key),this.frame=t):this.frame=this.texture.get(t),this.frame.cutWidth&&this.frame.cutHeight?this.renderFlags|=8:this.renderFlags&=-9,this._sizeComponent&&e&&this.setSizeToFrame(),this._originComponent&&i&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this}};t.exports=r},8661:(t,e,i)=>{var s=i(4894),r={texture:null,frame:null,isCropped:!1,setCrop:function(t,e,i,s){if(void 0===t)this.isCropped=!1;else if(this.frame){if("number"==typeof t)this.frame.setCropUVs(this._crop,t,e,i,s,this.flipX,this.flipY);else{var r=t;this.frame.setCropUVs(this._crop,r.x,r.y,r.width,r.height,this.flipX,this.flipY)}this.isCropped=!0}return this},setTexture:function(t,e){return this.texture=this.scene.sys.textures.get(t),this.setFrame(e)},setFrame:function(t,e,i){return void 0===e&&(e=!0),void 0===i&&(i=!0),t instanceof s?(this.texture=this.scene.sys.textures.get(t.texture.key),this.frame=t):this.frame=this.texture.get(t),this.frame.cutWidth&&this.frame.cutHeight?this.renderFlags|=8:this.renderFlags&=-9,this._sizeComponent&&e&&this.setSizeToFrame(),this._originComponent&&i&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this.isCropped&&this.frame.updateCropUVs(this._crop,this.flipX,this.flipY),this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};t.exports=r},7627:t=>{var e={tintTopLeft:16777215,tintTopRight:16777215,tintBottomLeft:16777215,tintBottomRight:16777215,tintFill:!1,clearTint:function(){return this.setTint(16777215),this},setTint:function(t,e,i,s){return void 0===t&&(t=16777215),void 0===e&&(e=t,i=t,s=t),this.tintTopLeft=t,this.tintTopRight=e,this.tintBottomLeft=i,this.tintBottomRight=s,this.tintFill=!1,this},setTintFill:function(t,e,i,s){return this.setTint(t,e,i,s),this.tintFill=!0,this},tint:{get:function(){return this.tintTopLeft},set:function(t){this.setTint(t,t,t,t)}},isTinted:{get:function(){var t=16777215;return this.tintFill||this.tintTopLeft!==t||this.tintTopRight!==t||this.tintBottomLeft!==t||this.tintBottomRight!==t}}};t.exports=e},7057:t=>{t.exports=function(t){var e={name:t.name,type:t.type,x:t.x,y:t.y,depth:t.depth,scale:{x:t.scaleX,y:t.scaleY},origin:{x:t.originX,y:t.originY},flipX:t.flipX,flipY:t.flipY,rotation:t.rotation,alpha:t.alpha,visible:t.visible,blendMode:t.blendMode,textureKey:"",frameKey:"",data:{}};return t.texture&&(e.textureKey=t.texture.key,e.frameKey=t.frame.name),e}},9344:(t,e,i)=>{var s=i(7018),r=i(9465),n=i(7494),a=i(8273),o=i(1212),h=i(2474),l={hasTransformComponent:!0,_scaleX:1,_scaleY:1,_rotation:0,x:0,y:0,z:0,w:0,scale:{get:function(){return(this._scaleX+this._scaleY)/2},set:function(t){this._scaleX=t,this._scaleY=t,0===t?this.renderFlags&=-5:this.renderFlags|=4}},scaleX:{get:function(){return this._scaleX},set:function(t){this._scaleX=t,0===t?this.renderFlags&=-5:0!==this._scaleY&&(this.renderFlags|=4)}},scaleY:{get:function(){return this._scaleY},set:function(t){this._scaleY=t,0===t?this.renderFlags&=-5:0!==this._scaleX&&(this.renderFlags|=4)}},angle:{get:function(){return o(this._rotation*s.RAD_TO_DEG)},set:function(t){this.rotation=o(t)*s.DEG_TO_RAD}},rotation:{get:function(){return this._rotation},set:function(t){this._rotation=a(t)}},setPosition:function(t,e,i,s){return void 0===t&&(t=0),void 0===e&&(e=t),void 0===i&&(i=0),void 0===s&&(s=0),this.x=t,this.y=e,this.z=i,this.w=s,this},copyPosition:function(t){return void 0!==t.x&&(this.x=t.x),void 0!==t.y&&(this.y=t.y),void 0!==t.z&&(this.z=t.z),void 0!==t.w&&(this.w=t.w),this},setRandomPosition:function(t,e,i,s){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=this.scene.sys.scale.width),void 0===s&&(s=this.scene.sys.scale.height),this.x=t+Math.random()*i,this.y=e+Math.random()*s,this},setRotation:function(t){return void 0===t&&(t=0),this.rotation=t,this},setAngle:function(t){return void 0===t&&(t=0),this.angle=t,this},setScale:function(t,e){return void 0===t&&(t=1),void 0===e&&(e=t),this.scaleX=t,this.scaleY=e,this},setX:function(t){return void 0===t&&(t=0),this.x=t,this},setY:function(t){return void 0===t&&(t=0),this.y=t,this},setZ:function(t){return void 0===t&&(t=0),this.z=t,this},setW:function(t){return void 0===t&&(t=0),this.w=t,this},getLocalTransformMatrix:function(t){return void 0===t&&(t=new r),t.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY)},getWorldTransformMatrix:function(t,e){void 0===t&&(t=new r);var i=this.parentContainer;if(!i)return this.getLocalTransformMatrix(t);for(e||(e=new r),t.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY);i;)e.applyITRS(i.x,i.y,i._rotation,i._scaleX,i._scaleY),e.multiply(t,t),i=i.parentContainer;return t},getLocalPoint:function(t,e,i,s){i||(i=new h),s||(s=this.scene.sys.cameras.main);var r=s.scrollX,a=s.scrollY,o=t+r*this.scrollFactorX-r,l=e+a*this.scrollFactorY-a;return this.parentContainer?this.getWorldTransformMatrix().applyInverse(o,l,i):n(o,l,this.x,this.y,this.rotation,this.scaleX,this.scaleY,i),this._originComponent&&(i.x+=this._displayOriginX,i.y+=this._displayOriginY),i},getParentRotation:function(){for(var t=0,e=this.parentContainer;e;)t+=e.rotation,e=e.parentContainer;return t}};t.exports=l},9465:(t,e,i)=>{var s=i(1772),r=i(7018),n=i(2474),a=new s({initialize:function(t,e,i,s,r,n){void 0===t&&(t=1),void 0===e&&(e=0),void 0===i&&(i=0),void 0===s&&(s=1),void 0===r&&(r=0),void 0===n&&(n=0),this.matrix=new Float32Array([t,e,i,s,r,n,0,0,1]),this.decomposedMatrix={translateX:0,translateY:0,scaleX:1,scaleY:1,rotation:0},this.quad=new Float32Array(8)},a:{get:function(){return this.matrix[0]},set:function(t){this.matrix[0]=t}},b:{get:function(){return this.matrix[1]},set:function(t){this.matrix[1]=t}},c:{get:function(){return this.matrix[2]},set:function(t){this.matrix[2]=t}},d:{get:function(){return this.matrix[3]},set:function(t){this.matrix[3]=t}},e:{get:function(){return this.matrix[4]},set:function(t){this.matrix[4]=t}},f:{get:function(){return this.matrix[5]},set:function(t){this.matrix[5]=t}},tx:{get:function(){return this.matrix[4]},set:function(t){this.matrix[4]=t}},ty:{get:function(){return this.matrix[5]},set:function(t){this.matrix[5]=t}},rotation:{get:function(){return Math.acos(this.a/this.scaleX)*(Math.atan(-this.c/this.a)<0?-1:1)}},rotationNormalized:{get:function(){var t=this.matrix,e=t[0],i=t[1],s=t[2],n=t[3];return e||i?i>0?Math.acos(e/this.scaleX):-Math.acos(e/this.scaleX):s||n?r.TAU-(n>0?Math.acos(-s/this.scaleY):-Math.acos(s/this.scaleY)):0}},scaleX:{get:function(){return Math.sqrt(this.a*this.a+this.b*this.b)}},scaleY:{get:function(){return Math.sqrt(this.c*this.c+this.d*this.d)}},loadIdentity:function(){var t=this.matrix;return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,this},translate:function(t,e){var i=this.matrix;return i[4]=i[0]*t+i[2]*e+i[4],i[5]=i[1]*t+i[3]*e+i[5],this},scale:function(t,e){var i=this.matrix;return i[0]*=t,i[1]*=t,i[2]*=e,i[3]*=e,this},rotate:function(t){var e=Math.sin(t),i=Math.cos(t),s=this.matrix,r=s[0],n=s[1],a=s[2],o=s[3];return s[0]=r*i+a*e,s[1]=n*i+o*e,s[2]=r*-e+a*i,s[3]=n*-e+o*i,this},multiply:function(t,e){var i=this.matrix,s=t.matrix,r=i[0],n=i[1],a=i[2],o=i[3],h=i[4],l=i[5],c=s[0],u=s[1],d=s[2],f=s[3],p=s[4],m=s[5],g=void 0===e?i:e.matrix;return g[0]=c*r+u*a,g[1]=c*n+u*o,g[2]=d*r+f*a,g[3]=d*n+f*o,g[4]=p*r+m*a+h,g[5]=p*n+m*o+l,g},multiplyWithOffset:function(t,e,i){var s=this.matrix,r=t.matrix,n=s[0],a=s[1],o=s[2],h=s[3],l=e*n+i*o+s[4],c=e*a+i*h+s[5],u=r[0],d=r[1],f=r[2],p=r[3],m=r[4],g=r[5];return s[0]=u*n+d*o,s[1]=u*a+d*h,s[2]=f*n+p*o,s[3]=f*a+p*h,s[4]=m*n+g*o+l,s[5]=m*a+g*h+c,this},transform:function(t,e,i,s,r,n){var a=this.matrix,o=a[0],h=a[1],l=a[2],c=a[3],u=a[4],d=a[5];return a[0]=t*o+e*l,a[1]=t*h+e*c,a[2]=i*o+s*l,a[3]=i*h+s*c,a[4]=r*o+n*l+u,a[5]=r*h+n*c+d,this},transformPoint:function(t,e,i){void 0===i&&(i={x:0,y:0});var s=this.matrix,r=s[0],n=s[1],a=s[2],o=s[3],h=s[4],l=s[5];return i.x=t*r+e*a+h,i.y=t*n+e*o+l,i},invert:function(){var t=this.matrix,e=t[0],i=t[1],s=t[2],r=t[3],n=t[4],a=t[5],o=e*r-i*s;return t[0]=r/o,t[1]=-i/o,t[2]=-s/o,t[3]=e/o,t[4]=(s*a-r*n)/o,t[5]=-(e*a-i*n)/o,this},copyFrom:function(t){var e=this.matrix;return e[0]=t.a,e[1]=t.b,e[2]=t.c,e[3]=t.d,e[4]=t.e,e[5]=t.f,this},copyFromArray:function(t){var e=this.matrix;return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],this},copyToContext:function(t){var e=this.matrix;return t.transform(e[0],e[1],e[2],e[3],e[4],e[5]),t},setToContext:function(t){return t.setTransform(this),t},copyToArray:function(t){var e=this.matrix;return void 0===t?t=[e[0],e[1],e[2],e[3],e[4],e[5]]:(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5]),t},setTransform:function(t,e,i,s,r,n){var a=this.matrix;return a[0]=t,a[1]=e,a[2]=i,a[3]=s,a[4]=r,a[5]=n,this},decomposeMatrix:function(){var t=this.decomposedMatrix,e=this.matrix,i=e[0],s=e[1],r=e[2],n=e[3],a=i*n-s*r;if(t.translateX=e[4],t.translateY=e[5],i||s){var o=Math.sqrt(i*i+s*s);t.rotation=s>0?Math.acos(i/o):-Math.acos(i/o),t.scaleX=o,t.scaleY=a/o}else if(r||n){var h=Math.sqrt(r*r+n*n);t.rotation=.5*Math.PI-(n>0?Math.acos(-r/h):-Math.acos(r/h)),t.scaleX=a/h,t.scaleY=h}else t.rotation=0,t.scaleX=0,t.scaleY=0;return t},applyITRS:function(t,e,i,s,r){var n=this.matrix,a=Math.sin(i),o=Math.cos(i);return n[4]=t,n[5]=e,n[0]=o*s,n[1]=a*s,n[2]=-a*r,n[3]=o*r,this},applyInverse:function(t,e,i){void 0===i&&(i=new n);var s=this.matrix,r=s[0],a=s[1],o=s[2],h=s[3],l=s[4],c=s[5],u=1/(r*h+o*-a);return i.x=h*u*t+-o*u*e+(c*o-l*h)*u,i.y=r*u*e+-a*u*t+(-c*r+l*a)*u,i},setQuad:function(t,e,i,s,r,n){void 0===r&&(r=!1),void 0===n&&(n=this.quad);var a=this.matrix,o=a[0],h=a[1],l=a[2],c=a[3],u=a[4],d=a[5],f=t*o+e*l+u,p=t*h+e*c+d,m=t*o+s*l+u,g=t*h+s*c+d,x=i*o+s*l+u,w=i*h+s*c+d,v=i*o+e*l+u,y=i*h+e*c+d;if(r){var b=Math.floor(f+.5),A=Math.floor(p+.5),S=b-f,M=A-p;n[0]=b,n[1]=A,n[2]=m+S,n[3]=g+M,n[4]=x+S,n[5]=w+M,n[6]=v+S,n[7]=y+M}else n[0]=f,n[1]=p,n[2]=m,n[3]=g,n[4]=x,n[5]=w,n[6]=v,n[7]=y;return n},getX:function(t,e){return t*this.a+e*this.c+this.e},getY:function(t,e){return t*this.b+e*this.d+this.f},getXRound:function(t,e,i){var s=this.getX(t,e);return i&&(s=Math.floor(s+.5)),s},getYRound:function(t,e,i){var s=this.getY(t,e);return i&&(s=Math.floor(s+.5)),s},getCSSMatrix:function(){var t=this.matrix;return"matrix("+t[0]+","+t[1]+","+t[2]+","+t[3]+","+t[4]+","+t[5]+")"},destroy:function(){this.matrix=null,this.quad=null,this.decomposedMatrix=null}});t.exports=a},5818:t=>{var e={_visible:!0,visible:{get:function(){return this._visible},set:function(t){t?(this._visible=!0,this.renderFlags|=1):(this._visible=!1,this.renderFlags&=-2)}},setVisible:function(t){return this.visible=t,this}};t.exports=e},848:(t,e,i)=>{t.exports={Alpha:i(4224),AlphaSingle:i(3816),BlendMode:i(5736),ComputedSize:i(6496),Crop:i(6444),Depth:i(6653),Flip:i(3441),FX:i(6656),GetBounds:i(5989),Mask:i(8378),Origin:i(228),PathFollower:i(6687),Pipeline:i(3416),PostPipeline:i(1530),ScrollFactor:i(4548),Size:i(7675),Texture:i(2619),TextureCrop:i(8661),Tint:i(7627),ToJSON:i(7057),Transform:i(9344),TransformMatrix:i(9465),Visible:i(5818)}},2488:(t,e,i)=>{var s=i(9218),r=i(7047),n=i(1772),a=i(848),o=i(8405),h=i(8894),l=i(6068),c=i(964),u=i(5510),d=i(2474),f=new a.TransformMatrix,p=new n({Extends:h,Mixins:[a.AlphaSingle,a.BlendMode,a.ComputedSize,a.Depth,a.Mask,a.PostPipeline,a.Transform,a.Visible,c],initialize:function(t,e,i,s){h.call(this,t,"Container"),this.list=[],this.exclusive=!0,this.maxSize=-1,this.position=0,this.localTransform=new a.TransformMatrix,this._sortKey="",this._sysEvents=t.sys.events,this.scrollFactorX=1,this.scrollFactorY=1,this.initPostPipeline(),this.setPosition(e,i),this.setBlendMode(r.SKIP_CHECK),s&&this.add(s)},originX:{get:function(){return.5}},originY:{get:function(){return.5}},displayOriginX:{get:function(){return.5*this.width}},displayOriginY:{get:function(){return.5*this.height}},setExclusive:function(t){return void 0===t&&(t=!0),this.exclusive=t,this},getBounds:function(t){if(void 0===t&&(t=new l),t.setTo(this.x,this.y,0,0),this.parentContainer){var e=this.parentContainer.getBoundsTransformMatrix().transformPoint(this.x,this.y);t.setTo(e.x,e.y,0,0)}if(this.list.length>0){var i=this.list,s=new l,r=!1;t.setEmpty();for(var n=0;n<i.length;n++){var a=i[n];a.getBounds&&(a.getBounds(s),r?u(s,t,t):(t.setTo(s.x,s.y,s.width,s.height),r=!0))}}return t},addHandler:function(t){t.once(o.DESTROY,this.onChildDestroyed,this),this.exclusive&&(t.parentContainer&&t.parentContainer.remove(t),t.parentContainer=this,t.removeFromDisplayList(),t.addedToScene())},removeHandler:function(t){t.off(o.DESTROY,this.remove,this),this.exclusive&&(t.parentContainer=null,t.removedFromScene(),t.addToDisplayList())},pointToContainer:function(t,e){void 0===e&&(e=new d),this.parentContainer?this.parentContainer.pointToContainer(t,e):(e.x=t.x,e.y=t.y);var i=f;return i.applyITRS(this.x,this.y,this.rotation,this.scaleX,this.scaleY),i.invert(),i.transformPoint(t.x,t.y,e),e},getBoundsTransformMatrix:function(){return this.getWorldTransformMatrix(f,this.localTransform)},add:function(t){return s.Add(this.list,t,this.maxSize,this.addHandler,this),this},addAt:function(t,e){return s.AddAt(this.list,t,e,this.maxSize,this.addHandler,this),this},getAt:function(t){return this.list[t]},getIndex:function(t){return this.list.indexOf(t)},sort:function(t,e){return t?(void 0===e&&(e=function(e,i){return e[t]-i[t]}),s.StableSort(this.list,e),this):this},getByName:function(t){return s.GetFirst(this.list,"name",t)},getRandom:function(t,e){return s.GetRandom(this.list,t,e)},getFirst:function(t,e,i,r){return s.GetFirst(this.list,t,e,i,r)},getAll:function(t,e,i,r){return s.GetAll(this.list,t,e,i,r)},count:function(t,e,i,r){return s.CountAllMatching(this.list,t,e,i,r)},swap:function(t,e){return s.Swap(this.list,t,e),this},moveTo:function(t,e){return s.MoveTo(this.list,t,e),this},moveAbove:function(t,e){return s.MoveAbove(this.list,t,e),this},moveBelow:function(t,e){return s.MoveBelow(this.list,t,e),this},remove:function(t,e){var i=s.Remove(this.list,t,this.removeHandler,this);if(e&&i){Array.isArray(i)||(i=[i]);for(var r=0;r<i.length;r++)i[r].destroy()}return this},removeAt:function(t,e){var i=s.RemoveAt(this.list,t,this.removeHandler,this);return e&&i&&i.destroy(),this},removeBetween:function(t,e,i){var r=s.RemoveBetween(this.list,t,e,this.removeHandler,this);if(i)for(var n=0;n<r.length;n++)r[n].destroy();return this},removeAll:function(t){var e=this.list;if(t){for(var i=0;i<e.length;i++)e[i]&&e[i].scene&&(e[i].off(o.DESTROY,this.onChildDestroyed,this),e[i].destroy());this.list=[]}else s.RemoveBetween(e,0,e.length,this.removeHandler,this);return this},bringToTop:function(t){return s.BringToTop(this.list,t),this},sendToBack:function(t){return s.SendToBack(this.list,t),this},moveUp:function(t){return s.MoveUp(this.list,t),this},moveDown:function(t){return s.MoveDown(this.list,t),this},reverse:function(){return this.list.reverse(),this},shuffle:function(){return s.Shuffle(this.list),this},replace:function(t,e,i){return s.Replace(this.list,t,e)&&(this.addHandler(e),this.removeHandler(t),i&&t.destroy()),this},exists:function(t){return this.list.indexOf(t)>-1},setAll:function(t,e,i,r){return s.SetAll(this.list,t,e,i,r),this},each:function(t,e){var i,s=[null],r=this.list.slice(),n=r.length;for(i=2;i<arguments.length;i++)s.push(arguments[i]);for(i=0;i<n;i++)s[0]=r[i],t.apply(e,s);return this},iterate:function(t,e){var i,s=[null];for(i=2;i<arguments.length;i++)s.push(arguments[i]);for(i=0;i<this.list.length;i++)s[0]=this.list[i],t.apply(e,s);return this},setScrollFactor:function(t,e,i){return void 0===e&&(e=t),void 0===i&&(i=!1),this.scrollFactorX=t,this.scrollFactorY=e,i&&(s.SetAll(this.list,"scrollFactorX",t),s.SetAll(this.list,"scrollFactorY",e)),this},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}},preDestroy:function(){this.removeAll(!!this.exclusive),this.localTransform.destroy(),this.list=[]},onChildDestroyed:function(t){s.Remove(this.list,t),this.exclusive&&(t.parentContainer=null,t.removedFromScene())}});t.exports=p},6903:t=>{t.exports=function(t,e,i,s){i.addToRenderList(e);var r=e.list;if(0!==r.length){var n=e.localTransform;s?(n.loadIdentity(),n.multiply(s),n.translate(e.x,e.y),n.rotate(e.rotation),n.scale(e.scaleX,e.scaleY)):n.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY);var a=-1!==e.blendMode;a||t.setBlendMode(0);var o=e._alpha,h=e.scrollFactorX,l=e.scrollFactorY;e.mask&&e.mask.preRenderCanvas(t,null,i);for(var c=0;c<r.length;c++){var u=r[c];if(u.willRender(i)){var d=u.alpha,f=u.scrollFactorX,p=u.scrollFactorY;a||u.blendMode===t.currentBlendMode||t.setBlendMode(u.blendMode),u.setScrollFactor(f*h,p*l),u.setAlpha(d*o),u.renderCanvas(t,u,i,n),u.setAlpha(d),u.setScrollFactor(f,p)}}e.mask&&e.mask.postRenderCanvas(t)}}},964:(t,e,i)=>{var s=i(9318),r=s,n=s;r=i(6508),n=i(6903),t.exports={renderWebGL:r,renderCanvas:n}},6508:t=>{t.exports=function(t,e,i,s){i.addToRenderList(e);var r=e.list,n=r.length;if(0!==n){var a=e.localTransform;s?(a.loadIdentity(),a.multiply(s),a.translate(e.x,e.y),a.rotate(e.rotation),a.scale(e.scaleX,e.scaleY)):a.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY),t.pipelines.preBatch(e);var o=-1!==e.blendMode;o||t.setBlendMode(0);for(var h=e.alpha,l=e.scrollFactorX,c=e.scrollFactorY,u=0;u<n;u++){var d=r[u];if(d.willRender(i)){var f,p,m,g;if(void 0!==d.alphaTopLeft)f=d.alphaTopLeft,p=d.alphaTopRight,m=d.alphaBottomLeft,g=d.alphaBottomRight;else{var x=d.alpha;f=x,p=x,m=x,g=x}var w=d.scrollFactorX,v=d.scrollFactorY;o||d.blendMode===t.currentBlendMode||t.setBlendMode(d.blendMode);var y=d.mask;y&&y.preRenderWebGL(t,d,i);var b=d.type;b!==t.currentType&&(t.newType=!0,t.currentType=b),t.nextTypeMatch=u<n-1&&r[u+1].type===t.currentType,d.setScrollFactor(w*l,v*c),d.setAlpha(f*h,p*h,m*h,g*h),d.renderWebGL(t,d,i,a,e),d.setAlpha(f,p,m,g),d.setScrollFactor(w,v),y&&y.postRenderWebGL(t,i),t.newType=!1}}t.pipelines.postBatch(e)}}},227:t=>{t.exports="addedtoscene"},9948:t=>{t.exports="destroy"},4072:t=>{t.exports="removedfromscene"},541:t=>{t.exports="complete"},5238:t=>{t.exports="created"},5716:t=>{t.exports="error"},8468:t=>{t.exports="locked"},440:t=>{t.exports="loop"},8275:t=>{t.exports="metadata"},5996:t=>{t.exports="playing"},3996:t=>{t.exports="play"},399:t=>{t.exports="seeked"},2838:t=>{t.exports="seeking"},8801:t=>{t.exports="stalled"},1426:t=>{t.exports="stop"},5857:t=>{t.exports="textureready"},4811:t=>{t.exports="unlocked"},8401:t=>{t.exports="unsupported"},8405:(t,e,i)=>{t.exports={ADDED_TO_SCENE:i(227),DESTROY:i(9948),REMOVED_FROM_SCENE:i(4072),VIDEO_COMPLETE:i(541),VIDEO_CREATED:i(5238),VIDEO_ERROR:i(5716),VIDEO_LOCKED:i(8468),VIDEO_LOOP:i(440),VIDEO_METADATA:i(8275),VIDEO_PLAY:i(3996),VIDEO_PLAYING:i(5996),VIDEO_SEEKED:i(399),VIDEO_SEEKING:i(2838),VIDEO_STALLED:i(8801),VIDEO_STOP:i(1426),VIDEO_TEXTURE:i(5857),VIDEO_UNLOCKED:i(4811),VIDEO_UNSUPPORTED:i(8401)}},4616:t=>{t.exports={CIRCLE:0,ELLIPSE:1,LINE:2,POINT:3,POLYGON:4,RECTANGLE:5,TRIANGLE:6}},6894:(t,e,i)=>{var s=i(6712);t.exports=function(t,e,i){return void 0===i&&(i=new s),i.x=t.x1+(t.x2-t.x1)*e,i.y=t.y1+(t.y2-t.y1)*e,i}},1045:(t,e,i)=>{var s=i(1324),r=i(6712);t.exports=function(t,e,i,n){void 0===n&&(n=[]),!e&&i>0&&(e=s(t)/i);for(var a=t.x1,o=t.y1,h=t.x2,l=t.y2,c=0;c<e;c++){var u=c/e,d=a+(h-a)*u,f=o+(l-o)*u;n.push(new r(d,f))}return n}},1324:t=>{t.exports=function(t){return Math.sqrt((t.x2-t.x1)*(t.x2-t.x1)+(t.y2-t.y1)*(t.y2-t.y1))}},942:(t,e,i)=>{var s=i(1772),r=i(6894),n=i(1045),a=i(4616),o=i(935),h=i(2474),l=new s({initialize:function(t,e,i,s){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===s&&(s=0),this.type=a.LINE,this.x1=t,this.y1=e,this.x2=i,this.y2=s},getPoint:function(t,e){return r(this,t,e)},getPoints:function(t,e,i){return n(this,t,e,i)},getRandomPoint:function(t){return o(this,t)},setTo:function(t,e,i,s){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===s&&(s=0),this.x1=t,this.y1=e,this.x2=i,this.y2=s,this},setFromObjects:function(t,e){return this.x1=t.x,this.y1=t.y,this.x2=e.x,this.y2=e.y,this},getPointA:function(t){return void 0===t&&(t=new h),t.set(this.x1,this.y1),t},getPointB:function(t){return void 0===t&&(t=new h),t.set(this.x2,this.y2),t},left:{get:function(){return Math.min(this.x1,this.x2)},set:function(t){this.x1<=this.x2?this.x1=t:this.x2=t}},right:{get:function(){return Math.max(this.x1,this.x2)},set:function(t){this.x1>this.x2?this.x1=t:this.x2=t}},top:{get:function(){return Math.min(this.y1,this.y2)},set:function(t){this.y1<=this.y2?this.y1=t:this.y2=t}},bottom:{get:function(){return Math.max(this.y1,this.y2)},set:function(t){this.y1>this.y2?this.y1=t:this.y2=t}}});t.exports=l},935:(t,e,i)=>{var s=i(6712);t.exports=function(t,e){void 0===e&&(e=new s);var i=Math.random();return e.x=t.x1+i*(t.x2-t.x1),e.y=t.y1+i*(t.y2-t.y1),e}},6712:(t,e,i)=>{var s=i(1772),r=i(4616),n=new s({initialize:function(t,e){void 0===t&&(t=0),void 0===e&&(e=t),this.type=r.POINT,this.x=t,this.y=e},setTo:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x=t,this.y=e,this}});t.exports=n},7144:t=>{t.exports=function(t,e,i){return!(t.width<=0||t.height<=0)&&(t.x<=e&&t.x+t.width>=e&&t.y<=i&&t.y+t.height>=i)}},2251:(t,e,i)=>{var s=i(3246),r=i(6712);t.exports=function(t,e,i){if(void 0===i&&(i=new r),e<=0||e>=1)return i.x=t.x,i.y=t.y,i;var n=s(t)*e;return e>.5?(n-=t.width+t.height)<=t.width?(i.x=t.right-n,i.y=t.bottom):(i.x=t.x,i.y=t.bottom-(n-t.width)):n<=t.width?(i.x=t.x+n,i.y=t.y):(i.x=t.right,i.y=t.y+(n-t.width)),i}},4270:(t,e,i)=>{var s=i(2251),r=i(3246);t.exports=function(t,e,i,n){void 0===n&&(n=[]),!e&&i>0&&(e=r(t)/i);for(var a=0;a<e;a++){var o=a/e;n.push(s(t,o))}return n}},3246:t=>{t.exports=function(t){return 2*(t.width+t.height)}},8122:(t,e,i)=>{var s=i(6712);t.exports=function(t,e){return void 0===e&&(e=new s),e.x=t.x+Math.random()*t.width,e.y=t.y+Math.random()*t.height,e}},6068:(t,e,i)=>{var s=i(1772),r=i(7144),n=i(2251),a=i(4270),o=i(4616),h=i(942),l=i(8122),c=new s({initialize:function(t,e,i,s){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===s&&(s=0),this.type=o.RECTANGLE,this.x=t,this.y=e,this.width=i,this.height=s},contains:function(t,e){return r(this,t,e)},getPoint:function(t,e){return n(this,t,e)},getPoints:function(t,e,i){return a(this,t,e,i)},getRandomPoint:function(t){return l(this,t)},setTo:function(t,e,i,s){return this.x=t,this.y=e,this.width=i,this.height=s,this},setEmpty:function(){return this.setTo(0,0,0,0)},setPosition:function(t,e){return void 0===e&&(e=t),this.x=t,this.y=e,this},setSize:function(t,e){return void 0===e&&(e=t),this.width=t,this.height=e,this},isEmpty:function(){return this.width<=0||this.height<=0},getLineA:function(t){return void 0===t&&(t=new h),t.setTo(this.x,this.y,this.right,this.y),t},getLineB:function(t){return void 0===t&&(t=new h),t.setTo(this.right,this.y,this.right,this.bottom),t},getLineC:function(t){return void 0===t&&(t=new h),t.setTo(this.right,this.bottom,this.x,this.bottom),t},getLineD:function(t){return void 0===t&&(t=new h),t.setTo(this.x,this.bottom,this.x,this.y),t},left:{get:function(){return this.x},set:function(t){t>=this.right?this.width=0:this.width=this.right-t,this.x=t}},right:{get:function(){return this.x+this.width},set:function(t){t<=this.x?this.width=0:this.width=t-this.x}},top:{get:function(){return this.y},set:function(t){t>=this.bottom?this.height=0:this.height=this.bottom-t,this.y=t}},bottom:{get:function(){return this.y+this.height},set:function(t){t<=this.y?this.height=0:this.height=t-this.y}},centerX:{get:function(){return this.x+this.width/2},set:function(t){this.x=t-this.width/2}},centerY:{get:function(){return this.y+this.height/2},set:function(t){this.y=t-this.height/2}}});t.exports=c},5510:(t,e,i)=>{var s=i(6068);t.exports=function(t,e,i){void 0===i&&(i=new s);var r=Math.min(t.x,e.x),n=Math.min(t.y,e.y),a=Math.max(t.right,e.right)-r,o=Math.max(t.bottom,e.bottom)-n;return i.setTo(r,n,a,o)}},9863:(t,e,i)=>{var s=i(1772),r=i(5495),n=i(7968),a=new s({initialize:function(t,e,i,s){var n=[];s.forEach((function(t){t&&n.push(t)})),this.loader=t,this.type=e,this.key=i;var a=this.key;t.prefix&&""!==t.prefix&&(this.key=t.prefix+a),this.multiKeyIndex=t.multiKeyIndex++,this.files=n,this.state=r.FILE_PENDING,this.complete=!1,this.pending=n.length,this.failed=0,this.config={},this.baseURL=t.baseURL,this.path=t.path,this.prefix=t.prefix;for(var o=0;o<n.length;o++)n[o].multiFile=this},isReadyToProcess:function(){return 0===this.pending&&0===this.failed&&!this.complete},addToMultiFile:function(t){return this.files.push(t),t.multiFile=this,this.pending++,this.complete=!1,this},onFileComplete:function(t){-1!==this.files.indexOf(t)&&this.pending--},onFileFailed:function(t){-1!==this.files.indexOf(t)&&(this.failed++,console.error('File failed: %s "%s" (via %s "%s")',this.type,this.key,t.type,t.key))},pendingDestroy:function(){if(this.state!==r.FILE_PENDING_DESTROY){var t=this.key,e=this.type;this.loader.emit(n.FILE_COMPLETE,t,e),this.loader.emit(n.FILE_KEY_COMPLETE+e+"-"+t,t,e),this.loader.flagForRemoval(this);for(var i=0;i<this.files.length;i++)this.files[i].pendingDestroy();this.state=r.FILE_PENDING_DESTROY}},destroy:function(){this.loader=null,this.files=null,this.config=null}});t.exports=a},5495:t=>{t.exports={LOADER_IDLE:0,LOADER_LOADING:1,LOADER_PROCESSING:2,LOADER_COMPLETE:3,LOADER_SHUTDOWN:4,LOADER_DESTROYED:5,FILE_PENDING:10,FILE_LOADING:11,FILE_LOADED:12,FILE_FAILED:13,FILE_PROCESSING:14,FILE_ERRORED:16,FILE_COMPLETE:17,FILE_DESTROYED:18,FILE_POPULATED:19,FILE_PENDING_DESTROY:20}},7848:t=>{t.exports="addfile"},3158:t=>{t.exports="complete"},7651:t=>{t.exports="filecomplete"},659:t=>{t.exports="filecomplete-"},5113:t=>{t.exports="loaderror"},6764:t=>{t.exports="load"},1479:t=>{t.exports="fileprogress"},1237:t=>{t.exports="postprocess"},5370:t=>{t.exports="progress"},7279:t=>{t.exports="start"},7968:(t,e,i)=>{t.exports={ADD:i(7848),COMPLETE:i(3158),FILE_COMPLETE:i(7651),FILE_KEY_COMPLETE:i(659),FILE_LOAD_ERROR:i(5113),FILE_LOAD:i(6764),FILE_PROGRESS:i(1479),POST_PROCESS:i(1237),PROGRESS:i(5370),START:i(7279)}},346:t=>{t.exports=function(t){for(var e=0,i=0;i<t.length;i++)e+=+t[i];return e/t.length}},5303:(t,e,i)=>{var s=i(7954);t.exports=function(t,e){return s(t)/s(e)/s(t-e)}},3517:t=>{t.exports=function(t,e){return Math.floor(Math.random()*(e-t+1)+t)}},9273:t=>{t.exports=function(t,e,i,s,r){var n=.5*(s-e),a=.5*(r-i),o=t*t;return(2*i-2*s+n+a)*(t*o)+(-3*i+3*s-2*n-a)*o+n*t+i}},301:t=>{t.exports=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=10);var s=Math.pow(i,-e);return Math.ceil(t*s)/s}},2522:t=>{t.exports=function(t,e,i){return Math.max(e,Math.min(i,t))}},1601:(t,e,i)=>{var s=i(7018);t.exports=function(t){return t*s.DEG_TO_RAD}},994:t=>{t.exports=function(t,e){return Math.abs(t-e)}},5528:(t,e,i)=>{var s=i(2522),r=i(1772),n=i(3490),a=i(9318),o=new n,h=new r({initialize:function t(e,i,s,r){void 0===e&&(e=0),void 0===i&&(i=0),void 0===s&&(s=0),void 0===r&&(r=t.DefaultOrder),this._x=e,this._y=i,this._z=s,this._order=r,this.onChangeCallback=a},x:{get:function(){return this._x},set:function(t){this._x=t,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(t){this._y=t,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(t){this._z=t,this.onChangeCallback(this)}},order:{get:function(){return this._order},set:function(t){this._order=t,this.onChangeCallback(this)}},set:function(t,e,i,s){return void 0===s&&(s=this._order),this._x=t,this._y=e,this._z=i,this._order=s,this.onChangeCallback(this),this},copy:function(t){return this.set(t.x,t.y,t.z,t.order)},setFromQuaternion:function(t,e,i){return void 0===e&&(e=this._order),void 0===i&&(i=!1),o.fromQuat(t),this.setFromRotationMatrix(o,e,i)},setFromRotationMatrix:function(t,e,i){void 0===e&&(e=this._order),void 0===i&&(i=!1);var r=t.val,n=r[0],a=r[4],o=r[8],h=r[1],l=r[5],c=r[9],u=r[2],d=r[6],f=r[10],p=0,m=0,g=0,x=.99999;switch(e){case"XYZ":m=Math.asin(s(o,-1,1)),Math.abs(o)<x?(p=Math.atan2(-c,f),g=Math.atan2(-a,n)):p=Math.atan2(d,l);break;case"YXZ":p=Math.asin(-s(c,-1,1)),Math.abs(c)<x?(m=Math.atan2(o,f),g=Math.atan2(h,l)):m=Math.atan2(-u,n);break;case"ZXY":p=Math.asin(s(d,-1,1)),Math.abs(d)<x?(m=Math.atan2(-u,f),g=Math.atan2(-a,l)):g=Math.atan2(h,n);break;case"ZYX":m=Math.asin(-s(u,-1,1)),Math.abs(u)<x?(p=Math.atan2(d,f),g=Math.atan2(h,n)):g=Math.atan2(-a,l);break;case"YZX":g=Math.asin(s(h,-1,1)),Math.abs(h)<x?(p=Math.atan2(-c,l),m=Math.atan2(-u,n)):m=Math.atan2(o,f);break;case"XZY":g=Math.asin(-s(a,-1,1)),Math.abs(a)<x?(p=Math.atan2(d,l),m=Math.atan2(o,n)):p=Math.atan2(-c,f)}return this._x=p,this._y=m,this._z=g,this._order=e,i&&this.onChangeCallback(this),this}});h.RotationOrders=["XYZ","YXZ","ZXY","ZYX","YZX","XZY"],h.DefaultOrder="XYZ",t.exports=h},7954:t=>{t.exports=function(t){if(0===t)return 1;for(var e=t;--t;)e*=t;return e}},8343:t=>{t.exports=function(t,e){return Math.random()*(e-t)+t}},2454:t=>{t.exports=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=10);var s=Math.pow(i,-e);return Math.floor(t*s)/s}},2004:(t,e,i)=>{var s=i(2522);t.exports=function(t,e,i){return(i-e)*(t=s(t,0,1))+e}},578:t=>{t.exports=function(t,e){return t/e/1e3}},9629:t=>{t.exports=function(t){return t==parseFloat(t)?!(t%2):void 0}},6896:t=>{t.exports=function(t){return t===parseFloat(t)?!(t%2):void 0}},840:t=>{t.exports=function(t,e,i){return(e-t)*i+t}},1735:t=>{t.exports=function(t,e,i){return void 0===i&&(i=0),t.clone().lerp(e,i)}},347:(t,e,i)=>{var s=new(i(1772))({initialize:function(t){this.val=new Float32Array(9),t?this.copy(t):this.identity()},clone:function(){return new s(this)},set:function(t){return this.copy(t)},copy:function(t){var e=this.val,i=t.val;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],this},fromMat4:function(t){var e=t.val,i=this.val;return i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=e[4],i[4]=e[5],i[5]=e[6],i[6]=e[8],i[7]=e[9],i[8]=e[10],this},fromArray:function(t){var e=this.val;return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],this},identity:function(){var t=this.val;return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,this},transpose:function(){var t=this.val,e=t[1],i=t[2],s=t[5];return t[1]=t[3],t[2]=t[6],t[3]=e,t[5]=t[7],t[6]=i,t[7]=s,this},invert:function(){var t=this.val,e=t[0],i=t[1],s=t[2],r=t[3],n=t[4],a=t[5],o=t[6],h=t[7],l=t[8],c=l*n-a*h,u=-l*r+a*o,d=h*r-n*o,f=e*c+i*u+s*d;return f?(f=1/f,t[0]=c*f,t[1]=(-l*i+s*h)*f,t[2]=(a*i-s*n)*f,t[3]=u*f,t[4]=(l*e-s*o)*f,t[5]=(-a*e+s*r)*f,t[6]=d*f,t[7]=(-h*e+i*o)*f,t[8]=(n*e-i*r)*f,this):null},adjoint:function(){var t=this.val,e=t[0],i=t[1],s=t[2],r=t[3],n=t[4],a=t[5],o=t[6],h=t[7],l=t[8];return t[0]=n*l-a*h,t[1]=s*h-i*l,t[2]=i*a-s*n,t[3]=a*o-r*l,t[4]=e*l-s*o,t[5]=s*r-e*a,t[6]=r*h-n*o,t[7]=i*o-e*h,t[8]=e*n-i*r,this},determinant:function(){var t=this.val,e=t[0],i=t[1],s=t[2],r=t[3],n=t[4],a=t[5],o=t[6],h=t[7],l=t[8];return e*(l*n-a*h)+i*(-l*r+a*o)+s*(h*r-n*o)},multiply:function(t){var e=this.val,i=e[0],s=e[1],r=e[2],n=e[3],a=e[4],o=e[5],h=e[6],l=e[7],c=e[8],u=t.val,d=u[0],f=u[1],p=u[2],m=u[3],g=u[4],x=u[5],w=u[6],v=u[7],y=u[8];return e[0]=d*i+f*n+p*h,e[1]=d*s+f*a+p*l,e[2]=d*r+f*o+p*c,e[3]=m*i+g*n+x*h,e[4]=m*s+g*a+x*l,e[5]=m*r+g*o+x*c,e[6]=w*i+v*n+y*h,e[7]=w*s+v*a+y*l,e[8]=w*r+v*o+y*c,this},translate:function(t){var e=this.val,i=t.x,s=t.y;return e[6]=i*e[0]+s*e[3]+e[6],e[7]=i*e[1]+s*e[4]+e[7],e[8]=i*e[2]+s*e[5]+e[8],this},rotate:function(t){var e=this.val,i=e[0],s=e[1],r=e[2],n=e[3],a=e[4],o=e[5],h=Math.sin(t),l=Math.cos(t);return e[0]=l*i+h*n,e[1]=l*s+h*a,e[2]=l*r+h*o,e[3]=l*n-h*i,e[4]=l*a-h*s,e[5]=l*o-h*r,this},scale:function(t){var e=this.val,i=t.x,s=t.y;return e[0]=i*e[0],e[1]=i*e[1],e[2]=i*e[2],e[3]=s*e[3],e[4]=s*e[4],e[5]=s*e[5],this},fromQuat:function(t){var e=t.x,i=t.y,s=t.z,r=t.w,n=e+e,a=i+i,o=s+s,h=e*n,l=e*a,c=e*o,u=i*a,d=i*o,f=s*o,p=r*n,m=r*a,g=r*o,x=this.val;return x[0]=1-(u+f),x[3]=l+g,x[6]=c-m,x[1]=l-g,x[4]=1-(h+f),x[7]=d+p,x[2]=c+m,x[5]=d-p,x[8]=1-(h+u),this},normalFromMat4:function(t){var e=t.val,i=this.val,s=e[0],r=e[1],n=e[2],a=e[3],o=e[4],h=e[5],l=e[6],c=e[7],u=e[8],d=e[9],f=e[10],p=e[11],m=e[12],g=e[13],x=e[14],w=e[15],v=s*h-r*o,y=s*l-n*o,b=s*c-a*o,A=r*l-n*h,S=r*c-a*h,M=n*c-a*l,I=u*g-d*m,T=u*x-f*m,k=u*w-p*m,E=d*x-f*g,C=d*w-p*g,R=f*w-p*x,Y=v*R-y*C+b*E+A*k-S*T+M*I;return Y?(Y=1/Y,i[0]=(h*R-l*C+c*E)*Y,i[1]=(l*k-o*R-c*T)*Y,i[2]=(o*C-h*k+c*I)*Y,i[3]=(n*C-r*R-a*E)*Y,i[4]=(s*R-n*k+a*T)*Y,i[5]=(r*k-s*C-a*I)*Y,i[6]=(g*M-x*S+w*A)*Y,i[7]=(x*b-m*M-w*y)*Y,i[8]=(m*S-g*b+w*v)*Y,this):null}});t.exports=s},3490:(t,e,i)=>{var s=i(1772),r=i(5609),n=1e-6,a=new s({initialize:function(t){this.val=new Float32Array(16),t?this.copy(t):this.identity()},clone:function(){return new a(this)},set:function(t){return this.copy(t)},setValues:function(t,e,i,s,r,n,a,o,h,l,c,u,d,f,p,m){var g=this.val;return g[0]=t,g[1]=e,g[2]=i,g[3]=s,g[4]=r,g[5]=n,g[6]=a,g[7]=o,g[8]=h,g[9]=l,g[10]=c,g[11]=u,g[12]=d,g[13]=f,g[14]=p,g[15]=m,this},copy:function(t){var e=t.val;return this.setValues(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])},fromArray:function(t){return this.setValues(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])},zero:function(){return this.setValues(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)},transform:function(t,e,i){var s=o.fromQuat(i).val,r=e.x,n=e.y,a=e.z;return this.setValues(s[0]*r,s[1]*r,s[2]*r,0,s[4]*n,s[5]*n,s[6]*n,0,s[8]*a,s[9]*a,s[10]*a,0,t.x,t.y,t.z,1)},xyz:function(t,e,i){this.identity();var s=this.val;return s[12]=t,s[13]=e,s[14]=i,this},scaling:function(t,e,i){this.zero();var s=this.val;return s[0]=t,s[5]=e,s[10]=i,s[15]=1,this},identity:function(){return this.setValues(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},transpose:function(){var t=this.val,e=t[1],i=t[2],s=t[3],r=t[6],n=t[7],a=t[11];return t[1]=t[4],t[2]=t[8],t[3]=t[12],t[4]=e,t[6]=t[9],t[7]=t[13],t[8]=i,t[9]=r,t[11]=t[14],t[12]=s,t[13]=n,t[14]=a,this},getInverse:function(t){return this.copy(t),this.invert()},invert:function(){var t=this.val,e=t[0],i=t[1],s=t[2],r=t[3],n=t[4],a=t[5],o=t[6],h=t[7],l=t[8],c=t[9],u=t[10],d=t[11],f=t[12],p=t[13],m=t[14],g=t[15],x=e*a-i*n,w=e*o-s*n,v=e*h-r*n,y=i*o-s*a,b=i*h-r*a,A=s*h-r*o,S=l*p-c*f,M=l*m-u*f,I=l*g-d*f,T=c*m-u*p,k=c*g-d*p,E=u*g-d*m,C=x*E-w*k+v*T+y*I-b*M+A*S;return C?(C=1/C,this.setValues((a*E-o*k+h*T)*C,(s*k-i*E-r*T)*C,(p*A-m*b+g*y)*C,(u*b-c*A-d*y)*C,(o*I-n*E-h*M)*C,(e*E-s*I+r*M)*C,(m*v-f*A-g*w)*C,(l*A-u*v+d*w)*C,(n*k-a*I+h*S)*C,(i*I-e*k-r*S)*C,(f*b-p*v+g*x)*C,(c*v-l*b-d*x)*C,(a*M-n*T-o*S)*C,(e*T-i*M+s*S)*C,(p*w-f*y-m*x)*C,(l*y-c*w+u*x)*C)):this},adjoint:function(){var t=this.val,e=t[0],i=t[1],s=t[2],r=t[3],n=t[4],a=t[5],o=t[6],h=t[7],l=t[8],c=t[9],u=t[10],d=t[11],f=t[12],p=t[13],m=t[14],g=t[15];return this.setValues(a*(u*g-d*m)-c*(o*g-h*m)+p*(o*d-h*u),-(i*(u*g-d*m)-c*(s*g-r*m)+p*(s*d-r*u)),i*(o*g-h*m)-a*(s*g-r*m)+p*(s*h-r*o),-(i*(o*d-h*u)-a*(s*d-r*u)+c*(s*h-r*o)),-(n*(u*g-d*m)-l*(o*g-h*m)+f*(o*d-h*u)),e*(u*g-d*m)-l*(s*g-r*m)+f*(s*d-r*u),-(e*(o*g-h*m)-n*(s*g-r*m)+f*(s*h-r*o)),e*(o*d-h*u)-n*(s*d-r*u)+l*(s*h-r*o),n*(c*g-d*p)-l*(a*g-h*p)+f*(a*d-h*c),-(e*(c*g-d*p)-l*(i*g-r*p)+f*(i*d-r*c)),e*(a*g-h*p)-n*(i*g-r*p)+f*(i*h-r*a),-(e*(a*d-h*c)-n*(i*d-r*c)+l*(i*h-r*a)),-(n*(c*m-u*p)-l*(a*m-o*p)+f*(a*u-o*c)),e*(c*m-u*p)-l*(i*m-s*p)+f*(i*u-s*c),-(e*(a*m-o*p)-n*(i*m-s*p)+f*(i*o-s*a)),e*(a*u-o*c)-n*(i*u-s*c)+l*(i*o-s*a))},determinant:function(){var t=this.val,e=t[0],i=t[1],s=t[2],r=t[3],n=t[4],a=t[5],o=t[6],h=t[7],l=t[8],c=t[9],u=t[10],d=t[11],f=t[12],p=t[13],m=t[14],g=t[15];return(e*a-i*n)*(u*g-d*m)-(e*o-s*n)*(c*g-d*p)+(e*h-r*n)*(c*m-u*p)+(i*o-s*a)*(l*g-d*f)-(i*h-r*a)*(l*m-u*f)+(s*h-r*o)*(l*p-c*f)},multiply:function(t){var e=this.val,i=e[0],s=e[1],r=e[2],n=e[3],a=e[4],o=e[5],h=e[6],l=e[7],c=e[8],u=e[9],d=e[10],f=e[11],p=e[12],m=e[13],g=e[14],x=e[15],w=t.val,v=w[0],y=w[1],b=w[2],A=w[3];return e[0]=v*i+y*a+b*c+A*p,e[1]=v*s+y*o+b*u+A*m,e[2]=v*r+y*h+b*d+A*g,e[3]=v*n+y*l+b*f+A*x,v=w[4],y=w[5],b=w[6],A=w[7],e[4]=v*i+y*a+b*c+A*p,e[5]=v*s+y*o+b*u+A*m,e[6]=v*r+y*h+b*d+A*g,e[7]=v*n+y*l+b*f+A*x,v=w[8],y=w[9],b=w[10],A=w[11],e[8]=v*i+y*a+b*c+A*p,e[9]=v*s+y*o+b*u+A*m,e[10]=v*r+y*h+b*d+A*g,e[11]=v*n+y*l+b*f+A*x,v=w[12],y=w[13],b=w[14],A=w[15],e[12]=v*i+y*a+b*c+A*p,e[13]=v*s+y*o+b*u+A*m,e[14]=v*r+y*h+b*d+A*g,e[15]=v*n+y*l+b*f+A*x,this},multiplyLocal:function(t){var e=this.val,i=t.val;return this.setValues(e[0]*i[0]+e[1]*i[4]+e[2]*i[8]+e[3]*i[12],e[0]*i[1]+e[1]*i[5]+e[2]*i[9]+e[3]*i[13],e[0]*i[2]+e[1]*i[6]+e[2]*i[10]+e[3]*i[14],e[0]*i[3]+e[1]*i[7]+e[2]*i[11]+e[3]*i[15],e[4]*i[0]+e[5]*i[4]+e[6]*i[8]+e[7]*i[12],e[4]*i[1]+e[5]*i[5]+e[6]*i[9]+e[7]*i[13],e[4]*i[2]+e[5]*i[6]+e[6]*i[10]+e[7]*i[14],e[4]*i[3]+e[5]*i[7]+e[6]*i[11]+e[7]*i[15],e[8]*i[0]+e[9]*i[4]+e[10]*i[8]+e[11]*i[12],e[8]*i[1]+e[9]*i[5]+e[10]*i[9]+e[11]*i[13],e[8]*i[2]+e[9]*i[6]+e[10]*i[10]+e[11]*i[14],e[8]*i[3]+e[9]*i[7]+e[10]*i[11]+e[11]*i[15],e[12]*i[0]+e[13]*i[4]+e[14]*i[8]+e[15]*i[12],e[12]*i[1]+e[13]*i[5]+e[14]*i[9]+e[15]*i[13],e[12]*i[2]+e[13]*i[6]+e[14]*i[10]+e[15]*i[14],e[12]*i[3]+e[13]*i[7]+e[14]*i[11]+e[15]*i[15])},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var i=t.val,s=e.val,r=i[0],n=i[4],a=i[8],o=i[12],h=i[1],l=i[5],c=i[9],u=i[13],d=i[2],f=i[6],p=i[10],m=i[14],g=i[3],x=i[7],w=i[11],v=i[15],y=s[0],b=s[4],A=s[8],S=s[12],M=s[1],I=s[5],T=s[9],k=s[13],E=s[2],C=s[6],R=s[10],Y=s[14],F=s[3],X=s[7],P=s[11],L=s[15];return this.setValues(r*y+n*M+a*E+o*F,h*y+l*M+c*E+u*F,d*y+f*M+p*E+m*F,g*y+x*M+w*E+v*F,r*b+n*I+a*C+o*X,h*b+l*I+c*C+u*X,d*b+f*I+p*C+m*X,g*b+x*I+w*C+v*X,r*A+n*T+a*R+o*P,h*A+l*T+c*R+u*P,d*A+f*T+p*R+m*P,g*A+x*T+w*R+v*P,r*S+n*k+a*Y+o*L,h*S+l*k+c*Y+u*L,d*S+f*k+p*Y+m*L,g*S+x*k+w*Y+v*L)},translate:function(t){return this.translateXYZ(t.x,t.y,t.z)},translateXYZ:function(t,e,i){var s=this.val;return s[12]=s[0]*t+s[4]*e+s[8]*i+s[12],s[13]=s[1]*t+s[5]*e+s[9]*i+s[13],s[14]=s[2]*t+s[6]*e+s[10]*i+s[14],s[15]=s[3]*t+s[7]*e+s[11]*i+s[15],this},scale:function(t){return this.scaleXYZ(t.x,t.y,t.z)},scaleXYZ:function(t,e,i){var s=this.val;return s[0]=s[0]*t,s[1]=s[1]*t,s[2]=s[2]*t,s[3]=s[3]*t,s[4]=s[4]*e,s[5]=s[5]*e,s[6]=s[6]*e,s[7]=s[7]*e,s[8]=s[8]*i,s[9]=s[9]*i,s[10]=s[10]*i,s[11]=s[11]*i,this},makeRotationAxis:function(t,e){var i=Math.cos(e),s=Math.sin(e),r=1-i,n=t.x,a=t.y,o=t.z,h=r*n,l=r*a;return this.setValues(h*n+i,h*a-s*o,h*o+s*a,0,h*a+s*o,l*a+i,l*o-s*n,0,h*o-s*a,l*o+s*n,r*o*o+i,0,0,0,0,1)},rotate:function(t,e){var i=this.val,s=e.x,r=e.y,a=e.z,o=Math.sqrt(s*s+r*r+a*a);if(Math.abs(o)<n)return this;s*=o=1/o,r*=o,a*=o;var h=Math.sin(t),l=Math.cos(t),c=1-l,u=i[0],d=i[1],f=i[2],p=i[3],m=i[4],g=i[5],x=i[6],w=i[7],v=i[8],y=i[9],b=i[10],A=i[11],S=i[12],M=i[13],I=i[14],T=i[15],k=s*s*c+l,E=r*s*c+a*h,C=a*s*c-r*h,R=s*r*c-a*h,Y=r*r*c+l,F=a*r*c+s*h,X=s*a*c+r*h,P=r*a*c-s*h,L=a*a*c+l;return this.setValues(u*k+m*E+v*C,d*k+g*E+y*C,f*k+x*E+b*C,p*k+w*E+A*C,u*R+m*Y+v*F,d*R+g*Y+y*F,f*R+x*Y+b*F,p*R+w*Y+A*F,u*X+m*P+v*L,d*X+g*P+y*L,f*X+x*P+b*L,p*X+w*P+A*L,S,M,I,T)},rotateX:function(t){var e=this.val,i=Math.sin(t),s=Math.cos(t),r=e[4],n=e[5],a=e[6],o=e[7],h=e[8],l=e[9],c=e[10],u=e[11];return e[4]=r*s+h*i,e[5]=n*s+l*i,e[6]=a*s+c*i,e[7]=o*s+u*i,e[8]=h*s-r*i,e[9]=l*s-n*i,e[10]=c*s-a*i,e[11]=u*s-o*i,this},rotateY:function(t){var e=this.val,i=Math.sin(t),s=Math.cos(t),r=e[0],n=e[1],a=e[2],o=e[3],h=e[8],l=e[9],c=e[10],u=e[11];return e[0]=r*s-h*i,e[1]=n*s-l*i,e[2]=a*s-c*i,e[3]=o*s-u*i,e[8]=r*i+h*s,e[9]=n*i+l*s,e[10]=a*i+c*s,e[11]=o*i+u*s,this},rotateZ:function(t){var e=this.val,i=Math.sin(t),s=Math.cos(t),r=e[0],n=e[1],a=e[2],o=e[3],h=e[4],l=e[5],c=e[6],u=e[7];return e[0]=r*s+h*i,e[1]=n*s+l*i,e[2]=a*s+c*i,e[3]=o*s+u*i,e[4]=h*s-r*i,e[5]=l*s-n*i,e[6]=c*s-a*i,e[7]=u*s-o*i,this},fromRotationTranslation:function(t,e){var i=t.x,s=t.y,r=t.z,n=t.w,a=i+i,o=s+s,h=r+r,l=i*a,c=i*o,u=i*h,d=s*o,f=s*h,p=r*h,m=n*a,g=n*o,x=n*h;return this.setValues(1-(d+p),c+x,u-g,0,c-x,1-(l+p),f+m,0,u+g,f-m,1-(l+d),0,e.x,e.y,e.z,1)},fromQuat:function(t){var e=t.x,i=t.y,s=t.z,r=t.w,n=e+e,a=i+i,o=s+s,h=e*n,l=e*a,c=e*o,u=i*a,d=i*o,f=s*o,p=r*n,m=r*a,g=r*o;return this.setValues(1-(u+f),l+g,c-m,0,l-g,1-(h+f),d+p,0,c+m,d-p,1-(h+u),0,0,0,0,1)},frustum:function(t,e,i,s,r,n){var a=1/(e-t),o=1/(s-i),h=1/(r-n);return this.setValues(2*r*a,0,0,0,0,2*r*o,0,0,(e+t)*a,(s+i)*o,(n+r)*h,-1,0,0,n*r*2*h,0)},perspective:function(t,e,i,s){var r=1/Math.tan(t/2),n=1/(i-s);return this.setValues(r/e,0,0,0,0,r,0,0,0,0,(s+i)*n,-1,0,0,2*s*i*n,0)},perspectiveLH:function(t,e,i,s){return this.setValues(2*i/t,0,0,0,0,2*i/e,0,0,0,0,-s/(i-s),1,0,0,i*s/(i-s),0)},ortho:function(t,e,i,s,r,n){var a=t-e,o=i-s,h=r-n;return a=0===a?a:1/a,o=0===o?o:1/o,h=0===h?h:1/h,this.setValues(-2*a,0,0,0,0,-2*o,0,0,0,0,2*h,0,(t+e)*a,(s+i)*o,(n+r)*h,1)},lookAtRH:function(t,e,i){var s=this.val;return u.subVectors(t,e),0===u.lengthSq()&&(u.z=1),u.normalize(),l.crossVectors(i,u),0===l.lengthSq()&&(1===Math.abs(i.z)?u.x+=1e-4:u.z+=1e-4,u.normalize(),l.crossVectors(i,u)),l.normalize(),c.crossVectors(u,l),s[0]=l.x,s[1]=l.y,s[2]=l.z,s[4]=c.x,s[5]=c.y,s[6]=c.z,s[8]=u.x,s[9]=u.y,s[10]=u.z,this},lookAt:function(t,e,i){var s=t.x,r=t.y,a=t.z,o=i.x,h=i.y,l=i.z,c=e.x,u=e.y,d=e.z;if(Math.abs(s-c)<n&&Math.abs(r-u)<n&&Math.abs(a-d)<n)return this.identity();var f=s-c,p=r-u,m=a-d,g=1/Math.sqrt(f*f+p*p+m*m),x=h*(m*=g)-l*(p*=g),w=l*(f*=g)-o*m,v=o*p-h*f;(g=Math.sqrt(x*x+w*w+v*v))?(x*=g=1/g,w*=g,v*=g):(x=0,w=0,v=0);var y=p*v-m*w,b=m*x-f*v,A=f*w-p*x;return(g=Math.sqrt(y*y+b*b+A*A))?(y*=g=1/g,b*=g,A*=g):(y=0,b=0,A=0),this.setValues(x,y,f,0,w,b,p,0,v,A,m,0,-(x*s+w*r+v*a),-(y*s+b*r+A*a),-(f*s+p*r+m*a),1)},yawPitchRoll:function(t,e,i){this.zero(),o.zero(),h.zero();var s=this.val,r=o.val,n=h.val,a=Math.sin(i),l=Math.cos(i);return s[10]=1,s[15]=1,s[0]=l,s[1]=a,s[4]=-a,s[5]=l,a=Math.sin(e),l=Math.cos(e),r[0]=1,r[15]=1,r[5]=l,r[10]=l,r[9]=-a,r[6]=a,a=Math.sin(t),l=Math.cos(t),n[5]=1,n[15]=1,n[0]=l,n[2]=-a,n[8]=a,n[10]=l,this.multiplyLocal(o),this.multiplyLocal(h),this},setWorldMatrix:function(t,e,i,s,r){return this.yawPitchRoll(t.y,t.x,t.z),o.scaling(i.x,i.y,i.z),h.xyz(e.x,e.y,e.z),this.multiplyLocal(o),this.multiplyLocal(h),s&&this.multiplyLocal(s),r&&this.multiplyLocal(r),this},multiplyToMat4:function(t,e){var i=this.val,s=t.val,r=i[0],n=i[1],a=i[2],o=i[3],h=i[4],l=i[5],c=i[6],u=i[7],d=i[8],f=i[9],p=i[10],m=i[11],g=i[12],x=i[13],w=i[14],v=i[15],y=s[0],b=s[1],A=s[2],S=s[3],M=s[4],I=s[5],T=s[6],k=s[7],E=s[8],C=s[9],R=s[10],Y=s[11],F=s[12],X=s[13],P=s[14],L=s[15];return e.setValues(y*r+b*h+A*d+S*g,b*n+b*l+A*f+S*x,A*a+b*c+A*p+S*w,S*o+b*u+A*m+S*v,M*r+I*h+T*d+k*g,M*n+I*l+T*f+k*x,M*a+I*c+T*p+k*w,M*o+I*u+T*m+k*v,E*r+C*h+R*d+Y*g,E*n+C*l+R*f+Y*x,E*a+C*c+R*p+Y*w,E*o+C*u+R*m+Y*v,F*r+X*h+P*d+L*g,F*n+X*l+P*f+L*x,F*a+X*c+P*p+L*w,F*o+X*u+P*m+L*v)},fromRotationXYTranslation:function(t,e,i){var s=e.x,r=e.y,n=e.z,a=Math.sin(t.x),o=Math.cos(t.x),h=Math.sin(t.y),l=Math.cos(t.y),c=s,u=r,d=n,f=-a,p=0-f*h,m=0-o*h,g=f*l,x=o*l;return i||(c=l*s+h*n,u=p*s+o*r+g*n,d=m*s+a*r+x*n),this.setValues(l,p,m,0,0,o,a,0,h,g,x,0,c,u,d,1)},getMaxScaleOnAxis:function(){var t=this.val,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],s=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,i,s))}}),o=new a,h=new a,l=new r,c=new r,u=new r;t.exports=a},7868:t=>{t.exports=function(t,e,i){return Math.min(t+e,i)}},6947:t=>{t.exports=function(t){var e=t.length;if(0===e)return 0;t.sort((function(t,e){return t-e}));var i=Math.floor(e/2);return e%2==0?(t[i]+t[i-1])/2:t[i]}},875:t=>{t.exports=function(t,e,i){return Math.max(t-e,i)}},3656:t=>{t.exports=function(t,e,i,s){void 0===i&&(i=e+1);var r=(t-e)/(i-e);return r>1?void 0!==s?(r=(s-t)/(s-i))<0&&(r=0):r=1:r<0&&(r=0),r}},2021:(t,e,i)=>{var s=i(1772),r=i(347),n=i(9318),a=i(5609),o=1e-6,h=new Int8Array([1,2,0]),l=new Float32Array([0,0,0]),c=new a(1,0,0),u=new a(0,1,0),d=new a,f=new r,p=new s({initialize:function(t,e,i,s){this.onChangeCallback=n,this.set(t,e,i,s)},x:{get:function(){return this._x},set:function(t){this._x=t,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(t){this._y=t,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(t){this._z=t,this.onChangeCallback(this)}},w:{get:function(){return this._w},set:function(t){this._w=t,this.onChangeCallback(this)}},copy:function(t){return this.set(t)},set:function(t,e,i,s,r){return void 0===r&&(r=!0),"object"==typeof t?(this._x=t.x||0,this._y=t.y||0,this._z=t.z||0,this._w=t.w||0):(this._x=t||0,this._y=e||0,this._z=i||0,this._w=s||0),r&&this.onChangeCallback(this),this},add:function(t){return this._x+=t.x,this._y+=t.y,this._z+=t.z,this._w+=t.w,this.onChangeCallback(this),this},subtract:function(t){return this._x-=t.x,this._y-=t.y,this._z-=t.z,this._w-=t.w,this.onChangeCallback(this),this},scale:function(t){return this._x*=t,this._y*=t,this._z*=t,this._w*=t,this.onChangeCallback(this),this},length:function(){var t=this.x,e=this.y,i=this.z,s=this.w;return Math.sqrt(t*t+e*e+i*i+s*s)},lengthSq:function(){var t=this.x,e=this.y,i=this.z,s=this.w;return t*t+e*e+i*i+s*s},normalize:function(){var t=this.x,e=this.y,i=this.z,s=this.w,r=t*t+e*e+i*i+s*s;return r>0&&(r=1/Math.sqrt(r),this._x=t*r,this._y=e*r,this._z=i*r,this._w=s*r),this.onChangeCallback(this),this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lerp:function(t,e){void 0===e&&(e=0);var i=this.x,s=this.y,r=this.z,n=this.w;return this.set(i+e*(t.x-i),s+e*(t.y-s),r+e*(t.z-r),n+e*(t.w-n))},rotationTo:function(t,e){var i=t.x*e.x+t.y*e.y+t.z*e.z;return i<-.999999?(d.copy(c).cross(t).length()<o&&d.copy(u).cross(t),d.normalize(),this.setAxisAngle(d,Math.PI)):i>.999999?this.set(0,0,0,1):(d.copy(t).cross(e),this._x=d.x,this._y=d.y,this._z=d.z,this._w=1+i,this.normalize())},setAxes:function(t,e,i){var s=f.val;return s[0]=e.x,s[3]=e.y,s[6]=e.z,s[1]=i.x,s[4]=i.y,s[7]=i.z,s[2]=-t.x,s[5]=-t.y,s[8]=-t.z,this.fromMat3(f).normalize()},identity:function(){return this.set(0,0,0,1)},setAxisAngle:function(t,e){e*=.5;var i=Math.sin(e);return this.set(i*t.x,i*t.y,i*t.z,Math.cos(e))},multiply:function(t){var e=this.x,i=this.y,s=this.z,r=this.w,n=t.x,a=t.y,o=t.z,h=t.w;return this.set(e*h+r*n+i*o-s*a,i*h+r*a+s*n-e*o,s*h+r*o+e*a-i*n,r*h-e*n-i*a-s*o)},slerp:function(t,e){var i=this.x,s=this.y,r=this.z,n=this.w,a=t.x,h=t.y,l=t.z,c=t.w,u=i*a+s*h+r*l+n*c;u<0&&(u=-u,a=-a,h=-h,l=-l,c=-c);var d=1-e,f=e;if(1-u>o){var p=Math.acos(u),m=Math.sin(p);d=Math.sin((1-e)*p)/m,f=Math.sin(e*p)/m}return this.set(d*i+f*a,d*s+f*h,d*r+f*l,d*n+f*c)},invert:function(){var t=this.x,e=this.y,i=this.z,s=this.w,r=t*t+e*e+i*i+s*s,n=r?1/r:0;return this.set(-t*n,-e*n,-i*n,s*n)},conjugate:function(){return this._x=-this.x,this._y=-this.y,this._z=-this.z,this.onChangeCallback(this),this},rotateX:function(t){t*=.5;var e=this.x,i=this.y,s=this.z,r=this.w,n=Math.sin(t),a=Math.cos(t);return this.set(e*a+r*n,i*a+s*n,s*a-i*n,r*a-e*n)},rotateY:function(t){t*=.5;var e=this.x,i=this.y,s=this.z,r=this.w,n=Math.sin(t),a=Math.cos(t);return this.set(e*a-s*n,i*a+r*n,s*a+e*n,r*a-i*n)},rotateZ:function(t){t*=.5;var e=this.x,i=this.y,s=this.z,r=this.w,n=Math.sin(t),a=Math.cos(t);return this.set(e*a+i*n,i*a-e*n,s*a+r*n,r*a-s*n)},calculateW:function(){var t=this.x,e=this.y,i=this.z;return this.w=-Math.sqrt(1-t*t-e*e-i*i),this},setFromEuler:function(t,e){var i=t.x/2,s=t.y/2,r=t.z/2,n=Math.cos(i),a=Math.cos(s),o=Math.cos(r),h=Math.sin(i),l=Math.sin(s),c=Math.sin(r);switch(t.order){case"XYZ":this.set(h*a*o+n*l*c,n*l*o-h*a*c,n*a*c+h*l*o,n*a*o-h*l*c,e);break;case"YXZ":this.set(h*a*o+n*l*c,n*l*o-h*a*c,n*a*c-h*l*o,n*a*o+h*l*c,e);break;case"ZXY":this.set(h*a*o-n*l*c,n*l*o+h*a*c,n*a*c+h*l*o,n*a*o-h*l*c,e);break;case"ZYX":this.set(h*a*o-n*l*c,n*l*o+h*a*c,n*a*c-h*l*o,n*a*o+h*l*c,e);break;case"YZX":this.set(h*a*o+n*l*c,n*l*o+h*a*c,n*a*c-h*l*o,n*a*o-h*l*c,e);break;case"XZY":this.set(h*a*o-n*l*c,n*l*o-h*a*c,n*a*c+h*l*o,n*a*o+h*l*c,e)}return this},setFromRotationMatrix:function(t){var e,i=t.val,s=i[0],r=i[4],n=i[8],a=i[1],o=i[5],h=i[9],l=i[2],c=i[6],u=i[10],d=s+o+u;return d>0?(e=.5/Math.sqrt(d+1),this.set((c-h)*e,(n-l)*e,(a-r)*e,.25/e)):s>o&&s>u?(e=2*Math.sqrt(1+s-o-u),this.set(.25*e,(r+a)/e,(n+l)/e,(c-h)/e)):o>u?(e=2*Math.sqrt(1+o-s-u),this.set((r+a)/e,.25*e,(h+c)/e,(n-l)/e)):(e=2*Math.sqrt(1+u-s-o),this.set((n+l)/e,(h+c)/e,.25*e,(a-r)/e)),this},fromMat3:function(t){var e,i=t.val,s=i[0]+i[4]+i[8];if(s>0)e=Math.sqrt(s+1),this.w=.5*e,e=.5/e,this._x=(i[7]-i[5])*e,this._y=(i[2]-i[6])*e,this._z=(i[3]-i[1])*e;else{var r=0;i[4]>i[0]&&(r=1),i[8]>i[3*r+r]&&(r=2);var n=h[r],a=h[n];e=Math.sqrt(i[3*r+r]-i[3*n+n]-i[3*a+a]+1),l[r]=.5*e,e=.5/e,l[n]=(i[3*n+r]+i[3*r+n])*e,l[a]=(i[3*a+r]+i[3*r+a])*e,this._x=l[0],this._y=l[1],this._z=l[2],this._w=(i[3*a+n]-i[3*n+a])*e}return this.onChangeCallback(this),this}});t.exports=p},4063:(t,e,i)=>{var s=i(7018);t.exports=function(t){return t*s.RAD_TO_DEG}},7853:t=>{t.exports=function(t,e){void 0===e&&(e=1);var i=2*Math.random()*Math.PI;return t.x=Math.cos(i)*e,t.y=Math.sin(i)*e,t}},1895:t=>{t.exports=function(t,e){void 0===e&&(e=1);var i=2*Math.random()*Math.PI,s=2*Math.random()-1,r=Math.sqrt(1-s*s)*e;return t.x=Math.cos(i)*r,t.y=Math.sin(i)*r,t.z=s*e,t}},7742:t=>{t.exports=function(t,e){return void 0===e&&(e=1),t.x=(2*Math.random()-1)*e,t.y=(2*Math.random()-1)*e,t.z=(2*Math.random()-1)*e,t.w=(2*Math.random()-1)*e,t}},5522:t=>{t.exports=function(t,e){var i=t.x,s=t.y;return t.x=i*Math.cos(e)-s*Math.sin(e),t.y=i*Math.sin(e)+s*Math.cos(e),t}},1887:t=>{t.exports=function(t,e,i,s){var r=Math.cos(s),n=Math.sin(s),a=t.x-e,o=t.y-i;return t.x=a*r-o*n+e,t.y=a*n+o*r+i,t}},9776:t=>{t.exports=function(t,e,i,s,r){var n=s+Math.atan2(t.y-i,t.x-e);return t.x=e+r*Math.cos(n),t.y=i+r*Math.sin(n),t}},8759:t=>{t.exports=function(t,e,i,s,r){return t.x=e+r*Math.cos(s),t.y=i+r*Math.sin(s),t}},1137:(t,e,i)=>{var s=i(5609),r=i(3490),n=i(2021),a=new r,o=new n,h=new s;t.exports=function(t,e,i){return o.setAxisAngle(e,i),a.fromRotationTranslation(o,h.set(0,0,0)),t.transformMat4(a)}},861:t=>{t.exports=function(t){return t>0?Math.ceil(t):Math.floor(t)}},1892:t=>{t.exports=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=10);var s=Math.pow(i,-e);return Math.round(t*s)/s}},2901:t=>{t.exports=function(t,e,i,s){void 0===e&&(e=1),void 0===i&&(i=1),void 0===s&&(s=1),s*=Math.PI/t;for(var r=[],n=[],a=0;a<t;a++)e+=(i-=e*s)*s,r[a]=i,n[a]=e;return{sin:n,cos:r,length:t}}},7121:t=>{t.exports=function(t,e,i){return t<=e?0:t>=i?1:(t=(t-e)/(i-e))*t*(3-2*t)}},514:t=>{t.exports=function(t,e,i){return(t=Math.max(0,Math.min(1,(t-e)/(i-e))))*t*t*(t*(6*t-15)+10)}},8683:(t,e,i)=>{var s=i(2474);t.exports=function(t,e,i,r){void 0===r&&(r=new s);var n=0,a=0;return t>0&&t<=e*i&&(n=t>e-1?t-(a=Math.floor(t/e))*e:t),r.set(n,a)}},7494:(t,e,i)=>{var s=i(2474);t.exports=function(t,e,i,r,n,a,o,h){void 0===h&&(h=new s);var l=Math.sin(n),c=Math.cos(n),u=c*a,d=l*a,f=-l*o,p=c*o,m=1/(u*p+f*-d);return h.x=p*m*t+-f*m*e+(r*f-i*p)*m,h.y=u*m*e+-d*m*t+(-r*u+i*d)*m,h}},2474:(t,e,i)=>{var s=i(1772),r=i(1514),n=new s({initialize:function(t,e){this.x=0,this.y=0,"object"==typeof t?(this.x=t.x||0,this.y=t.y||0):(void 0===e&&(e=t),this.x=t||0,this.y=e||0)},clone:function(){return new n(this.x,this.y)},copy:function(t){return this.x=t.x||0,this.y=t.y||0,this},setFromObject:function(t){return this.x=t.x||0,this.y=t.y||0,this},set:function(t,e){return void 0===e&&(e=t),this.x=t,this.y=e,this},setTo:function(t,e){return this.set(t,e)},setToPolar:function(t,e){return null==e&&(e=1),this.x=Math.cos(t)*e,this.y=Math.sin(t)*e,this},equals:function(t){return this.x===t.x&&this.y===t.y},fuzzyEquals:function(t,e){return r(this.x,t.x,e)&&r(this.y,t.y,e)},angle:function(){var t=Math.atan2(this.y,this.x);return t<0&&(t+=2*Math.PI),t},setAngle:function(t){return this.setToPolar(t,this.length())},add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.x-=t.x,this.y-=t.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},scale:function(t){return isFinite(t)?(this.x*=t,this.y*=t):(this.x=0,this.y=0),this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},negate:function(){return this.x=-this.x,this.y=-this.y,this},distance:function(t){var e=t.x-this.x,i=t.y-this.y;return Math.sqrt(e*e+i*i)},distanceSq:function(t){var e=t.x-this.x,i=t.y-this.y;return e*e+i*i},length:function(){var t=this.x,e=this.y;return Math.sqrt(t*t+e*e)},setLength:function(t){return this.normalize().scale(t)},lengthSq:function(){var t=this.x,e=this.y;return t*t+e*e},normalize:function(){var t=this.x,e=this.y,i=t*t+e*e;return i>0&&(i=1/Math.sqrt(i),this.x=t*i,this.y=e*i),this},normalizeRightHand:function(){var t=this.x;return this.x=-1*this.y,this.y=t,this},normalizeLeftHand:function(){var t=this.x;return this.x=this.y,this.y=-1*t,this},dot:function(t){return this.x*t.x+this.y*t.y},cross:function(t){return this.x*t.y-this.y*t.x},lerp:function(t,e){void 0===e&&(e=0);var i=this.x,s=this.y;return this.x=i+e*(t.x-i),this.y=s+e*(t.y-s),this},transformMat3:function(t){var e=this.x,i=this.y,s=t.val;return this.x=s[0]*e+s[3]*i+s[6],this.y=s[1]*e+s[4]*i+s[7],this},transformMat4:function(t){var e=this.x,i=this.y,s=t.val;return this.x=s[0]*e+s[4]*i+s[12],this.y=s[1]*e+s[5]*i+s[13],this},reset:function(){return this.x=0,this.y=0,this},limit:function(t){var e=this.length();return e&&e>t&&this.scale(t/e),this},reflect:function(t){return t=t.clone().normalize(),this.subtract(t.scale(2*this.dot(t)))},mirror:function(t){return this.reflect(t).negate()},rotate:function(t){var e=Math.cos(t),i=Math.sin(t);return this.set(e*this.x-i*this.y,i*this.x+e*this.y)},project:function(t){var e=this.dot(t)/t.dot(t);return this.copy(t).scale(e)}});n.ZERO=new n,n.RIGHT=new n(1,0),n.LEFT=new n(-1,0),n.UP=new n(0,-1),n.DOWN=new n(0,1),n.ONE=new n(1,1),t.exports=n},5609:(t,e,i)=>{var s=new(i(1772))({initialize:function(t,e,i){this.x=0,this.y=0,this.z=0,"object"==typeof t?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0):(this.x=t||0,this.y=e||0,this.z=i||0)},up:function(){return this.x=0,this.y=1,this.z=0,this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clone:function(){return new s(this.x,this.y,this.z)},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this},crossVectors:function(t,e){var i=t.x,s=t.y,r=t.z,n=e.x,a=e.y,o=e.z;return this.x=s*o-r*a,this.y=r*n-i*o,this.z=i*a-s*n,this},equals:function(t){return this.x===t.x&&this.y===t.y&&this.z===t.z},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z||0,this},set:function(t,e,i){return"object"==typeof t?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0):(this.x=t||0,this.y=e||0,this.z=i||0),this},setFromMatrixPosition:function(t){return this.fromArray(t.val,12)},setFromMatrixColumn:function(t,e){return this.fromArray(t.val,4*e)},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this},add:function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z||0,this},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addScale:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e||0,this},subtract:function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z||0,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z||1,this},scale:function(t){return isFinite(t)?(this.x*=t,this.y*=t,this.z*=t):(this.x=0,this.y=0,this.z=0),this},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z||1,this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},distance:function(t){var e=t.x-this.x,i=t.y-this.y,s=t.z-this.z||0;return Math.sqrt(e*e+i*i+s*s)},distanceSq:function(t){var e=t.x-this.x,i=t.y-this.y,s=t.z-this.z||0;return e*e+i*i+s*s},length:function(){var t=this.x,e=this.y,i=this.z;return Math.sqrt(t*t+e*e+i*i)},lengthSq:function(){var t=this.x,e=this.y,i=this.z;return t*t+e*e+i*i},normalize:function(){var t=this.x,e=this.y,i=this.z,s=t*t+e*e+i*i;return s>0&&(s=1/Math.sqrt(s),this.x=t*s,this.y=e*s,this.z=i*s),this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},cross:function(t){var e=this.x,i=this.y,s=this.z,r=t.x,n=t.y,a=t.z;return this.x=i*a-s*n,this.y=s*r-e*a,this.z=e*n-i*r,this},lerp:function(t,e){void 0===e&&(e=0);var i=this.x,s=this.y,r=this.z;return this.x=i+e*(t.x-i),this.y=s+e*(t.y-s),this.z=r+e*(t.z-r),this},applyMatrix3:function(t){var e=this.x,i=this.y,s=this.z,r=t.val;return this.x=r[0]*e+r[3]*i+r[6]*s,this.y=r[1]*e+r[4]*i+r[7]*s,this.z=r[2]*e+r[5]*i+r[8]*s,this},applyMatrix4:function(t){var e=this.x,i=this.y,s=this.z,r=t.val,n=1/(r[3]*e+r[7]*i+r[11]*s+r[15]);return this.x=(r[0]*e+r[4]*i+r[8]*s+r[12])*n,this.y=(r[1]*e+r[5]*i+r[9]*s+r[13])*n,this.z=(r[2]*e+r[6]*i+r[10]*s+r[14])*n,this},transformMat3:function(t){var e=this.x,i=this.y,s=this.z,r=t.val;return this.x=e*r[0]+i*r[3]+s*r[6],this.y=e*r[1]+i*r[4]+s*r[7],this.z=e*r[2]+i*r[5]+s*r[8],this},transformMat4:function(t){var e=this.x,i=this.y,s=this.z,r=t.val;return this.x=r[0]*e+r[4]*i+r[8]*s+r[12],this.y=r[1]*e+r[5]*i+r[9]*s+r[13],this.z=r[2]*e+r[6]*i+r[10]*s+r[14],this},transformCoordinates:function(t){var e=this.x,i=this.y,s=this.z,r=t.val,n=e*r[0]+i*r[4]+s*r[8]+r[12],a=e*r[1]+i*r[5]+s*r[9]+r[13],o=e*r[2]+i*r[6]+s*r[10]+r[14],h=e*r[3]+i*r[7]+s*r[11]+r[15];return this.x=n/h,this.y=a/h,this.z=o/h,this},transformQuat:function(t){var e=this.x,i=this.y,s=this.z,r=t.x,n=t.y,a=t.z,o=t.w,h=o*e+n*s-a*i,l=o*i+a*e-r*s,c=o*s+r*i-n*e,u=-r*e-n*i-a*s;return this.x=h*o+u*-r+l*-a-c*-n,this.y=l*o+u*-n+c*-r-h*-a,this.z=c*o+u*-a+h*-n-l*-r,this},project:function(t){var e=this.x,i=this.y,s=this.z,r=t.val,n=r[0],a=r[1],o=r[2],h=r[3],l=r[4],c=r[5],u=r[6],d=r[7],f=r[8],p=r[9],m=r[10],g=r[11],x=r[12],w=r[13],v=r[14],y=1/(e*h+i*d+s*g+r[15]);return this.x=(e*n+i*l+s*f+x)*y,this.y=(e*a+i*c+s*p+w)*y,this.z=(e*o+i*u+s*m+v)*y,this},projectViewMatrix:function(t,e){return this.applyMatrix4(t).applyMatrix4(e)},unprojectViewMatrix:function(t,e){return this.applyMatrix4(t).applyMatrix4(e)},unproject:function(t,e){var i=t.x,s=t.y,r=t.z,n=t.w,a=this.x-i,o=n-this.y-1-s,h=this.z;return this.x=2*a/r-1,this.y=2*o/n-1,this.z=2*h-1,this.project(e)},reset:function(){return this.x=0,this.y=0,this.z=0,this}});s.ZERO=new s,s.RIGHT=new s(1,0,0),s.LEFT=new s(-1,0,0),s.UP=new s(0,-1,0),s.DOWN=new s(0,1,0),s.FORWARD=new s(0,0,1),s.BACK=new s(0,0,-1),s.ONE=new s(1,1,1),t.exports=s},76:(t,e,i)=>{var s=new(i(1772))({initialize:function(t,e,i,s){this.x=0,this.y=0,this.z=0,this.w=0,"object"==typeof t?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0,this.w=t.w||0):(this.x=t||0,this.y=e||0,this.z=i||0,this.w=s||0)},clone:function(){return new s(this.x,this.y,this.z,this.w)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z||0,this.w=t.w||0,this},equals:function(t){return this.x===t.x&&this.y===t.y&&this.z===t.z&&this.w===t.w},set:function(t,e,i,s){return"object"==typeof t?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0,this.w=t.w||0):(this.x=t||0,this.y=e||0,this.z=i||0,this.w=s||0),this},add:function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z||0,this.w+=t.w||0,this},subtract:function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z||0,this.w-=t.w||0,this},scale:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},length:function(){var t=this.x,e=this.y,i=this.z,s=this.w;return Math.sqrt(t*t+e*e+i*i+s*s)},lengthSq:function(){var t=this.x,e=this.y,i=this.z,s=this.w;return t*t+e*e+i*i+s*s},normalize:function(){var t=this.x,e=this.y,i=this.z,s=this.w,r=t*t+e*e+i*i+s*s;return r>0&&(r=1/Math.sqrt(r),this.x=t*r,this.y=e*r,this.z=i*r,this.w=s*r),this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lerp:function(t,e){void 0===e&&(e=0);var i=this.x,s=this.y,r=this.z,n=this.w;return this.x=i+e*(t.x-i),this.y=s+e*(t.y-s),this.z=r+e*(t.z-r),this.w=n+e*(t.w-n),this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z||1,this.w*=t.w||1,this},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z||1,this.w/=t.w||1,this},distance:function(t){var e=t.x-this.x,i=t.y-this.y,s=t.z-this.z||0,r=t.w-this.w||0;return Math.sqrt(e*e+i*i+s*s+r*r)},distanceSq:function(t){var e=t.x-this.x,i=t.y-this.y,s=t.z-this.z||0,r=t.w-this.w||0;return e*e+i*i+s*s+r*r},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},transformMat4:function(t){var e=this.x,i=this.y,s=this.z,r=this.w,n=t.val;return this.x=n[0]*e+n[4]*i+n[8]*s+n[12]*r,this.y=n[1]*e+n[5]*i+n[9]*s+n[13]*r,this.z=n[2]*e+n[6]*i+n[10]*s+n[14]*r,this.w=n[3]*e+n[7]*i+n[11]*s+n[15]*r,this},transformQuat:function(t){var e=this.x,i=this.y,s=this.z,r=t.x,n=t.y,a=t.z,o=t.w,h=o*e+n*s-a*i,l=o*i+a*e-r*s,c=o*s+r*i-n*e,u=-r*e-n*i-a*s;return this.x=h*o+u*-r+l*-a-c*-n,this.y=l*o+u*-n+c*-r-h*-a,this.z=c*o+u*-a+h*-n-l*-r,this},reset:function(){return this.x=0,this.y=0,this.z=0,this.w=0,this}});s.prototype.sub=s.prototype.subtract,s.prototype.mul=s.prototype.multiply,s.prototype.div=s.prototype.divide,s.prototype.dist=s.prototype.distance,s.prototype.distSq=s.prototype.distanceSq,s.prototype.len=s.prototype.length,s.prototype.lenSq=s.prototype.lengthSq,t.exports=s},6602:t=>{t.exports=function(t,e,i){return Math.abs(t-e)<=i}},4305:t=>{t.exports=function(t,e,i){var s=i-e;return e+((t-e)%s+s)%s}},4301:t=>{t.exports=function(t,e,i,s){return Math.atan2(s-e,i-t)}},2710:t=>{t.exports=function(t,e){return Math.atan2(e.y-t.y,e.x-t.x)}},3283:t=>{t.exports=function(t,e){return Math.atan2(e.x-t.x,e.y-t.y)}},9434:t=>{t.exports=function(t,e,i,s){return Math.atan2(i-t,s-e)}},2371:(t,e,i)=>{var s=i(7018);t.exports=function(t){return t>Math.PI&&(t-=s.PI2),Math.abs(((t+s.TAU)%s.PI2-s.PI2)%s.PI2)}},6730:t=>{t.exports=function(t){return(t%=2*Math.PI)>=0?t:t+2*Math.PI}},8854:(t,e,i)=>{var s=i(8343);t.exports=function(){return s(-Math.PI,Math.PI)}},8777:(t,e,i)=>{var s=i(8343);t.exports=function(){return s(-180,180)}},3363:(t,e,i)=>{var s=i(6730);t.exports=function(t){return s(t+Math.PI)}},3111:(t,e,i)=>{var s=i(7018);t.exports=function(t,e,i){return void 0===i&&(i=.05),t===e||(Math.abs(e-t)<=i||Math.abs(e-t)>=s.PI2-i?t=e:(Math.abs(e-t)>Math.PI&&(e<t?e+=s.PI2:e-=s.PI2),e>t?t+=i:e<t&&(t-=i))),t}},7195:t=>{t.exports=function(t,e){var i=e-t;return 0===i?0:i-360*Math.floor((i- -180)/360)}},8273:(t,e,i)=>{var s=i(4305);t.exports=function(t){return s(t,-Math.PI,Math.PI)}},1212:(t,e,i)=>{var s=i(4305);t.exports=function(t){return s(t,-180,180)}},5801:(t,e,i)=>{t.exports={Between:i(4301),BetweenPoints:i(2710),BetweenPointsY:i(3283),BetweenY:i(9434),CounterClockwise:i(2371),Normalize:i(6730),Random:i(8854),RandomDegrees:i(8777),Reverse:i(3363),RotateTo:i(3111),ShortestBetween:i(7195),Wrap:i(8273),WrapDegrees:i(1212)}},7018:t=>{var e={PI2:2*Math.PI,TAU:.5*Math.PI,EPSILON:1e-6,DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,RND:null,MIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER||-9007199254740991,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991};t.exports=e},5248:t=>{t.exports=function(t,e,i,s){var r=t-i,n=e-s;return Math.sqrt(r*r+n*n)}},9943:t=>{t.exports=function(t,e){var i=t.x-e.x,s=t.y-e.y;return Math.sqrt(i*i+s*s)}},2594:t=>{t.exports=function(t,e){var i=t.x-e.x,s=t.y-e.y;return i*i+s*s}},3655:t=>{t.exports=function(t,e,i,s){return Math.max(Math.abs(t-i),Math.abs(e-s))}},5925:t=>{t.exports=function(t,e,i,s,r){return void 0===r&&(r=2),Math.sqrt(Math.pow(i-t,r)+Math.pow(s-e,r))}},7428:t=>{t.exports=function(t,e,i,s){return Math.abs(t-i)+Math.abs(e-s)}},1525:t=>{t.exports=function(t,e,i,s){var r=t-i,n=e-s;return r*r+n*n}},7865:(t,e,i)=>{t.exports={Between:i(5248),BetweenPoints:i(9943),BetweenPointsSquared:i(2594),Chebyshev:i(3655),Power:i(5925),Snake:i(7428),Squared:i(1525)}},52:t=>{t.exports=function(t,e){return void 0===e&&(e=1.70158),t*t*((e+1)*t-e)}},9490:t=>{t.exports=function(t,e){void 0===e&&(e=1.70158);var i=1.525*e;return(t*=2)<1?t*t*((i+1)*t-i)*.5:.5*((t-=2)*t*((i+1)*t+i)+2)}},4443:t=>{t.exports=function(t,e){return void 0===e&&(e=1.70158),--t*t*((e+1)*t+e)+1}},1827:(t,e,i)=>{t.exports={In:i(52),Out:i(4443),InOut:i(9490)}},1477:t=>{t.exports=function(t){return(t=1-t)<1/2.75?1-7.5625*t*t:t<2/2.75?1-(7.5625*(t-=1.5/2.75)*t+.75):t<2.5/2.75?1-(7.5625*(t-=2.25/2.75)*t+.9375):1-(7.5625*(t-=2.625/2.75)*t+.984375)}},1889:t=>{t.exports=function(t){var e=!1;return t<.5?(t=1-2*t,e=!0):t=2*t-1,t<1/2.75?t*=7.5625*t:t=t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,e?.5*(1-t):.5*t+.5}},9208:t=>{t.exports=function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}},5804:(t,e,i)=>{t.exports={In:i(1477),Out:i(9208),InOut:i(1889)}},5830:t=>{t.exports=function(t){return 1-Math.sqrt(1-t*t)}},6364:t=>{t.exports=function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},1457:t=>{t.exports=function(t){return Math.sqrt(1- --t*t)}},7201:(t,e,i)=>{t.exports={In:i(5830),Out:i(1457),InOut:i(6364)}},563:t=>{t.exports=function(t){return t*t*t}},7567:t=>{t.exports=function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},7066:t=>{t.exports=function(t){return--t*t*t+1}},7942:(t,e,i)=>{t.exports={In:i(563),Out:i(7066),InOut:i(7567)}},4012:t=>{t.exports=function(t,e,i){if(void 0===e&&(e=.1),void 0===i&&(i=.1),0===t)return 0;if(1===t)return 1;var s=i/4;return e<1?e=1:s=i*Math.asin(1/e)/(2*Math.PI),-e*Math.pow(2,10*(t-=1))*Math.sin((t-s)*(2*Math.PI)/i)}},3594:t=>{t.exports=function(t,e,i){if(void 0===e&&(e=.1),void 0===i&&(i=.1),0===t)return 0;if(1===t)return 1;var s=i/4;return e<1?e=1:s=i*Math.asin(1/e)/(2*Math.PI),(t*=2)<1?e*Math.pow(2,10*(t-=1))*Math.sin((t-s)*(2*Math.PI)/i)*-.5:e*Math.pow(2,-10*(t-=1))*Math.sin((t-s)*(2*Math.PI)/i)*.5+1}},2531:t=>{t.exports=function(t,e,i){if(void 0===e&&(e=.1),void 0===i&&(i=.1),0===t)return 0;if(1===t)return 1;var s=i/4;return e<1?e=1:s=i*Math.asin(1/e)/(2*Math.PI),e*Math.pow(2,-10*t)*Math.sin((t-s)*(2*Math.PI)/i)+1}},75:(t,e,i)=>{t.exports={In:i(4012),Out:i(2531),InOut:i(3594)}},2877:t=>{t.exports=function(t){return Math.pow(2,10*(t-1))-.001}},1945:t=>{t.exports=function(t){return(t*=2)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*(t-1)))}},6208:t=>{t.exports=function(t){return 1-Math.pow(2,-10*t)}},2324:(t,e,i)=>{t.exports={In:i(2877),Out:i(6208),InOut:i(1945)}},1183:(t,e,i)=>{t.exports={Back:i(1827),Bounce:i(5804),Circular:i(7201),Cubic:i(7942),Elastic:i(75),Expo:i(2324),Linear:i(5773),Quadratic:i(990),Quartic:i(5851),Quintic:i(2575),Sine:i(6793),Stepped:i(7415)}},2180:t=>{t.exports=function(t){return t}},5773:(t,e,i)=>{t.exports=i(2180)},6235:t=>{t.exports=function(t){return t*t}},9591:t=>{t.exports=function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},2898:t=>{t.exports=function(t){return t*(2-t)}},990:(t,e,i)=>{t.exports={In:i(6235),Out:i(2898),InOut:i(9591)}},140:t=>{t.exports=function(t){return t*t*t*t}},4458:t=>{t.exports=function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},9587:t=>{t.exports=function(t){return 1- --t*t*t*t}},5851:(t,e,i)=>{t.exports={In:i(140),Out:i(9587),InOut:i(4458)}},296:t=>{t.exports=function(t){return t*t*t*t*t}},1606:t=>{t.exports=function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},7975:t=>{t.exports=function(t){return--t*t*t*t*t+1}},2575:(t,e,i)=>{t.exports={In:i(296),Out:i(7975),InOut:i(1606)}},2318:t=>{t.exports=function(t){return 0===t?0:1===t?1:1-Math.cos(t*Math.PI/2)}},2692:t=>{t.exports=function(t){return 0===t?0:1===t?1:.5*(1-Math.cos(Math.PI*t))}},633:t=>{t.exports=function(t){return 0===t?0:1===t?1:Math.sin(t*Math.PI/2)}},6793:(t,e,i)=>{t.exports={In:i(2318),Out:i(633),InOut:i(2692)}},9112:t=>{t.exports=function(t,e){return void 0===e&&(e=1),t<=0?0:t>=1?1:1/e*(1+(e*t|0))}},7415:(t,e,i)=>{t.exports=i(9112)},9813:t=>{t.exports=function(t,e){return void 0===e&&(e=1e-4),Math.ceil(t-e)}},1514:t=>{t.exports=function(t,e,i){return void 0===i&&(i=1e-4),Math.abs(t-e)<i}},9116:t=>{t.exports=function(t,e){return void 0===e&&(e=1e-4),Math.floor(t+e)}},1207:t=>{t.exports=function(t,e,i){return void 0===i&&(i=1e-4),t>e-i}},3542:t=>{t.exports=function(t,e,i){return void 0===i&&(i=1e-4),t<e+i}},1658:(t,e,i)=>{t.exports={Ceil:i(9813),Equal:i(1514),Floor:i(9116),GreaterThan:i(1207),LessThan:i(3542)}},3561:(t,e,i)=>{var s=i(7018),r=i(1180),n={Angle:i(5801),Distance:i(7865),Easing:i(1183),Fuzzy:i(1658),Interpolation:i(1352),Pow2:i(8390),Snap:i(8346),RandomDataGenerator:i(1560),Average:i(346),Bernstein:i(5303),Between:i(3517),CatmullRom:i(9273),CeilTo:i(301),Clamp:i(2522),DegToRad:i(1601),Difference:i(994),Euler:i(5528),Factorial:i(7954),FloatBetween:i(8343),FloorTo:i(2454),FromPercent:i(2004),GetSpeed:i(578),IsEven:i(9629),IsEvenStrict:i(6896),Linear:i(840),LinearXY:i(1735),MaxAdd:i(7868),Median:i(6947),MinSub:i(875),Percent:i(3656),RadToDeg:i(4063),RandomXY:i(7853),RandomXYZ:i(1895),RandomXYZW:i(7742),Rotate:i(5522),RotateAround:i(1887),RotateAroundDistance:i(9776),RotateTo:i(8759),RoundAwayFromZero:i(861),RoundTo:i(1892),SinCosTableGenerator:i(2901),SmootherStep:i(514),SmoothStep:i(7121),ToXY:i(8683),TransformXY:i(7494),Within:i(6602),Wrap:i(4305),Vector2:i(2474),Vector3:i(5609),Vector4:i(76),Matrix3:i(347),Matrix4:i(3490),Quaternion:i(2021),RotateVec3:i(1137)};n=r(!1,n,s),t.exports=n},6643:(t,e,i)=>{var s=i(5303);t.exports=function(t,e){for(var i=0,r=t.length-1,n=0;n<=r;n++)i+=Math.pow(1-e,r-n)*Math.pow(e,n)*t[n]*s(r,n);return i}},4286:(t,e,i)=>{var s=i(9273);t.exports=function(t,e){var i=t.length-1,r=i*e,n=Math.floor(r);return t[0]===t[i]?(e<0&&(n=Math.floor(r=i*(1+e))),s(r-n,t[(n-1+i)%i],t[n],t[(n+1)%i],t[(n+2)%i])):e<0?t[0]-(s(-r,t[0],t[0],t[1],t[1])-t[0]):e>1?t[i]-(s(r-i,t[i],t[i],t[i-1],t[i-1])-t[i]):s(r-n,t[n?n-1:0],t[n],t[i<n+1?i:n+1],t[i<n+2?i:n+2])}},5683:t=>{t.exports=function(t,e,i,s,r){return function(t,e){var i=1-t;return i*i*i*e}(t,e)+function(t,e){var i=1-t;return 3*i*i*t*e}(t,i)+function(t,e){return 3*(1-t)*t*t*e}(t,s)+function(t,e){return t*t*t*e}(t,r)}},5145:(t,e,i)=>{var s=i(840);t.exports=function(t,e){var i=t.length-1,r=i*e,n=Math.floor(r);return e<0?s(t[0],t[1],r):e>1?s(t[i],t[i-1],i-r):s(t[n],t[n+1>i?i:n+1],r-n)}},7647:t=>{t.exports=function(t,e,i,s){return function(t,e){var i=1-t;return i*i*e}(t,e)+function(t,e){return 2*(1-t)*t*e}(t,i)+function(t,e){return t*t*e}(t,s)}},6742:(t,e,i)=>{var s=i(7121);t.exports=function(t,e,i){return e+(i-e)*s(t,0,1)}},9035:(t,e,i)=>{var s=i(514);t.exports=function(t,e,i){return e+(i-e)*s(t,0,1)}},1352:(t,e,i)=>{t.exports={Bezier:i(6643),CatmullRom:i(4286),CubicBezier:i(5683),Linear:i(5145),QuadraticBezier:i(7647),SmoothStep:i(6742),SmootherStep:i(9035)}},5272:t=>{t.exports=function(t){var e=Math.log(t)/.6931471805599453;return 1<<Math.ceil(e)}},1395:t=>{t.exports=function(t,e){return t>0&&!(t&t-1)&&e>0&&!(e&e-1)}},9401:t=>{t.exports=function(t){return t>0&&!(t&t-1)}},8390:(t,e,i)=>{t.exports={GetNext:i(5272),IsSize:i(1395),IsValue:i(9401)}},1560:(t,e,i)=>{var s=new(i(1772))({initialize:function(t){void 0===t&&(t=[(Date.now()*Math.random()).toString()]),this.c=1,this.s0=0,this.s1=0,this.s2=0,this.n=0,this.signs=[-1,1],t&&this.init(t)},rnd:function(){var t=2091639*this.s0+2.3283064365386963e-10*this.c;return this.c=0|t,this.s0=this.s1,this.s1=this.s2,this.s2=t-this.c,this.s2},hash:function(t){var e,i=this.n;t=t.toString();for(var s=0;s<t.length;s++)e=.02519603282416938*(i+=t.charCodeAt(s)),e-=i=e>>>0,i=(e*=i)>>>0,i+=4294967296*(e-=i);return this.n=i,2.3283064365386963e-10*(i>>>0)},init:function(t){"string"==typeof t?this.state(t):this.sow(t)},sow:function(t){if(this.n=4022871197,this.s0=this.hash(" "),this.s1=this.hash(" "),this.s2=this.hash(" "),this.c=1,t)for(var e=0;e<t.length&&null!=t[e];e++){var i=t[e];this.s0-=this.hash(i),this.s0+=~~(this.s0<0),this.s1-=this.hash(i),this.s1+=~~(this.s1<0),this.s2-=this.hash(i),this.s2+=~~(this.s2<0)}},integer:function(){return 4294967296*this.rnd()},frac:function(){return this.rnd()+11102230246251565e-32*(2097152*this.rnd()|0)},real:function(){return this.integer()+this.frac()},integerInRange:function(t,e){return Math.floor(this.realInRange(0,e-t+1)+t)},between:function(t,e){return Math.floor(this.realInRange(0,e-t+1)+t)},realInRange:function(t,e){return this.frac()*(e-t)+t},normal:function(){return 1-2*this.frac()},uuid:function(){var t="",e="";for(e=t="";t++<36;e+=~t%5|3*t&4?(15^t?8^this.frac()*(20^t?16:4):4).toString(16):"-");return e},pick:function(t){return t[this.integerInRange(0,t.length-1)]},sign:function(){return this.pick(this.signs)},weightedPick:function(t){return t[~~(Math.pow(this.frac(),2)*(t.length-.5)+.5)]},timestamp:function(t,e){return this.realInRange(t||9466848e5,e||1577862e6)},angle:function(){return this.integerInRange(-180,180)},rotation:function(){return this.realInRange(-3.1415926,3.1415926)},state:function(t){return"string"==typeof t&&t.match(/^!rnd/)&&(t=t.split(","),this.c=parseFloat(t[1]),this.s0=parseFloat(t[2]),this.s1=parseFloat(t[3]),this.s2=parseFloat(t[4])),["!rnd",this.c,this.s0,this.s1,this.s2].join(",")},shuffle:function(t){for(var e=t.length-1;e>0;e--){var i=Math.floor(this.frac()*(e+1)),s=t[i];t[i]=t[e],t[e]=s}return t}});t.exports=s},4029:t=>{t.exports=function(t,e,i,s){return void 0===i&&(i=0),0===e?t:(t-=i,t=e*Math.ceil(t/e),s?(i+t)/e:i+t)}},2660:t=>{t.exports=function(t,e,i,s){return void 0===i&&(i=0),0===e?t:(t-=i,t=e*Math.floor(t/e),s?(i+t)/e:i+t)}},1065:t=>{t.exports=function(t,e,i,s){return void 0===i&&(i=0),0===e?t:(t-=i,t=e*Math.round(t/e),s?(i+t)/e:i+t)}},8346:(t,e,i)=>{t.exports={Ceil:i(4029),Floor:i(2660),To:i(1065)}},3207:(t,e,i)=>{var s=new(i(1772))({initialize:function(t){this.pluginManager=t,this.game=t.game},init:function(){},start:function(){},stop:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});t.exports=s},522:t=>{var e={},i={},s={register:function(t,i,s,r){void 0===r&&(r=!1),e[t]={plugin:i,mapping:s,custom:r}},registerCustom:function(t,e,s,r){i[t]={plugin:e,mapping:s,data:r}},hasCore:function(t){return e.hasOwnProperty(t)},hasCustom:function(t){return i.hasOwnProperty(t)},getCore:function(t){return e[t]},getCustom:function(t){return i[t]},getCustomClass:function(t){return i.hasOwnProperty(t)?i[t].plugin:null},remove:function(t){e.hasOwnProperty(t)&&delete e[t]},removeCustom:function(t){i.hasOwnProperty(t)&&delete i[t]},destroyCorePlugins:function(){for(var t in e)e.hasOwnProperty(t)&&delete e[t]},destroyCustomPlugins:function(){for(var t in i)i.hasOwnProperty(t)&&delete i[t]}};t.exports=s},4522:(t,e,i)=>{var s=i(3207),r=i(1772),n=i(1607),a=new r({Extends:s,initialize:function(t,e,i){s.call(this,e),this.scene=t,this.systems=t.sys,this.pluginKey=i,t.sys.events.once(n.BOOT,this.boot,this)},boot:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});t.exports=a},7047:t=>{t.exports={SKIP_CHECK:-1,NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,ERASE:17,SOURCE_IN:18,SOURCE_OUT:19,SOURCE_ATOP:20,DESTINATION_OVER:21,DESTINATION_IN:22,DESTINATION_OUT:23,DESTINATION_ATOP:24,LIGHTER:25,COPY:26,XOR:27}},7172:t=>{t.exports={DEFAULT:0,LINEAR:0,NEAREST:1}},298:t=>{t.exports="resize"},5617:t=>{t.exports="addedtoscene"},7536:t=>{t.exports="boot"},9623:t=>{t.exports="create"},1602:t=>{t.exports="destroy"},1162:t=>{t.exports="pause"},8206:t=>{t.exports="postupdate"},8790:t=>{t.exports="prerender"},9503:t=>{t.exports="preupdate"},8707:t=>{t.exports="ready"},8890:t=>{t.exports="removedfromscene"},6264:t=>{t.exports="render"},5591:t=>{t.exports="resume"},738:t=>{t.exports="shutdown"},3543:t=>{t.exports="sleep"},1580:t=>{t.exports="start"},6287:t=>{t.exports="transitioncomplete"},310:t=>{t.exports="transitioninit"},7280:t=>{t.exports="transitionout"},3744:t=>{t.exports="transitionstart"},4260:t=>{t.exports="transitionwake"},4613:t=>{t.exports="update"},7176:t=>{t.exports="wake"},1607:(t,e,i)=>{t.exports={ADDED_TO_SCENE:i(5617),BOOT:i(7536),CREATE:i(9623),DESTROY:i(1602),PAUSE:i(1162),POST_UPDATE:i(8206),PRE_RENDER:i(8790),PRE_UPDATE:i(9503),READY:i(8707),REMOVED_FROM_SCENE:i(8890),RENDER:i(6264),RESUME:i(5591),SHUTDOWN:i(738),SLEEP:i(3543),START:i(1580),TRANSITION_COMPLETE:i(6287),TRANSITION_INIT:i(310),TRANSITION_OUT:i(7280),TRANSITION_START:i(3744),TRANSITION_WAKE:i(4260),UPDATE:i(4613),WAKE:i(7176)}},4894:(t,e,i)=>{var s=i(1772),r=i(2522),n=i(1180),a=new s({initialize:function(t,e,i,s,r,n,a){this.texture=t,this.name=e,this.source=t.source[i],this.sourceIndex=i,this.cutX,this.cutY,this.cutWidth,this.cutHeight,this.x=0,this.y=0,this.width,this.height,this.halfWidth,this.halfHeight,this.centerX,this.centerY,this.pivotX=0,this.pivotY=0,this.customPivot=!1,this.rotated=!1,this.autoRound=-1,this.customData={},this.u0=0,this.v0=0,this.u1=0,this.v1=0,this.data={cut:{x:0,y:0,w:0,h:0,r:0,b:0},trim:!1,sourceSize:{w:0,h:0},spriteSourceSize:{x:0,y:0,w:0,h:0,r:0,b:0},radius:0,drawImage:{x:0,y:0,width:0,height:0},is3Slice:!1,scale9:!1,scale9Borders:{x:0,y:0,w:0,h:0}},this.setSize(n,a,s,r)},setCutPosition:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=0),this.cutX=t,this.cutY=e,this.updateUVs()},setCutSize:function(t,e){return this.cutWidth=t,this.cutHeight=e,this.updateUVs()},setSize:function(t,e,i,s){void 0===i&&(i=0),void 0===s&&(s=0),this.setCutPosition(i,s),this.setCutSize(t,e),this.width=t,this.height=e,this.halfWidth=Math.floor(.5*t),this.halfHeight=Math.floor(.5*e),this.centerX=Math.floor(t/2),this.centerY=Math.floor(e/2);var r=this.data,n=r.cut;n.x=i,n.y=s,n.w=t,n.h=e,n.r=i+t,n.b=s+e,r.sourceSize.w=t,r.sourceSize.h=e,r.spriteSourceSize.w=t,r.spriteSourceSize.h=e,r.radius=.5*Math.sqrt(t*t+e*e);var a=r.drawImage;return a.x=i,a.y=s,a.width=t,a.height=e,this.updateUVs()},setTrim:function(t,e,i,s,r,n){var a=this.data,o=a.spriteSourceSize;return a.trim=!0,a.sourceSize.w=t,a.sourceSize.h=e,o.x=i,o.y=s,o.w=r,o.h=n,o.r=i+r,o.b=s+n,this.x=i,this.y=s,this.width=r,this.height=n,this.halfWidth=.5*r,this.halfHeight=.5*n,this.centerX=Math.floor(r/2),this.centerY=Math.floor(n/2),this.updateUVs()},setScale9:function(t,e,i,s){var r=this.data;return r.scale9=!0,r.is3Slice=0===e&&s===this.height,r.scale9Borders.x=t,r.scale9Borders.y=e,r.scale9Borders.w=i,r.scale9Borders.h=s,this},setCropUVs:function(t,e,i,s,n,a,o){var h=this.cutX,l=this.cutY,c=this.cutWidth,u=this.cutHeight,d=this.realWidth,f=this.realHeight,p=h+(e=r(e,0,d)),m=l+(i=r(i,0,f)),g=s=r(s,0,d-e),x=n=r(n,0,f-i),w=this.data;if(w.trim){var v=w.spriteSourceSize,y=e+(s=r(s,0,c-e)),b=i+(n=r(n,0,u-i));if(!(v.r<e||v.b<i||v.x>y||v.y>b)){var A=Math.max(v.x,e),S=Math.max(v.y,i),M=Math.min(v.r,y)-A,I=Math.min(v.b,b)-S;g=M,x=I,p=a?h+(c-(A-v.x)-M):h+(A-v.x),m=o?l+(u-(S-v.y)-I):l+(S-v.y),e=A,i=S,s=M,n=I}else p=0,m=0,g=0,x=0}else a&&(p=h+(c-e-s)),o&&(m=l+(u-i-n));var T=this.source.width,k=this.source.height;return t.u0=Math.max(0,p/T),t.v0=Math.max(0,m/k),t.u1=Math.min(1,(p+g)/T),t.v1=Math.min(1,(m+x)/k),t.x=e,t.y=i,t.cx=p,t.cy=m,t.cw=g,t.ch=x,t.width=s,t.height=n,t.flipX=a,t.flipY=o,t},updateCropUVs:function(t,e,i){return this.setCropUVs(t,t.x,t.y,t.width,t.height,e,i)},setUVs:function(t,e,i,s,r,n){var a=this.data.drawImage;return a.width=t,a.height=e,this.u0=i,this.v0=s,this.u1=r,this.v1=n,this},updateUVs:function(){var t=this.cutX,e=this.cutY,i=this.cutWidth,s=this.cutHeight,r=this.data.drawImage;r.width=i,r.height=s;var n=this.source.width,a=this.source.height;return this.u0=t/n,this.v0=e/a,this.u1=(t+i)/n,this.v1=(e+s)/a,this},updateUVsInverted:function(){var t=this.source.width,e=this.source.height;return this.u0=(this.cutX+this.cutHeight)/t,this.v0=this.cutY/e,this.u1=this.cutX/t,this.v1=(this.cutY+this.cutWidth)/e,this},clone:function(){var t=new a(this.texture,this.name,this.sourceIndex);return t.cutX=this.cutX,t.cutY=this.cutY,t.cutWidth=this.cutWidth,t.cutHeight=this.cutHeight,t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t.halfWidth=this.halfWidth,t.halfHeight=this.halfHeight,t.centerX=this.centerX,t.centerY=this.centerY,t.rotated=this.rotated,t.data=n(!0,t.data,this.data),t.updateUVs(),t},destroy:function(){this.texture=null,this.source=null,this.customData=null,this.data=null},glTexture:{get:function(){return this.source.glTexture}},realWidth:{get:function(){return this.data.sourceSize.w}},realHeight:{get:function(){return this.data.sourceSize.h}},radius:{get:function(){return this.data.radius}},trimmed:{get:function(){return this.data.trim}},scale9:{get:function(){return this.data.scale9}},is3Slice:{get:function(){return this.data.is3Slice}},canvasData:{get:function(){return this.data.drawImage}}});t.exports=a},4686:t=>{t.exports=function(t,e,i){return t&&t.hasOwnProperty(e)?t[e]:i}},1588:t=>{t.exports={CREATED:0,DELAY:2,PENDING_RENDER:4,PLAYING_FORWARD:5,PLAYING_BACKWARD:6,HOLD_DELAY:7,REPEAT_DELAY:8,COMPLETE:9,PENDING:20,ACTIVE:21,LOOP_DELAY:22,COMPLETE_DELAY:23,START_DELAY:24,PENDING_REMOVE:25,REMOVED:26,FINISHED:27,DESTROYED:28,MAX:999999999999}},1772:t=>{function e(t,e,i){var s=i?t[e]:Object.getOwnPropertyDescriptor(t,e);return!i&&s.value&&"object"==typeof s.value&&(s=s.value),!(!s||!function(t){return!!t.get&&"function"==typeof t.get||!!t.set&&"function"==typeof t.set}(s))&&(void 0===s.enumerable&&(s.enumerable=!0),void 0===s.configurable&&(s.configurable=!0),s)}function i(t,e){var i=Object.getOwnPropertyDescriptor(t,e);return!!i&&(i.value&&"object"==typeof i.value&&(i=i.value),!1===i.configurable)}function s(t,s,r,a){for(var o in s)if(s.hasOwnProperty(o)){var h=e(s,o,r);if(!1!==h){if(i((a||t).prototype,o)){if(n.ignoreFinals)continue;throw new Error("cannot override final property '"+o+"', set Class.ignoreFinals = true to skip")}Object.defineProperty(t.prototype,o,h)}else t.prototype[o]=s[o]}}function r(t,e){if(e){Array.isArray(e)||(e=[e]);for(var i=0;i<e.length;i++)s(t,e[i].prototype||e[i])}}function n(t){var e,i;if(t||(t={}),t.initialize){if("function"!=typeof t.initialize)throw new Error("initialize must be a function");e=t.initialize,delete t.initialize}else if(t.Extends){var n=t.Extends;e=function(){n.apply(this,arguments)}}else e=function(){};t.Extends?(e.prototype=Object.create(t.Extends.prototype),e.prototype.constructor=e,i=t.Extends,delete t.Extends):e.prototype.constructor=e;var a=null;return t.Mixins&&(a=t.Mixins,delete t.Mixins),r(e,a),s(e,t,!0,i),e}n.extend=s,n.mixin=r,n.ignoreFinals=!1,t.exports=n},9318:t=>{t.exports=function(){}},9177:t=>{t.exports=function(t,e,i,s,r){if(void 0===r&&(r=t),i>0){var n=i-t.length;if(n<=0)return null}if(!Array.isArray(e))return-1===t.indexOf(e)?(t.push(e),s&&s.call(r,e),e):null;for(var a=e.length-1;a>=0;)-1!==t.indexOf(e[a])&&e.splice(a,1),a--;if(0===(a=e.length))return null;i>0&&a>n&&(e.splice(n),a=n);for(var o=0;o<a;o++){var h=e[o];t.push(h),s&&s.call(r,h)}return e}},6120:t=>{t.exports=function(t,e,i,s,r,n){if(void 0===i&&(i=0),void 0===n&&(n=t),s>0){var a=s-t.length;if(a<=0)return null}if(!Array.isArray(e))return-1===t.indexOf(e)?(t.splice(i,0,e),r&&r.call(n,e),e):null;for(var o=e.length-1;o>=0;)-1!==t.indexOf(e[o])&&e.pop(),o--;if(0===(o=e.length))return null;s>0&&o>a&&(e.splice(a),o=a);for(var h=o-1;h>=0;h--){var l=e[h];t.splice(i,0,l),r&&r.call(n,l)}return e}},8628:t=>{t.exports=function(t,e){var i=t.indexOf(e);return-1!==i&&i<t.length&&(t.splice(i,1),t.push(e)),e}},3785:(t,e,i)=>{var s=i(464);t.exports=function(t,e,i,r,n){void 0===r&&(r=0),void 0===n&&(n=t.length);var a=0;if(s(t,r,n))for(var o=r;o<n;o++){t[o][e]===i&&a++}return a}},1229:t=>{t.exports=function(t,e,i){var s,r=[null];for(s=3;s<arguments.length;s++)r.push(arguments[s]);for(s=0;s<t.length;s++)r[0]=t[s],e.apply(i,r);return t}},8205:(t,e,i)=>{var s=i(464);t.exports=function(t,e,i,r,n){if(void 0===r&&(r=0),void 0===n&&(n=t.length),s(t,r,n)){var a,o=[null];for(a=5;a<arguments.length;a++)o.push(arguments[a]);for(a=r;a<n;a++)o[0]=t[a],e.apply(i,o)}return t}},8166:t=>{t.exports=function(t,e,i){if(!e.length)return NaN;if(1===e.length)return e[0];var s,r,n=1;if(i){if(t<e[0][i])return e[0];for(;e[n][i]<t;)n++}else for(;e[n]<t;)n++;return n>e.length&&(n=e.length),i?(s=e[n-1][i],(r=e[n][i])-t<=t-s?e[n]:e[n-1]):(s=e[n-1],(r=e[n])-t<=t-s?r:s)}},6688:t=>{var e=function(t,i){void 0===i&&(i=[]);for(var s=0;s<t.length;s++)Array.isArray(t[s])?e(t[s],i):i.push(t[s]);return i};t.exports=e},9803:(t,e,i)=>{var s=i(464);t.exports=function(t,e,i,r,n){void 0===r&&(r=0),void 0===n&&(n=t.length);var a=[];if(s(t,r,n))for(var o=r;o<n;o++){var h=t[o];(!e||e&&void 0===i&&h.hasOwnProperty(e)||e&&void 0!==i&&h[e]===i)&&a.push(h)}return a}},2650:(t,e,i)=>{var s=i(464);t.exports=function(t,e,i,r,n){if(void 0===r&&(r=0),void 0===n&&(n=t.length),s(t,r,n))for(var a=r;a<n;a++){var o=t[a];if(!e||e&&void 0===i&&o.hasOwnProperty(e)||e&&void 0!==i&&o[e]===i)return o}return null}},605:t=>{t.exports=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=t.length);var s=e+Math.floor(Math.random()*i);return void 0===t[s]?null:t[s]}},4416:t=>{t.exports=function(t,e,i){if(e===i)return t;var s=t.indexOf(e),r=t.indexOf(i);if(s<0||r<0)throw new Error("Supplied items must be elements of the same array");return s>r||(t.splice(s,1),r=t.indexOf(i),t.splice(r+1,0,e)),t}},4668:t=>{t.exports=function(t,e,i){if(e===i)return t;var s=t.indexOf(e),r=t.indexOf(i);if(s<0||r<0)throw new Error("Supplied items must be elements of the same array");return s<r||(t.splice(s,1),0===r?t.unshift(e):t.splice(r,0,e)),t}},3589:t=>{t.exports=function(t,e){var i=t.indexOf(e);if(i>0){var s=t[i-1],r=t.indexOf(s);t[i]=s,t[r]=e}return t}},3260:t=>{t.exports=function(t,e,i){var s=t.indexOf(e);if(-1===s||i<0||i>=t.length)throw new Error("Supplied index out of bounds");return s!==i&&(t.splice(s,1),t.splice(i,0,e)),e}},2860:t=>{t.exports=function(t,e){var i=t.indexOf(e);if(-1!==i&&i<t.length-1){var s=t[i+1],r=t.indexOf(s);t[i]=s,t[r]=e}return t}},9168:t=>{t.exports=function(t,e,i,s){var r,n=[],a=!1;if((i||s)&&(a=!0,i||(i=""),s||(s="")),e<t)for(r=t;r>=e;r--)a?n.push(i+r.toString()+s):n.push(r);else for(r=t;r<=e;r++)a?n.push(i+r.toString()+s):n.push(r);return n}},6642:(t,e,i)=>{var s=i(861);t.exports=function(t,e,i){void 0===t&&(t=0),void 0===e&&(e=null),void 0===i&&(i=1),null===e&&(e=t,t=0);for(var r=[],n=Math.max(s((e-t)/(i||1)),0),a=0;a<n;a++)r.push(t),t+=i;return r}},3913:t=>{function e(t,e,i){var s=t[e];t[e]=t[i],t[i]=s}function i(t,e){return t<e?-1:t>e?1:0}var s=function(t,r,n,a,o){for(void 0===n&&(n=0),void 0===a&&(a=t.length-1),void 0===o&&(o=i);a>n;){if(a-n>600){var h=a-n+1,l=r-n+1,c=Math.log(h),u=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*u*(h-u)/h)*(l-h/2<0?-1:1),f=Math.max(n,Math.floor(r-l*u/h+d)),p=Math.min(a,Math.floor(r+(h-l)*u/h+d));s(t,r,f,p,o)}var m=t[r],g=n,x=a;for(e(t,n,r),o(t[a],m)>0&&e(t,n,a);g<x;){for(e(t,g,x),g++,x--;o(t[g],m)<0;)g++;for(;o(t[x],m)>0;)x--}0===o(t[n],m)?e(t,n,x):e(t,++x,a),x<=r&&(n=x+1),r<=x&&(a=x-1)}};t.exports=s},6087:(t,e,i)=>{var s=i(1841),r=i(6139),n=function(t,e,i){for(var s=[],r=0;r<t.length;r++)for(var n=0;n<e.length;n++)for(var a=0;a<i;a++)s.push({a:t[r],b:e[n]});return s};t.exports=function(t,e,i){var a=s(i,"max",0),o=s(i,"qty",1),h=s(i,"random",!1),l=s(i,"randomB",!1),c=s(i,"repeat",0),u=s(i,"yoyo",!1),d=[];if(l&&r(e),-1===c)if(0===a)c=0;else{var f=t.length*e.length*o;u&&(f*=2),c=Math.ceil(a/f)}for(var p=0;p<=c;p++){var m=n(t,e,o);h&&r(m),d=d.concat(m),u&&(m.reverse(),d=d.concat(m))}return a&&d.splice(a),d}},8404:(t,e,i)=>{var s=i(2418);t.exports=function(t,e,i,r){var n;if(void 0===r&&(r=t),!Array.isArray(e))return-1!==(n=t.indexOf(e))?(s(t,n),i&&i.call(r,e),e):null;for(var a=e.length-1,o=[];a>=0;){var h=e[a];-1!==(n=t.indexOf(h))&&(s(t,n),o.push(h),i&&i.call(r,h)),a--}return o}},7373:(t,e,i)=>{var s=i(2418);t.exports=function(t,e,i,r){if(void 0===r&&(r=t),e<0||e>t.length-1)throw new Error("Index out of bounds");var n=s(t,e);return i&&i.call(r,n),n}},9194:(t,e,i)=>{var s=i(464);t.exports=function(t,e,i,r,n){if(void 0===e&&(e=0),void 0===i&&(i=t.length),void 0===n&&(n=t),s(t,e,i)){var a=i-e,o=t.splice(e,a);if(r)for(var h=0;h<o.length;h++){var l=o[h];r.call(n,l)}return o}return[]}},2415:(t,e,i)=>{var s=i(2418);t.exports=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=t.length);var r=e+Math.floor(Math.random()*i);return s(t,r)}},3358:t=>{t.exports=function(t,e,i){var s=t.indexOf(e),r=t.indexOf(i);return-1!==s&&-1===r&&(t[s]=i,!0)}},7258:t=>{t.exports=function(t,e){void 0===e&&(e=1);for(var i=null,s=0;s<e;s++)i=t.shift(),t.push(i);return i}},6701:t=>{t.exports=function(t,e){void 0===e&&(e=1);for(var i=null,s=0;s<e;s++)i=t.pop(),t.unshift(i);return i}},464:t=>{t.exports=function(t,e,i,s){var r=t.length;if(e<0||e>r||e>=i||i>r){if(s)throw new Error("Range Error: Values outside acceptable range");return!1}return!0}},1764:t=>{t.exports=function(t,e){var i=t.indexOf(e);return-1!==i&&i>0&&(t.splice(i,1),t.unshift(e)),e}},8711:(t,e,i)=>{var s=i(464);t.exports=function(t,e,i,r,n){if(void 0===r&&(r=0),void 0===n&&(n=t.length),s(t,r,n))for(var a=r;a<n;a++){var o=t[a];o.hasOwnProperty(e)&&(o[e]=i)}return t}},6139:t=>{t.exports=function(t){for(var e=t.length-1;e>0;e--){var i=Math.floor(Math.random()*(e+1)),s=t[e];t[e]=t[i],t[i]=s}return t}},8855:t=>{t.exports=function(t){var e=/\D/g;return t.sort((function(t,i){return parseInt(t.replace(e,""),10)-parseInt(i.replace(e,""),10)})),t}},2418:t=>{t.exports=function(t,e){if(!(e>=t.length)){for(var i=t.length-1,s=t[e],r=e;r<i;r++)t[r]=t[r+1];return t.length=i,s}}},7575:(t,e,i)=>{var s=i(5125);function r(t,e){return String(t).localeCompare(e)}function n(t,e,i,s){var r,n,a,o,h,l=t.length,c=0,u=2*i;for(r=0;r<l;r+=u)for(a=(n=r+i)+i,n>l&&(n=l),a>l&&(a=l),o=r,h=n;;)if(o<n&&h<a)e(t[o],t[h])<=0?s[c++]=t[o++]:s[c++]=t[h++];else if(o<n)s[c++]=t[o++];else{if(!(h<a))break;s[c++]=t[h++]}}t.exports=function(t,e){if(void 0===e&&(e=r),!t||t.length<2)return t;if(s.features.stableSort)return t.sort(e);var i=function(t,e){var i=t.length;if(i<=1)return t;for(var s=new Array(i),r=1;r<i;r*=2){n(t,e,r,s);var a=t;t=s,s=a}return t}(t,e);return i!==t&&n(i,null,t.length,t),t}},2803:t=>{t.exports=function(t,e,i){if(e===i)return t;var s=t.indexOf(e),r=t.indexOf(i);if(s<0||r<0)throw new Error("Supplied items must be elements of the same array");return t[s]=i,t[r]=e,t}},9218:(t,e,i)=>{t.exports={Matrix:i(3370),Add:i(9177),AddAt:i(6120),BringToTop:i(8628),CountAllMatching:i(3785),Each:i(1229),EachInRange:i(8205),FindClosestInSorted:i(8166),Flatten:i(6688),GetAll:i(9803),GetFirst:i(2650),GetRandom:i(605),MoveDown:i(3589),MoveTo:i(3260),MoveUp:i(2860),MoveAbove:i(4416),MoveBelow:i(4668),NumberArray:i(9168),NumberArrayStep:i(6642),QuickSelect:i(3913),Range:i(6087),Remove:i(8404),RemoveAt:i(7373),RemoveBetween:i(9194),RemoveRandomElement:i(2415),Replace:i(3358),RotateLeft:i(7258),RotateRight:i(6701),SafeRange:i(464),SendToBack:i(1764),SetAll:i(8711),Shuffle:i(6139),SortByDigits:i(8855),SpliceOne:i(2418),StableSort:i(7575),Swap:i(2803)}},3515:t=>{t.exports=function(t){if(!Array.isArray(t)||!Array.isArray(t[0]))return!1;for(var e=t[0].length,i=1;i<t.length;i++)if(t[i].length!==e)return!1;return!0}},2633:(t,e,i)=>{var s=i(1717),r=i(3515);t.exports=function(t){var e="";if(!r(t))return e;for(var i=0;i<t.length;i++){for(var n=0;n<t[i].length;n++){var a=t[i][n].toString();e+="undefined"!==a?s(a,2):"?",n<t[i].length-1&&(e+=" |")}if(i<t.length-1){e+="\n";for(var o=0;o<t[i].length;o++)e+="---",o<t[i].length-1&&(e+="+");e+="\n"}}return e}},7189:t=>{t.exports=function(t){return t.reverse()}},2933:t=>{t.exports=function(t){for(var e=0;e<t.length;e++)t[e].reverse();return t}},8952:(t,e,i)=>{var s=i(1594);t.exports=function(t){return s(t,180)}},3330:(t,e,i)=>{var s=i(1594);t.exports=function(t,e){void 0===e&&(e=1);for(var i=0;i<e;i++)t=s(t,90);return t}},1594:(t,e,i)=>{var s=i(3515),r=i(6720);t.exports=function(t,e){if(void 0===e&&(e=90),!s(t))return null;if("string"!=typeof e&&(e=(e%360+360)%360),90===e||-270===e||"rotateLeft"===e)(t=r(t)).reverse();else if(-90===e||270===e||"rotateRight"===e)t.reverse(),t=r(t);else if(180===Math.abs(e)||"rotate180"===e){for(var i=0;i<t.length;i++)t[i].reverse();t.reverse()}return t}},6437:(t,e,i)=>{var s=i(1594);t.exports=function(t,e){void 0===e&&(e=1);for(var i=0;i<e;i++)t=s(t,-90);return t}},7801:(t,e,i)=>{var s=i(7258),r=i(6701);t.exports=function(t,e,i){if(void 0===e&&(e=0),void 0===i&&(i=0),0!==i&&(i<0?s(t,Math.abs(i)):r(t,i)),0!==e)for(var n=0;n<t.length;n++){var a=t[n];e<0?s(a,Math.abs(e)):r(a,e)}return t}},6720:t=>{t.exports=function(t){for(var e=t.length,i=t[0].length,s=new Array(i),r=0;r<i;r++){s[r]=new Array(e);for(var n=e-1;n>-1;n--)s[r][n]=t[n][r]}return s}},3370:(t,e,i)=>{t.exports={CheckMatrix:i(3515),MatrixToString:i(2633),ReverseColumns:i(7189),ReverseRows:i(2933),Rotate180:i(8952),RotateLeft:i(3330),RotateMatrix:i(1594),RotateRight:i(6437),Translate:i(7801),TransposeMatrix:i(6720)}},8015:t=>{var e=function(t){var i,s,r;if("object"!=typeof t||null===t)return t;for(r in i=Array.isArray(t)?[]:{},t)s=t[r],i[r]=e(s);return i};t.exports=e},1180:(t,e,i)=>{var s=i(4181),r=function(){var t,e,i,n,a,o,h=arguments[0]||{},l=1,c=arguments.length,u=!1;for("boolean"==typeof h&&(u=h,h=arguments[1]||{},l=2),c===l&&(h=this,--l);l<c;l++)if(null!=(t=arguments[l]))for(e in t)i=h[e],h!==(n=t[e])&&(u&&n&&(s(n)||(a=Array.isArray(n)))?(a?(a=!1,o=i&&Array.isArray(i)?i:[]):o=i&&s(i)?i:{},h[e]=r(u,o,n)):void 0!==n&&(h[e]=n));return h};t.exports=r},7931:(t,e,i)=>{var s=i(3561),r=i(1841);t.exports=function(t,e,i){var n=r(t,e,null);if(null===n)return i;if(Array.isArray(n))return s.RND.pick(n);if("object"==typeof n){if(n.hasOwnProperty("randInt"))return s.RND.integerInRange(n.randInt[0],n.randInt[1]);if(n.hasOwnProperty("randFloat"))return s.RND.realInRange(n.randFloat[0],n.randFloat[1])}else if("function"==typeof n)return n(e);return n}},8831:t=>{t.exports=function(t,e,i){var s=typeof t;return t&&"number"!==s&&"string"!==s&&t.hasOwnProperty(e)&&void 0!==t[e]?t[e]:i}},1841:t=>{t.exports=function(t,e,i,s){if(!t&&!s||"number"==typeof t)return i;if(t&&t.hasOwnProperty(e))return t[e];if(s&&s.hasOwnProperty(e))return s[e];if(-1!==e.indexOf(".")){for(var r=e.split("."),n=t,a=s,o=i,h=i,l=!0,c=!0,u=0;u<r.length;u++)n&&n.hasOwnProperty(r[u])?(o=n[r[u]],n=n[r[u]]):l=!1,a&&a.hasOwnProperty(r[u])?(h=a[r[u]],a=a[r[u]]):c=!1;return l?o:c?h:i}return i}},4181:t=>{t.exports=function(t){if(!t||"object"!=typeof t||t.nodeType||t===t.window)return!1;try{if(t.constructor&&!{}.hasOwnProperty.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(t){return!1}return!0}},1717:t=>{t.exports=function(t,e,i,s){void 0===e&&(e=0),void 0===i&&(i=" "),void 0===s&&(s=3);var r=0;if(e+1>=(t=t.toString()).length)switch(s){case 1:t=new Array(e+1-t.length).join(i)+t;break;case 3:var n=Math.ceil((r=e-t.length)/2);t=new Array(r-n+1).join(i)+t+new Array(n+1).join(i);break;default:t+=new Array(e+1-t.length).join(i)}return t}},2868:(t,e,i)=>{var s=new(i(1772))({Extends:i(9863),initialize:function(){console.error("SpineFile should not be used for Playable Ads")},onFileComplete:function(){},addToCache:function(){}});t.exports=s},2681:(t,e,i)=>{var s=i(6814),r=i(1772),n=i(1841),a=i(298),o=i(4522),h={canvas:i(3437),webgl:i(6280)},l=i(2868),c=i(4225),u=i(3451),d=i(9318),f=new r({Extends:o,initialize:function(t,e,i){o.call(this,t,e,i);var r=e.game;this.isWebGL=2===r.config.renderType,this.cache=r.cache.addCustom("spine"),this.spineTextures=r.cache.addCustom("spineTextures"),this.json=r.cache.json,this.textures=r.textures,this.drawDebug=!1,this.gl,this.renderer,this.sceneRenderer,this.skeletonRenderer,this.skeletonDebugRenderer,this.plugin=h,this.temp1,this.temp2,this.isWebGL?(this.runtime=h.webgl,this.renderer=r.renderer,this.gl=r.renderer.gl,this.getAtlas=this.getAtlasWebGL):(this.runtime=h.canvas,this.renderer=r.renderer,this.getAtlas=this.getAtlasCanvas),this.renderer||(this.renderer={width:r.scale.width,height:r.scale.height,preRender:d,postRender:d,render:d,destroy:d});e.registerFileType("spine",this.spineFileCallback,t),e.registerGameObject("spine",(function(t,e,s,r,n){var a=this.scene.sys[i],o=new c(this.scene,a,t,e,s,r,n);return this.displayList.add(o),this.updateList.add(o),o}),(function(t,e){void 0===t&&(t={});var r=n(t,"key",null),a=n(t,"animationName",null),o=n(t,"loop",!1),h=this.scene.sys[i],l=new c(this.scene,h,0,0,r,a,o);void 0!==e&&(t.add=e),s(this.scene,l,t);var u=n(t,"skinName",!1);u&&l.setSkinByName(u);var d=n(t,"slotName",!1),f=n(t,"attachmentName",null);return d&&l.setAttachment(d,f),l.refresh()})),e.registerGameObject("spineContainer",(function(t,e,s){var r=this.scene.sys[i],n=new u(this.scene,r,t,e,s);return this.displayList.add(n),n}),(function(t,e){void 0===t&&(t={});var r=n(t,"x",0),a=n(t,"y",0),o=n(t,"children",null),h=this.scene.sys[i],l=new u(this.scene,h,r,a,o);return void 0!==e&&(t.add=e),s(this.scene,l,t),l}))},boot:function(){this.isWebGL?(this.bootWebGL(),this.onResize(),this.game.scale.on(a,this.onResize,this)):this.bootCanvas();var t=this.systems.events;t.once("shutdown",this.shutdown,this),t.once("destroy",this.destroy,this),this.game.events.once("destroy",this.gameDestroy,this)},bootCanvas:function(){this.skeletonRenderer=new h.canvas.SkeletonRenderer(this.scene.sys.context)},bootWebGL:function(){var t=this.renderer.spineSceneRenderer;t||(t=new h.webgl.SceneRenderer(this.renderer.canvas,this.gl,!0),this.renderer.spineSceneRenderer=t),this.sceneRenderer=t,this.skeletonRenderer=t.skeletonRenderer,this.skeletonDebugRenderer=t.skeletonDebugRenderer,this.temp1=new h.webgl.Vector3(0,0,0),this.temp2=new h.webgl.Vector3(0,0,0)},getAtlasCanvas:function(t){var e=this.cache.get(t);if(e){var i,s=this.spineTextures;if(s.has(t))i=s.get(t);else{var r=this.textures;i=new this.runtime.TextureAtlas(e.data,(function(t){return new h.canvas.CanvasTexture(r.get(e.prefix+t).getSourceImage())}))}return i}console.warn("No atlas data for: "+t)},getAtlasWebGL:function(t){var e=this.cache.get(t);if(e){var i,s=this.spineTextures;if(s.has(t))i=s.get(t);else{var r=this.textures,n=this.sceneRenderer.context.gl;n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),i=new this.runtime.TextureAtlas(e.data,(function(t){return new h.webgl.GLTexture(n,r.get(e.prefix+t).getSourceImage(),!1)}))}return i}console.warn("No atlas data for: "+t)},spineFileCallback:function(t,e,i,s,r,n,a){var o;if(a=a||{},Array.isArray(t))for(var h=0;h<t.length;h++)(o=new l(this,t[h])).prefix=o.prefix||a.prefix||"",this.addFile(o.files);else(o=new l(this,t,e,i,s,r,n)).prefix=o.prefix||a.prefix||"",this.addFile(o.files);return this},worldToLocal:function(t,e,i,s){var r=this.temp1,n=this.temp2,a=this.sceneRenderer.camera;r.set(t+i.x,e-i.y,0);var o=a.viewportWidth,h=a.viewportHeight;return a.screenToWorld(r,o,h),s&&null!==s.parent?(s.parent.worldToLocal(n.set(r.x-i.x,r.y-i.y,0)),new this.runtime.Vector2(n.x,n.y)):s?new this.runtime.Vector2(r.x-i.x,r.y-i.y):new this.runtime.Vector2(r.x,r.y)},getVector2:function(t,e){return new this.runtime.Vector2(t,e)},getVector3:function(t,e,i){return new h.webgl.Vector3(t,e,i)},setDebugBones:function(t){return void 0===t&&(t=!0),this.skeletonDebugRenderer.drawBones=t,this},setDebugRegionAttachments:function(t){return void 0===t&&(t=!0),this.skeletonDebugRenderer.drawRegionAttachments=t,this},setDebugBoundingBoxes:function(t){return void 0===t&&(t=!0),this.skeletonDebugRenderer.drawBoundingBoxes=t,this},setDebugMeshHull:function(t){return void 0===t&&(t=!0),this.skeletonDebugRenderer.drawMeshHull=t,this},setDebugMeshTriangles:function(t){return void 0===t&&(t=!0),this.skeletonDebugRenderer.drawMeshTriangles=t,this},setDebugPaths:function(t){return void 0===t&&(t=!0),this.skeletonDebugRenderer.drawPaths=t,this},setDebugSkeletonXY:function(t){return void 0===t&&(t=!0),this.skeletonDebugRenderer.drawSkeletonXY=t,this},setDebugClipping:function(t){return void 0===t&&(t=!0),this.skeletonDebugRenderer.drawClipping=t,this},setEffect:function(t){return this.sceneRenderer.skeletonRenderer.vertexEffect=t,this},createSkeleton:function(t,e){var i=t,s=t,r=-1!==t.indexOf(".");if(r){var a=t.split(".");i=a.shift(),s=a.join(".")}var o=this.cache.get(i),h=this.getAtlas(i);if(!h)return null;if(!this.spineTextures.has(i)){var l,c,u,d=this.gl;for(this.isWebGL&&d.pixelStorei(d.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),l=0;l<h.pages.length;l++)c=h.pages[l],u=o.prefix?o.prefix+c.name:c.name,this.isWebGL?c.setTexture(new this.runtime.GLTexture(d,this.textures.get(u).getSourceImage(),!1)):c.setTexture(new this.runtime.CanvasTexture(this.textures.get(u).getSourceImage()));this.spineTextures.add(i,h)}var f,p=o.preMultipliedAlpha,m=new this.runtime.AtlasAttachmentLoader(h),g=new this.runtime.SkeletonJson(m);if(e)f=e;else{var x=this.json.get(i);f=r?n(x,s):x}if(f){var w=g.readSkeletonData(f);return{skeletonData:w,skeleton:new this.runtime.Skeleton(w),preMultipliedAlpha:p}}return null},createAnimationState:function(t){var e=new this.runtime.AnimationStateData(t.data);return{stateData:e,state:new this.runtime.AnimationState(e)}},getBounds:function(t){var e=new this.runtime.Vector2,i=new this.runtime.Vector2;return t.getBounds(e,i,[]),{offset:e,size:i}},onResize:function(){var t=this.renderer,e=this.sceneRenderer,i=t.width,s=t.height;e.camera.position.x=i/2,e.camera.position.y=s/2,e.camera.setViewport(i,s)},shutdown:function(){this.systems.events.off("shutdown",this.shutdown,this),this.isWebGL&&this.game.scale.off(a,this.onResize,this)},destroy:function(){this.shutdown(),this.game=null,this.scene=null,this.systems=null,this.cache=null,this.spineTextures=null,this.json=null,this.textures=null,this.skeletonRenderer=null,this.gl=null},gameDestroy:function(){this.pluginManager.removeGameObject("spine",!0,!0),this.pluginManager.removeGameObject("spineContainer",!0,!0),this.pluginManager=null;var t=this.renderer.spineSceneRenderer;t&&t.dispose(),this.renderer.spineSceneRenderer=null,this.sceneRenderer=null}});f.SpineGameObject=c,f.SpineContainer=u,t.exports=f},3451:(t,e,i)=>{var s=i(1772),r=i(2488),n=i(8235),a=new s({Extends:r,Mixins:[n],initialize:function(t,e,i,s,n){r.call(this,t,i,s,n),this.type="Spine",this.plugin=e},preDestroy:function(){this.removeAll(!!this.exclusive),this.localTransform.destroy(),this.tempTransformMatrix.destroy(),this.list=[],this._displayList=null,this.plugin=null}});t.exports=a},2732:t=>{t.exports=function(t,e,i,s){var r=e.list;if(0!==r.length){i.addToRenderList(e);var n=e.localTransform;s?(n.loadIdentity(),n.multiply(s),n.translate(e.x,e.y),n.rotate(e.rotation),n.scale(e.scaleX,e.scaleY)):n.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY);var a=-1!==e.blendMode;a||t.setBlendMode(0);var o=e._alpha,h=e.scrollFactorX,l=e.scrollFactorY;e.mask&&e.mask.preRenderCanvas(t,null,i);for(var c=0;c<r.length;c++){var u=r[c];if(u.willRender(i)){var d=u.alpha,f=u.scrollFactorX,p=u.scrollFactorY;a||u.blendMode===t.currentBlendMode||t.setBlendMode(u.blendMode),u.setScrollFactor(f*h,p*l),u.setAlpha(d*o),u.renderCanvas(t,u,i,n),u.setAlpha(d),u.setScrollFactor(f,p)}}e.mask&&e.mask.postRenderCanvas(t)}}},8235:(t,e,i)=>{var s=i(9318),r=i(9318);s=i(7485),r=i(2732),t.exports={renderWebGL:s,renderCanvas:r}},7485:t=>{t.exports=function(t,e,i,s){var r=e.plugin.sceneRenderer,n=e.list;if(0!==n.length){i.addToRenderList(e);var a=e.localTransform;s?(a.loadIdentity(),a.multiply(s),a.translate(e.x,e.y),a.rotate(e.rotation),a.scale(e.scaleX,e.scaleY)):a.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY),t.newType&&(t.pipelines.clear(),r.begin());var o=t.nextTypeMatch;t.nextTypeMatch=!0,t.newType=!1;for(var h=0;h<n.length;h++){var l=n[h];if(l.willRender(i,e)){var c=l.mask;c&&(r.end(),t.pipelines.rebind(),c.preRenderWebGL(t,l,i),t.pipelines.clear(),r.begin()),l.renderWebGL(t,l,i,a,e),c&&(r.end(),t.pipelines.rebind(),c.postRenderWebGL(t,i),t.pipelines.clear(),r.begin())}}t.nextTypeMatch=o,o||(r.end(),t.pipelines.rebind())}else r.batcher.isDrawing&&t.finalType&&(r.end(),t.pipelines.rebind())}},6283:t=>{t.exports="complete"},7277:t=>{t.exports="dispose"},4265:t=>{t.exports="end"},8680:t=>{t.exports="event"},8882:t=>{t.exports="interrupted"},3860:t=>{t.exports="start"},3055:(t,e,i)=>{t.exports={COMPLETE:i(6283),DISPOSE:i(7277),END:i(4265),EVENT:i(8680),INTERRUPTED:i(8882),START:i(3860)}},4225:(t,e,i)=>{var s=i(4301),r=i(2522),n=i(1772),a=i(6496),o=i(6653),h=i(3441),l=i(4548),c=i(9344),u=i(5818),d=i(2371),f=i(1601),p=i(8894),m=i(4063),g=i(3055),x=i(6333),w=new n({Extends:p,Mixins:[a,o,h,l,c,u,x],initialize:function(t,e,i,s,r,n,a){p.call(this,t,"Spine"),this.plugin=e,this.skeleton=null,this.skeletonData=null,this.state=null,this.stateData=null,this.root=null,this.bounds=null,this.drawDebug=!1,this.timeScale=1,this.displayOriginX=0,this.displayOriginY=0,this.preMultipliedAlpha=!1,this.blendMode=-1,this.setPosition(i,s),r&&this.setSkeleton(r,n,a)},willRender:function(t,e){var i=!this.skeleton||!(15!==this.renderFlags||0!==this.cameraFilter&&this.cameraFilter&t.id);if(!e&&!i&&this.parentContainer){var s=this.plugin,r=s.sceneRenderer;s.gl&&r.batcher.isDrawing&&(r.end(),s.renderer.pipelines.rebind())}return i},setAlpha:function(t){return void 0===t&&(t=1),this.alpha=t,this},setSlotAlpha:function(t,e){void 0===t&&(t=1);var i=this.findSlot(e);return i&&(i.color.a=r(t,0,1)),this},alpha:{get:function(){return this.skeleton.color.a},set:function(t){var e=r(t,0,1);this.skeleton&&(this.skeleton.color.a=e),0===e?this.renderFlags&=-3:this.renderFlags|=2}},red:{get:function(){return this.skeleton.color.r},set:function(t){var e=r(t,0,1);this.skeleton&&(this.skeleton.color.r=e)}},green:{get:function(){return this.skeleton.color.g},set:function(t){var e=r(t,0,1);this.skeleton&&(this.skeleton.color.g=e)}},blue:{get:function(){return this.skeleton.color.b},set:function(t){var e=r(t,0,1);this.skeleton&&(this.skeleton.color.b=e)}},setColor:function(t,e){void 0===t&&(t=16777215);var i=(t>>16&255)/255,s=(t>>8&255)/255,r=(255&t)/255,n=t>16777215?(t>>>24)/255:null,a=this.skeleton;if(e){var o=this.findSlot(e);o&&(a=o)}return a.color.r=i,a.color.g=s,a.color.b=r,null!==n&&(a.color.a=n),this},setSkeletonFromJSON:function(t,e,i,s){return this.setSkeleton(t,e,i,s)},setSkeleton:function(t,e,i,s){this.state&&(this.state.clearListeners(),this.state.clearListenerNotifications());var r=this.plugin.createSkeleton(t,s);this.skeletonData=r.skeletonData,this.preMultipliedAlpha=r.preMultipliedAlpha;var n=r.skeleton;return n.setSkin(),n.setToSetupPose(),this.skeleton=n,r=this.plugin.createAnimationState(n),this.state&&(this.state.clearListeners(),this.state.clearListenerNotifications()),this.state=r.state,this.stateData=r.stateData,this.state.addListener({event:this.onEvent.bind(this),complete:this.onComplete.bind(this),start:this.onStart.bind(this),end:this.onEnd.bind(this),dispose:this.onDispose.bind(this),interrupted:this.onInterrupted.bind(this)}),e&&this.setAnimation(0,e,i),this.root=this.getRootBone(),this.root&&(this.root.rotation=m(d(this.rotation))+90),this.state.apply(n),n.updateCache(),this.updateSize()},onComplete:function(t){this.emit(g.COMPLETE,t)},onDispose:function(t){this.emit(g.DISPOSE,t)},onEnd:function(t){this.emit(g.END,t)},onEvent:function(t,e){this.emit(g.EVENT,t,e)},onInterrupted:function(t){this.emit(g.INTERRUPTED,t)},onStart:function(t){this.emit(g.START,t)},refresh:function(){return this.root&&(this.root.rotation=m(d(this.rotation))+90),this.updateSize(),this.skeleton.updateCache(),this},setSize:function(t,e,i,s){var r=this.skeleton;return void 0===t&&(t=r.data.width),void 0===e&&(e=r.data.height),void 0===i&&(i=0),void 0===s&&(s=0),this.width=t,this.height=e,this.displayOriginX=r.x-i,this.displayOriginY=r.y-s,this},setOffset:function(t,e){var i=this.skeleton;return void 0===t&&(t=0),void 0===e&&(e=0),this.displayOriginX=i.x-t,this.displayOriginY=i.y-e,this},updateSize:function(){var t=this.skeleton,e=this.plugin.renderer.height,i=this.scaleX,s=this.scaleY;t.x=this.x,t.y=e-this.y,t.scaleX=1,t.scaleY=1,t.updateWorldTransform();var r=this.getBounds();return this.width=r.size.x,this.height=r.size.y,this.displayOriginX=this.x-r.offset.x,this.displayOriginY=this.y-(e-(this.height+r.offset.y)),t.scaleX=i,t.scaleY=s,t.updateWorldTransform(),this},scaleX:{get:function(){return this._scaleX},set:function(t){this._scaleX=t,this.refresh()}},scaleY:{get:function(){return this._scaleY},set:function(t){this._scaleY=t,this.refresh()}},getBoneList:function(){var t=[],e=this.skeletonData;if(e)for(var i=0;i<e.bones.length;i++)t.push(e.bones[i].name);return t},getSkinList:function(){var t=[],e=this.skeletonData;if(e)for(var i=0;i<e.skins.length;i++)t.push(e.skins[i].name);return t},getSlotList:function(){for(var t=[],e=this.skeleton,i=0;i<e.slots.length;i++)t.push(e.slots[i].data.name);return t},getAnimationList:function(){var t=[],e=this.skeletonData;if(e)for(var i=0;i<e.animations.length;i++)t.push(e.animations[i].name);return t},getCurrentAnimation:function(t){void 0===t&&(t=0);var e=this.state.getCurrent(t);if(e)return e.animation},play:function(t,e,i){return this.setAnimation(0,t,e,i),this.preUpdate(0,16.6),this},setAnimation:function(t,e,i,s){if(void 0===i&&(i=!1),void 0===s&&(s=!1),s&&this.state){var r=this.state.getCurrent(t);if(r&&r.animation.name===e&&!r.isComplete())return}if(this.findAnimation(e))return this.state.setAnimation(t,e,i)},addAnimation:function(t,e,i,s){return void 0===i&&(i=!1),void 0===s&&(s=0),this.state.addAnimation(t,e,i,s)},setEmptyAnimation:function(t,e){return this.state.setEmptyAnimation(t,e)},clearTrack:function(t){return this.state.clearTrack(t),this},clearTracks:function(){return this.state.clearTracks(),this},setSkinByName:function(t){var e=this.skeleton;return e.setSkinByName(t),e.setSlotsToSetupPose(),this.state.apply(e),this},setSkin:function(t){var e=this.skeleton;return e.setSkin(t),e.setSlotsToSetupPose(),this.state.apply(e),this},setMix:function(t,e,i){return this.stateData.setMix(t,e,i),this},getAttachment:function(t,e){return this.skeleton.getAttachment(t,e)},getAttachmentByName:function(t,e){return this.skeleton.getAttachmentByName(t,e)},setAttachment:function(t,e){if(Array.isArray(t)&&Array.isArray(e)&&t.length===e.length)for(var i=0;i<t.length;i++)this.skeleton.setAttachment(t[i],e[i]);else this.skeleton.setAttachment(t,e);return this},setToSetupPose:function(){return this.skeleton.setToSetupPose(),this},setSlotsToSetupPose:function(){return this.skeleton.setSlotsToSetupPose(),this},setBonesToSetupPose:function(){return this.skeleton.setBonesToSetupPose(),this},getRootBone:function(){return this.skeleton.getRootBone()},angleBoneToXY:function(t,e,i,n,a,o){void 0===n&&(n=0),void 0===a&&(a=0),void 0===o&&(o=360);var h=this.plugin.renderer.height,l=d(s(t.worldX,h-t.worldY,e,i)+f(n));return t.rotation=r(m(l),a,o),this},findBone:function(t){return this.skeleton.findBone(t)},findBoneIndex:function(t){return this.skeleton.findBoneIndex(t)},findSlot:function(t){return this.skeleton.findSlot(t)},findSlotIndex:function(t){return this.skeleton.findSlotIndex(t)},findSkin:function(t){return this.skeletonData.findSkin(t)},findEvent:function(t){return this.skeletonData.findEvent(t)},findAnimation:function(t){return this.skeletonData.findAnimation(t)},findIkConstraint:function(t){return this.skeletonData.findIkConstraint(t)},findTransformConstraint:function(t){return this.skeletonData.findTransformConstraint(t)},findPathConstraint:function(t){return this.skeletonData.findPathConstraint(t)},findPathConstraintIndex:function(t){return this.skeletonData.findPathConstraintIndex(t)},getBounds:function(){return this.plugin.getBounds(this.skeleton)},preUpdate:function(t,e){var i=this.skeleton;this.state.update(e/1e3*this.timeScale),this.state.apply(i)},preDestroy:function(){this.state&&(this.state.clearListeners(),this.state.clearListenerNotifications()),this.plugin=null,this.skeleton=null,this.skeletonData=null,this.state=null,this.stateData=null}});t.exports=w},730:(t,e,i)=>{var s=i(2371),r=i(4063),n=i(4305);t.exports=function(t,e,i,a){var o=t.currentContext,h=e.plugin,l=e.skeleton,c=h.skeletonRenderer,u=t._tempMatrix1,d=t._tempMatrix2,f=t._tempMatrix3;i.addToRenderList(e),d.applyITRS(e.x,e.y,e.rotation,Math.abs(e.scaleX),Math.abs(e.scaleY)),u.copyFrom(i.matrix),a?(u.multiplyWithOffset(a,-i.scrollX*e.scrollFactorX,-i.scrollY*e.scrollFactorY),d.e=e.x,d.f=e.y,u.multiply(d,f)):(d.e-=i.scrollX*e.scrollFactorX,d.f-=i.scrollY*e.scrollFactorY,u.multiply(d,f)),l.x=f.tx,l.y=f.ty,l.scaleX=f.scaleX,l.scaleY=-1*f.scaleY,e.scaleX<0?(l.scaleX*=-1,e.root.rotation=r(f.rotationNormalized)):e.root.rotation=n(r(s(f.rotationNormalized))+90,0,360),e.scaleY<0&&(l.scaleY*=-1,e.scaleX<0?e.root.rotation-=2*r(f.rotationNormalized):e.root.rotation+=2*r(f.rotationNormalized)),i.renderToTexture&&(l.y=f.ty,l.scaleY*=-1),l.updateWorldTransform(),c.ctx=o,c.debugRendering=h.drawDebug||e.drawDebug,o.save(),c.draw(l),o.restore()}},6333:(t,e,i)=>{var s=i(9318),r=i(9318),n=i(9318);s=i(1963),n=i(4061),r=i(730),t.exports={renderWebGL:s,renderCanvas:r,renderDirect:n}},4061:(t,e,i)=>{var s=i(2522),r=i(2371),n=i(8835),a=i(4063),o=i(4305);t.exports=function(t,e,i,h,l){var c=e.plugin,u=e.skeleton,d=c.sceneRenderer;t.pipelines.clear(),d.begin();var f=e.scrollFactorX,p=e.scrollFactorY,m=u.color.a;l&&(e.scrollFactorX=l.scrollFactorX,e.scrollFactorY=l.scrollFactorY,u.color.a=s(m*l.alpha,0,1)),i.addToRenderList(e);var g=n(e,i,h).calc,x=t.height;if(u.x=g.tx,u.y=x-g.ty,u.scaleX=g.scaleX,u.scaleY=g.scaleY,e.scaleX<0?(u.scaleX*=-1,e.root.rotation=o(a(g.rotationNormalized)-180,0,360)):e.root.rotation=o(a(r(g.rotationNormalized))+90,0,360),e.scaleY<0&&(u.scaleY*=-1,e.scaleX<0?e.root.rotation-=2*a(g.rotationNormalized):e.root.rotation+=2*a(g.rotationNormalized)),u.updateWorldTransform(),d.drawSkeleton(u,e.preMultipliedAlpha),l&&(e.scrollFactorX=f,e.scrollFactorY=p,u.color.a=m),c.drawDebug||e.drawDebug){var w=u.x,v=u.y;u.x=0,u.y=0,d.drawSkeletonDebug(u,e.preMultipliedAlpha),u.x=w,u.y=v}d.end(),t.pipelines.rebind()}},1963:(t,e,i)=>{var s=i(2522),r=i(2371),n=i(8835),a=i(4063),o=i(4305);t.exports=function(t,e,i,h,l){var c=e.plugin,u=e.skeleton,d=c.sceneRenderer;t.newType&&(t.pipelines.clear(),d.begin());var f=e.scrollFactorX,p=e.scrollFactorY,m=u.color.a;l&&(e.scrollFactorX=l.scrollFactorX,e.scrollFactorY=l.scrollFactorY,u.color.a=s(m*l.alpha,0,1)),i.addToRenderList(e);var g=n(e,i,h).calc,x=t.height;if(u.x=g.tx,u.y=x-g.ty,u.scaleX=g.scaleX,u.scaleY=g.scaleY,e.scaleX<0?(u.scaleX*=-1,e.root.rotation=o(a(g.rotationNormalized)-180,0,360)):e.root.rotation=o(a(r(g.rotationNormalized))+90,0,360),e.scaleY<0&&(u.scaleY*=-1,e.scaleX<0?e.root.rotation-=2*a(g.rotationNormalized):e.root.rotation+=2*a(g.rotationNormalized)),u.updateWorldTransform(),d.drawSkeleton(u,e.preMultipliedAlpha),l&&(e.scrollFactorX=f,e.scrollFactorY=p,u.color.a=m),c.drawDebug||e.drawDebug){var w=u.x,v=u.y;u.x=0,u.y=0,d.drawSkeletonDebug(u,e.preMultipliedAlpha),u.x=w,u.y=v}t.nextTypeMatch||(d.end(),t.pipelines.rebind())}}},e={};var i=function i(s){var r=e[s];if(void 0!==r)return r.exports;var n=e[s]={exports:{}};return t[s](n,n.exports,i),n.exports}(2681);window.SpinePlugin=i})();